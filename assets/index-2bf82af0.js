var _j=(o,u)=>()=>(u||o((u={exports:{}}).exports,u),u.exports);var aD=_j((cD,fy)=>{function Gj(o,u){for(var c=0;c<u.length;c++){const g=u[c];if(typeof g!="string"&&!Array.isArray(g)){for(const m in g)if(m!=="default"&&!(m in o)){const w=Object.getOwnPropertyDescriptor(g,m);w&&Object.defineProperty(o,m,w.get?w:{enumerable:!0,get:()=>g[m]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))g(m);new MutationObserver(m=>{for(const w of m)if(w.type==="childList")for(const M of w.addedNodes)M.tagName==="LINK"&&M.rel==="modulepreload"&&g(M)}).observe(document,{childList:!0,subtree:!0});function c(m){const w={};return m.integrity&&(w.integrity=m.integrity),m.referrerPolicy&&(w.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?w.credentials="include":m.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function g(m){if(m.ep)return;m.ep=!0;const w=c(m);fetch(m.href,w)}})();function Xj(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Bc={},Kj={get exports(){return Bc},set exports(o){Bc=o}},Vy={},Mt={},Wj={get exports(){return Mt},set exports(o){Mt=o}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var np=Symbol.for("react.element"),$j=Symbol.for("react.portal"),Jj=Symbol.for("react.fragment"),Zj=Symbol.for("react.strict_mode"),Qj=Symbol.for("react.profiler"),qj=Symbol.for("react.provider"),bj=Symbol.for("react.context"),tE=Symbol.for("react.forward_ref"),eE=Symbol.for("react.suspense"),iE=Symbol.for("react.memo"),nE=Symbol.for("react.lazy"),SN=Symbol.iterator;function rE(o){return o===null||typeof o!="object"?null:(o=SN&&o[SN]||o["@@iterator"],typeof o=="function"?o:null)}var ZP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QP=Object.assign,qP={};function Ua(o,u,c){this.props=o,this.context=u,this.refs=qP,this.updater=c||ZP}Ua.prototype.isReactComponent={};Ua.prototype.setState=function(o,u){if(typeof o!="object"&&typeof o!="function"&&o!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,o,u,"setState")};Ua.prototype.forceUpdate=function(o){this.updater.enqueueForceUpdate(this,o,"forceUpdate")};function bP(){}bP.prototype=Ua.prototype;function lw(o,u,c){this.props=o,this.context=u,this.refs=qP,this.updater=c||ZP}var uw=lw.prototype=new bP;uw.constructor=lw;QP(uw,Ua.prototype);uw.isPureReactComponent=!0;var MN=Array.isArray,tC=Object.prototype.hasOwnProperty,hw={current:null},eC={key:!0,ref:!0,__self:!0,__source:!0};function iC(o,u,c){var g,m={},w=null,M=null;if(u!=null)for(g in u.ref!==void 0&&(M=u.ref),u.key!==void 0&&(w=""+u.key),u)tC.call(u,g)&&!eC.hasOwnProperty(g)&&(m[g]=u[g]);var j=arguments.length-2;if(j===1)m.children=c;else if(1<j){for(var O=Array(j),A=0;A<j;A++)O[A]=arguments[A+2];m.children=O}if(o&&o.defaultProps)for(g in j=o.defaultProps,j)m[g]===void 0&&(m[g]=j[g]);return{$$typeof:np,type:o,key:w,ref:M,props:m,_owner:hw.current}}function oE(o,u){return{$$typeof:np,type:o.type,key:u,ref:o.ref,props:o.props,_owner:o._owner}}function aw(o){return typeof o=="object"&&o!==null&&o.$$typeof===np}function sE(o){var u={"=":"=0",":":"=2"};return"$"+o.replace(/[=:]/g,function(c){return u[c]})}var kN=/\/+/g;function M1(o,u){return typeof o=="object"&&o!==null&&o.key!=null?sE(""+o.key):u.toString(36)}function Jg(o,u,c,g,m){var w=typeof o;(w==="undefined"||w==="boolean")&&(o=null);var M=!1;if(o===null)M=!0;else switch(w){case"string":case"number":M=!0;break;case"object":switch(o.$$typeof){case np:case $j:M=!0}}if(M)return M=o,m=m(M),o=g===""?"."+M1(M,0):g,MN(m)?(c="",o!=null&&(c=o.replace(kN,"$&/")+"/"),Jg(m,u,c,"",function(A){return A})):m!=null&&(aw(m)&&(m=oE(m,c+(!m.key||M&&M.key===m.key?"":(""+m.key).replace(kN,"$&/")+"/")+o)),u.push(m)),1;if(M=0,g=g===""?".":g+":",MN(o))for(var j=0;j<o.length;j++){w=o[j];var O=g+M1(w,j);M+=Jg(w,u,c,O,m)}else if(O=rE(o),typeof O=="function")for(o=O.call(o),j=0;!(w=o.next()).done;)w=w.value,O=g+M1(w,j++),M+=Jg(w,u,c,O,m);else if(w==="object")throw u=String(o),Error("Objects are not valid as a React child (found: "+(u==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":u)+"). If you meant to render a collection of children, use an array instead.");return M}function Og(o,u,c){if(o==null)return o;var g=[],m=0;return Jg(o,g,"","",function(w){return u.call(c,w,m++)}),g}function lE(o){if(o._status===-1){var u=o._result;u=u(),u.then(function(c){(o._status===0||o._status===-1)&&(o._status=1,o._result=c)},function(c){(o._status===0||o._status===-1)&&(o._status=2,o._result=c)}),o._status===-1&&(o._status=0,o._result=u)}if(o._status===1)return o._result.default;throw o._result}var lr={current:null},Zg={transition:null},uE={ReactCurrentDispatcher:lr,ReactCurrentBatchConfig:Zg,ReactCurrentOwner:hw};ge.Children={map:Og,forEach:function(o,u,c){Og(o,function(){u.apply(this,arguments)},c)},count:function(o){var u=0;return Og(o,function(){u++}),u},toArray:function(o){return Og(o,function(u){return u})||[]},only:function(o){if(!aw(o))throw Error("React.Children.only expected to receive a single React element child.");return o}};ge.Component=Ua;ge.Fragment=Jj;ge.Profiler=Qj;ge.PureComponent=lw;ge.StrictMode=Zj;ge.Suspense=eE;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uE;ge.cloneElement=function(o,u,c){if(o==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+o+".");var g=QP({},o.props),m=o.key,w=o.ref,M=o._owner;if(u!=null){if(u.ref!==void 0&&(w=u.ref,M=hw.current),u.key!==void 0&&(m=""+u.key),o.type&&o.type.defaultProps)var j=o.type.defaultProps;for(O in u)tC.call(u,O)&&!eC.hasOwnProperty(O)&&(g[O]=u[O]===void 0&&j!==void 0?j[O]:u[O])}var O=arguments.length-2;if(O===1)g.children=c;else if(1<O){j=Array(O);for(var A=0;A<O;A++)j[A]=arguments[A+2];g.children=j}return{$$typeof:np,type:o.type,key:m,ref:w,props:g,_owner:M}};ge.createContext=function(o){return o={$$typeof:bj,_currentValue:o,_currentValue2:o,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},o.Provider={$$typeof:qj,_context:o},o.Consumer=o};ge.createElement=iC;ge.createFactory=function(o){var u=iC.bind(null,o);return u.type=o,u};ge.createRef=function(){return{current:null}};ge.forwardRef=function(o){return{$$typeof:tE,render:o}};ge.isValidElement=aw;ge.lazy=function(o){return{$$typeof:nE,_payload:{_status:-1,_result:o},_init:lE}};ge.memo=function(o,u){return{$$typeof:iE,type:o,compare:u===void 0?null:u}};ge.startTransition=function(o){var u=Zg.transition;Zg.transition={};try{o()}finally{Zg.transition=u}};ge.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ge.useCallback=function(o,u){return lr.current.useCallback(o,u)};ge.useContext=function(o){return lr.current.useContext(o)};ge.useDebugValue=function(){};ge.useDeferredValue=function(o){return lr.current.useDeferredValue(o)};ge.useEffect=function(o,u){return lr.current.useEffect(o,u)};ge.useId=function(){return lr.current.useId()};ge.useImperativeHandle=function(o,u,c){return lr.current.useImperativeHandle(o,u,c)};ge.useInsertionEffect=function(o,u){return lr.current.useInsertionEffect(o,u)};ge.useLayoutEffect=function(o,u){return lr.current.useLayoutEffect(o,u)};ge.useMemo=function(o,u){return lr.current.useMemo(o,u)};ge.useReducer=function(o,u,c){return lr.current.useReducer(o,u,c)};ge.useRef=function(o){return lr.current.useRef(o)};ge.useState=function(o){return lr.current.useState(o)};ge.useSyncExternalStore=function(o,u,c){return lr.current.useSyncExternalStore(o,u,c)};ge.useTransition=function(){return lr.current.useTransition()};ge.version="18.2.0";(function(o){o.exports=ge})(Wj);const hE=Xj(Mt),nx=Gj({__proto__:null,default:hE},[Mt]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aE=Mt,fE=Symbol.for("react.element"),cE=Symbol.for("react.fragment"),pE=Object.prototype.hasOwnProperty,dE=aE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gE={key:!0,ref:!0,__self:!0,__source:!0};function nC(o,u,c){var g,m={},w=null,M=null;c!==void 0&&(w=""+c),u.key!==void 0&&(w=""+u.key),u.ref!==void 0&&(M=u.ref);for(g in u)pE.call(u,g)&&!gE.hasOwnProperty(g)&&(m[g]=u[g]);if(o&&o.defaultProps)for(g in u=o.defaultProps,u)m[g]===void 0&&(m[g]=u[g]);return{$$typeof:fE,type:o,key:w,ref:M,props:m,_owner:dE.current}}Vy.Fragment=cE;Vy.jsx=nC;Vy.jsxs=nC;(function(o){o.exports=Vy})(Kj);const Hi=Bc.Fragment,ut=Bc.jsx,bt=Bc.jsxs;var rx={},ox={},yE={get exports(){return ox},set exports(o){ox=o}},_r={},sx={},mE={get exports(){return sx},set exports(o){sx=o}},rC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(o){function u(Tt,mt){var oe=Tt.length;Tt.push(mt);t:for(;0<oe;){var ke=oe-1>>>1,ai=Tt[ke];if(0<m(ai,mt))Tt[ke]=mt,Tt[oe]=ai,oe=ke;else break t}}function c(Tt){return Tt.length===0?null:Tt[0]}function g(Tt){if(Tt.length===0)return null;var mt=Tt[0],oe=Tt.pop();if(oe!==mt){Tt[0]=oe;t:for(var ke=0,ai=Tt.length,Q=ai>>>1;ke<Q;){var Xn=2*(ke+1)-1,ll=Tt[Xn],We=Xn+1,ks=Tt[We];if(0>m(ll,oe))We<ai&&0>m(ks,ll)?(Tt[ke]=ks,Tt[We]=oe,ke=We):(Tt[ke]=ll,Tt[Xn]=oe,ke=Xn);else if(We<ai&&0>m(ks,oe))Tt[ke]=ks,Tt[We]=oe,ke=We;else break t}}return mt}function m(Tt,mt){var oe=Tt.sortIndex-mt.sortIndex;return oe!==0?oe:Tt.id-mt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var w=performance;o.unstable_now=function(){return w.now()}}else{var M=Date,j=M.now();o.unstable_now=function(){return M.now()-j}}var O=[],A=[],B=1,z=null,$=3,ht=!1,rt=!1,Y=!1,Et=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function J(Tt){for(var mt=c(A);mt!==null;){if(mt.callback===null)g(A);else if(mt.startTime<=Tt)g(A),mt.sortIndex=mt.expirationTime,u(O,mt);else break;mt=c(A)}}function R(Tt){if(Y=!1,J(Tt),!rt)if(c(O)!==null)rt=!0,Gi(st);else{var mt=c(A);mt!==null&&eh(R,mt.startTime-Tt)}}function st(Tt,mt){rt=!1,Y&&(Y=!1,K(xt),xt=-1),ht=!0;var oe=$;try{for(J(mt),z=c(O);z!==null&&(!(z.expirationTime>mt)||Tt&&!nn());){var ke=z.callback;if(typeof ke=="function"){z.callback=null,$=z.priorityLevel;var ai=ke(z.expirationTime<=mt);mt=o.unstable_now(),typeof ai=="function"?z.callback=ai:z===c(O)&&g(O),J(mt)}else g(O);z=c(O)}if(z!==null)var Q=!0;else{var Xn=c(A);Xn!==null&&eh(R,Xn.startTime-mt),Q=!1}return Q}finally{z=null,$=oe,ht=!1}}var dt=!1,Lt=null,xt=-1,Wt=5,ee=-1;function nn(){return!(o.unstable_now()-ee<Wt)}function jr(){if(Lt!==null){var Tt=o.unstable_now();ee=Tt;var mt=!0;try{mt=Lt(!0,Tt)}finally{mt?Yt():(dt=!1,Lt=null)}}else dt=!1}var Yt;if(typeof H=="function")Yt=function(){H(jr)};else if(typeof MessageChannel<"u"){var Vt=new MessageChannel,Ms=Vt.port2;Vt.port1.onmessage=jr,Yt=function(){Ms.postMessage(null)}}else Yt=function(){Et(jr,0)};function Gi(Tt){Lt=Tt,dt||(dt=!0,Yt())}function eh(Tt,mt){xt=Et(function(){Tt(o.unstable_now())},mt)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(Tt){Tt.callback=null},o.unstable_continueExecution=function(){rt||ht||(rt=!0,Gi(st))},o.unstable_forceFrameRate=function(Tt){0>Tt||125<Tt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Wt=0<Tt?Math.floor(1e3/Tt):5},o.unstable_getCurrentPriorityLevel=function(){return $},o.unstable_getFirstCallbackNode=function(){return c(O)},o.unstable_next=function(Tt){switch($){case 1:case 2:case 3:var mt=3;break;default:mt=$}var oe=$;$=mt;try{return Tt()}finally{$=oe}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(Tt,mt){switch(Tt){case 1:case 2:case 3:case 4:case 5:break;default:Tt=3}var oe=$;$=Tt;try{return mt()}finally{$=oe}},o.unstable_scheduleCallback=function(Tt,mt,oe){var ke=o.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?ke+oe:ke):oe=ke,Tt){case 1:var ai=-1;break;case 2:ai=250;break;case 5:ai=1073741823;break;case 4:ai=1e4;break;default:ai=5e3}return ai=oe+ai,Tt={id:B++,callback:mt,priorityLevel:Tt,startTime:oe,expirationTime:ai,sortIndex:-1},oe>ke?(Tt.sortIndex=oe,u(A,Tt),c(O)===null&&Tt===c(A)&&(Y?(K(xt),xt=-1):Y=!0,eh(R,oe-ke))):(Tt.sortIndex=ai,u(O,Tt),rt||ht||(rt=!0,Gi(st))),Tt},o.unstable_shouldYield=nn,o.unstable_wrapCallback=function(Tt){var mt=$;return function(){var oe=$;$=mt;try{return Tt.apply(this,arguments)}finally{$=oe}}}})(rC);(function(o){o.exports=rC})(mE);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oC=Mt,Hr=sx;function St(o){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+o,c=1;c<arguments.length;c++)u+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sC=new Set,zc={};function qu(o,u){Oa(o,u),Oa(o+"Capture",u)}function Oa(o,u){for(zc[o]=u,o=0;o<u.length;o++)sC.add(u[o])}var el=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lx=Object.prototype.hasOwnProperty,vE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,NN={},PN={};function xE(o){return lx.call(PN,o)?!0:lx.call(NN,o)?!1:vE.test(o)?PN[o]=!0:(NN[o]=!0,!1)}function wE(o,u,c,g){if(c!==null&&c.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return g?!1:c!==null?!c.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function SE(o,u,c,g){if(u===null||typeof u>"u"||wE(o,u,c,g))return!0;if(g)return!1;if(c!==null)switch(c.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function ur(o,u,c,g,m,w,M){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=g,this.attributeNamespace=m,this.mustUseProperty=c,this.propertyName=o,this.type=u,this.sanitizeURL=w,this.removeEmptyString=M}var jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){jn[o]=new ur(o,0,!1,o,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var u=o[0];jn[u]=new ur(u,1,!1,o[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(o){jn[o]=new ur(o,2,!1,o.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){jn[o]=new ur(o,2,!1,o,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){jn[o]=new ur(o,3,!1,o.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(o){jn[o]=new ur(o,3,!0,o,null,!1,!1)});["capture","download"].forEach(function(o){jn[o]=new ur(o,4,!1,o,null,!1,!1)});["cols","rows","size","span"].forEach(function(o){jn[o]=new ur(o,6,!1,o,null,!1,!1)});["rowSpan","start"].forEach(function(o){jn[o]=new ur(o,5,!1,o.toLowerCase(),null,!1,!1)});var fw=/[\-:]([a-z])/g;function cw(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var u=o.replace(fw,cw);jn[u]=new ur(u,1,!1,o,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var u=o.replace(fw,cw);jn[u]=new ur(u,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(o){var u=o.replace(fw,cw);jn[u]=new ur(u,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(o){jn[o]=new ur(o,1,!1,o.toLowerCase(),null,!1,!1)});jn.xlinkHref=new ur("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(o){jn[o]=new ur(o,1,!1,o.toLowerCase(),null,!0,!0)});function pw(o,u,c,g){var m=jn.hasOwnProperty(u)?jn[u]:null;(m!==null?m.type!==0:g||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(SE(u,c,m,g)&&(c=null),g||m===null?xE(u)&&(c===null?o.removeAttribute(u):o.setAttribute(u,""+c)):m.mustUseProperty?o[m.propertyName]=c===null?m.type===3?!1:"":c:(u=m.attributeName,g=m.attributeNamespace,c===null?o.removeAttribute(u):(m=m.type,c=m===3||m===4&&c===!0?"":""+c,g?o.setAttributeNS(g,u,c):o.setAttribute(u,c))))}var ol=oC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ag=Symbol.for("react.element"),da=Symbol.for("react.portal"),ga=Symbol.for("react.fragment"),dw=Symbol.for("react.strict_mode"),ux=Symbol.for("react.profiler"),lC=Symbol.for("react.provider"),uC=Symbol.for("react.context"),gw=Symbol.for("react.forward_ref"),hx=Symbol.for("react.suspense"),ax=Symbol.for("react.suspense_list"),yw=Symbol.for("react.memo"),Dl=Symbol.for("react.lazy"),hC=Symbol.for("react.offscreen"),CN=Symbol.iterator;function pc(o){return o===null||typeof o!="object"?null:(o=CN&&o[CN]||o["@@iterator"],typeof o=="function"?o:null)}var hi=Object.assign,k1;function kc(o){if(k1===void 0)try{throw Error()}catch(c){var u=c.stack.trim().match(/\n( *(at )?)/);k1=u&&u[1]||""}return`
`+k1+o}var N1=!1;function P1(o,u){if(!o||N1)return"";N1=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(A){var g=A}Reflect.construct(o,[],u)}else{try{u.call()}catch(A){g=A}o.call(u.prototype)}else{try{throw Error()}catch(A){g=A}o()}}catch(A){if(A&&g&&typeof A.stack=="string"){for(var m=A.stack.split(`
`),w=g.stack.split(`
`),M=m.length-1,j=w.length-1;1<=M&&0<=j&&m[M]!==w[j];)j--;for(;1<=M&&0<=j;M--,j--)if(m[M]!==w[j]){if(M!==1||j!==1)do if(M--,j--,0>j||m[M]!==w[j]){var O=`
`+m[M].replace(" at new "," at ");return o.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",o.displayName)),O}while(1<=M&&0<=j);break}}}finally{N1=!1,Error.prepareStackTrace=c}return(o=o?o.displayName||o.name:"")?kc(o):""}function ME(o){switch(o.tag){case 5:return kc(o.type);case 16:return kc("Lazy");case 13:return kc("Suspense");case 19:return kc("SuspenseList");case 0:case 2:case 15:return o=P1(o.type,!1),o;case 11:return o=P1(o.type.render,!1),o;case 1:return o=P1(o.type,!0),o;default:return""}}function fx(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case ga:return"Fragment";case da:return"Portal";case ux:return"Profiler";case dw:return"StrictMode";case hx:return"Suspense";case ax:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case uC:return(o.displayName||"Context")+".Consumer";case lC:return(o._context.displayName||"Context")+".Provider";case gw:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case yw:return u=o.displayName||null,u!==null?u:fx(o.type)||"Memo";case Dl:u=o._payload,o=o._init;try{return fx(o(u))}catch{}}return null}function kE(o){var u=o.type;switch(o.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=u.render,o=o.displayName||o.name||"",u.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fx(u);case 8:return u===dw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function Ql(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function aC(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function NE(o){var u=aC(o)?"checked":"value",c=Object.getOwnPropertyDescriptor(o.constructor.prototype,u),g=""+o[u];if(!o.hasOwnProperty(u)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,w=c.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return m.call(this)},set:function(M){g=""+M,w.call(this,M)}}),Object.defineProperty(o,u,{enumerable:c.enumerable}),{getValue:function(){return g},setValue:function(M){g=""+M},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Ig(o){o._valueTracker||(o._valueTracker=NE(o))}function fC(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var c=u.getValue(),g="";return o&&(g=aC(o)?o.checked?"true":"false":o.value),o=g,o!==c?(u.setValue(o),!0):!1}function cy(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function cx(o,u){var c=u.checked;return hi({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??o._wrapperState.initialChecked})}function TN(o,u){var c=u.defaultValue==null?"":u.defaultValue,g=u.checked!=null?u.checked:u.defaultChecked;c=Ql(u.value!=null?u.value:c),o._wrapperState={initialChecked:g,initialValue:c,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function cC(o,u){u=u.checked,u!=null&&pw(o,"checked",u,!1)}function px(o,u){cC(o,u);var c=Ql(u.value),g=u.type;if(c!=null)g==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+c):o.value!==""+c&&(o.value=""+c);else if(g==="submit"||g==="reset"){o.removeAttribute("value");return}u.hasOwnProperty("value")?dx(o,u.type,c):u.hasOwnProperty("defaultValue")&&dx(o,u.type,Ql(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(o.defaultChecked=!!u.defaultChecked)}function LN(o,u,c){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var g=u.type;if(!(g!=="submit"&&g!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+o._wrapperState.initialValue,c||u===o.value||(o.value=u),o.defaultValue=u}c=o.name,c!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,c!==""&&(o.name=c)}function dx(o,u,c){(u!=="number"||cy(o.ownerDocument)!==o)&&(c==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+c&&(o.defaultValue=""+c))}var Nc=Array.isArray;function Ca(o,u,c,g){if(o=o.options,u){u={};for(var m=0;m<c.length;m++)u["$"+c[m]]=!0;for(c=0;c<o.length;c++)m=u.hasOwnProperty("$"+o[c].value),o[c].selected!==m&&(o[c].selected=m),m&&g&&(o[c].defaultSelected=!0)}else{for(c=""+Ql(c),u=null,m=0;m<o.length;m++){if(o[m].value===c){o[m].selected=!0,g&&(o[m].defaultSelected=!0);return}u!==null||o[m].disabled||(u=o[m])}u!==null&&(u.selected=!0)}}function gx(o,u){if(u.dangerouslySetInnerHTML!=null)throw Error(St(91));return hi({},u,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function jN(o,u){var c=u.value;if(c==null){if(c=u.children,u=u.defaultValue,c!=null){if(u!=null)throw Error(St(92));if(Nc(c)){if(1<c.length)throw Error(St(93));c=c[0]}u=c}u==null&&(u=""),c=u}o._wrapperState={initialValue:Ql(c)}}function pC(o,u){var c=Ql(u.value),g=Ql(u.defaultValue);c!=null&&(c=""+c,c!==o.value&&(o.value=c),u.defaultValue==null&&o.defaultValue!==c&&(o.defaultValue=c)),g!=null&&(o.defaultValue=""+g)}function EN(o){var u=o.textContent;u===o._wrapperState.initialValue&&u!==""&&u!==null&&(o.value=u)}function dC(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yx(o,u){return o==null||o==="http://www.w3.org/1999/xhtml"?dC(u):o==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Dg,gC=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,c,g,m){MSApp.execUnsafeLocalFunction(function(){return o(u,c,g,m)})}:o}(function(o,u){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=u;else{for(Dg=Dg||document.createElement("div"),Dg.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=Dg.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;u.firstChild;)o.appendChild(u.firstChild)}});function Vc(o,u){if(u){var c=o.firstChild;if(c&&c===o.lastChild&&c.nodeType===3){c.nodeValue=u;return}}o.textContent=u}var Tc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PE=["Webkit","ms","Moz","O"];Object.keys(Tc).forEach(function(o){PE.forEach(function(u){u=u+o.charAt(0).toUpperCase()+o.substring(1),Tc[u]=Tc[o]})});function yC(o,u,c){return u==null||typeof u=="boolean"||u===""?"":c||typeof u!="number"||u===0||Tc.hasOwnProperty(o)&&Tc[o]?(""+u).trim():u+"px"}function mC(o,u){o=o.style;for(var c in u)if(u.hasOwnProperty(c)){var g=c.indexOf("--")===0,m=yC(c,u[c],g);c==="float"&&(c="cssFloat"),g?o.setProperty(c,m):o[c]=m}}var CE=hi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mx(o,u){if(u){if(CE[o]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(St(137,o));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(St(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(St(61))}if(u.style!=null&&typeof u.style!="object")throw Error(St(62))}}function vx(o,u){if(o.indexOf("-")===-1)return typeof u.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xx=null;function mw(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var wx=null,Ta=null,La=null;function FN(o){if(o=sp(o)){if(typeof wx!="function")throw Error(St(280));var u=o.stateNode;u&&(u=Gy(u),wx(o.stateNode,o.type,u))}}function vC(o){Ta?La?La.push(o):La=[o]:Ta=o}function xC(){if(Ta){var o=Ta,u=La;if(La=Ta=null,FN(o),u)for(o=0;o<u.length;o++)FN(u[o])}}function wC(o,u){return o(u)}function SC(){}var C1=!1;function MC(o,u,c){if(C1)return o(u,c);C1=!0;try{return wC(o,u,c)}finally{C1=!1,(Ta!==null||La!==null)&&(SC(),xC())}}function Uc(o,u){var c=o.stateNode;if(c===null)return null;var g=Gy(c);if(g===null)return null;c=g[u];t:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break t;default:o=!1}if(o)return null;if(c&&typeof c!="function")throw Error(St(231,u,typeof c));return c}var Sx=!1;if(el)try{var dc={};Object.defineProperty(dc,"passive",{get:function(){Sx=!0}}),window.addEventListener("test",dc,dc),window.removeEventListener("test",dc,dc)}catch{Sx=!1}function TE(o,u,c,g,m,w,M,j,O){var A=Array.prototype.slice.call(arguments,3);try{u.apply(c,A)}catch(B){this.onError(B)}}var Lc=!1,py=null,dy=!1,Mx=null,LE={onError:function(o){Lc=!0,py=o}};function jE(o,u,c,g,m,w,M,j,O){Lc=!1,py=null,TE.apply(LE,arguments)}function EE(o,u,c,g,m,w,M,j,O){if(jE.apply(this,arguments),Lc){if(Lc){var A=py;Lc=!1,py=null}else throw Error(St(198));dy||(dy=!0,Mx=A)}}function bu(o){var u=o,c=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,u.flags&4098&&(c=u.return),o=u.return;while(o)}return u.tag===3?c:null}function kC(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function ON(o){if(bu(o)!==o)throw Error(St(188))}function FE(o){var u=o.alternate;if(!u){if(u=bu(o),u===null)throw Error(St(188));return u!==o?null:o}for(var c=o,g=u;;){var m=c.return;if(m===null)break;var w=m.alternate;if(w===null){if(g=m.return,g!==null){c=g;continue}break}if(m.child===w.child){for(w=m.child;w;){if(w===c)return ON(m),o;if(w===g)return ON(m),u;w=w.sibling}throw Error(St(188))}if(c.return!==g.return)c=m,g=w;else{for(var M=!1,j=m.child;j;){if(j===c){M=!0,c=m,g=w;break}if(j===g){M=!0,g=m,c=w;break}j=j.sibling}if(!M){for(j=w.child;j;){if(j===c){M=!0,c=w,g=m;break}if(j===g){M=!0,g=w,c=m;break}j=j.sibling}if(!M)throw Error(St(189))}}if(c.alternate!==g)throw Error(St(190))}if(c.tag!==3)throw Error(St(188));return c.stateNode.current===c?o:u}function NC(o){return o=FE(o),o!==null?PC(o):null}function PC(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var u=PC(o);if(u!==null)return u;o=o.sibling}return null}var CC=Hr.unstable_scheduleCallback,AN=Hr.unstable_cancelCallback,OE=Hr.unstable_shouldYield,AE=Hr.unstable_requestPaint,Ii=Hr.unstable_now,IE=Hr.unstable_getCurrentPriorityLevel,vw=Hr.unstable_ImmediatePriority,TC=Hr.unstable_UserBlockingPriority,gy=Hr.unstable_NormalPriority,DE=Hr.unstable_LowPriority,LC=Hr.unstable_IdlePriority,Uy=null,ws=null;function RE(o){if(ws&&typeof ws.onCommitFiberRoot=="function")try{ws.onCommitFiberRoot(Uy,o,void 0,(o.current.flags&128)===128)}catch{}}var Vo=Math.clz32?Math.clz32:VE,BE=Math.log,zE=Math.LN2;function VE(o){return o>>>=0,o===0?32:31-(BE(o)/zE|0)|0}var Rg=64,Bg=4194304;function Pc(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function yy(o,u){var c=o.pendingLanes;if(c===0)return 0;var g=0,m=o.suspendedLanes,w=o.pingedLanes,M=c&268435455;if(M!==0){var j=M&~m;j!==0?g=Pc(j):(w&=M,w!==0&&(g=Pc(w)))}else M=c&~m,M!==0?g=Pc(M):w!==0&&(g=Pc(w));if(g===0)return 0;if(u!==0&&u!==g&&!(u&m)&&(m=g&-g,w=u&-u,m>=w||m===16&&(w&4194240)!==0))return u;if(g&4&&(g|=c&16),u=o.entangledLanes,u!==0)for(o=o.entanglements,u&=g;0<u;)c=31-Vo(u),m=1<<c,g|=o[c],u&=~m;return g}function UE(o,u){switch(o){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YE(o,u){for(var c=o.suspendedLanes,g=o.pingedLanes,m=o.expirationTimes,w=o.pendingLanes;0<w;){var M=31-Vo(w),j=1<<M,O=m[M];O===-1?(!(j&c)||j&g)&&(m[M]=UE(j,u)):O<=u&&(o.expiredLanes|=j),w&=~j}}function kx(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function jC(){var o=Rg;return Rg<<=1,!(Rg&4194240)&&(Rg=64),o}function T1(o){for(var u=[],c=0;31>c;c++)u.push(o);return u}function rp(o,u,c){o.pendingLanes|=u,u!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,u=31-Vo(u),o[u]=c}function HE(o,u){var c=o.pendingLanes&~u;o.pendingLanes=u,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=u,o.mutableReadLanes&=u,o.entangledLanes&=u,u=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<c;){var m=31-Vo(c),w=1<<m;u[m]=0,g[m]=-1,o[m]=-1,c&=~w}}function xw(o,u){var c=o.entangledLanes|=u;for(o=o.entanglements;c;){var g=31-Vo(c),m=1<<g;m&u|o[g]&u&&(o[g]|=u),c&=~m}}var Ae=0;function EC(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var FC,ww,OC,AC,IC,Nx=!1,zg=[],Hl=null,_l=null,Gl=null,Yc=new Map,Hc=new Map,Bl=[],_E="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function IN(o,u){switch(o){case"focusin":case"focusout":Hl=null;break;case"dragenter":case"dragleave":_l=null;break;case"mouseover":case"mouseout":Gl=null;break;case"pointerover":case"pointerout":Yc.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hc.delete(u.pointerId)}}function gc(o,u,c,g,m,w){return o===null||o.nativeEvent!==w?(o={blockedOn:u,domEventName:c,eventSystemFlags:g,nativeEvent:w,targetContainers:[m]},u!==null&&(u=sp(u),u!==null&&ww(u)),o):(o.eventSystemFlags|=g,u=o.targetContainers,m!==null&&u.indexOf(m)===-1&&u.push(m),o)}function GE(o,u,c,g,m){switch(u){case"focusin":return Hl=gc(Hl,o,u,c,g,m),!0;case"dragenter":return _l=gc(_l,o,u,c,g,m),!0;case"mouseover":return Gl=gc(Gl,o,u,c,g,m),!0;case"pointerover":var w=m.pointerId;return Yc.set(w,gc(Yc.get(w)||null,o,u,c,g,m)),!0;case"gotpointercapture":return w=m.pointerId,Hc.set(w,gc(Hc.get(w)||null,o,u,c,g,m)),!0}return!1}function DC(o){var u=Hu(o.target);if(u!==null){var c=bu(u);if(c!==null){if(u=c.tag,u===13){if(u=kC(c),u!==null){o.blockedOn=u,IC(o.priority,function(){OC(c)});return}}else if(u===3&&c.stateNode.current.memoizedState.isDehydrated){o.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Qg(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var c=Px(o.domEventName,o.eventSystemFlags,u[0],o.nativeEvent);if(c===null){c=o.nativeEvent;var g=new c.constructor(c.type,c);xx=g,c.target.dispatchEvent(g),xx=null}else return u=sp(c),u!==null&&ww(u),o.blockedOn=c,!1;u.shift()}return!0}function DN(o,u,c){Qg(o)&&c.delete(u)}function XE(){Nx=!1,Hl!==null&&Qg(Hl)&&(Hl=null),_l!==null&&Qg(_l)&&(_l=null),Gl!==null&&Qg(Gl)&&(Gl=null),Yc.forEach(DN),Hc.forEach(DN)}function yc(o,u){o.blockedOn===u&&(o.blockedOn=null,Nx||(Nx=!0,Hr.unstable_scheduleCallback(Hr.unstable_NormalPriority,XE)))}function _c(o){function u(m){return yc(m,o)}if(0<zg.length){yc(zg[0],o);for(var c=1;c<zg.length;c++){var g=zg[c];g.blockedOn===o&&(g.blockedOn=null)}}for(Hl!==null&&yc(Hl,o),_l!==null&&yc(_l,o),Gl!==null&&yc(Gl,o),Yc.forEach(u),Hc.forEach(u),c=0;c<Bl.length;c++)g=Bl[c],g.blockedOn===o&&(g.blockedOn=null);for(;0<Bl.length&&(c=Bl[0],c.blockedOn===null);)DC(c),c.blockedOn===null&&Bl.shift()}var ja=ol.ReactCurrentBatchConfig,my=!0;function KE(o,u,c,g){var m=Ae,w=ja.transition;ja.transition=null;try{Ae=1,Sw(o,u,c,g)}finally{Ae=m,ja.transition=w}}function WE(o,u,c,g){var m=Ae,w=ja.transition;ja.transition=null;try{Ae=4,Sw(o,u,c,g)}finally{Ae=m,ja.transition=w}}function Sw(o,u,c,g){if(my){var m=Px(o,u,c,g);if(m===null)B1(o,u,g,vy,c),IN(o,g);else if(GE(m,o,u,c,g))g.stopPropagation();else if(IN(o,g),u&4&&-1<_E.indexOf(o)){for(;m!==null;){var w=sp(m);if(w!==null&&FC(w),w=Px(o,u,c,g),w===null&&B1(o,u,g,vy,c),w===m)break;m=w}m!==null&&g.stopPropagation()}else B1(o,u,g,null,c)}}var vy=null;function Px(o,u,c,g){if(vy=null,o=mw(g),o=Hu(o),o!==null)if(u=bu(o),u===null)o=null;else if(c=u.tag,c===13){if(o=kC(u),o!==null)return o;o=null}else if(c===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null);return vy=o,null}function RC(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IE()){case vw:return 1;case TC:return 4;case gy:case DE:return 16;case LC:return 536870912;default:return 16}default:return 16}}var Vl=null,Mw=null,qg=null;function BC(){if(qg)return qg;var o,u=Mw,c=u.length,g,m="value"in Vl?Vl.value:Vl.textContent,w=m.length;for(o=0;o<c&&u[o]===m[o];o++);var M=c-o;for(g=1;g<=M&&u[c-g]===m[w-g];g++);return qg=m.slice(o,1<g?1-g:void 0)}function bg(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function Vg(){return!0}function RN(){return!1}function Gr(o){function u(c,g,m,w,M){this._reactName=c,this._targetInst=m,this.type=g,this.nativeEvent=w,this.target=M,this.currentTarget=null;for(var j in o)o.hasOwnProperty(j)&&(c=o[j],this[j]=c?c(w):w[j]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Vg:RN,this.isPropagationStopped=RN,this}return hi(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Vg)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Vg)},persist:function(){},isPersistent:Vg}),u}var Ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kw=Gr(Ya),op=hi({},Ya,{view:0,detail:0}),$E=Gr(op),L1,j1,mc,Yy=hi({},op,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nw,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==mc&&(mc&&o.type==="mousemove"?(L1=o.screenX-mc.screenX,j1=o.screenY-mc.screenY):j1=L1=0,mc=o),L1)},movementY:function(o){return"movementY"in o?o.movementY:j1}}),BN=Gr(Yy),JE=hi({},Yy,{dataTransfer:0}),ZE=Gr(JE),QE=hi({},op,{relatedTarget:0}),E1=Gr(QE),qE=hi({},Ya,{animationName:0,elapsedTime:0,pseudoElement:0}),bE=Gr(qE),tF=hi({},Ya,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),eF=Gr(tF),iF=hi({},Ya,{data:0}),zN=Gr(iF),nF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sF(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=oF[o])?!!u[o]:!1}function Nw(){return sF}var lF=hi({},op,{key:function(o){if(o.key){var u=nF[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=bg(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?rF[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nw,charCode:function(o){return o.type==="keypress"?bg(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?bg(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),uF=Gr(lF),hF=hi({},Yy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),VN=Gr(hF),aF=hi({},op,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nw}),fF=Gr(aF),cF=hi({},Ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),pF=Gr(cF),dF=hi({},Yy,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),gF=Gr(dF),yF=[9,13,27,32],Pw=el&&"CompositionEvent"in window,jc=null;el&&"documentMode"in document&&(jc=document.documentMode);var mF=el&&"TextEvent"in window&&!jc,zC=el&&(!Pw||jc&&8<jc&&11>=jc),UN=String.fromCharCode(32),YN=!1;function VC(o,u){switch(o){case"keyup":return yF.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function UC(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ya=!1;function vF(o,u){switch(o){case"compositionend":return UC(u);case"keypress":return u.which!==32?null:(YN=!0,UN);case"textInput":return o=u.data,o===UN&&YN?null:o;default:return null}}function xF(o,u){if(ya)return o==="compositionend"||!Pw&&VC(o,u)?(o=BC(),qg=Mw=Vl=null,ya=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return zC&&u.locale!=="ko"?null:u.data;default:return null}}var wF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function HN(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!wF[o.type]:u==="textarea"}function YC(o,u,c,g){vC(g),u=xy(u,"onChange"),0<u.length&&(c=new kw("onChange","change",null,c,g),o.push({event:c,listeners:u}))}var Ec=null,Gc=null;function SF(o){qC(o,0)}function Hy(o){var u=xa(o);if(fC(u))return o}function MF(o,u){if(o==="change")return u}var HC=!1;if(el){var F1;if(el){var O1="oninput"in document;if(!O1){var _N=document.createElement("div");_N.setAttribute("oninput","return;"),O1=typeof _N.oninput=="function"}F1=O1}else F1=!1;HC=F1&&(!document.documentMode||9<document.documentMode)}function GN(){Ec&&(Ec.detachEvent("onpropertychange",_C),Gc=Ec=null)}function _C(o){if(o.propertyName==="value"&&Hy(Gc)){var u=[];YC(u,Gc,o,mw(o)),MC(SF,u)}}function kF(o,u,c){o==="focusin"?(GN(),Ec=u,Gc=c,Ec.attachEvent("onpropertychange",_C)):o==="focusout"&&GN()}function NF(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Hy(Gc)}function PF(o,u){if(o==="click")return Hy(u)}function CF(o,u){if(o==="input"||o==="change")return Hy(u)}function TF(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var Yo=typeof Object.is=="function"?Object.is:TF;function Xc(o,u){if(Yo(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var c=Object.keys(o),g=Object.keys(u);if(c.length!==g.length)return!1;for(g=0;g<c.length;g++){var m=c[g];if(!lx.call(u,m)||!Yo(o[m],u[m]))return!1}return!0}function XN(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function KN(o,u){var c=XN(o);o=0;for(var g;c;){if(c.nodeType===3){if(g=o+c.textContent.length,o<=u&&g>=u)return{node:c,offset:u-o};o=g}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=XN(c)}}function GC(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?GC(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function XC(){for(var o=window,u=cy();u instanceof o.HTMLIFrameElement;){try{var c=typeof u.contentWindow.location.href=="string"}catch{c=!1}if(c)o=u.contentWindow;else break;u=cy(o.document)}return u}function Cw(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}function LF(o){var u=XC(),c=o.focusedElem,g=o.selectionRange;if(u!==c&&c&&c.ownerDocument&&GC(c.ownerDocument.documentElement,c)){if(g!==null&&Cw(c)){if(u=g.start,o=g.end,o===void 0&&(o=u),"selectionStart"in c)c.selectionStart=u,c.selectionEnd=Math.min(o,c.value.length);else if(o=(u=c.ownerDocument||document)&&u.defaultView||window,o.getSelection){o=o.getSelection();var m=c.textContent.length,w=Math.min(g.start,m);g=g.end===void 0?w:Math.min(g.end,m),!o.extend&&w>g&&(m=g,g=w,w=m),m=KN(c,w);var M=KN(c,g);m&&M&&(o.rangeCount!==1||o.anchorNode!==m.node||o.anchorOffset!==m.offset||o.focusNode!==M.node||o.focusOffset!==M.offset)&&(u=u.createRange(),u.setStart(m.node,m.offset),o.removeAllRanges(),w>g?(o.addRange(u),o.extend(M.node,M.offset)):(u.setEnd(M.node,M.offset),o.addRange(u)))}}for(u=[],o=c;o=o.parentNode;)o.nodeType===1&&u.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<u.length;c++)o=u[c],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var jF=el&&"documentMode"in document&&11>=document.documentMode,ma=null,Cx=null,Fc=null,Tx=!1;function WN(o,u,c){var g=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Tx||ma==null||ma!==cy(g)||(g=ma,"selectionStart"in g&&Cw(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Fc&&Xc(Fc,g)||(Fc=g,g=xy(Cx,"onSelect"),0<g.length&&(u=new kw("onSelect","select",null,u,c),o.push({event:u,listeners:g}),u.target=ma)))}function Ug(o,u){var c={};return c[o.toLowerCase()]=u.toLowerCase(),c["Webkit"+o]="webkit"+u,c["Moz"+o]="moz"+u,c}var va={animationend:Ug("Animation","AnimationEnd"),animationiteration:Ug("Animation","AnimationIteration"),animationstart:Ug("Animation","AnimationStart"),transitionend:Ug("Transition","TransitionEnd")},A1={},KC={};el&&(KC=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function _y(o){if(A1[o])return A1[o];if(!va[o])return o;var u=va[o],c;for(c in u)if(u.hasOwnProperty(c)&&c in KC)return A1[o]=u[c];return o}var WC=_y("animationend"),$C=_y("animationiteration"),JC=_y("animationstart"),ZC=_y("transitionend"),QC=new Map,$N="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tu(o,u){QC.set(o,u),qu(u,[o])}for(var I1=0;I1<$N.length;I1++){var D1=$N[I1],EF=D1.toLowerCase(),FF=D1[0].toUpperCase()+D1.slice(1);tu(EF,"on"+FF)}tu(WC,"onAnimationEnd");tu($C,"onAnimationIteration");tu(JC,"onAnimationStart");tu("dblclick","onDoubleClick");tu("focusin","onFocus");tu("focusout","onBlur");tu(ZC,"onTransitionEnd");Oa("onMouseEnter",["mouseout","mouseover"]);Oa("onMouseLeave",["mouseout","mouseover"]);Oa("onPointerEnter",["pointerout","pointerover"]);Oa("onPointerLeave",["pointerout","pointerover"]);qu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qu("onBeforeInput",["compositionend","keypress","textInput","paste"]);qu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OF=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cc));function JN(o,u,c){var g=o.type||"unknown-event";o.currentTarget=c,EE(g,u,void 0,o),o.currentTarget=null}function qC(o,u){u=(u&4)!==0;for(var c=0;c<o.length;c++){var g=o[c],m=g.event;g=g.listeners;t:{var w=void 0;if(u)for(var M=g.length-1;0<=M;M--){var j=g[M],O=j.instance,A=j.currentTarget;if(j=j.listener,O!==w&&m.isPropagationStopped())break t;JN(m,j,A),w=O}else for(M=0;M<g.length;M++){if(j=g[M],O=j.instance,A=j.currentTarget,j=j.listener,O!==w&&m.isPropagationStopped())break t;JN(m,j,A),w=O}}}if(dy)throw o=Mx,dy=!1,Mx=null,o}function Xe(o,u){var c=u[Ox];c===void 0&&(c=u[Ox]=new Set);var g=o+"__bubble";c.has(g)||(bC(u,o,2,!1),c.add(g))}function R1(o,u,c){var g=0;u&&(g|=4),bC(c,o,g,u)}var Yg="_reactListening"+Math.random().toString(36).slice(2);function Kc(o){if(!o[Yg]){o[Yg]=!0,sC.forEach(function(c){c!=="selectionchange"&&(OF.has(c)||R1(c,!1,o),R1(c,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[Yg]||(u[Yg]=!0,R1("selectionchange",!1,u))}}function bC(o,u,c,g){switch(RC(u)){case 1:var m=KE;break;case 4:m=WE;break;default:m=Sw}c=m.bind(null,u,c,o),m=void 0,!Sx||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(m=!0),g?m!==void 0?o.addEventListener(u,c,{capture:!0,passive:m}):o.addEventListener(u,c,!0):m!==void 0?o.addEventListener(u,c,{passive:m}):o.addEventListener(u,c,!1)}function B1(o,u,c,g,m){var w=g;if(!(u&1)&&!(u&2)&&g!==null)t:for(;;){if(g===null)return;var M=g.tag;if(M===3||M===4){var j=g.stateNode.containerInfo;if(j===m||j.nodeType===8&&j.parentNode===m)break;if(M===4)for(M=g.return;M!==null;){var O=M.tag;if((O===3||O===4)&&(O=M.stateNode.containerInfo,O===m||O.nodeType===8&&O.parentNode===m))return;M=M.return}for(;j!==null;){if(M=Hu(j),M===null)return;if(O=M.tag,O===5||O===6){g=w=M;continue t}j=j.parentNode}}g=g.return}MC(function(){var A=w,B=mw(c),z=[];t:{var $=QC.get(o);if($!==void 0){var ht=kw,rt=o;switch(o){case"keypress":if(bg(c)===0)break t;case"keydown":case"keyup":ht=uF;break;case"focusin":rt="focus",ht=E1;break;case"focusout":rt="blur",ht=E1;break;case"beforeblur":case"afterblur":ht=E1;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=BN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=ZE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=fF;break;case WC:case $C:case JC:ht=bE;break;case ZC:ht=pF;break;case"scroll":ht=$E;break;case"wheel":ht=gF;break;case"copy":case"cut":case"paste":ht=eF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=VN}var Y=(u&4)!==0,Et=!Y&&o==="scroll",K=Y?$!==null?$+"Capture":null:$;Y=[];for(var H=A,J;H!==null;){J=H;var R=J.stateNode;if(J.tag===5&&R!==null&&(J=R,K!==null&&(R=Uc(H,K),R!=null&&Y.push(Wc(H,R,J)))),Et)break;H=H.return}0<Y.length&&($=new ht($,rt,null,c,B),z.push({event:$,listeners:Y}))}}if(!(u&7)){t:{if($=o==="mouseover"||o==="pointerover",ht=o==="mouseout"||o==="pointerout",$&&c!==xx&&(rt=c.relatedTarget||c.fromElement)&&(Hu(rt)||rt[il]))break t;if((ht||$)&&($=B.window===B?B:($=B.ownerDocument)?$.defaultView||$.parentWindow:window,ht?(rt=c.relatedTarget||c.toElement,ht=A,rt=rt?Hu(rt):null,rt!==null&&(Et=bu(rt),rt!==Et||rt.tag!==5&&rt.tag!==6)&&(rt=null)):(ht=null,rt=A),ht!==rt)){if(Y=BN,R="onMouseLeave",K="onMouseEnter",H="mouse",(o==="pointerout"||o==="pointerover")&&(Y=VN,R="onPointerLeave",K="onPointerEnter",H="pointer"),Et=ht==null?$:xa(ht),J=rt==null?$:xa(rt),$=new Y(R,H+"leave",ht,c,B),$.target=Et,$.relatedTarget=J,R=null,Hu(B)===A&&(Y=new Y(K,H+"enter",rt,c,B),Y.target=J,Y.relatedTarget=Et,R=Y),Et=R,ht&&rt)e:{for(Y=ht,K=rt,H=0,J=Y;J;J=pa(J))H++;for(J=0,R=K;R;R=pa(R))J++;for(;0<H-J;)Y=pa(Y),H--;for(;0<J-H;)K=pa(K),J--;for(;H--;){if(Y===K||K!==null&&Y===K.alternate)break e;Y=pa(Y),K=pa(K)}Y=null}else Y=null;ht!==null&&ZN(z,$,ht,Y,!1),rt!==null&&Et!==null&&ZN(z,Et,rt,Y,!0)}}t:{if($=A?xa(A):window,ht=$.nodeName&&$.nodeName.toLowerCase(),ht==="select"||ht==="input"&&$.type==="file")var st=MF;else if(HN($))if(HC)st=CF;else{st=NF;var dt=kF}else(ht=$.nodeName)&&ht.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(st=PF);if(st&&(st=st(o,A))){YC(z,st,c,B);break t}dt&&dt(o,$,A),o==="focusout"&&(dt=$._wrapperState)&&dt.controlled&&$.type==="number"&&dx($,"number",$.value)}switch(dt=A?xa(A):window,o){case"focusin":(HN(dt)||dt.contentEditable==="true")&&(ma=dt,Cx=A,Fc=null);break;case"focusout":Fc=Cx=ma=null;break;case"mousedown":Tx=!0;break;case"contextmenu":case"mouseup":case"dragend":Tx=!1,WN(z,c,B);break;case"selectionchange":if(jF)break;case"keydown":case"keyup":WN(z,c,B)}var Lt;if(Pw)t:{switch(o){case"compositionstart":var xt="onCompositionStart";break t;case"compositionend":xt="onCompositionEnd";break t;case"compositionupdate":xt="onCompositionUpdate";break t}xt=void 0}else ya?VC(o,c)&&(xt="onCompositionEnd"):o==="keydown"&&c.keyCode===229&&(xt="onCompositionStart");xt&&(zC&&c.locale!=="ko"&&(ya||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&ya&&(Lt=BC()):(Vl=B,Mw="value"in Vl?Vl.value:Vl.textContent,ya=!0)),dt=xy(A,xt),0<dt.length&&(xt=new zN(xt,o,null,c,B),z.push({event:xt,listeners:dt}),Lt?xt.data=Lt:(Lt=UC(c),Lt!==null&&(xt.data=Lt)))),(Lt=mF?vF(o,c):xF(o,c))&&(A=xy(A,"onBeforeInput"),0<A.length&&(B=new zN("onBeforeInput","beforeinput",null,c,B),z.push({event:B,listeners:A}),B.data=Lt))}qC(z,u)})}function Wc(o,u,c){return{instance:o,listener:u,currentTarget:c}}function xy(o,u){for(var c=u+"Capture",g=[];o!==null;){var m=o,w=m.stateNode;m.tag===5&&w!==null&&(m=w,w=Uc(o,c),w!=null&&g.unshift(Wc(o,w,m)),w=Uc(o,u),w!=null&&g.push(Wc(o,w,m))),o=o.return}return g}function pa(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function ZN(o,u,c,g,m){for(var w=u._reactName,M=[];c!==null&&c!==g;){var j=c,O=j.alternate,A=j.stateNode;if(O!==null&&O===g)break;j.tag===5&&A!==null&&(j=A,m?(O=Uc(c,w),O!=null&&M.unshift(Wc(c,O,j))):m||(O=Uc(c,w),O!=null&&M.push(Wc(c,O,j)))),c=c.return}M.length!==0&&o.push({event:u,listeners:M})}var AF=/\r\n?/g,IF=/\u0000|\uFFFD/g;function QN(o){return(typeof o=="string"?o:""+o).replace(AF,`
`).replace(IF,"")}function Hg(o,u,c){if(u=QN(u),QN(o)!==u&&c)throw Error(St(425))}function wy(){}var Lx=null,jx=null;function Ex(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Fx=typeof setTimeout=="function"?setTimeout:void 0,DF=typeof clearTimeout=="function"?clearTimeout:void 0,qN=typeof Promise=="function"?Promise:void 0,RF=typeof queueMicrotask=="function"?queueMicrotask:typeof qN<"u"?function(o){return qN.resolve(null).then(o).catch(BF)}:Fx;function BF(o){setTimeout(function(){throw o})}function z1(o,u){var c=u,g=0;do{var m=c.nextSibling;if(o.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(g===0){o.removeChild(m),_c(u);return}g--}else c!=="$"&&c!=="$?"&&c!=="$!"||g++;c=m}while(c);_c(u)}function Xl(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return o}function bN(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var c=o.data;if(c==="$"||c==="$!"||c==="$?"){if(u===0)return o;u--}else c==="/$"&&u++}o=o.previousSibling}return null}var Ha=Math.random().toString(36).slice(2),vs="__reactFiber$"+Ha,$c="__reactProps$"+Ha,il="__reactContainer$"+Ha,Ox="__reactEvents$"+Ha,zF="__reactListeners$"+Ha,VF="__reactHandles$"+Ha;function Hu(o){var u=o[vs];if(u)return u;for(var c=o.parentNode;c;){if(u=c[il]||c[vs]){if(c=u.alternate,u.child!==null||c!==null&&c.child!==null)for(o=bN(o);o!==null;){if(c=o[vs])return c;o=bN(o)}return u}o=c,c=o.parentNode}return null}function sp(o){return o=o[vs]||o[il],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function xa(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(St(33))}function Gy(o){return o[$c]||null}var Ax=[],wa=-1;function eu(o){return{current:o}}function Ke(o){0>wa||(o.current=Ax[wa],Ax[wa]=null,wa--)}function _e(o,u){wa++,Ax[wa]=o.current,o.current=u}var ql={},Gn=eu(ql),Cr=eu(!1),Wu=ql;function Aa(o,u){var c=o.type.contextTypes;if(!c)return ql;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===u)return g.__reactInternalMemoizedMaskedChildContext;var m={},w;for(w in c)m[w]=u[w];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=u,o.__reactInternalMemoizedMaskedChildContext=m),m}function Tr(o){return o=o.childContextTypes,o!=null}function Sy(){Ke(Cr),Ke(Gn)}function tP(o,u,c){if(Gn.current!==ql)throw Error(St(168));_e(Gn,u),_e(Cr,c)}function tT(o,u,c){var g=o.stateNode;if(u=u.childContextTypes,typeof g.getChildContext!="function")return c;g=g.getChildContext();for(var m in g)if(!(m in u))throw Error(St(108,kE(o)||"Unknown",m));return hi({},c,g)}function My(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||ql,Wu=Gn.current,_e(Gn,o),_e(Cr,Cr.current),!0}function eP(o,u,c){var g=o.stateNode;if(!g)throw Error(St(169));c?(o=tT(o,u,Wu),g.__reactInternalMemoizedMergedChildContext=o,Ke(Cr),Ke(Gn),_e(Gn,o)):Ke(Cr),_e(Cr,c)}var Zs=null,Xy=!1,V1=!1;function eT(o){Zs===null?Zs=[o]:Zs.push(o)}function UF(o){Xy=!0,eT(o)}function iu(){if(!V1&&Zs!==null){V1=!0;var o=0,u=Ae;try{var c=Zs;for(Ae=1;o<c.length;o++){var g=c[o];do g=g(!0);while(g!==null)}Zs=null,Xy=!1}catch(m){throw Zs!==null&&(Zs=Zs.slice(o+1)),CC(vw,iu),m}finally{Ae=u,V1=!1}}return null}var Sa=[],Ma=0,ky=null,Ny=0,ho=[],ao=0,$u=null,Qs=1,qs="";function Vu(o,u){Sa[Ma++]=Ny,Sa[Ma++]=ky,ky=o,Ny=u}function iT(o,u,c){ho[ao++]=Qs,ho[ao++]=qs,ho[ao++]=$u,$u=o;var g=Qs;o=qs;var m=32-Vo(g)-1;g&=~(1<<m),c+=1;var w=32-Vo(u)+m;if(30<w){var M=m-m%5;w=(g&(1<<M)-1).toString(32),g>>=M,m-=M,Qs=1<<32-Vo(u)+m|c<<m|g,qs=w+o}else Qs=1<<w|c<<m|g,qs=o}function Tw(o){o.return!==null&&(Vu(o,1),iT(o,1,0))}function Lw(o){for(;o===ky;)ky=Sa[--Ma],Sa[Ma]=null,Ny=Sa[--Ma],Sa[Ma]=null;for(;o===$u;)$u=ho[--ao],ho[ao]=null,qs=ho[--ao],ho[ao]=null,Qs=ho[--ao],ho[ao]=null}var Yr=null,Ur=null,be=!1,zo=null;function nT(o,u){var c=fo(5,null,null,0);c.elementType="DELETED",c.stateNode=u,c.return=o,u=o.deletions,u===null?(o.deletions=[c],o.flags|=16):u.push(c)}function iP(o,u){switch(o.tag){case 5:var c=o.type;return u=u.nodeType!==1||c.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(o.stateNode=u,Yr=o,Ur=Xl(u.firstChild),!0):!1;case 6:return u=o.pendingProps===""||u.nodeType!==3?null:u,u!==null?(o.stateNode=u,Yr=o,Ur=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(c=$u!==null?{id:Qs,overflow:qs}:null,o.memoizedState={dehydrated:u,treeContext:c,retryLane:1073741824},c=fo(18,null,null,0),c.stateNode=u,c.return=o,o.child=c,Yr=o,Ur=null,!0):!1;default:return!1}}function Ix(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Dx(o){if(be){var u=Ur;if(u){var c=u;if(!iP(o,u)){if(Ix(o))throw Error(St(418));u=Xl(c.nextSibling);var g=Yr;u&&iP(o,u)?nT(g,c):(o.flags=o.flags&-4097|2,be=!1,Yr=o)}}else{if(Ix(o))throw Error(St(418));o.flags=o.flags&-4097|2,be=!1,Yr=o}}}function nP(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Yr=o}function _g(o){if(o!==Yr)return!1;if(!be)return nP(o),be=!0,!1;var u;if((u=o.tag!==3)&&!(u=o.tag!==5)&&(u=o.type,u=u!=="head"&&u!=="body"&&!Ex(o.type,o.memoizedProps)),u&&(u=Ur)){if(Ix(o))throw rT(),Error(St(418));for(;u;)nT(o,u),u=Xl(u.nextSibling)}if(nP(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(St(317));t:{for(o=o.nextSibling,u=0;o;){if(o.nodeType===8){var c=o.data;if(c==="/$"){if(u===0){Ur=Xl(o.nextSibling);break t}u--}else c!=="$"&&c!=="$!"&&c!=="$?"||u++}o=o.nextSibling}Ur=null}}else Ur=Yr?Xl(o.stateNode.nextSibling):null;return!0}function rT(){for(var o=Ur;o;)o=Xl(o.nextSibling)}function Ia(){Ur=Yr=null,be=!1}function jw(o){zo===null?zo=[o]:zo.push(o)}var YF=ol.ReactCurrentBatchConfig;function Ro(o,u){if(o&&o.defaultProps){u=hi({},u),o=o.defaultProps;for(var c in o)u[c]===void 0&&(u[c]=o[c]);return u}return u}var Py=eu(null),Cy=null,ka=null,Ew=null;function Fw(){Ew=ka=Cy=null}function Ow(o){var u=Py.current;Ke(Py),o._currentValue=u}function Rx(o,u,c){for(;o!==null;){var g=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),o===c)break;o=o.return}}function Ea(o,u){Cy=o,Ew=ka=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&u&&(Pr=!0),o.firstContext=null)}function po(o){var u=o._currentValue;if(Ew!==o)if(o={context:o,memoizedValue:u,next:null},ka===null){if(Cy===null)throw Error(St(308));ka=o,Cy.dependencies={lanes:0,firstContext:o}}else ka=ka.next=o;return u}var _u=null;function Aw(o){_u===null?_u=[o]:_u.push(o)}function oT(o,u,c,g){var m=u.interleaved;return m===null?(c.next=c,Aw(u)):(c.next=m.next,m.next=c),u.interleaved=c,nl(o,g)}function nl(o,u){o.lanes|=u;var c=o.alternate;for(c!==null&&(c.lanes|=u),c=o,o=o.return;o!==null;)o.childLanes|=u,c=o.alternate,c!==null&&(c.childLanes|=u),c=o,o=o.return;return c.tag===3?c.stateNode:null}var Rl=!1;function Iw(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sT(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function bs(o,u){return{eventTime:o,lane:u,tag:0,payload:null,callback:null,next:null}}function Kl(o,u,c){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,Me&2){var m=g.pending;return m===null?u.next=u:(u.next=m.next,m.next=u),g.pending=u,nl(o,c)}return m=g.interleaved,m===null?(u.next=u,Aw(g)):(u.next=m.next,m.next=u),g.interleaved=u,nl(o,c)}function ty(o,u,c){if(u=u.updateQueue,u!==null&&(u=u.shared,(c&4194240)!==0)){var g=u.lanes;g&=o.pendingLanes,c|=g,u.lanes=c,xw(o,c)}}function rP(o,u){var c=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,c===g)){var m=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var M={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};w===null?m=w=M:w=w.next=M,c=c.next}while(c!==null);w===null?m=w=u:w=w.next=u}else m=w=u;c={baseState:g.baseState,firstBaseUpdate:m,lastBaseUpdate:w,shared:g.shared,effects:g.effects},o.updateQueue=c;return}o=c.lastBaseUpdate,o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=u}function Ty(o,u,c,g){var m=o.updateQueue;Rl=!1;var w=m.firstBaseUpdate,M=m.lastBaseUpdate,j=m.shared.pending;if(j!==null){m.shared.pending=null;var O=j,A=O.next;O.next=null,M===null?w=A:M.next=A,M=O;var B=o.alternate;B!==null&&(B=B.updateQueue,j=B.lastBaseUpdate,j!==M&&(j===null?B.firstBaseUpdate=A:j.next=A,B.lastBaseUpdate=O))}if(w!==null){var z=m.baseState;M=0,B=A=O=null,j=w;do{var $=j.lane,ht=j.eventTime;if((g&$)===$){B!==null&&(B=B.next={eventTime:ht,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});t:{var rt=o,Y=j;switch($=u,ht=c,Y.tag){case 1:if(rt=Y.payload,typeof rt=="function"){z=rt.call(ht,z,$);break t}z=rt;break t;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=Y.payload,$=typeof rt=="function"?rt.call(ht,z,$):rt,$==null)break t;z=hi({},z,$);break t;case 2:Rl=!0}}j.callback!==null&&j.lane!==0&&(o.flags|=64,$=m.effects,$===null?m.effects=[j]:$.push(j))}else ht={eventTime:ht,lane:$,tag:j.tag,payload:j.payload,callback:j.callback,next:null},B===null?(A=B=ht,O=z):B=B.next=ht,M|=$;if(j=j.next,j===null){if(j=m.shared.pending,j===null)break;$=j,j=$.next,$.next=null,m.lastBaseUpdate=$,m.shared.pending=null}}while(1);if(B===null&&(O=z),m.baseState=O,m.firstBaseUpdate=A,m.lastBaseUpdate=B,u=m.shared.interleaved,u!==null){m=u;do M|=m.lane,m=m.next;while(m!==u)}else w===null&&(m.shared.lanes=0);Zu|=M,o.lanes=M,o.memoizedState=z}}function oP(o,u,c){if(o=u.effects,u.effects=null,o!==null)for(u=0;u<o.length;u++){var g=o[u],m=g.callback;if(m!==null){if(g.callback=null,g=c,typeof m!="function")throw Error(St(191,m));m.call(g)}}}var lT=new oC.Component().refs;function Bx(o,u,c,g){u=o.memoizedState,c=c(g,u),c=c==null?u:hi({},u,c),o.memoizedState=c,o.lanes===0&&(o.updateQueue.baseState=c)}var Ky={isMounted:function(o){return(o=o._reactInternals)?bu(o)===o:!1},enqueueSetState:function(o,u,c){o=o._reactInternals;var g=sr(),m=$l(o),w=bs(g,m);w.payload=u,c!=null&&(w.callback=c),u=Kl(o,w,m),u!==null&&(Uo(u,o,m,g),ty(u,o,m))},enqueueReplaceState:function(o,u,c){o=o._reactInternals;var g=sr(),m=$l(o),w=bs(g,m);w.tag=1,w.payload=u,c!=null&&(w.callback=c),u=Kl(o,w,m),u!==null&&(Uo(u,o,m,g),ty(u,o,m))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var c=sr(),g=$l(o),m=bs(c,g);m.tag=2,u!=null&&(m.callback=u),u=Kl(o,m,g),u!==null&&(Uo(u,o,g,c),ty(u,o,g))}};function sP(o,u,c,g,m,w,M){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,w,M):u.prototype&&u.prototype.isPureReactComponent?!Xc(c,g)||!Xc(m,w):!0}function uT(o,u,c){var g=!1,m=ql,w=u.contextType;return typeof w=="object"&&w!==null?w=po(w):(m=Tr(u)?Wu:Gn.current,g=u.contextTypes,w=(g=g!=null)?Aa(o,m):ql),u=new u(c,w),o.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Ky,o.stateNode=u,u._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=m,o.__reactInternalMemoizedMaskedChildContext=w),u}function lP(o,u,c,g){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(c,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(c,g),u.state!==o&&Ky.enqueueReplaceState(u,u.state,null)}function zx(o,u,c,g){var m=o.stateNode;m.props=c,m.state=o.memoizedState,m.refs=lT,Iw(o);var w=u.contextType;typeof w=="object"&&w!==null?m.context=po(w):(w=Tr(u)?Wu:Gn.current,m.context=Aa(o,w)),m.state=o.memoizedState,w=u.getDerivedStateFromProps,typeof w=="function"&&(Bx(o,u,w,c),m.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(u=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),u!==m.state&&Ky.enqueueReplaceState(m,m.state,null),Ty(o,c,m,g),m.state=o.memoizedState),typeof m.componentDidMount=="function"&&(o.flags|=4194308)}function vc(o,u,c){if(o=c.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(St(309));var g=c.stateNode}if(!g)throw Error(St(147,o));var m=g,w=""+o;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===w?u.ref:(u=function(M){var j=m.refs;j===lT&&(j=m.refs={}),M===null?delete j[w]:j[w]=M},u._stringRef=w,u)}if(typeof o!="string")throw Error(St(284));if(!c._owner)throw Error(St(290,o))}return o}function Gg(o,u){throw o=Object.prototype.toString.call(u),Error(St(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o))}function uP(o){var u=o._init;return u(o._payload)}function hT(o){function u(K,H){if(o){var J=K.deletions;J===null?(K.deletions=[H],K.flags|=16):J.push(H)}}function c(K,H){if(!o)return null;for(;H!==null;)u(K,H),H=H.sibling;return null}function g(K,H){for(K=new Map;H!==null;)H.key!==null?K.set(H.key,H):K.set(H.index,H),H=H.sibling;return K}function m(K,H){return K=Jl(K,H),K.index=0,K.sibling=null,K}function w(K,H,J){return K.index=J,o?(J=K.alternate,J!==null?(J=J.index,J<H?(K.flags|=2,H):J):(K.flags|=2,H)):(K.flags|=1048576,H)}function M(K){return o&&K.alternate===null&&(K.flags|=2),K}function j(K,H,J,R){return H===null||H.tag!==6?(H=K1(J,K.mode,R),H.return=K,H):(H=m(H,J),H.return=K,H)}function O(K,H,J,R){var st=J.type;return st===ga?B(K,H,J.props.children,R,J.key):H!==null&&(H.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===Dl&&uP(st)===H.type)?(R=m(H,J.props),R.ref=vc(K,H,J),R.return=K,R):(R=sy(J.type,J.key,J.props,null,K.mode,R),R.ref=vc(K,H,J),R.return=K,R)}function A(K,H,J,R){return H===null||H.tag!==4||H.stateNode.containerInfo!==J.containerInfo||H.stateNode.implementation!==J.implementation?(H=W1(J,K.mode,R),H.return=K,H):(H=m(H,J.children||[]),H.return=K,H)}function B(K,H,J,R,st){return H===null||H.tag!==7?(H=Ku(J,K.mode,R,st),H.return=K,H):(H=m(H,J),H.return=K,H)}function z(K,H,J){if(typeof H=="string"&&H!==""||typeof H=="number")return H=K1(""+H,K.mode,J),H.return=K,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Ag:return J=sy(H.type,H.key,H.props,null,K.mode,J),J.ref=vc(K,null,H),J.return=K,J;case da:return H=W1(H,K.mode,J),H.return=K,H;case Dl:var R=H._init;return z(K,R(H._payload),J)}if(Nc(H)||pc(H))return H=Ku(H,K.mode,J,null),H.return=K,H;Gg(K,H)}return null}function $(K,H,J,R){var st=H!==null?H.key:null;if(typeof J=="string"&&J!==""||typeof J=="number")return st!==null?null:j(K,H,""+J,R);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Ag:return J.key===st?O(K,H,J,R):null;case da:return J.key===st?A(K,H,J,R):null;case Dl:return st=J._init,$(K,H,st(J._payload),R)}if(Nc(J)||pc(J))return st!==null?null:B(K,H,J,R,null);Gg(K,J)}return null}function ht(K,H,J,R,st){if(typeof R=="string"&&R!==""||typeof R=="number")return K=K.get(J)||null,j(H,K,""+R,st);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ag:return K=K.get(R.key===null?J:R.key)||null,O(H,K,R,st);case da:return K=K.get(R.key===null?J:R.key)||null,A(H,K,R,st);case Dl:var dt=R._init;return ht(K,H,J,dt(R._payload),st)}if(Nc(R)||pc(R))return K=K.get(J)||null,B(H,K,R,st,null);Gg(H,R)}return null}function rt(K,H,J,R){for(var st=null,dt=null,Lt=H,xt=H=0,Wt=null;Lt!==null&&xt<J.length;xt++){Lt.index>xt?(Wt=Lt,Lt=null):Wt=Lt.sibling;var ee=$(K,Lt,J[xt],R);if(ee===null){Lt===null&&(Lt=Wt);break}o&&Lt&&ee.alternate===null&&u(K,Lt),H=w(ee,H,xt),dt===null?st=ee:dt.sibling=ee,dt=ee,Lt=Wt}if(xt===J.length)return c(K,Lt),be&&Vu(K,xt),st;if(Lt===null){for(;xt<J.length;xt++)Lt=z(K,J[xt],R),Lt!==null&&(H=w(Lt,H,xt),dt===null?st=Lt:dt.sibling=Lt,dt=Lt);return be&&Vu(K,xt),st}for(Lt=g(K,Lt);xt<J.length;xt++)Wt=ht(Lt,K,xt,J[xt],R),Wt!==null&&(o&&Wt.alternate!==null&&Lt.delete(Wt.key===null?xt:Wt.key),H=w(Wt,H,xt),dt===null?st=Wt:dt.sibling=Wt,dt=Wt);return o&&Lt.forEach(function(nn){return u(K,nn)}),be&&Vu(K,xt),st}function Y(K,H,J,R){var st=pc(J);if(typeof st!="function")throw Error(St(150));if(J=st.call(J),J==null)throw Error(St(151));for(var dt=st=null,Lt=H,xt=H=0,Wt=null,ee=J.next();Lt!==null&&!ee.done;xt++,ee=J.next()){Lt.index>xt?(Wt=Lt,Lt=null):Wt=Lt.sibling;var nn=$(K,Lt,ee.value,R);if(nn===null){Lt===null&&(Lt=Wt);break}o&&Lt&&nn.alternate===null&&u(K,Lt),H=w(nn,H,xt),dt===null?st=nn:dt.sibling=nn,dt=nn,Lt=Wt}if(ee.done)return c(K,Lt),be&&Vu(K,xt),st;if(Lt===null){for(;!ee.done;xt++,ee=J.next())ee=z(K,ee.value,R),ee!==null&&(H=w(ee,H,xt),dt===null?st=ee:dt.sibling=ee,dt=ee);return be&&Vu(K,xt),st}for(Lt=g(K,Lt);!ee.done;xt++,ee=J.next())ee=ht(Lt,K,xt,ee.value,R),ee!==null&&(o&&ee.alternate!==null&&Lt.delete(ee.key===null?xt:ee.key),H=w(ee,H,xt),dt===null?st=ee:dt.sibling=ee,dt=ee);return o&&Lt.forEach(function(jr){return u(K,jr)}),be&&Vu(K,xt),st}function Et(K,H,J,R){if(typeof J=="object"&&J!==null&&J.type===ga&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case Ag:t:{for(var st=J.key,dt=H;dt!==null;){if(dt.key===st){if(st=J.type,st===ga){if(dt.tag===7){c(K,dt.sibling),H=m(dt,J.props.children),H.return=K,K=H;break t}}else if(dt.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===Dl&&uP(st)===dt.type){c(K,dt.sibling),H=m(dt,J.props),H.ref=vc(K,dt,J),H.return=K,K=H;break t}c(K,dt);break}else u(K,dt);dt=dt.sibling}J.type===ga?(H=Ku(J.props.children,K.mode,R,J.key),H.return=K,K=H):(R=sy(J.type,J.key,J.props,null,K.mode,R),R.ref=vc(K,H,J),R.return=K,K=R)}return M(K);case da:t:{for(dt=J.key;H!==null;){if(H.key===dt)if(H.tag===4&&H.stateNode.containerInfo===J.containerInfo&&H.stateNode.implementation===J.implementation){c(K,H.sibling),H=m(H,J.children||[]),H.return=K,K=H;break t}else{c(K,H);break}else u(K,H);H=H.sibling}H=W1(J,K.mode,R),H.return=K,K=H}return M(K);case Dl:return dt=J._init,Et(K,H,dt(J._payload),R)}if(Nc(J))return rt(K,H,J,R);if(pc(J))return Y(K,H,J,R);Gg(K,J)}return typeof J=="string"&&J!==""||typeof J=="number"?(J=""+J,H!==null&&H.tag===6?(c(K,H.sibling),H=m(H,J),H.return=K,K=H):(c(K,H),H=K1(J,K.mode,R),H.return=K,K=H),M(K)):c(K,H)}return Et}var Da=hT(!0),aT=hT(!1),lp={},Ss=eu(lp),Jc=eu(lp),Zc=eu(lp);function Gu(o){if(o===lp)throw Error(St(174));return o}function Dw(o,u){switch(_e(Zc,u),_e(Jc,o),_e(Ss,lp),o=u.nodeType,o){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:yx(null,"");break;default:o=o===8?u.parentNode:u,u=o.namespaceURI||null,o=o.tagName,u=yx(u,o)}Ke(Ss),_e(Ss,u)}function Ra(){Ke(Ss),Ke(Jc),Ke(Zc)}function fT(o){Gu(Zc.current);var u=Gu(Ss.current),c=yx(u,o.type);u!==c&&(_e(Jc,o),_e(Ss,c))}function Rw(o){Jc.current===o&&(Ke(Ss),Ke(Jc))}var li=eu(0);function Ly(o){for(var u=o;u!==null;){if(u.tag===13){var c=u.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(u.flags&128)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var U1=[];function Bw(){for(var o=0;o<U1.length;o++)U1[o]._workInProgressVersionPrimary=null;U1.length=0}var ey=ol.ReactCurrentDispatcher,Y1=ol.ReactCurrentBatchConfig,Ju=0,ui=null,qi=null,fn=null,jy=!1,Oc=!1,Qc=0,HF=0;function Yn(){throw Error(St(321))}function zw(o,u){if(u===null)return!1;for(var c=0;c<u.length&&c<o.length;c++)if(!Yo(o[c],u[c]))return!1;return!0}function Vw(o,u,c,g,m,w){if(Ju=w,ui=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,ey.current=o===null||o.memoizedState===null?KF:WF,o=c(g,m),Oc){w=0;do{if(Oc=!1,Qc=0,25<=w)throw Error(St(301));w+=1,fn=qi=null,u.updateQueue=null,ey.current=$F,o=c(g,m)}while(Oc)}if(ey.current=Ey,u=qi!==null&&qi.next!==null,Ju=0,fn=qi=ui=null,jy=!1,u)throw Error(St(300));return o}function Uw(){var o=Qc!==0;return Qc=0,o}function ms(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?ui.memoizedState=fn=o:fn=fn.next=o,fn}function go(){if(qi===null){var o=ui.alternate;o=o!==null?o.memoizedState:null}else o=qi.next;var u=fn===null?ui.memoizedState:fn.next;if(u!==null)fn=u,qi=o;else{if(o===null)throw Error(St(310));qi=o,o={memoizedState:qi.memoizedState,baseState:qi.baseState,baseQueue:qi.baseQueue,queue:qi.queue,next:null},fn===null?ui.memoizedState=fn=o:fn=fn.next=o}return fn}function qc(o,u){return typeof u=="function"?u(o):u}function H1(o){var u=go(),c=u.queue;if(c===null)throw Error(St(311));c.lastRenderedReducer=o;var g=qi,m=g.baseQueue,w=c.pending;if(w!==null){if(m!==null){var M=m.next;m.next=w.next,w.next=M}g.baseQueue=m=w,c.pending=null}if(m!==null){w=m.next,g=g.baseState;var j=M=null,O=null,A=w;do{var B=A.lane;if((Ju&B)===B)O!==null&&(O=O.next={lane:0,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),g=A.hasEagerState?A.eagerState:o(g,A.action);else{var z={lane:B,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null};O===null?(j=O=z,M=g):O=O.next=z,ui.lanes|=B,Zu|=B}A=A.next}while(A!==null&&A!==w);O===null?M=g:O.next=j,Yo(g,u.memoizedState)||(Pr=!0),u.memoizedState=g,u.baseState=M,u.baseQueue=O,c.lastRenderedState=g}if(o=c.interleaved,o!==null){m=o;do w=m.lane,ui.lanes|=w,Zu|=w,m=m.next;while(m!==o)}else m===null&&(c.lanes=0);return[u.memoizedState,c.dispatch]}function _1(o){var u=go(),c=u.queue;if(c===null)throw Error(St(311));c.lastRenderedReducer=o;var g=c.dispatch,m=c.pending,w=u.memoizedState;if(m!==null){c.pending=null;var M=m=m.next;do w=o(w,M.action),M=M.next;while(M!==m);Yo(w,u.memoizedState)||(Pr=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),c.lastRenderedState=w}return[w,g]}function cT(){}function pT(o,u){var c=ui,g=go(),m=u(),w=!Yo(g.memoizedState,m);if(w&&(g.memoizedState=m,Pr=!0),g=g.queue,Yw(yT.bind(null,c,g,o),[o]),g.getSnapshot!==u||w||fn!==null&&fn.memoizedState.tag&1){if(c.flags|=2048,bc(9,gT.bind(null,c,g,m,u),void 0,null),cn===null)throw Error(St(349));Ju&30||dT(c,u,m)}return m}function dT(o,u,c){o.flags|=16384,o={getSnapshot:u,value:c},u=ui.updateQueue,u===null?(u={lastEffect:null,stores:null},ui.updateQueue=u,u.stores=[o]):(c=u.stores,c===null?u.stores=[o]:c.push(o))}function gT(o,u,c,g){u.value=c,u.getSnapshot=g,mT(u)&&vT(o)}function yT(o,u,c){return c(function(){mT(u)&&vT(o)})}function mT(o){var u=o.getSnapshot;o=o.value;try{var c=u();return!Yo(o,c)}catch{return!0}}function vT(o){var u=nl(o,1);u!==null&&Uo(u,o,1,-1)}function hP(o){var u=ms();return typeof o=="function"&&(o=o()),u.memoizedState=u.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qc,lastRenderedState:o},u.queue=o,o=o.dispatch=XF.bind(null,ui,o),[u.memoizedState,o]}function bc(o,u,c,g){return o={tag:o,create:u,destroy:c,deps:g,next:null},u=ui.updateQueue,u===null?(u={lastEffect:null,stores:null},ui.updateQueue=u,u.lastEffect=o.next=o):(c=u.lastEffect,c===null?u.lastEffect=o.next=o:(g=c.next,c.next=o,o.next=g,u.lastEffect=o)),o}function xT(){return go().memoizedState}function iy(o,u,c,g){var m=ms();ui.flags|=o,m.memoizedState=bc(1|u,c,void 0,g===void 0?null:g)}function Wy(o,u,c,g){var m=go();g=g===void 0?null:g;var w=void 0;if(qi!==null){var M=qi.memoizedState;if(w=M.destroy,g!==null&&zw(g,M.deps)){m.memoizedState=bc(u,c,w,g);return}}ui.flags|=o,m.memoizedState=bc(1|u,c,w,g)}function aP(o,u){return iy(8390656,8,o,u)}function Yw(o,u){return Wy(2048,8,o,u)}function wT(o,u){return Wy(4,2,o,u)}function ST(o,u){return Wy(4,4,o,u)}function MT(o,u){if(typeof u=="function")return o=o(),u(o),function(){u(null)};if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function kT(o,u,c){return c=c!=null?c.concat([o]):null,Wy(4,4,MT.bind(null,u,o),c)}function Hw(){}function NT(o,u){var c=go();u=u===void 0?null:u;var g=c.memoizedState;return g!==null&&u!==null&&zw(u,g[1])?g[0]:(c.memoizedState=[o,u],o)}function PT(o,u){var c=go();u=u===void 0?null:u;var g=c.memoizedState;return g!==null&&u!==null&&zw(u,g[1])?g[0]:(o=o(),c.memoizedState=[o,u],o)}function CT(o,u,c){return Ju&21?(Yo(c,u)||(c=jC(),ui.lanes|=c,Zu|=c,o.baseState=!0),u):(o.baseState&&(o.baseState=!1,Pr=!0),o.memoizedState=c)}function _F(o,u){var c=Ae;Ae=c!==0&&4>c?c:4,o(!0);var g=Y1.transition;Y1.transition={};try{o(!1),u()}finally{Ae=c,Y1.transition=g}}function TT(){return go().memoizedState}function GF(o,u,c){var g=$l(o);if(c={lane:g,action:c,hasEagerState:!1,eagerState:null,next:null},LT(o))jT(u,c);else if(c=oT(o,u,c,g),c!==null){var m=sr();Uo(c,o,g,m),ET(c,u,g)}}function XF(o,u,c){var g=$l(o),m={lane:g,action:c,hasEagerState:!1,eagerState:null,next:null};if(LT(o))jT(u,m);else{var w=o.alternate;if(o.lanes===0&&(w===null||w.lanes===0)&&(w=u.lastRenderedReducer,w!==null))try{var M=u.lastRenderedState,j=w(M,c);if(m.hasEagerState=!0,m.eagerState=j,Yo(j,M)){var O=u.interleaved;O===null?(m.next=m,Aw(u)):(m.next=O.next,O.next=m),u.interleaved=m;return}}catch{}finally{}c=oT(o,u,m,g),c!==null&&(m=sr(),Uo(c,o,g,m),ET(c,u,g))}}function LT(o){var u=o.alternate;return o===ui||u!==null&&u===ui}function jT(o,u){Oc=jy=!0;var c=o.pending;c===null?u.next=u:(u.next=c.next,c.next=u),o.pending=u}function ET(o,u,c){if(c&4194240){var g=u.lanes;g&=o.pendingLanes,c|=g,u.lanes=c,xw(o,c)}}var Ey={readContext:po,useCallback:Yn,useContext:Yn,useEffect:Yn,useImperativeHandle:Yn,useInsertionEffect:Yn,useLayoutEffect:Yn,useMemo:Yn,useReducer:Yn,useRef:Yn,useState:Yn,useDebugValue:Yn,useDeferredValue:Yn,useTransition:Yn,useMutableSource:Yn,useSyncExternalStore:Yn,useId:Yn,unstable_isNewReconciler:!1},KF={readContext:po,useCallback:function(o,u){return ms().memoizedState=[o,u===void 0?null:u],o},useContext:po,useEffect:aP,useImperativeHandle:function(o,u,c){return c=c!=null?c.concat([o]):null,iy(4194308,4,MT.bind(null,u,o),c)},useLayoutEffect:function(o,u){return iy(4194308,4,o,u)},useInsertionEffect:function(o,u){return iy(4,2,o,u)},useMemo:function(o,u){var c=ms();return u=u===void 0?null:u,o=o(),c.memoizedState=[o,u],o},useReducer:function(o,u,c){var g=ms();return u=c!==void 0?c(u):u,g.memoizedState=g.baseState=u,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:u},g.queue=o,o=o.dispatch=GF.bind(null,ui,o),[g.memoizedState,o]},useRef:function(o){var u=ms();return o={current:o},u.memoizedState=o},useState:hP,useDebugValue:Hw,useDeferredValue:function(o){return ms().memoizedState=o},useTransition:function(){var o=hP(!1),u=o[0];return o=_F.bind(null,o[1]),ms().memoizedState=o,[u,o]},useMutableSource:function(){},useSyncExternalStore:function(o,u,c){var g=ui,m=ms();if(be){if(c===void 0)throw Error(St(407));c=c()}else{if(c=u(),cn===null)throw Error(St(349));Ju&30||dT(g,u,c)}m.memoizedState=c;var w={value:c,getSnapshot:u};return m.queue=w,aP(yT.bind(null,g,w,o),[o]),g.flags|=2048,bc(9,gT.bind(null,g,w,c,u),void 0,null),c},useId:function(){var o=ms(),u=cn.identifierPrefix;if(be){var c=qs,g=Qs;c=(g&~(1<<32-Vo(g)-1)).toString(32)+c,u=":"+u+"R"+c,c=Qc++,0<c&&(u+="H"+c.toString(32)),u+=":"}else c=HF++,u=":"+u+"r"+c.toString(32)+":";return o.memoizedState=u},unstable_isNewReconciler:!1},WF={readContext:po,useCallback:NT,useContext:po,useEffect:Yw,useImperativeHandle:kT,useInsertionEffect:wT,useLayoutEffect:ST,useMemo:PT,useReducer:H1,useRef:xT,useState:function(){return H1(qc)},useDebugValue:Hw,useDeferredValue:function(o){var u=go();return CT(u,qi.memoizedState,o)},useTransition:function(){var o=H1(qc)[0],u=go().memoizedState;return[o,u]},useMutableSource:cT,useSyncExternalStore:pT,useId:TT,unstable_isNewReconciler:!1},$F={readContext:po,useCallback:NT,useContext:po,useEffect:Yw,useImperativeHandle:kT,useInsertionEffect:wT,useLayoutEffect:ST,useMemo:PT,useReducer:_1,useRef:xT,useState:function(){return _1(qc)},useDebugValue:Hw,useDeferredValue:function(o){var u=go();return qi===null?u.memoizedState=o:CT(u,qi.memoizedState,o)},useTransition:function(){var o=_1(qc)[0],u=go().memoizedState;return[o,u]},useMutableSource:cT,useSyncExternalStore:pT,useId:TT,unstable_isNewReconciler:!1};function Ba(o,u){try{var c="",g=u;do c+=ME(g),g=g.return;while(g);var m=c}catch(w){m=`
Error generating stack: `+w.message+`
`+w.stack}return{value:o,source:u,stack:m,digest:null}}function G1(o,u,c){return{value:o,source:null,stack:c??null,digest:u??null}}function Vx(o,u){try{console.error(u.value)}catch(c){setTimeout(function(){throw c})}}var JF=typeof WeakMap=="function"?WeakMap:Map;function FT(o,u,c){c=bs(-1,c),c.tag=3,c.payload={element:null};var g=u.value;return c.callback=function(){Oy||(Oy=!0,Jx=g),Vx(o,u)},c}function OT(o,u,c){c=bs(-1,c),c.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var m=u.value;c.payload=function(){return g(m)},c.callback=function(){Vx(o,u)}}var w=o.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(c.callback=function(){Vx(o,u),typeof g!="function"&&(Wl===null?Wl=new Set([this]):Wl.add(this));var M=u.stack;this.componentDidCatch(u.value,{componentStack:M!==null?M:""})}),c}function fP(o,u,c){var g=o.pingCache;if(g===null){g=o.pingCache=new JF;var m=new Set;g.set(u,m)}else m=g.get(u),m===void 0&&(m=new Set,g.set(u,m));m.has(c)||(m.add(c),o=hO.bind(null,o,u,c),u.then(o,o))}function cP(o){do{var u;if((u=o.tag===13)&&(u=o.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return o;o=o.return}while(o!==null);return null}function pP(o,u,c,g,m){return o.mode&1?(o.flags|=65536,o.lanes=m,o):(o===u?o.flags|=65536:(o.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(u=bs(-1,1),u.tag=2,Kl(c,u,1))),c.lanes|=1),o)}var ZF=ol.ReactCurrentOwner,Pr=!1;function or(o,u,c,g){u.child=o===null?aT(u,null,c,g):Da(u,o.child,c,g)}function dP(o,u,c,g,m){c=c.render;var w=u.ref;return Ea(u,m),g=Vw(o,u,c,g,w,m),c=Uw(),o!==null&&!Pr?(u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~m,rl(o,u,m)):(be&&c&&Tw(u),u.flags|=1,or(o,u,g,m),u.child)}function gP(o,u,c,g,m){if(o===null){var w=c.type;return typeof w=="function"&&!Zw(w)&&w.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(u.tag=15,u.type=w,AT(o,u,w,g,m)):(o=sy(c.type,null,g,u,u.mode,m),o.ref=u.ref,o.return=u,u.child=o)}if(w=o.child,!(o.lanes&m)){var M=w.memoizedProps;if(c=c.compare,c=c!==null?c:Xc,c(M,g)&&o.ref===u.ref)return rl(o,u,m)}return u.flags|=1,o=Jl(w,g),o.ref=u.ref,o.return=u,u.child=o}function AT(o,u,c,g,m){if(o!==null){var w=o.memoizedProps;if(Xc(w,g)&&o.ref===u.ref)if(Pr=!1,u.pendingProps=g=w,(o.lanes&m)!==0)o.flags&131072&&(Pr=!0);else return u.lanes=o.lanes,rl(o,u,m)}return Ux(o,u,c,g,m)}function IT(o,u,c){var g=u.pendingProps,m=g.children,w=o!==null?o.memoizedState:null;if(g.mode==="hidden")if(!(u.mode&1))u.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(Pa,Vr),Vr|=c;else{if(!(c&1073741824))return o=w!==null?w.baseLanes|c:c,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:o,cachePool:null,transitions:null},u.updateQueue=null,_e(Pa,Vr),Vr|=o,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=w!==null?w.baseLanes:c,_e(Pa,Vr),Vr|=g}else w!==null?(g=w.baseLanes|c,u.memoizedState=null):g=c,_e(Pa,Vr),Vr|=g;return or(o,u,m,c),u.child}function DT(o,u){var c=u.ref;(o===null&&c!==null||o!==null&&o.ref!==c)&&(u.flags|=512,u.flags|=2097152)}function Ux(o,u,c,g,m){var w=Tr(c)?Wu:Gn.current;return w=Aa(u,w),Ea(u,m),c=Vw(o,u,c,g,w,m),g=Uw(),o!==null&&!Pr?(u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~m,rl(o,u,m)):(be&&g&&Tw(u),u.flags|=1,or(o,u,c,m),u.child)}function yP(o,u,c,g,m){if(Tr(c)){var w=!0;My(u)}else w=!1;if(Ea(u,m),u.stateNode===null)ny(o,u),uT(u,c,g),zx(u,c,g,m),g=!0;else if(o===null){var M=u.stateNode,j=u.memoizedProps;M.props=j;var O=M.context,A=c.contextType;typeof A=="object"&&A!==null?A=po(A):(A=Tr(c)?Wu:Gn.current,A=Aa(u,A));var B=c.getDerivedStateFromProps,z=typeof B=="function"||typeof M.getSnapshotBeforeUpdate=="function";z||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(j!==g||O!==A)&&lP(u,M,g,A),Rl=!1;var $=u.memoizedState;M.state=$,Ty(u,g,M,m),O=u.memoizedState,j!==g||$!==O||Cr.current||Rl?(typeof B=="function"&&(Bx(u,c,B,g),O=u.memoizedState),(j=Rl||sP(u,c,j,g,$,O,A))?(z||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(u.flags|=4194308)):(typeof M.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=O),M.props=g,M.state=O,M.context=A,g=j):(typeof M.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{M=u.stateNode,sT(o,u),j=u.memoizedProps,A=u.type===u.elementType?j:Ro(u.type,j),M.props=A,z=u.pendingProps,$=M.context,O=c.contextType,typeof O=="object"&&O!==null?O=po(O):(O=Tr(c)?Wu:Gn.current,O=Aa(u,O));var ht=c.getDerivedStateFromProps;(B=typeof ht=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(j!==z||$!==O)&&lP(u,M,g,O),Rl=!1,$=u.memoizedState,M.state=$,Ty(u,g,M,m);var rt=u.memoizedState;j!==z||$!==rt||Cr.current||Rl?(typeof ht=="function"&&(Bx(u,c,ht,g),rt=u.memoizedState),(A=Rl||sP(u,c,A,g,$,rt,O)||!1)?(B||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(g,rt,O),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(g,rt,O)),typeof M.componentDidUpdate=="function"&&(u.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof M.componentDidUpdate!="function"||j===o.memoizedProps&&$===o.memoizedState||(u.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||j===o.memoizedProps&&$===o.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=rt),M.props=g,M.state=rt,M.context=O,g=A):(typeof M.componentDidUpdate!="function"||j===o.memoizedProps&&$===o.memoizedState||(u.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||j===o.memoizedProps&&$===o.memoizedState||(u.flags|=1024),g=!1)}return Yx(o,u,c,g,w,m)}function Yx(o,u,c,g,m,w){DT(o,u);var M=(u.flags&128)!==0;if(!g&&!M)return m&&eP(u,c,!1),rl(o,u,w);g=u.stateNode,ZF.current=u;var j=M&&typeof c.getDerivedStateFromError!="function"?null:g.render();return u.flags|=1,o!==null&&M?(u.child=Da(u,o.child,null,w),u.child=Da(u,null,j,w)):or(o,u,j,w),u.memoizedState=g.state,m&&eP(u,c,!0),u.child}function RT(o){var u=o.stateNode;u.pendingContext?tP(o,u.pendingContext,u.pendingContext!==u.context):u.context&&tP(o,u.context,!1),Dw(o,u.containerInfo)}function mP(o,u,c,g,m){return Ia(),jw(m),u.flags|=256,or(o,u,c,g),u.child}var Hx={dehydrated:null,treeContext:null,retryLane:0};function _x(o){return{baseLanes:o,cachePool:null,transitions:null}}function BT(o,u,c){var g=u.pendingProps,m=li.current,w=!1,M=(u.flags&128)!==0,j;if((j=M)||(j=o!==null&&o.memoizedState===null?!1:(m&2)!==0),j?(w=!0,u.flags&=-129):(o===null||o.memoizedState!==null)&&(m|=1),_e(li,m&1),o===null)return Dx(u),o=u.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(u.mode&1?o.data==="$!"?u.lanes=8:u.lanes=1073741824:u.lanes=1,null):(M=g.children,o=g.fallback,w?(g=u.mode,w=u.child,M={mode:"hidden",children:M},!(g&1)&&w!==null?(w.childLanes=0,w.pendingProps=M):w=Zy(M,g,0,null),o=Ku(o,g,c,null),w.return=u,o.return=u,w.sibling=o,u.child=w,u.child.memoizedState=_x(c),u.memoizedState=Hx,o):_w(u,M));if(m=o.memoizedState,m!==null&&(j=m.dehydrated,j!==null))return QF(o,u,M,g,j,m,c);if(w){w=g.fallback,M=u.mode,m=o.child,j=m.sibling;var O={mode:"hidden",children:g.children};return!(M&1)&&u.child!==m?(g=u.child,g.childLanes=0,g.pendingProps=O,u.deletions=null):(g=Jl(m,O),g.subtreeFlags=m.subtreeFlags&14680064),j!==null?w=Jl(j,w):(w=Ku(w,M,c,null),w.flags|=2),w.return=u,g.return=u,g.sibling=w,u.child=g,g=w,w=u.child,M=o.child.memoizedState,M=M===null?_x(c):{baseLanes:M.baseLanes|c,cachePool:null,transitions:M.transitions},w.memoizedState=M,w.childLanes=o.childLanes&~c,u.memoizedState=Hx,g}return w=o.child,o=w.sibling,g=Jl(w,{mode:"visible",children:g.children}),!(u.mode&1)&&(g.lanes=c),g.return=u,g.sibling=null,o!==null&&(c=u.deletions,c===null?(u.deletions=[o],u.flags|=16):c.push(o)),u.child=g,u.memoizedState=null,g}function _w(o,u){return u=Zy({mode:"visible",children:u},o.mode,0,null),u.return=o,o.child=u}function Xg(o,u,c,g){return g!==null&&jw(g),Da(u,o.child,null,c),o=_w(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function QF(o,u,c,g,m,w,M){if(c)return u.flags&256?(u.flags&=-257,g=G1(Error(St(422))),Xg(o,u,M,g)):u.memoizedState!==null?(u.child=o.child,u.flags|=128,null):(w=g.fallback,m=u.mode,g=Zy({mode:"visible",children:g.children},m,0,null),w=Ku(w,m,M,null),w.flags|=2,g.return=u,w.return=u,g.sibling=w,u.child=g,u.mode&1&&Da(u,o.child,null,M),u.child.memoizedState=_x(M),u.memoizedState=Hx,w);if(!(u.mode&1))return Xg(o,u,M,null);if(m.data==="$!"){if(g=m.nextSibling&&m.nextSibling.dataset,g)var j=g.dgst;return g=j,w=Error(St(419)),g=G1(w,g,void 0),Xg(o,u,M,g)}if(j=(M&o.childLanes)!==0,Pr||j){if(g=cn,g!==null){switch(M&-M){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=m&(g.suspendedLanes|M)?0:m,m!==0&&m!==w.retryLane&&(w.retryLane=m,nl(o,m),Uo(g,o,m,-1))}return Jw(),g=G1(Error(St(421))),Xg(o,u,M,g)}return m.data==="$?"?(u.flags|=128,u.child=o.child,u=aO.bind(null,o),m._reactRetry=u,null):(o=w.treeContext,Ur=Xl(m.nextSibling),Yr=u,be=!0,zo=null,o!==null&&(ho[ao++]=Qs,ho[ao++]=qs,ho[ao++]=$u,Qs=o.id,qs=o.overflow,$u=u),u=_w(u,g.children),u.flags|=4096,u)}function vP(o,u,c){o.lanes|=u;var g=o.alternate;g!==null&&(g.lanes|=u),Rx(o.return,u,c)}function X1(o,u,c,g,m){var w=o.memoizedState;w===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:c,tailMode:m}:(w.isBackwards=u,w.rendering=null,w.renderingStartTime=0,w.last=g,w.tail=c,w.tailMode=m)}function zT(o,u,c){var g=u.pendingProps,m=g.revealOrder,w=g.tail;if(or(o,u,g.children,c),g=li.current,g&2)g=g&1|2,u.flags|=128;else{if(o!==null&&o.flags&128)t:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&vP(o,c,u);else if(o.tag===19)vP(o,c,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break t;for(;o.sibling===null;){if(o.return===null||o.return===u)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(_e(li,g),!(u.mode&1))u.memoizedState=null;else switch(m){case"forwards":for(c=u.child,m=null;c!==null;)o=c.alternate,o!==null&&Ly(o)===null&&(m=c),c=c.sibling;c=m,c===null?(m=u.child,u.child=null):(m=c.sibling,c.sibling=null),X1(u,!1,m,c,w);break;case"backwards":for(c=null,m=u.child,u.child=null;m!==null;){if(o=m.alternate,o!==null&&Ly(o)===null){u.child=m;break}o=m.sibling,m.sibling=c,c=m,m=o}X1(u,!0,c,null,w);break;case"together":X1(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function ny(o,u){!(u.mode&1)&&o!==null&&(o.alternate=null,u.alternate=null,u.flags|=2)}function rl(o,u,c){if(o!==null&&(u.dependencies=o.dependencies),Zu|=u.lanes,!(c&u.childLanes))return null;if(o!==null&&u.child!==o.child)throw Error(St(153));if(u.child!==null){for(o=u.child,c=Jl(o,o.pendingProps),u.child=c,c.return=u;o.sibling!==null;)o=o.sibling,c=c.sibling=Jl(o,o.pendingProps),c.return=u;c.sibling=null}return u.child}function qF(o,u,c){switch(u.tag){case 3:RT(u),Ia();break;case 5:fT(u);break;case 1:Tr(u.type)&&My(u);break;case 4:Dw(u,u.stateNode.containerInfo);break;case 10:var g=u.type._context,m=u.memoizedProps.value;_e(Py,g._currentValue),g._currentValue=m;break;case 13:if(g=u.memoizedState,g!==null)return g.dehydrated!==null?(_e(li,li.current&1),u.flags|=128,null):c&u.child.childLanes?BT(o,u,c):(_e(li,li.current&1),o=rl(o,u,c),o!==null?o.sibling:null);_e(li,li.current&1);break;case 19:if(g=(c&u.childLanes)!==0,o.flags&128){if(g)return zT(o,u,c);u.flags|=128}if(m=u.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),_e(li,li.current),g)break;return null;case 22:case 23:return u.lanes=0,IT(o,u,c)}return rl(o,u,c)}var VT,Gx,UT,YT;VT=function(o,u){for(var c=u.child;c!==null;){if(c.tag===5||c.tag===6)o.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return;c=c.return}c.sibling.return=c.return,c=c.sibling}};Gx=function(){};UT=function(o,u,c,g){var m=o.memoizedProps;if(m!==g){o=u.stateNode,Gu(Ss.current);var w=null;switch(c){case"input":m=cx(o,m),g=cx(o,g),w=[];break;case"select":m=hi({},m,{value:void 0}),g=hi({},g,{value:void 0}),w=[];break;case"textarea":m=gx(o,m),g=gx(o,g),w=[];break;default:typeof m.onClick!="function"&&typeof g.onClick=="function"&&(o.onclick=wy)}mx(c,g);var M;c=null;for(A in m)if(!g.hasOwnProperty(A)&&m.hasOwnProperty(A)&&m[A]!=null)if(A==="style"){var j=m[A];for(M in j)j.hasOwnProperty(M)&&(c||(c={}),c[M]="")}else A!=="dangerouslySetInnerHTML"&&A!=="children"&&A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(zc.hasOwnProperty(A)?w||(w=[]):(w=w||[]).push(A,null));for(A in g){var O=g[A];if(j=m!=null?m[A]:void 0,g.hasOwnProperty(A)&&O!==j&&(O!=null||j!=null))if(A==="style")if(j){for(M in j)!j.hasOwnProperty(M)||O&&O.hasOwnProperty(M)||(c||(c={}),c[M]="");for(M in O)O.hasOwnProperty(M)&&j[M]!==O[M]&&(c||(c={}),c[M]=O[M])}else c||(w||(w=[]),w.push(A,c)),c=O;else A==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,j=j?j.__html:void 0,O!=null&&j!==O&&(w=w||[]).push(A,O)):A==="children"?typeof O!="string"&&typeof O!="number"||(w=w||[]).push(A,""+O):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&(zc.hasOwnProperty(A)?(O!=null&&A==="onScroll"&&Xe("scroll",o),w||j===O||(w=[])):(w=w||[]).push(A,O))}c&&(w=w||[]).push("style",c);var A=w;(u.updateQueue=A)&&(u.flags|=4)}};YT=function(o,u,c,g){c!==g&&(u.flags|=4)};function xc(o,u){if(!be)switch(o.tailMode){case"hidden":u=o.tail;for(var c=null;u!==null;)u.alternate!==null&&(c=u),u=u.sibling;c===null?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function Hn(o){var u=o.alternate!==null&&o.alternate.child===o.child,c=0,g=0;if(u)for(var m=o.child;m!==null;)c|=m.lanes|m.childLanes,g|=m.subtreeFlags&14680064,g|=m.flags&14680064,m.return=o,m=m.sibling;else for(m=o.child;m!==null;)c|=m.lanes|m.childLanes,g|=m.subtreeFlags,g|=m.flags,m.return=o,m=m.sibling;return o.subtreeFlags|=g,o.childLanes=c,u}function bF(o,u,c){var g=u.pendingProps;switch(Lw(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(u),null;case 1:return Tr(u.type)&&Sy(),Hn(u),null;case 3:return g=u.stateNode,Ra(),Ke(Cr),Ke(Gn),Bw(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(_g(u)?u.flags|=4:o===null||o.memoizedState.isDehydrated&&!(u.flags&256)||(u.flags|=1024,zo!==null&&(qx(zo),zo=null))),Gx(o,u),Hn(u),null;case 5:Rw(u);var m=Gu(Zc.current);if(c=u.type,o!==null&&u.stateNode!=null)UT(o,u,c,g,m),o.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!g){if(u.stateNode===null)throw Error(St(166));return Hn(u),null}if(o=Gu(Ss.current),_g(u)){g=u.stateNode,c=u.type;var w=u.memoizedProps;switch(g[vs]=u,g[$c]=w,o=(u.mode&1)!==0,c){case"dialog":Xe("cancel",g),Xe("close",g);break;case"iframe":case"object":case"embed":Xe("load",g);break;case"video":case"audio":for(m=0;m<Cc.length;m++)Xe(Cc[m],g);break;case"source":Xe("error",g);break;case"img":case"image":case"link":Xe("error",g),Xe("load",g);break;case"details":Xe("toggle",g);break;case"input":TN(g,w),Xe("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!w.multiple},Xe("invalid",g);break;case"textarea":jN(g,w),Xe("invalid",g)}mx(c,w),m=null;for(var M in w)if(w.hasOwnProperty(M)){var j=w[M];M==="children"?typeof j=="string"?g.textContent!==j&&(w.suppressHydrationWarning!==!0&&Hg(g.textContent,j,o),m=["children",j]):typeof j=="number"&&g.textContent!==""+j&&(w.suppressHydrationWarning!==!0&&Hg(g.textContent,j,o),m=["children",""+j]):zc.hasOwnProperty(M)&&j!=null&&M==="onScroll"&&Xe("scroll",g)}switch(c){case"input":Ig(g),LN(g,w,!0);break;case"textarea":Ig(g),EN(g);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(g.onclick=wy)}g=m,u.updateQueue=g,g!==null&&(u.flags|=4)}else{M=m.nodeType===9?m:m.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=dC(c)),o==="http://www.w3.org/1999/xhtml"?c==="script"?(o=M.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof g.is=="string"?o=M.createElement(c,{is:g.is}):(o=M.createElement(c),c==="select"&&(M=o,g.multiple?M.multiple=!0:g.size&&(M.size=g.size))):o=M.createElementNS(o,c),o[vs]=u,o[$c]=g,VT(o,u,!1,!1),u.stateNode=o;t:{switch(M=vx(c,g),c){case"dialog":Xe("cancel",o),Xe("close",o),m=g;break;case"iframe":case"object":case"embed":Xe("load",o),m=g;break;case"video":case"audio":for(m=0;m<Cc.length;m++)Xe(Cc[m],o);m=g;break;case"source":Xe("error",o),m=g;break;case"img":case"image":case"link":Xe("error",o),Xe("load",o),m=g;break;case"details":Xe("toggle",o),m=g;break;case"input":TN(o,g),m=cx(o,g),Xe("invalid",o);break;case"option":m=g;break;case"select":o._wrapperState={wasMultiple:!!g.multiple},m=hi({},g,{value:void 0}),Xe("invalid",o);break;case"textarea":jN(o,g),m=gx(o,g),Xe("invalid",o);break;default:m=g}mx(c,m),j=m;for(w in j)if(j.hasOwnProperty(w)){var O=j[w];w==="style"?mC(o,O):w==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&gC(o,O)):w==="children"?typeof O=="string"?(c!=="textarea"||O!=="")&&Vc(o,O):typeof O=="number"&&Vc(o,""+O):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(zc.hasOwnProperty(w)?O!=null&&w==="onScroll"&&Xe("scroll",o):O!=null&&pw(o,w,O,M))}switch(c){case"input":Ig(o),LN(o,g,!1);break;case"textarea":Ig(o),EN(o);break;case"option":g.value!=null&&o.setAttribute("value",""+Ql(g.value));break;case"select":o.multiple=!!g.multiple,w=g.value,w!=null?Ca(o,!!g.multiple,w,!1):g.defaultValue!=null&&Ca(o,!!g.multiple,g.defaultValue,!0);break;default:typeof m.onClick=="function"&&(o.onclick=wy)}switch(c){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break t;case"img":g=!0;break t;default:g=!1}}g&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return Hn(u),null;case 6:if(o&&u.stateNode!=null)YT(o,u,o.memoizedProps,g);else{if(typeof g!="string"&&u.stateNode===null)throw Error(St(166));if(c=Gu(Zc.current),Gu(Ss.current),_g(u)){if(g=u.stateNode,c=u.memoizedProps,g[vs]=u,(w=g.nodeValue!==c)&&(o=Yr,o!==null))switch(o.tag){case 3:Hg(g.nodeValue,c,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Hg(g.nodeValue,c,(o.mode&1)!==0)}w&&(u.flags|=4)}else g=(c.nodeType===9?c:c.ownerDocument).createTextNode(g),g[vs]=u,u.stateNode=g}return Hn(u),null;case 13:if(Ke(li),g=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(be&&Ur!==null&&u.mode&1&&!(u.flags&128))rT(),Ia(),u.flags|=98560,w=!1;else if(w=_g(u),g!==null&&g.dehydrated!==null){if(o===null){if(!w)throw Error(St(318));if(w=u.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(St(317));w[vs]=u}else Ia(),!(u.flags&128)&&(u.memoizedState=null),u.flags|=4;Hn(u),w=!1}else zo!==null&&(qx(zo),zo=null),w=!0;if(!w)return u.flags&65536?u:null}return u.flags&128?(u.lanes=c,u):(g=g!==null,g!==(o!==null&&o.memoizedState!==null)&&g&&(u.child.flags|=8192,u.mode&1&&(o===null||li.current&1?bi===0&&(bi=3):Jw())),u.updateQueue!==null&&(u.flags|=4),Hn(u),null);case 4:return Ra(),Gx(o,u),o===null&&Kc(u.stateNode.containerInfo),Hn(u),null;case 10:return Ow(u.type._context),Hn(u),null;case 17:return Tr(u.type)&&Sy(),Hn(u),null;case 19:if(Ke(li),w=u.memoizedState,w===null)return Hn(u),null;if(g=(u.flags&128)!==0,M=w.rendering,M===null)if(g)xc(w,!1);else{if(bi!==0||o!==null&&o.flags&128)for(o=u.child;o!==null;){if(M=Ly(o),M!==null){for(u.flags|=128,xc(w,!1),g=M.updateQueue,g!==null&&(u.updateQueue=g,u.flags|=4),u.subtreeFlags=0,g=c,c=u.child;c!==null;)w=c,o=g,w.flags&=14680066,M=w.alternate,M===null?(w.childLanes=0,w.lanes=o,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=M.childLanes,w.lanes=M.lanes,w.child=M.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=M.memoizedProps,w.memoizedState=M.memoizedState,w.updateQueue=M.updateQueue,w.type=M.type,o=M.dependencies,w.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),c=c.sibling;return _e(li,li.current&1|2),u.child}o=o.sibling}w.tail!==null&&Ii()>za&&(u.flags|=128,g=!0,xc(w,!1),u.lanes=4194304)}else{if(!g)if(o=Ly(M),o!==null){if(u.flags|=128,g=!0,c=o.updateQueue,c!==null&&(u.updateQueue=c,u.flags|=4),xc(w,!0),w.tail===null&&w.tailMode==="hidden"&&!M.alternate&&!be)return Hn(u),null}else 2*Ii()-w.renderingStartTime>za&&c!==1073741824&&(u.flags|=128,g=!0,xc(w,!1),u.lanes=4194304);w.isBackwards?(M.sibling=u.child,u.child=M):(c=w.last,c!==null?c.sibling=M:u.child=M,w.last=M)}return w.tail!==null?(u=w.tail,w.rendering=u,w.tail=u.sibling,w.renderingStartTime=Ii(),u.sibling=null,c=li.current,_e(li,g?c&1|2:c&1),u):(Hn(u),null);case 22:case 23:return $w(),g=u.memoizedState!==null,o!==null&&o.memoizedState!==null!==g&&(u.flags|=8192),g&&u.mode&1?Vr&1073741824&&(Hn(u),u.subtreeFlags&6&&(u.flags|=8192)):Hn(u),null;case 24:return null;case 25:return null}throw Error(St(156,u.tag))}function tO(o,u){switch(Lw(u),u.tag){case 1:return Tr(u.type)&&Sy(),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return Ra(),Ke(Cr),Ke(Gn),Bw(),o=u.flags,o&65536&&!(o&128)?(u.flags=o&-65537|128,u):null;case 5:return Rw(u),null;case 13:if(Ke(li),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(St(340));Ia()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return Ke(li),null;case 4:return Ra(),null;case 10:return Ow(u.type._context),null;case 22:case 23:return $w(),null;case 24:return null;default:return null}}var Kg=!1,_n=!1,eO=typeof WeakSet=="function"?WeakSet:Set,It=null;function Na(o,u){var c=o.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(g){ji(o,u,g)}else c.current=null}function Xx(o,u,c){try{c()}catch(g){ji(o,u,g)}}var xP=!1;function iO(o,u){if(Lx=my,o=XC(),Cw(o)){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else t:{c=(c=o.ownerDocument)&&c.defaultView||window;var g=c.getSelection&&c.getSelection();if(g&&g.rangeCount!==0){c=g.anchorNode;var m=g.anchorOffset,w=g.focusNode;g=g.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break t}var M=0,j=-1,O=-1,A=0,B=0,z=o,$=null;e:for(;;){for(var ht;z!==c||m!==0&&z.nodeType!==3||(j=M+m),z!==w||g!==0&&z.nodeType!==3||(O=M+g),z.nodeType===3&&(M+=z.nodeValue.length),(ht=z.firstChild)!==null;)$=z,z=ht;for(;;){if(z===o)break e;if($===c&&++A===m&&(j=M),$===w&&++B===g&&(O=M),(ht=z.nextSibling)!==null)break;z=$,$=z.parentNode}z=ht}c=j===-1||O===-1?null:{start:j,end:O}}else c=null}c=c||{start:0,end:0}}else c=null;for(jx={focusedElem:o,selectionRange:c},my=!1,It=u;It!==null;)if(u=It,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,It=o;else for(;It!==null;){u=It;try{var rt=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(rt!==null){var Y=rt.memoizedProps,Et=rt.memoizedState,K=u.stateNode,H=K.getSnapshotBeforeUpdate(u.elementType===u.type?Y:Ro(u.type,Y),Et);K.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var J=u.stateNode.containerInfo;J.nodeType===1?J.textContent="":J.nodeType===9&&J.documentElement&&J.removeChild(J.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(St(163))}}catch(R){ji(u,u.return,R)}if(o=u.sibling,o!==null){o.return=u.return,It=o;break}It=u.return}return rt=xP,xP=!1,rt}function Ac(o,u,c){var g=u.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var m=g=g.next;do{if((m.tag&o)===o){var w=m.destroy;m.destroy=void 0,w!==void 0&&Xx(u,c,w)}m=m.next}while(m!==g)}}function $y(o,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var c=u=u.next;do{if((c.tag&o)===o){var g=c.create;c.destroy=g()}c=c.next}while(c!==u)}}function Kx(o){var u=o.ref;if(u!==null){var c=o.stateNode;switch(o.tag){case 5:o=c;break;default:o=c}typeof u=="function"?u(o):u.current=o}}function HT(o){var u=o.alternate;u!==null&&(o.alternate=null,HT(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&(delete u[vs],delete u[$c],delete u[Ox],delete u[zF],delete u[VF])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function _T(o){return o.tag===5||o.tag===3||o.tag===4}function wP(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||_T(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Wx(o,u,c){var g=o.tag;if(g===5||g===6)o=o.stateNode,u?c.nodeType===8?c.parentNode.insertBefore(o,u):c.insertBefore(o,u):(c.nodeType===8?(u=c.parentNode,u.insertBefore(o,c)):(u=c,u.appendChild(o)),c=c._reactRootContainer,c!=null||u.onclick!==null||(u.onclick=wy));else if(g!==4&&(o=o.child,o!==null))for(Wx(o,u,c),o=o.sibling;o!==null;)Wx(o,u,c),o=o.sibling}function $x(o,u,c){var g=o.tag;if(g===5||g===6)o=o.stateNode,u?c.insertBefore(o,u):c.appendChild(o);else if(g!==4&&(o=o.child,o!==null))for($x(o,u,c),o=o.sibling;o!==null;)$x(o,u,c),o=o.sibling}var Tn=null,Bo=!1;function Al(o,u,c){for(c=c.child;c!==null;)GT(o,u,c),c=c.sibling}function GT(o,u,c){if(ws&&typeof ws.onCommitFiberUnmount=="function")try{ws.onCommitFiberUnmount(Uy,c)}catch{}switch(c.tag){case 5:_n||Na(c,u);case 6:var g=Tn,m=Bo;Tn=null,Al(o,u,c),Tn=g,Bo=m,Tn!==null&&(Bo?(o=Tn,c=c.stateNode,o.nodeType===8?o.parentNode.removeChild(c):o.removeChild(c)):Tn.removeChild(c.stateNode));break;case 18:Tn!==null&&(Bo?(o=Tn,c=c.stateNode,o.nodeType===8?z1(o.parentNode,c):o.nodeType===1&&z1(o,c),_c(o)):z1(Tn,c.stateNode));break;case 4:g=Tn,m=Bo,Tn=c.stateNode.containerInfo,Bo=!0,Al(o,u,c),Tn=g,Bo=m;break;case 0:case 11:case 14:case 15:if(!_n&&(g=c.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){m=g=g.next;do{var w=m,M=w.destroy;w=w.tag,M!==void 0&&(w&2||w&4)&&Xx(c,u,M),m=m.next}while(m!==g)}Al(o,u,c);break;case 1:if(!_n&&(Na(c,u),g=c.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=c.memoizedProps,g.state=c.memoizedState,g.componentWillUnmount()}catch(j){ji(c,u,j)}Al(o,u,c);break;case 21:Al(o,u,c);break;case 22:c.mode&1?(_n=(g=_n)||c.memoizedState!==null,Al(o,u,c),_n=g):Al(o,u,c);break;default:Al(o,u,c)}}function SP(o){var u=o.updateQueue;if(u!==null){o.updateQueue=null;var c=o.stateNode;c===null&&(c=o.stateNode=new eO),u.forEach(function(g){var m=fO.bind(null,o,g);c.has(g)||(c.add(g),g.then(m,m))})}}function Do(o,u){var c=u.deletions;if(c!==null)for(var g=0;g<c.length;g++){var m=c[g];try{var w=o,M=u,j=M;t:for(;j!==null;){switch(j.tag){case 5:Tn=j.stateNode,Bo=!1;break t;case 3:Tn=j.stateNode.containerInfo,Bo=!0;break t;case 4:Tn=j.stateNode.containerInfo,Bo=!0;break t}j=j.return}if(Tn===null)throw Error(St(160));GT(w,M,m),Tn=null,Bo=!1;var O=m.alternate;O!==null&&(O.return=null),m.return=null}catch(A){ji(m,u,A)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)XT(u,o),u=u.sibling}function XT(o,u){var c=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Do(u,o),ys(o),g&4){try{Ac(3,o,o.return),$y(3,o)}catch(Y){ji(o,o.return,Y)}try{Ac(5,o,o.return)}catch(Y){ji(o,o.return,Y)}}break;case 1:Do(u,o),ys(o),g&512&&c!==null&&Na(c,c.return);break;case 5:if(Do(u,o),ys(o),g&512&&c!==null&&Na(c,c.return),o.flags&32){var m=o.stateNode;try{Vc(m,"")}catch(Y){ji(o,o.return,Y)}}if(g&4&&(m=o.stateNode,m!=null)){var w=o.memoizedProps,M=c!==null?c.memoizedProps:w,j=o.type,O=o.updateQueue;if(o.updateQueue=null,O!==null)try{j==="input"&&w.type==="radio"&&w.name!=null&&cC(m,w),vx(j,M);var A=vx(j,w);for(M=0;M<O.length;M+=2){var B=O[M],z=O[M+1];B==="style"?mC(m,z):B==="dangerouslySetInnerHTML"?gC(m,z):B==="children"?Vc(m,z):pw(m,B,z,A)}switch(j){case"input":px(m,w);break;case"textarea":pC(m,w);break;case"select":var $=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!w.multiple;var ht=w.value;ht!=null?Ca(m,!!w.multiple,ht,!1):$!==!!w.multiple&&(w.defaultValue!=null?Ca(m,!!w.multiple,w.defaultValue,!0):Ca(m,!!w.multiple,w.multiple?[]:"",!1))}m[$c]=w}catch(Y){ji(o,o.return,Y)}}break;case 6:if(Do(u,o),ys(o),g&4){if(o.stateNode===null)throw Error(St(162));m=o.stateNode,w=o.memoizedProps;try{m.nodeValue=w}catch(Y){ji(o,o.return,Y)}}break;case 3:if(Do(u,o),ys(o),g&4&&c!==null&&c.memoizedState.isDehydrated)try{_c(u.containerInfo)}catch(Y){ji(o,o.return,Y)}break;case 4:Do(u,o),ys(o);break;case 13:Do(u,o),ys(o),m=o.child,m.flags&8192&&(w=m.memoizedState!==null,m.stateNode.isHidden=w,!w||m.alternate!==null&&m.alternate.memoizedState!==null||(Kw=Ii())),g&4&&SP(o);break;case 22:if(B=c!==null&&c.memoizedState!==null,o.mode&1?(_n=(A=_n)||B,Do(u,o),_n=A):Do(u,o),ys(o),g&8192){if(A=o.memoizedState!==null,(o.stateNode.isHidden=A)&&!B&&o.mode&1)for(It=o,B=o.child;B!==null;){for(z=It=B;It!==null;){switch($=It,ht=$.child,$.tag){case 0:case 11:case 14:case 15:Ac(4,$,$.return);break;case 1:Na($,$.return);var rt=$.stateNode;if(typeof rt.componentWillUnmount=="function"){g=$,c=$.return;try{u=g,rt.props=u.memoizedProps,rt.state=u.memoizedState,rt.componentWillUnmount()}catch(Y){ji(g,c,Y)}}break;case 5:Na($,$.return);break;case 22:if($.memoizedState!==null){kP(z);continue}}ht!==null?(ht.return=$,It=ht):kP(z)}B=B.sibling}t:for(B=null,z=o;;){if(z.tag===5){if(B===null){B=z;try{m=z.stateNode,A?(w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(j=z.stateNode,O=z.memoizedProps.style,M=O!=null&&O.hasOwnProperty("display")?O.display:null,j.style.display=yC("display",M))}catch(Y){ji(o,o.return,Y)}}}else if(z.tag===6){if(B===null)try{z.stateNode.nodeValue=A?"":z.memoizedProps}catch(Y){ji(o,o.return,Y)}}else if((z.tag!==22&&z.tag!==23||z.memoizedState===null||z===o)&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===o)break t;for(;z.sibling===null;){if(z.return===null||z.return===o)break t;B===z&&(B=null),z=z.return}B===z&&(B=null),z.sibling.return=z.return,z=z.sibling}}break;case 19:Do(u,o),ys(o),g&4&&SP(o);break;case 21:break;default:Do(u,o),ys(o)}}function ys(o){var u=o.flags;if(u&2){try{t:{for(var c=o.return;c!==null;){if(_T(c)){var g=c;break t}c=c.return}throw Error(St(160))}switch(g.tag){case 5:var m=g.stateNode;g.flags&32&&(Vc(m,""),g.flags&=-33);var w=wP(o);$x(o,w,m);break;case 3:case 4:var M=g.stateNode.containerInfo,j=wP(o);Wx(o,j,M);break;default:throw Error(St(161))}}catch(O){ji(o,o.return,O)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function nO(o,u,c){It=o,KT(o)}function KT(o,u,c){for(var g=(o.mode&1)!==0;It!==null;){var m=It,w=m.child;if(m.tag===22&&g){var M=m.memoizedState!==null||Kg;if(!M){var j=m.alternate,O=j!==null&&j.memoizedState!==null||_n;j=Kg;var A=_n;if(Kg=M,(_n=O)&&!A)for(It=m;It!==null;)M=It,O=M.child,M.tag===22&&M.memoizedState!==null?NP(m):O!==null?(O.return=M,It=O):NP(m);for(;w!==null;)It=w,KT(w),w=w.sibling;It=m,Kg=j,_n=A}MP(o)}else m.subtreeFlags&8772&&w!==null?(w.return=m,It=w):MP(o)}}function MP(o){for(;It!==null;){var u=It;if(u.flags&8772){var c=u.alternate;try{if(u.flags&8772)switch(u.tag){case 0:case 11:case 15:_n||$y(5,u);break;case 1:var g=u.stateNode;if(u.flags&4&&!_n)if(c===null)g.componentDidMount();else{var m=u.elementType===u.type?c.memoizedProps:Ro(u.type,c.memoizedProps);g.componentDidUpdate(m,c.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var w=u.updateQueue;w!==null&&oP(u,w,g);break;case 3:var M=u.updateQueue;if(M!==null){if(c=null,u.child!==null)switch(u.child.tag){case 5:c=u.child.stateNode;break;case 1:c=u.child.stateNode}oP(u,M,c)}break;case 5:var j=u.stateNode;if(c===null&&u.flags&4){c=j;var O=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&c.focus();break;case"img":O.src&&(c.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var A=u.alternate;if(A!==null){var B=A.memoizedState;if(B!==null){var z=B.dehydrated;z!==null&&_c(z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(St(163))}_n||u.flags&512&&Kx(u)}catch($){ji(u,u.return,$)}}if(u===o){It=null;break}if(c=u.sibling,c!==null){c.return=u.return,It=c;break}It=u.return}}function kP(o){for(;It!==null;){var u=It;if(u===o){It=null;break}var c=u.sibling;if(c!==null){c.return=u.return,It=c;break}It=u.return}}function NP(o){for(;It!==null;){var u=It;try{switch(u.tag){case 0:case 11:case 15:var c=u.return;try{$y(4,u)}catch(O){ji(u,c,O)}break;case 1:var g=u.stateNode;if(typeof g.componentDidMount=="function"){var m=u.return;try{g.componentDidMount()}catch(O){ji(u,m,O)}}var w=u.return;try{Kx(u)}catch(O){ji(u,w,O)}break;case 5:var M=u.return;try{Kx(u)}catch(O){ji(u,M,O)}}}catch(O){ji(u,u.return,O)}if(u===o){It=null;break}var j=u.sibling;if(j!==null){j.return=u.return,It=j;break}It=u.return}}var rO=Math.ceil,Fy=ol.ReactCurrentDispatcher,Gw=ol.ReactCurrentOwner,co=ol.ReactCurrentBatchConfig,Me=0,cn=null,_i=null,Ln=0,Vr=0,Pa=eu(0),bi=0,tp=null,Zu=0,Jy=0,Xw=0,Ic=null,Nr=null,Kw=0,za=1/0,Js=null,Oy=!1,Jx=null,Wl=null,Wg=!1,Ul=null,Ay=0,Dc=0,Zx=null,ry=-1,oy=0;function sr(){return Me&6?Ii():ry!==-1?ry:ry=Ii()}function $l(o){return o.mode&1?Me&2&&Ln!==0?Ln&-Ln:YF.transition!==null?(oy===0&&(oy=jC()),oy):(o=Ae,o!==0||(o=window.event,o=o===void 0?16:RC(o.type)),o):1}function Uo(o,u,c,g){if(50<Dc)throw Dc=0,Zx=null,Error(St(185));rp(o,c,g),(!(Me&2)||o!==cn)&&(o===cn&&(!(Me&2)&&(Jy|=c),bi===4&&zl(o,Ln)),Lr(o,g),c===1&&Me===0&&!(u.mode&1)&&(za=Ii()+500,Xy&&iu()))}function Lr(o,u){var c=o.callbackNode;YE(o,u);var g=yy(o,o===cn?Ln:0);if(g===0)c!==null&&AN(c),o.callbackNode=null,o.callbackPriority=0;else if(u=g&-g,o.callbackPriority!==u){if(c!=null&&AN(c),u===1)o.tag===0?UF(PP.bind(null,o)):eT(PP.bind(null,o)),RF(function(){!(Me&6)&&iu()}),c=null;else{switch(EC(g)){case 1:c=vw;break;case 4:c=TC;break;case 16:c=gy;break;case 536870912:c=LC;break;default:c=gy}c=tL(c,WT.bind(null,o))}o.callbackPriority=u,o.callbackNode=c}}function WT(o,u){if(ry=-1,oy=0,Me&6)throw Error(St(327));var c=o.callbackNode;if(Fa()&&o.callbackNode!==c)return null;var g=yy(o,o===cn?Ln:0);if(g===0)return null;if(g&30||g&o.expiredLanes||u)u=Iy(o,g);else{u=g;var m=Me;Me|=2;var w=JT();(cn!==o||Ln!==u)&&(Js=null,za=Ii()+500,Xu(o,u));do try{lO();break}catch(j){$T(o,j)}while(1);Fw(),Fy.current=w,Me=m,_i!==null?u=0:(cn=null,Ln=0,u=bi)}if(u!==0){if(u===2&&(m=kx(o),m!==0&&(g=m,u=Qx(o,m))),u===1)throw c=tp,Xu(o,0),zl(o,g),Lr(o,Ii()),c;if(u===6)zl(o,g);else{if(m=o.current.alternate,!(g&30)&&!oO(m)&&(u=Iy(o,g),u===2&&(w=kx(o),w!==0&&(g=w,u=Qx(o,w))),u===1))throw c=tp,Xu(o,0),zl(o,g),Lr(o,Ii()),c;switch(o.finishedWork=m,o.finishedLanes=g,u){case 0:case 1:throw Error(St(345));case 2:Uu(o,Nr,Js);break;case 3:if(zl(o,g),(g&130023424)===g&&(u=Kw+500-Ii(),10<u)){if(yy(o,0)!==0)break;if(m=o.suspendedLanes,(m&g)!==g){sr(),o.pingedLanes|=o.suspendedLanes&m;break}o.timeoutHandle=Fx(Uu.bind(null,o,Nr,Js),u);break}Uu(o,Nr,Js);break;case 4:if(zl(o,g),(g&4194240)===g)break;for(u=o.eventTimes,m=-1;0<g;){var M=31-Vo(g);w=1<<M,M=u[M],M>m&&(m=M),g&=~w}if(g=m,g=Ii()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*rO(g/1960))-g,10<g){o.timeoutHandle=Fx(Uu.bind(null,o,Nr,Js),g);break}Uu(o,Nr,Js);break;case 5:Uu(o,Nr,Js);break;default:throw Error(St(329))}}}return Lr(o,Ii()),o.callbackNode===c?WT.bind(null,o):null}function Qx(o,u){var c=Ic;return o.current.memoizedState.isDehydrated&&(Xu(o,u).flags|=256),o=Iy(o,u),o!==2&&(u=Nr,Nr=c,u!==null&&qx(u)),o}function qx(o){Nr===null?Nr=o:Nr.push.apply(Nr,o)}function oO(o){for(var u=o;;){if(u.flags&16384){var c=u.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var g=0;g<c.length;g++){var m=c[g],w=m.getSnapshot;m=m.value;try{if(!Yo(w(),m))return!1}catch{return!1}}}if(c=u.child,u.subtreeFlags&16384&&c!==null)c.return=u,u=c;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function zl(o,u){for(u&=~Xw,u&=~Jy,o.suspendedLanes|=u,o.pingedLanes&=~u,o=o.expirationTimes;0<u;){var c=31-Vo(u),g=1<<c;o[c]=-1,u&=~g}}function PP(o){if(Me&6)throw Error(St(327));Fa();var u=yy(o,0);if(!(u&1))return Lr(o,Ii()),null;var c=Iy(o,u);if(o.tag!==0&&c===2){var g=kx(o);g!==0&&(u=g,c=Qx(o,g))}if(c===1)throw c=tp,Xu(o,0),zl(o,u),Lr(o,Ii()),c;if(c===6)throw Error(St(345));return o.finishedWork=o.current.alternate,o.finishedLanes=u,Uu(o,Nr,Js),Lr(o,Ii()),null}function Ww(o,u){var c=Me;Me|=1;try{return o(u)}finally{Me=c,Me===0&&(za=Ii()+500,Xy&&iu())}}function Qu(o){Ul!==null&&Ul.tag===0&&!(Me&6)&&Fa();var u=Me;Me|=1;var c=co.transition,g=Ae;try{if(co.transition=null,Ae=1,o)return o()}finally{Ae=g,co.transition=c,Me=u,!(Me&6)&&iu()}}function $w(){Vr=Pa.current,Ke(Pa)}function Xu(o,u){o.finishedWork=null,o.finishedLanes=0;var c=o.timeoutHandle;if(c!==-1&&(o.timeoutHandle=-1,DF(c)),_i!==null)for(c=_i.return;c!==null;){var g=c;switch(Lw(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Sy();break;case 3:Ra(),Ke(Cr),Ke(Gn),Bw();break;case 5:Rw(g);break;case 4:Ra();break;case 13:Ke(li);break;case 19:Ke(li);break;case 10:Ow(g.type._context);break;case 22:case 23:$w()}c=c.return}if(cn=o,_i=o=Jl(o.current,null),Ln=Vr=u,bi=0,tp=null,Xw=Jy=Zu=0,Nr=Ic=null,_u!==null){for(u=0;u<_u.length;u++)if(c=_u[u],g=c.interleaved,g!==null){c.interleaved=null;var m=g.next,w=c.pending;if(w!==null){var M=w.next;w.next=m,g.next=M}c.pending=g}_u=null}return o}function $T(o,u){do{var c=_i;try{if(Fw(),ey.current=Ey,jy){for(var g=ui.memoizedState;g!==null;){var m=g.queue;m!==null&&(m.pending=null),g=g.next}jy=!1}if(Ju=0,fn=qi=ui=null,Oc=!1,Qc=0,Gw.current=null,c===null||c.return===null){bi=1,tp=u,_i=null;break}t:{var w=o,M=c.return,j=c,O=u;if(u=Ln,j.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var A=O,B=j,z=B.tag;if(!(B.mode&1)&&(z===0||z===11||z===15)){var $=B.alternate;$?(B.updateQueue=$.updateQueue,B.memoizedState=$.memoizedState,B.lanes=$.lanes):(B.updateQueue=null,B.memoizedState=null)}var ht=cP(M);if(ht!==null){ht.flags&=-257,pP(ht,M,j,w,u),ht.mode&1&&fP(w,A,u),u=ht,O=A;var rt=u.updateQueue;if(rt===null){var Y=new Set;Y.add(O),u.updateQueue=Y}else rt.add(O);break t}else{if(!(u&1)){fP(w,A,u),Jw();break t}O=Error(St(426))}}else if(be&&j.mode&1){var Et=cP(M);if(Et!==null){!(Et.flags&65536)&&(Et.flags|=256),pP(Et,M,j,w,u),jw(Ba(O,j));break t}}w=O=Ba(O,j),bi!==4&&(bi=2),Ic===null?Ic=[w]:Ic.push(w),w=M;do{switch(w.tag){case 3:w.flags|=65536,u&=-u,w.lanes|=u;var K=FT(w,O,u);rP(w,K);break t;case 1:j=O;var H=w.type,J=w.stateNode;if(!(w.flags&128)&&(typeof H.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(Wl===null||!Wl.has(J)))){w.flags|=65536,u&=-u,w.lanes|=u;var R=OT(w,j,u);rP(w,R);break t}}w=w.return}while(w!==null)}QT(c)}catch(st){u=st,_i===c&&c!==null&&(_i=c=c.return);continue}break}while(1)}function JT(){var o=Fy.current;return Fy.current=Ey,o===null?Ey:o}function Jw(){(bi===0||bi===3||bi===2)&&(bi=4),cn===null||!(Zu&268435455)&&!(Jy&268435455)||zl(cn,Ln)}function Iy(o,u){var c=Me;Me|=2;var g=JT();(cn!==o||Ln!==u)&&(Js=null,Xu(o,u));do try{sO();break}catch(m){$T(o,m)}while(1);if(Fw(),Me=c,Fy.current=g,_i!==null)throw Error(St(261));return cn=null,Ln=0,bi}function sO(){for(;_i!==null;)ZT(_i)}function lO(){for(;_i!==null&&!OE();)ZT(_i)}function ZT(o){var u=bT(o.alternate,o,Vr);o.memoizedProps=o.pendingProps,u===null?QT(o):_i=u,Gw.current=null}function QT(o){var u=o;do{var c=u.alternate;if(o=u.return,u.flags&32768){if(c=tO(c,u),c!==null){c.flags&=32767,_i=c;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{bi=6,_i=null;return}}else if(c=bF(c,u,Vr),c!==null){_i=c;return}if(u=u.sibling,u!==null){_i=u;return}_i=u=o}while(u!==null);bi===0&&(bi=5)}function Uu(o,u,c){var g=Ae,m=co.transition;try{co.transition=null,Ae=1,uO(o,u,c,g)}finally{co.transition=m,Ae=g}return null}function uO(o,u,c,g){do Fa();while(Ul!==null);if(Me&6)throw Error(St(327));c=o.finishedWork;var m=o.finishedLanes;if(c===null)return null;if(o.finishedWork=null,o.finishedLanes=0,c===o.current)throw Error(St(177));o.callbackNode=null,o.callbackPriority=0;var w=c.lanes|c.childLanes;if(HE(o,w),o===cn&&(_i=cn=null,Ln=0),!(c.subtreeFlags&2064)&&!(c.flags&2064)||Wg||(Wg=!0,tL(gy,function(){return Fa(),null})),w=(c.flags&15990)!==0,c.subtreeFlags&15990||w){w=co.transition,co.transition=null;var M=Ae;Ae=1;var j=Me;Me|=4,Gw.current=null,iO(o,c),XT(c,o),LF(jx),my=!!Lx,jx=Lx=null,o.current=c,nO(c),AE(),Me=j,Ae=M,co.transition=w}else o.current=c;if(Wg&&(Wg=!1,Ul=o,Ay=m),w=o.pendingLanes,w===0&&(Wl=null),RE(c.stateNode),Lr(o,Ii()),u!==null)for(g=o.onRecoverableError,c=0;c<u.length;c++)m=u[c],g(m.value,{componentStack:m.stack,digest:m.digest});if(Oy)throw Oy=!1,o=Jx,Jx=null,o;return Ay&1&&o.tag!==0&&Fa(),w=o.pendingLanes,w&1?o===Zx?Dc++:(Dc=0,Zx=o):Dc=0,iu(),null}function Fa(){if(Ul!==null){var o=EC(Ay),u=co.transition,c=Ae;try{if(co.transition=null,Ae=16>o?16:o,Ul===null)var g=!1;else{if(o=Ul,Ul=null,Ay=0,Me&6)throw Error(St(331));var m=Me;for(Me|=4,It=o.current;It!==null;){var w=It,M=w.child;if(It.flags&16){var j=w.deletions;if(j!==null){for(var O=0;O<j.length;O++){var A=j[O];for(It=A;It!==null;){var B=It;switch(B.tag){case 0:case 11:case 15:Ac(8,B,w)}var z=B.child;if(z!==null)z.return=B,It=z;else for(;It!==null;){B=It;var $=B.sibling,ht=B.return;if(HT(B),B===A){It=null;break}if($!==null){$.return=ht,It=$;break}It=ht}}}var rt=w.alternate;if(rt!==null){var Y=rt.child;if(Y!==null){rt.child=null;do{var Et=Y.sibling;Y.sibling=null,Y=Et}while(Y!==null)}}It=w}}if(w.subtreeFlags&2064&&M!==null)M.return=w,It=M;else t:for(;It!==null;){if(w=It,w.flags&2048)switch(w.tag){case 0:case 11:case 15:Ac(9,w,w.return)}var K=w.sibling;if(K!==null){K.return=w.return,It=K;break t}It=w.return}}var H=o.current;for(It=H;It!==null;){M=It;var J=M.child;if(M.subtreeFlags&2064&&J!==null)J.return=M,It=J;else t:for(M=H;It!==null;){if(j=It,j.flags&2048)try{switch(j.tag){case 0:case 11:case 15:$y(9,j)}}catch(st){ji(j,j.return,st)}if(j===M){It=null;break t}var R=j.sibling;if(R!==null){R.return=j.return,It=R;break t}It=j.return}}if(Me=m,iu(),ws&&typeof ws.onPostCommitFiberRoot=="function")try{ws.onPostCommitFiberRoot(Uy,o)}catch{}g=!0}return g}finally{Ae=c,co.transition=u}}return!1}function CP(o,u,c){u=Ba(c,u),u=FT(o,u,1),o=Kl(o,u,1),u=sr(),o!==null&&(rp(o,1,u),Lr(o,u))}function ji(o,u,c){if(o.tag===3)CP(o,o,c);else for(;u!==null;){if(u.tag===3){CP(u,o,c);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Wl===null||!Wl.has(g))){o=Ba(c,o),o=OT(u,o,1),u=Kl(u,o,1),o=sr(),u!==null&&(rp(u,1,o),Lr(u,o));break}}u=u.return}}function hO(o,u,c){var g=o.pingCache;g!==null&&g.delete(u),u=sr(),o.pingedLanes|=o.suspendedLanes&c,cn===o&&(Ln&c)===c&&(bi===4||bi===3&&(Ln&130023424)===Ln&&500>Ii()-Kw?Xu(o,0):Xw|=c),Lr(o,u)}function qT(o,u){u===0&&(o.mode&1?(u=Bg,Bg<<=1,!(Bg&130023424)&&(Bg=4194304)):u=1);var c=sr();o=nl(o,u),o!==null&&(rp(o,u,c),Lr(o,c))}function aO(o){var u=o.memoizedState,c=0;u!==null&&(c=u.retryLane),qT(o,c)}function fO(o,u){var c=0;switch(o.tag){case 13:var g=o.stateNode,m=o.memoizedState;m!==null&&(c=m.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(St(314))}g!==null&&g.delete(u),qT(o,c)}var bT;bT=function(o,u,c){if(o!==null)if(o.memoizedProps!==u.pendingProps||Cr.current)Pr=!0;else{if(!(o.lanes&c)&&!(u.flags&128))return Pr=!1,qF(o,u,c);Pr=!!(o.flags&131072)}else Pr=!1,be&&u.flags&1048576&&iT(u,Ny,u.index);switch(u.lanes=0,u.tag){case 2:var g=u.type;ny(o,u),o=u.pendingProps;var m=Aa(u,Gn.current);Ea(u,c),m=Vw(null,u,g,o,m,c);var w=Uw();return u.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Tr(g)?(w=!0,My(u)):w=!1,u.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Iw(u),m.updater=Ky,u.stateNode=m,m._reactInternals=u,zx(u,g,o,c),u=Yx(null,u,g,!0,w,c)):(u.tag=0,be&&w&&Tw(u),or(null,u,m,c),u=u.child),u;case 16:g=u.elementType;t:{switch(ny(o,u),o=u.pendingProps,m=g._init,g=m(g._payload),u.type=g,m=u.tag=pO(g),o=Ro(g,o),m){case 0:u=Ux(null,u,g,o,c);break t;case 1:u=yP(null,u,g,o,c);break t;case 11:u=dP(null,u,g,o,c);break t;case 14:u=gP(null,u,g,Ro(g.type,o),c);break t}throw Error(St(306,g,""))}return u;case 0:return g=u.type,m=u.pendingProps,m=u.elementType===g?m:Ro(g,m),Ux(o,u,g,m,c);case 1:return g=u.type,m=u.pendingProps,m=u.elementType===g?m:Ro(g,m),yP(o,u,g,m,c);case 3:t:{if(RT(u),o===null)throw Error(St(387));g=u.pendingProps,w=u.memoizedState,m=w.element,sT(o,u),Ty(u,g,null,c);var M=u.memoizedState;if(g=M.element,w.isDehydrated)if(w={element:g,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},u.updateQueue.baseState=w,u.memoizedState=w,u.flags&256){m=Ba(Error(St(423)),u),u=mP(o,u,g,c,m);break t}else if(g!==m){m=Ba(Error(St(424)),u),u=mP(o,u,g,c,m);break t}else for(Ur=Xl(u.stateNode.containerInfo.firstChild),Yr=u,be=!0,zo=null,c=aT(u,null,g,c),u.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ia(),g===m){u=rl(o,u,c);break t}or(o,u,g,c)}u=u.child}return u;case 5:return fT(u),o===null&&Dx(u),g=u.type,m=u.pendingProps,w=o!==null?o.memoizedProps:null,M=m.children,Ex(g,m)?M=null:w!==null&&Ex(g,w)&&(u.flags|=32),DT(o,u),or(o,u,M,c),u.child;case 6:return o===null&&Dx(u),null;case 13:return BT(o,u,c);case 4:return Dw(u,u.stateNode.containerInfo),g=u.pendingProps,o===null?u.child=Da(u,null,g,c):or(o,u,g,c),u.child;case 11:return g=u.type,m=u.pendingProps,m=u.elementType===g?m:Ro(g,m),dP(o,u,g,m,c);case 7:return or(o,u,u.pendingProps,c),u.child;case 8:return or(o,u,u.pendingProps.children,c),u.child;case 12:return or(o,u,u.pendingProps.children,c),u.child;case 10:t:{if(g=u.type._context,m=u.pendingProps,w=u.memoizedProps,M=m.value,_e(Py,g._currentValue),g._currentValue=M,w!==null)if(Yo(w.value,M)){if(w.children===m.children&&!Cr.current){u=rl(o,u,c);break t}}else for(w=u.child,w!==null&&(w.return=u);w!==null;){var j=w.dependencies;if(j!==null){M=w.child;for(var O=j.firstContext;O!==null;){if(O.context===g){if(w.tag===1){O=bs(-1,c&-c),O.tag=2;var A=w.updateQueue;if(A!==null){A=A.shared;var B=A.pending;B===null?O.next=O:(O.next=B.next,B.next=O),A.pending=O}}w.lanes|=c,O=w.alternate,O!==null&&(O.lanes|=c),Rx(w.return,c,u),j.lanes|=c;break}O=O.next}}else if(w.tag===10)M=w.type===u.type?null:w.child;else if(w.tag===18){if(M=w.return,M===null)throw Error(St(341));M.lanes|=c,j=M.alternate,j!==null&&(j.lanes|=c),Rx(M,c,u),M=w.sibling}else M=w.child;if(M!==null)M.return=w;else for(M=w;M!==null;){if(M===u){M=null;break}if(w=M.sibling,w!==null){w.return=M.return,M=w;break}M=M.return}w=M}or(o,u,m.children,c),u=u.child}return u;case 9:return m=u.type,g=u.pendingProps.children,Ea(u,c),m=po(m),g=g(m),u.flags|=1,or(o,u,g,c),u.child;case 14:return g=u.type,m=Ro(g,u.pendingProps),m=Ro(g.type,m),gP(o,u,g,m,c);case 15:return AT(o,u,u.type,u.pendingProps,c);case 17:return g=u.type,m=u.pendingProps,m=u.elementType===g?m:Ro(g,m),ny(o,u),u.tag=1,Tr(g)?(o=!0,My(u)):o=!1,Ea(u,c),uT(u,g,m),zx(u,g,m,c),Yx(null,u,g,!0,o,c);case 19:return zT(o,u,c);case 22:return IT(o,u,c)}throw Error(St(156,u.tag))};function tL(o,u){return CC(o,u)}function cO(o,u,c,g){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fo(o,u,c,g){return new cO(o,u,c,g)}function Zw(o){return o=o.prototype,!(!o||!o.isReactComponent)}function pO(o){if(typeof o=="function")return Zw(o)?1:0;if(o!=null){if(o=o.$$typeof,o===gw)return 11;if(o===yw)return 14}return 2}function Jl(o,u){var c=o.alternate;return c===null?(c=fo(o.tag,u,o.key,o.mode),c.elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=u,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=o.flags&14680064,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,u=o.dependencies,c.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c}function sy(o,u,c,g,m,w){var M=2;if(g=o,typeof o=="function")Zw(o)&&(M=1);else if(typeof o=="string")M=5;else t:switch(o){case ga:return Ku(c.children,m,w,u);case dw:M=8,m|=8;break;case ux:return o=fo(12,c,u,m|2),o.elementType=ux,o.lanes=w,o;case hx:return o=fo(13,c,u,m),o.elementType=hx,o.lanes=w,o;case ax:return o=fo(19,c,u,m),o.elementType=ax,o.lanes=w,o;case hC:return Zy(c,m,w,u);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case lC:M=10;break t;case uC:M=9;break t;case gw:M=11;break t;case yw:M=14;break t;case Dl:M=16,g=null;break t}throw Error(St(130,o==null?o:typeof o,""))}return u=fo(M,c,u,m),u.elementType=o,u.type=g,u.lanes=w,u}function Ku(o,u,c,g){return o=fo(7,o,g,u),o.lanes=c,o}function Zy(o,u,c,g){return o=fo(22,o,g,u),o.elementType=hC,o.lanes=c,o.stateNode={isHidden:!1},o}function K1(o,u,c){return o=fo(6,o,null,u),o.lanes=c,o}function W1(o,u,c){return u=fo(4,o.children!==null?o.children:[],o.key,u),u.lanes=c,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}function dO(o,u,c,g,m){this.tag=u,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=T1(0),this.expirationTimes=T1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=T1(0),this.identifierPrefix=g,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Qw(o,u,c,g,m,w,M,j,O){return o=new dO(o,u,c,j,O),u===1?(u=1,w===!0&&(u|=8)):u=0,w=fo(3,null,null,u),o.current=w,w.stateNode=o,w.memoizedState={element:g,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Iw(w),o}function gO(o,u,c){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:da,key:g==null?null:""+g,children:o,containerInfo:u,implementation:c}}function eL(o){if(!o)return ql;o=o._reactInternals;t:{if(bu(o)!==o||o.tag!==1)throw Error(St(170));var u=o;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(Tr(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(u!==null);throw Error(St(171))}if(o.tag===1){var c=o.type;if(Tr(c))return tT(o,c,u)}return u}function iL(o,u,c,g,m,w,M,j,O){return o=Qw(c,g,!0,o,m,w,M,j,O),o.context=eL(null),c=o.current,g=sr(),m=$l(c),w=bs(g,m),w.callback=u??null,Kl(c,w,m),o.current.lanes=m,rp(o,m,g),Lr(o,g),o}function Qy(o,u,c,g){var m=u.current,w=sr(),M=$l(m);return c=eL(c),u.context===null?u.context=c:u.pendingContext=c,u=bs(w,M),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=Kl(m,u,M),o!==null&&(Uo(o,m,M,w),ty(o,m,M)),M}function Dy(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function TP(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var c=o.retryLane;o.retryLane=c!==0&&c<u?c:u}}function qw(o,u){TP(o,u),(o=o.alternate)&&TP(o,u)}function yO(){return null}var nL=typeof reportError=="function"?reportError:function(o){console.error(o)};function bw(o){this._internalRoot=o}qy.prototype.render=bw.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(St(409));Qy(o,u,null,null)};qy.prototype.unmount=bw.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;Qu(function(){Qy(null,o,null,null)}),u[il]=null}};function qy(o){this._internalRoot=o}qy.prototype.unstable_scheduleHydration=function(o){if(o){var u=AC();o={blockedOn:null,target:o,priority:u};for(var c=0;c<Bl.length&&u!==0&&u<Bl[c].priority;c++);Bl.splice(c,0,o),c===0&&DC(o)}};function tS(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function by(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function LP(){}function mO(o,u,c,g,m){if(m){if(typeof g=="function"){var w=g;g=function(){var A=Dy(M);w.call(A)}}var M=iL(u,g,o,0,null,!1,!1,"",LP);return o._reactRootContainer=M,o[il]=M.current,Kc(o.nodeType===8?o.parentNode:o),Qu(),M}for(;m=o.lastChild;)o.removeChild(m);if(typeof g=="function"){var j=g;g=function(){var A=Dy(O);j.call(A)}}var O=Qw(o,0,!1,null,null,!1,!1,"",LP);return o._reactRootContainer=O,o[il]=O.current,Kc(o.nodeType===8?o.parentNode:o),Qu(function(){Qy(u,O,c,g)}),O}function t0(o,u,c,g,m){var w=c._reactRootContainer;if(w){var M=w;if(typeof m=="function"){var j=m;m=function(){var O=Dy(M);j.call(O)}}Qy(u,M,o,m)}else M=mO(c,u,o,m,g);return Dy(M)}FC=function(o){switch(o.tag){case 3:var u=o.stateNode;if(u.current.memoizedState.isDehydrated){var c=Pc(u.pendingLanes);c!==0&&(xw(u,c|1),Lr(u,Ii()),!(Me&6)&&(za=Ii()+500,iu()))}break;case 13:Qu(function(){var g=nl(o,1);if(g!==null){var m=sr();Uo(g,o,1,m)}}),qw(o,1)}};ww=function(o){if(o.tag===13){var u=nl(o,134217728);if(u!==null){var c=sr();Uo(u,o,134217728,c)}qw(o,134217728)}};OC=function(o){if(o.tag===13){var u=$l(o),c=nl(o,u);if(c!==null){var g=sr();Uo(c,o,u,g)}qw(o,u)}};AC=function(){return Ae};IC=function(o,u){var c=Ae;try{return Ae=o,u()}finally{Ae=c}};wx=function(o,u,c){switch(u){case"input":if(px(o,c),u=c.name,c.type==="radio"&&u!=null){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<c.length;u++){var g=c[u];if(g!==o&&g.form===o.form){var m=Gy(g);if(!m)throw Error(St(90));fC(g),px(g,m)}}}break;case"textarea":pC(o,c);break;case"select":u=c.value,u!=null&&Ca(o,!!c.multiple,u,!1)}};wC=Ww;SC=Qu;var vO={usingClientEntryPoint:!1,Events:[sp,xa,Gy,vC,xC,Ww]},wc={findFiberByHostInstance:Hu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},xO={bundleType:wc.bundleType,version:wc.version,rendererPackageName:wc.rendererPackageName,rendererConfig:wc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ol.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=NC(o),o===null?null:o.stateNode},findFiberByHostInstance:wc.findFiberByHostInstance||yO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$g.isDisabled&&$g.supportsFiber)try{Uy=$g.inject(xO),ws=$g}catch{}}_r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vO;_r.createPortal=function(o,u){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tS(u))throw Error(St(200));return gO(o,u,null,c)};_r.createRoot=function(o,u){if(!tS(o))throw Error(St(299));var c=!1,g="",m=nL;return u!=null&&(u.unstable_strictMode===!0&&(c=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onRecoverableError!==void 0&&(m=u.onRecoverableError)),u=Qw(o,1,!1,null,null,c,!1,g,m),o[il]=u.current,Kc(o.nodeType===8?o.parentNode:o),new bw(u)};_r.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(St(188)):(o=Object.keys(o).join(","),Error(St(268,o)));return o=NC(u),o=o===null?null:o.stateNode,o};_r.flushSync=function(o){return Qu(o)};_r.hydrate=function(o,u,c){if(!by(u))throw Error(St(200));return t0(null,o,u,!0,c)};_r.hydrateRoot=function(o,u,c){if(!tS(o))throw Error(St(405));var g=c!=null&&c.hydratedSources||null,m=!1,w="",M=nL;if(c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(M=c.onRecoverableError)),u=iL(u,null,o,1,c??null,m,!1,w,M),o[il]=u.current,Kc(o),g)for(o=0;o<g.length;o++)c=g[o],m=c._getVersion,m=m(c._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[c,m]:u.mutableSourceEagerHydrationData.push(c,m);return new qy(u)};_r.render=function(o,u,c){if(!by(u))throw Error(St(200));return t0(null,o,u,!1,c)};_r.unmountComponentAtNode=function(o){if(!by(o))throw Error(St(40));return o._reactRootContainer?(Qu(function(){t0(null,null,o,!1,function(){o._reactRootContainer=null,o[il]=null})}),!0):!1};_r.unstable_batchedUpdates=Ww;_r.unstable_renderSubtreeIntoContainer=function(o,u,c,g){if(!by(c))throw Error(St(200));if(o==null||o._reactInternals===void 0)throw Error(St(38));return t0(o,u,c,!1,g)};_r.version="18.2.0-next-9e3b772b8-20220608";(function(o){function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(c){console.error(c)}}u(),o.exports=_r})(yE);var jP=ox;rx.createRoot=jP.createRoot,rx.hydrateRoot=jP.hydrateRoot;/**
 * @remix-run/router v1.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ep(){return ep=Object.assign?Object.assign.bind():function(o){for(var u=1;u<arguments.length;u++){var c=arguments[u];for(var g in c)Object.prototype.hasOwnProperty.call(c,g)&&(o[g]=c[g])}return o},ep.apply(this,arguments)}var Yl;(function(o){o.Pop="POP",o.Push="PUSH",o.Replace="REPLACE"})(Yl||(Yl={}));const EP="popstate";function wO(o){o===void 0&&(o={});function u(g,m){let{pathname:w,search:M,hash:j}=g.location;return bx("",{pathname:w,search:M,hash:j},m.state&&m.state.usr||null,m.state&&m.state.key||"default")}function c(g,m){return typeof m=="string"?m:Ry(m)}return MO(u,c,null,o)}function tn(o,u){if(o===!1||o===null||typeof o>"u")throw new Error(u)}function eS(o,u){if(!o){typeof console<"u"&&console.warn(u);try{throw new Error(u)}catch{}}}function SO(){return Math.random().toString(36).substr(2,8)}function FP(o,u){return{usr:o.state,key:o.key,idx:u}}function bx(o,u,c,g){return c===void 0&&(c=null),ep({pathname:typeof o=="string"?o:o.pathname,search:"",hash:""},typeof u=="string"?_a(u):u,{state:c,key:u&&u.key||g||SO()})}function Ry(o){let{pathname:u="/",search:c="",hash:g=""}=o;return c&&c!=="?"&&(u+=c.charAt(0)==="?"?c:"?"+c),g&&g!=="#"&&(u+=g.charAt(0)==="#"?g:"#"+g),u}function _a(o){let u={};if(o){let c=o.indexOf("#");c>=0&&(u.hash=o.substr(c),o=o.substr(0,c));let g=o.indexOf("?");g>=0&&(u.search=o.substr(g),o=o.substr(0,g)),o&&(u.pathname=o)}return u}function MO(o,u,c,g){g===void 0&&(g={});let{window:m=document.defaultView,v5Compat:w=!1}=g,M=m.history,j=Yl.Pop,O=null,A=B();A==null&&(A=0,M.replaceState(ep({},M.state,{idx:A}),""));function B(){return(M.state||{idx:null}).idx}function z(){j=Yl.Pop;let Et=B(),K=Et==null?null:Et-A;A=Et,O&&O({action:j,location:Y.location,delta:K})}function $(Et,K){j=Yl.Push;let H=bx(Y.location,Et,K);c&&c(H,Et),A=B()+1;let J=FP(H,A),R=Y.createHref(H);try{M.pushState(J,"",R)}catch{m.location.assign(R)}w&&O&&O({action:j,location:Y.location,delta:1})}function ht(Et,K){j=Yl.Replace;let H=bx(Y.location,Et,K);c&&c(H,Et),A=B();let J=FP(H,A),R=Y.createHref(H);M.replaceState(J,"",R),w&&O&&O({action:j,location:Y.location,delta:0})}function rt(Et){let K=m.location.origin!=="null"?m.location.origin:m.location.href,H=typeof Et=="string"?Et:Ry(Et);return tn(K,"No window.location.(origin|href) available to create URL for href: "+H),new URL(H,K)}let Y={get action(){return j},get location(){return o(m,M)},listen(Et){if(O)throw new Error("A history only accepts one active listener");return m.addEventListener(EP,z),O=Et,()=>{m.removeEventListener(EP,z),O=null}},createHref(Et){return u(m,Et)},createURL:rt,encodeLocation(Et){let K=rt(Et);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:$,replace:ht,go(Et){return M.go(Et)}};return Y}var OP;(function(o){o.data="data",o.deferred="deferred",o.redirect="redirect",o.error="error"})(OP||(OP={}));function kO(o,u,c){c===void 0&&(c="/");let g=typeof u=="string"?_a(u):u,m=iS(g.pathname||"/",c);if(m==null)return null;let w=rL(o);NO(w);let M=null;for(let j=0;M==null&&j<w.length;++j)M=AO(w[j],RO(m));return M}function rL(o,u,c,g){u===void 0&&(u=[]),c===void 0&&(c=[]),g===void 0&&(g="");let m=(w,M,j)=>{let O={relativePath:j===void 0?w.path||"":j,caseSensitive:w.caseSensitive===!0,childrenIndex:M,route:w};O.relativePath.startsWith("/")&&(tn(O.relativePath.startsWith(g),'Absolute route path "'+O.relativePath+'" nested under path '+('"'+g+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),O.relativePath=O.relativePath.slice(g.length));let A=Zl([g,O.relativePath]),B=c.concat(O);w.children&&w.children.length>0&&(tn(w.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+A+'".')),rL(w.children,u,B,A)),!(w.path==null&&!w.index)&&u.push({path:A,score:FO(A,w.index),routesMeta:B})};return o.forEach((w,M)=>{var j;if(w.path===""||!((j=w.path)!=null&&j.includes("?")))m(w,M);else for(let O of oL(w.path))m(w,M,O)}),u}function oL(o){let u=o.split("/");if(u.length===0)return[];let[c,...g]=u,m=c.endsWith("?"),w=c.replace(/\?$/,"");if(g.length===0)return m?[w,""]:[w];let M=oL(g.join("/")),j=[];return j.push(...M.map(O=>O===""?w:[w,O].join("/"))),m&&j.push(...M),j.map(O=>o.startsWith("/")&&O===""?"/":O)}function NO(o){o.sort((u,c)=>u.score!==c.score?c.score-u.score:OO(u.routesMeta.map(g=>g.childrenIndex),c.routesMeta.map(g=>g.childrenIndex)))}const PO=/^:\w+$/,CO=3,TO=2,LO=1,jO=10,EO=-2,AP=o=>o==="*";function FO(o,u){let c=o.split("/"),g=c.length;return c.some(AP)&&(g+=EO),u&&(g+=TO),c.filter(m=>!AP(m)).reduce((m,w)=>m+(PO.test(w)?CO:w===""?LO:jO),g)}function OO(o,u){return o.length===u.length&&o.slice(0,-1).every((g,m)=>g===u[m])?o[o.length-1]-u[u.length-1]:0}function AO(o,u){let{routesMeta:c}=o,g={},m="/",w=[];for(let M=0;M<c.length;++M){let j=c[M],O=M===c.length-1,A=m==="/"?u:u.slice(m.length)||"/",B=IO({path:j.relativePath,caseSensitive:j.caseSensitive,end:O},A);if(!B)return null;Object.assign(g,B.params);let z=j.route;w.push({params:g,pathname:Zl([m,B.pathname]),pathnameBase:UO(Zl([m,B.pathnameBase])),route:z}),B.pathnameBase!=="/"&&(m=Zl([m,B.pathnameBase]))}return w}function IO(o,u){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[c,g]=DO(o.path,o.caseSensitive,o.end),m=u.match(c);if(!m)return null;let w=m[0],M=w.replace(/(.)\/+$/,"$1"),j=m.slice(1);return{params:g.reduce((A,B,z)=>{if(B==="*"){let $=j[z]||"";M=w.slice(0,w.length-$.length).replace(/(.)\/+$/,"$1")}return A[B]=BO(j[z]||"",B),A},{}),pathname:w,pathnameBase:M,pattern:o}}function DO(o,u,c){u===void 0&&(u=!1),c===void 0&&(c=!0),eS(o==="*"||!o.endsWith("*")||o.endsWith("/*"),'Route path "'+o+'" will be treated as if it were '+('"'+o.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+o.replace(/\*$/,"/*")+'".'));let g=[],m="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(M,j)=>(g.push(j),"/([^\\/]+)"));return o.endsWith("*")?(g.push("*"),m+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):c?m+="\\/*$":o!==""&&o!=="/"&&(m+="(?:(?=\\/|$))"),[new RegExp(m,u?void 0:"i"),g]}function RO(o){try{return decodeURI(o)}catch(u){return eS(!1,'The URL path "'+o+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+u+").")),o}}function BO(o,u){try{return decodeURIComponent(o)}catch(c){return eS(!1,'The value for the URL param "'+u+'" will not be decoded because'+(' the string "'+o+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+c+").")),o}}function iS(o,u){if(u==="/")return o;if(!o.toLowerCase().startsWith(u.toLowerCase()))return null;let c=u.endsWith("/")?u.length-1:u.length,g=o.charAt(c);return g&&g!=="/"?null:o.slice(c)||"/"}function zO(o,u){u===void 0&&(u="/");let{pathname:c,search:g="",hash:m=""}=typeof o=="string"?_a(o):o;return{pathname:c?c.startsWith("/")?c:VO(c,u):u,search:YO(g),hash:HO(m)}}function VO(o,u){let c=u.replace(/\/+$/,"").split("/");return o.split("/").forEach(m=>{m===".."?c.length>1&&c.pop():m!=="."&&c.push(m)}),c.length>1?c.join("/"):"/"}function $1(o,u,c,g){return"Cannot include a '"+o+"' character in a manually specified "+("`to."+u+"` field ["+JSON.stringify(g)+"].  Please separate it out to the ")+("`to."+c+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function sL(o){return o.filter((u,c)=>c===0||u.route.path&&u.route.path.length>0)}function lL(o,u,c,g){g===void 0&&(g=!1);let m;typeof o=="string"?m=_a(o):(m=ep({},o),tn(!m.pathname||!m.pathname.includes("?"),$1("?","pathname","search",m)),tn(!m.pathname||!m.pathname.includes("#"),$1("#","pathname","hash",m)),tn(!m.search||!m.search.includes("#"),$1("#","search","hash",m)));let w=o===""||m.pathname==="",M=w?"/":m.pathname,j;if(g||M==null)j=c;else{let z=u.length-1;if(M.startsWith("..")){let $=M.split("/");for(;$[0]==="..";)$.shift(),z-=1;m.pathname=$.join("/")}j=z>=0?u[z]:"/"}let O=zO(m,j),A=M&&M!=="/"&&M.endsWith("/"),B=(w||M===".")&&c.endsWith("/");return!O.pathname.endsWith("/")&&(A||B)&&(O.pathname+="/"),O}const Zl=o=>o.join("/").replace(/\/\/+/g,"/"),UO=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),YO=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,HO=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function _O(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}/**
 * React Router v6.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function GO(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}const XO=typeof Object.is=="function"?Object.is:GO,{useState:KO,useEffect:WO,useLayoutEffect:$O,useDebugValue:JO}=nx;function ZO(o,u,c){const g=u(),[{inst:m},w]=KO({inst:{value:g,getSnapshot:u}});return $O(()=>{m.value=g,m.getSnapshot=u,J1(m)&&w({inst:m})},[o,g,u]),WO(()=>(J1(m)&&w({inst:m}),o(()=>{J1(m)&&w({inst:m})})),[o]),JO(g),g}function J1(o){const u=o.getSnapshot,c=o.value;try{const g=u();return!XO(c,g)}catch{return!0}}function QO(o,u,c){return u()}const qO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bO=!qO,tA=bO?QO:ZO;"useSyncExternalStore"in nx&&(o=>o.useSyncExternalStore)(nx);const uL=Mt.createContext(null),hL=Mt.createContext(null),up=Mt.createContext(null),e0=Mt.createContext(null),th=Mt.createContext({outlet:null,matches:[]}),aL=Mt.createContext(null);function tw(){return tw=Object.assign?Object.assign.bind():function(o){for(var u=1;u<arguments.length;u++){var c=arguments[u];for(var g in c)Object.prototype.hasOwnProperty.call(c,g)&&(o[g]=c[g])}return o},tw.apply(this,arguments)}function eA(o,u){let{relative:c}=u===void 0?{}:u;hp()||tn(!1);let{basename:g,navigator:m}=Mt.useContext(up),{hash:w,pathname:M,search:j}=cL(o,{relative:c}),O=M;return g!=="/"&&(O=M==="/"?g:Zl([g,M])),m.createHref({pathname:O,search:j,hash:w})}function hp(){return Mt.useContext(e0)!=null}function i0(){return hp()||tn(!1),Mt.useContext(e0).location}function fL(){hp()||tn(!1);let{basename:o,navigator:u}=Mt.useContext(up),{matches:c}=Mt.useContext(th),{pathname:g}=i0(),m=JSON.stringify(sL(c).map(j=>j.pathnameBase)),w=Mt.useRef(!1);return Mt.useEffect(()=>{w.current=!0}),Mt.useCallback(function(j,O){if(O===void 0&&(O={}),!w.current)return;if(typeof j=="number"){u.go(j);return}let A=lL(j,JSON.parse(m),g,O.relative==="path");o!=="/"&&(A.pathname=A.pathname==="/"?o:Zl([o,A.pathname])),(O.replace?u.replace:u.push)(A,O.state,O)},[o,u,m,g])}function n0(){let{matches:o}=Mt.useContext(th),u=o[o.length-1];return u?u.params:{}}function cL(o,u){let{relative:c}=u===void 0?{}:u,{matches:g}=Mt.useContext(th),{pathname:m}=i0(),w=JSON.stringify(sL(g).map(M=>M.pathnameBase));return Mt.useMemo(()=>lL(o,JSON.parse(w),m,c==="path"),[o,w,m,c])}function iA(o,u){hp()||tn(!1);let{navigator:c}=Mt.useContext(up),g=Mt.useContext(hL),{matches:m}=Mt.useContext(th),w=m[m.length-1],M=w?w.params:{};w&&w.pathname;let j=w?w.pathnameBase:"/";w&&w.route;let O=i0(),A;if(u){var B;let Y=typeof u=="string"?_a(u):u;j==="/"||(B=Y.pathname)!=null&&B.startsWith(j)||tn(!1),A=Y}else A=O;let z=A.pathname||"/",$=j==="/"?z:z.slice(j.length)||"/",ht=kO(o,{pathname:$}),rt=sA(ht&&ht.map(Y=>Object.assign({},Y,{params:Object.assign({},M,Y.params),pathname:Zl([j,c.encodeLocation?c.encodeLocation(Y.pathname).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?j:Zl([j,c.encodeLocation?c.encodeLocation(Y.pathnameBase).pathname:Y.pathnameBase])})),m,g||void 0);return u&&rt?Mt.createElement(e0.Provider,{value:{location:tw({pathname:"/",search:"",hash:"",state:null,key:"default"},A),navigationType:Yl.Pop}},rt):rt}function nA(){let o=aA(),u=_O(o)?o.status+" "+o.statusText:o instanceof Error?o.message:JSON.stringify(o),c=o instanceof Error?o.stack:null,m={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},w=null;return Mt.createElement(Mt.Fragment,null,Mt.createElement("h2",null,"Unexpected Application Error!"),Mt.createElement("h3",{style:{fontStyle:"italic"}},u),c?Mt.createElement("pre",{style:m},c):null,w)}class rA extends Mt.Component{constructor(u){super(u),this.state={location:u.location,error:u.error}}static getDerivedStateFromError(u){return{error:u}}static getDerivedStateFromProps(u,c){return c.location!==u.location?{error:u.error,location:u.location}:{error:u.error||c.error,location:c.location}}componentDidCatch(u,c){console.error("React Router caught the following error during render",u,c)}render(){return this.state.error?Mt.createElement(th.Provider,{value:this.props.routeContext},Mt.createElement(aL.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oA(o){let{routeContext:u,match:c,children:g}=o,m=Mt.useContext(uL);return m&&m.static&&m.staticContext&&(c.route.errorElement||c.route.ErrorBoundary)&&(m.staticContext._deepestRenderedBoundaryId=c.route.id),Mt.createElement(th.Provider,{value:u},g)}function sA(o,u,c){if(u===void 0&&(u=[]),o==null)if(c!=null&&c.errors)o=c.matches;else return null;let g=o,m=c==null?void 0:c.errors;if(m!=null){let w=g.findIndex(M=>M.route.id&&(m==null?void 0:m[M.route.id]));w>=0||tn(!1),g=g.slice(0,Math.min(g.length,w+1))}return g.reduceRight((w,M,j)=>{let O=M.route.id?m==null?void 0:m[M.route.id]:null,A=null;c&&(M.route.ErrorBoundary?A=Mt.createElement(M.route.ErrorBoundary,null):M.route.errorElement?A=M.route.errorElement:A=Mt.createElement(nA,null));let B=u.concat(g.slice(0,j+1)),z=()=>{let $=w;return O?$=A:M.route.Component?$=Mt.createElement(M.route.Component,null):M.route.element&&($=M.route.element),Mt.createElement(oA,{match:M,routeContext:{outlet:w,matches:B},children:$})};return c&&(M.route.ErrorBoundary||M.route.errorElement||j===0)?Mt.createElement(rA,{location:c.location,component:A,error:O,children:z(),routeContext:{outlet:null,matches:B}}):z()},null)}var IP;(function(o){o.UseBlocker="useBlocker",o.UseRevalidator="useRevalidator"})(IP||(IP={}));var By;(function(o){o.UseBlocker="useBlocker",o.UseLoaderData="useLoaderData",o.UseActionData="useActionData",o.UseRouteError="useRouteError",o.UseNavigation="useNavigation",o.UseRouteLoaderData="useRouteLoaderData",o.UseMatches="useMatches",o.UseRevalidator="useRevalidator"})(By||(By={}));function lA(o){let u=Mt.useContext(hL);return u||tn(!1),u}function uA(o){let u=Mt.useContext(th);return u||tn(!1),u}function hA(o){let u=uA(),c=u.matches[u.matches.length-1];return c.route.id||tn(!1),c.route.id}function aA(){var o;let u=Mt.useContext(aL),c=lA(By.UseRouteError),g=hA(By.UseRouteError);return u||((o=c.errors)==null?void 0:o[g])}function Yu(o){tn(!1)}function fA(o){let{basename:u="/",children:c=null,location:g,navigationType:m=Yl.Pop,navigator:w,static:M=!1}=o;hp()&&tn(!1);let j=u.replace(/^\/*/,"/"),O=Mt.useMemo(()=>({basename:j,navigator:w,static:M}),[j,w,M]);typeof g=="string"&&(g=_a(g));let{pathname:A="/",search:B="",hash:z="",state:$=null,key:ht="default"}=g,rt=Mt.useMemo(()=>{let Y=iS(A,j);return Y==null?null:{location:{pathname:Y,search:B,hash:z,state:$,key:ht},navigationType:m}},[j,A,B,z,$,ht,m]);return rt==null?null:Mt.createElement(up.Provider,{value:O},Mt.createElement(e0.Provider,{children:c,value:rt}))}function cA(o){let{children:u,location:c}=o,g=Mt.useContext(uL),m=g&&!u?g.router.routes:ew(u);return iA(m,c)}var DP;(function(o){o[o.pending=0]="pending",o[o.success=1]="success",o[o.error=2]="error"})(DP||(DP={}));new Promise(()=>{});function ew(o,u){u===void 0&&(u=[]);let c=[];return Mt.Children.forEach(o,(g,m)=>{if(!Mt.isValidElement(g))return;if(g.type===Mt.Fragment){c.push.apply(c,ew(g.props.children,u));return}g.type!==Yu&&tn(!1),!g.props.index||!g.props.children||tn(!1);let w=[...u,m],M={id:g.props.id||w.join("-"),caseSensitive:g.props.caseSensitive,element:g.props.element,Component:g.props.Component,index:g.props.index,path:g.props.path,loader:g.props.loader,action:g.props.action,errorElement:g.props.errorElement,ErrorBoundary:g.props.ErrorBoundary,hasErrorBoundary:g.props.ErrorBoundary!=null||g.props.errorElement!=null,shouldRevalidate:g.props.shouldRevalidate,handle:g.props.handle,lazy:g.props.lazy};g.props.children&&(M.children=ew(g.props.children,w)),c.push(M)}),c}/**
 * React Router DOM v6.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function iw(){return iw=Object.assign?Object.assign.bind():function(o){for(var u=1;u<arguments.length;u++){var c=arguments[u];for(var g in c)Object.prototype.hasOwnProperty.call(c,g)&&(o[g]=c[g])}return o},iw.apply(this,arguments)}function pA(o,u){if(o==null)return{};var c={},g=Object.keys(o),m,w;for(w=0;w<g.length;w++)m=g[w],!(u.indexOf(m)>=0)&&(c[m]=o[m]);return c}function dA(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function gA(o,u){return o.button===0&&(!u||u==="_self")&&!dA(o)}const yA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function mA(o){let{basename:u,children:c,window:g}=o,m=Mt.useRef();m.current==null&&(m.current=wO({window:g,v5Compat:!0}));let w=m.current,[M,j]=Mt.useState({action:w.action,location:w.location});return Mt.useLayoutEffect(()=>w.listen(j),[w]),Mt.createElement(fA,{basename:u,children:c,location:M.location,navigationType:M.action,navigator:w})}const vA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wA=Mt.forwardRef(function(u,c){let{onClick:g,relative:m,reloadDocument:w,replace:M,state:j,target:O,to:A,preventScrollReset:B}=u,z=pA(u,yA),{basename:$}=Mt.useContext(up),ht,rt=!1;if(typeof A=="string"&&xA.test(A)&&(ht=A,vA)){let H=new URL(window.location.href),J=A.startsWith("//")?new URL(H.protocol+A):new URL(A),R=iS(J.pathname,$);J.origin===H.origin&&R!=null?A=R+J.search+J.hash:rt=!0}let Y=eA(A,{relative:m}),Et=SA(A,{replace:M,state:j,target:O,preventScrollReset:B,relative:m});function K(H){g&&g(H),H.defaultPrevented||Et(H)}return Mt.createElement("a",iw({},z,{href:ht||Y,onClick:rt||w?g:K,ref:c,target:O}))});var RP;(function(o){o.UseScrollRestoration="useScrollRestoration",o.UseSubmitImpl="useSubmitImpl",o.UseFetcher="useFetcher"})(RP||(RP={}));var BP;(function(o){o.UseFetchers="useFetchers",o.UseScrollRestoration="useScrollRestoration"})(BP||(BP={}));function SA(o,u){let{target:c,replace:g,state:m,preventScrollReset:w,relative:M}=u===void 0?{}:u,j=fL(),O=i0(),A=cL(o,{relative:M});return Mt.useCallback(B=>{if(gA(B,c)){B.preventDefault();let z=g!==void 0?g:Ry(O)===Ry(A);j(o,{replace:z,state:m,preventScrollReset:w,relative:M})}},[O,j,A,g,m,c,o,w,M])}const zP="/moboga/assets/github-mark-white-fab00c2d.svg",r0=()=>ut(Hi,{children:bt("div",{className:"footer-container",children:[ut("p",{className:"footer-text",children:"© 2023 Moboga by Amber. All rights reserved."}),ut("p",{className:"footer-text",children:"Moboga is a mobile application designed and developed by the Amber."}),ut("p",{className:"footer-text",children:"Data provided by the Google Books API, the MovieDB API and Rawg API."}),ut("p",{children:"Contributers:"}),bt("div",{className:"github__container",children:[bt("span",{className:"github-profile-container",children:[ut("a",{href:"https://github.com/Finns841594",children:ut("img",{className:"github-logo",src:zP})}),ut("p",{className:"",children:"Feng"})]}),bt("span",{className:"github-profile-container",children:[ut("a",{href:"https://github.com/mariana-molina",children:ut("img",{className:"github-logo",src:zP})}),ut("p",{className:"",children:"Mariana"})]})]})]})});function pL(o,u){return function(){return o.apply(u,arguments)}}const{toString:dL}=Object.prototype,{getPrototypeOf:nS}=Object,rS=(o=>u=>{const c=dL.call(u);return o[c]||(o[c]=c.slice(8,-1).toLowerCase())})(Object.create(null)),sl=o=>(o=o.toLowerCase(),u=>rS(u)===o),o0=o=>u=>typeof u===o,{isArray:Ga}=Array,ip=o0("undefined");function MA(o){return o!==null&&!ip(o)&&o.constructor!==null&&!ip(o.constructor)&&bl(o.constructor.isBuffer)&&o.constructor.isBuffer(o)}const gL=sl("ArrayBuffer");function kA(o){let u;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?u=ArrayBuffer.isView(o):u=o&&o.buffer&&gL(o.buffer),u}const NA=o0("string"),bl=o0("function"),yL=o0("number"),oS=o=>o!==null&&typeof o=="object",PA=o=>o===!0||o===!1,ly=o=>{if(rS(o)!=="object")return!1;const u=nS(o);return(u===null||u===Object.prototype||Object.getPrototypeOf(u)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},CA=sl("Date"),TA=sl("File"),LA=sl("Blob"),jA=sl("FileList"),EA=o=>oS(o)&&bl(o.pipe),FA=o=>{const u="[object FormData]";return o&&(typeof FormData=="function"&&o instanceof FormData||dL.call(o)===u||bl(o.toString)&&o.toString()===u)},OA=sl("URLSearchParams"),AA=o=>o.trim?o.trim():o.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ap(o,u,{allOwnKeys:c=!1}={}){if(o===null||typeof o>"u")return;let g,m;if(typeof o!="object"&&(o=[o]),Ga(o))for(g=0,m=o.length;g<m;g++)u.call(null,o[g],g,o);else{const w=c?Object.getOwnPropertyNames(o):Object.keys(o),M=w.length;let j;for(g=0;g<M;g++)j=w[g],u.call(null,o[j],j,o)}}function mL(o,u){u=u.toLowerCase();const c=Object.keys(o);let g=c.length,m;for(;g-- >0;)if(m=c[g],u===m.toLowerCase())return m;return null}const vL=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),xL=o=>!ip(o)&&o!==vL;function nw(){const{caseless:o}=xL(this)&&this||{},u={},c=(g,m)=>{const w=o&&mL(u,m)||m;ly(u[w])&&ly(g)?u[w]=nw(u[w],g):ly(g)?u[w]=nw({},g):Ga(g)?u[w]=g.slice():u[w]=g};for(let g=0,m=arguments.length;g<m;g++)arguments[g]&&ap(arguments[g],c);return u}const IA=(o,u,c,{allOwnKeys:g}={})=>(ap(u,(m,w)=>{c&&bl(m)?o[w]=pL(m,c):o[w]=m},{allOwnKeys:g}),o),DA=o=>(o.charCodeAt(0)===65279&&(o=o.slice(1)),o),RA=(o,u,c,g)=>{o.prototype=Object.create(u.prototype,g),o.prototype.constructor=o,Object.defineProperty(o,"super",{value:u.prototype}),c&&Object.assign(o.prototype,c)},BA=(o,u,c,g)=>{let m,w,M;const j={};if(u=u||{},o==null)return u;do{for(m=Object.getOwnPropertyNames(o),w=m.length;w-- >0;)M=m[w],(!g||g(M,o,u))&&!j[M]&&(u[M]=o[M],j[M]=!0);o=c!==!1&&nS(o)}while(o&&(!c||c(o,u))&&o!==Object.prototype);return u},zA=(o,u,c)=>{o=String(o),(c===void 0||c>o.length)&&(c=o.length),c-=u.length;const g=o.indexOf(u,c);return g!==-1&&g===c},VA=o=>{if(!o)return null;if(Ga(o))return o;let u=o.length;if(!yL(u))return null;const c=new Array(u);for(;u-- >0;)c[u]=o[u];return c},UA=(o=>u=>o&&u instanceof o)(typeof Uint8Array<"u"&&nS(Uint8Array)),YA=(o,u)=>{const g=(o&&o[Symbol.iterator]).call(o);let m;for(;(m=g.next())&&!m.done;){const w=m.value;u.call(o,w[0],w[1])}},HA=(o,u)=>{let c;const g=[];for(;(c=o.exec(u))!==null;)g.push(c);return g},_A=sl("HTMLFormElement"),GA=o=>o.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(c,g,m){return g.toUpperCase()+m}),VP=(({hasOwnProperty:o})=>(u,c)=>o.call(u,c))(Object.prototype),XA=sl("RegExp"),wL=(o,u)=>{const c=Object.getOwnPropertyDescriptors(o),g={};ap(c,(m,w)=>{u(m,w,o)!==!1&&(g[w]=m)}),Object.defineProperties(o,g)},KA=o=>{wL(o,(u,c)=>{if(bl(o)&&["arguments","caller","callee"].indexOf(c)!==-1)return!1;const g=o[c];if(bl(g)){if(u.enumerable=!1,"writable"in u){u.writable=!1;return}u.set||(u.set=()=>{throw Error("Can not rewrite read-only method '"+c+"'")})}})},WA=(o,u)=>{const c={},g=m=>{m.forEach(w=>{c[w]=!0})};return Ga(o)?g(o):g(String(o).split(u)),c},$A=()=>{},JA=(o,u)=>(o=+o,Number.isFinite(o)?o:u),Z1="abcdefghijklmnopqrstuvwxyz",UP="0123456789",SL={DIGIT:UP,ALPHA:Z1,ALPHA_DIGIT:Z1+Z1.toUpperCase()+UP},ZA=(o=16,u=SL.ALPHA_DIGIT)=>{let c="";const{length:g}=u;for(;o--;)c+=u[Math.random()*g|0];return c};function QA(o){return!!(o&&bl(o.append)&&o[Symbol.toStringTag]==="FormData"&&o[Symbol.iterator])}const qA=o=>{const u=new Array(10),c=(g,m)=>{if(oS(g)){if(u.indexOf(g)>=0)return;if(!("toJSON"in g)){u[m]=g;const w=Ga(g)?[]:{};return ap(g,(M,j)=>{const O=c(M,m+1);!ip(O)&&(w[j]=O)}),u[m]=void 0,w}}return g};return c(o,0)},ft={isArray:Ga,isArrayBuffer:gL,isBuffer:MA,isFormData:FA,isArrayBufferView:kA,isString:NA,isNumber:yL,isBoolean:PA,isObject:oS,isPlainObject:ly,isUndefined:ip,isDate:CA,isFile:TA,isBlob:LA,isRegExp:XA,isFunction:bl,isStream:EA,isURLSearchParams:OA,isTypedArray:UA,isFileList:jA,forEach:ap,merge:nw,extend:IA,trim:AA,stripBOM:DA,inherits:RA,toFlatObject:BA,kindOf:rS,kindOfTest:sl,endsWith:zA,toArray:VA,forEachEntry:YA,matchAll:HA,isHTMLForm:_A,hasOwnProperty:VP,hasOwnProp:VP,reduceDescriptors:wL,freezeMethods:KA,toObjectSet:WA,toCamelCase:GA,noop:$A,toFiniteNumber:JA,findKey:mL,global:vL,isContextDefined:xL,ALPHABET:SL,generateString:ZA,isSpecCompliantForm:QA,toJSONObject:qA};function Se(o,u,c,g,m){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=o,this.name="AxiosError",u&&(this.code=u),c&&(this.config=c),g&&(this.request=g),m&&(this.response=m)}ft.inherits(Se,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ft.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const ML=Se.prototype,kL={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(o=>{kL[o]={value:o}});Object.defineProperties(Se,kL);Object.defineProperty(ML,"isAxiosError",{value:!0});Se.from=(o,u,c,g,m,w)=>{const M=Object.create(ML);return ft.toFlatObject(o,M,function(O){return O!==Error.prototype},j=>j!=="isAxiosError"),Se.call(M,o.message,u,c,g,m),M.cause=o,M.name=o.name,w&&Object.assign(M,w),M};const bA=null;function rw(o){return ft.isPlainObject(o)||ft.isArray(o)}function NL(o){return ft.endsWith(o,"[]")?o.slice(0,-2):o}function YP(o,u,c){return o?o.concat(u).map(function(m,w){return m=NL(m),!c&&w?"["+m+"]":m}).join(c?".":""):u}function tI(o){return ft.isArray(o)&&!o.some(rw)}const eI=ft.toFlatObject(ft,{},null,function(u){return/^is[A-Z]/.test(u)});function s0(o,u,c){if(!ft.isObject(o))throw new TypeError("target must be an object");u=u||new FormData,c=ft.toFlatObject(c,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Y,Et){return!ft.isUndefined(Et[Y])});const g=c.metaTokens,m=c.visitor||B,w=c.dots,M=c.indexes,O=(c.Blob||typeof Blob<"u"&&Blob)&&ft.isSpecCompliantForm(u);if(!ft.isFunction(m))throw new TypeError("visitor must be a function");function A(rt){if(rt===null)return"";if(ft.isDate(rt))return rt.toISOString();if(!O&&ft.isBlob(rt))throw new Se("Blob is not supported. Use a Buffer instead.");return ft.isArrayBuffer(rt)||ft.isTypedArray(rt)?O&&typeof Blob=="function"?new Blob([rt]):Buffer.from(rt):rt}function B(rt,Y,Et){let K=rt;if(rt&&!Et&&typeof rt=="object"){if(ft.endsWith(Y,"{}"))Y=g?Y:Y.slice(0,-2),rt=JSON.stringify(rt);else if(ft.isArray(rt)&&tI(rt)||(ft.isFileList(rt)||ft.endsWith(Y,"[]"))&&(K=ft.toArray(rt)))return Y=NL(Y),K.forEach(function(J,R){!(ft.isUndefined(J)||J===null)&&u.append(M===!0?YP([Y],R,w):M===null?Y:Y+"[]",A(J))}),!1}return rw(rt)?!0:(u.append(YP(Et,Y,w),A(rt)),!1)}const z=[],$=Object.assign(eI,{defaultVisitor:B,convertValue:A,isVisitable:rw});function ht(rt,Y){if(!ft.isUndefined(rt)){if(z.indexOf(rt)!==-1)throw Error("Circular reference detected in "+Y.join("."));z.push(rt),ft.forEach(rt,function(K,H){(!(ft.isUndefined(K)||K===null)&&m.call(u,K,ft.isString(H)?H.trim():H,Y,$))===!0&&ht(K,Y?Y.concat(H):[H])}),z.pop()}}if(!ft.isObject(o))throw new TypeError("data must be an object");return ht(o),u}function HP(o){const u={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(o).replace(/[!'()~]|%20|%00/g,function(g){return u[g]})}function sS(o,u){this._pairs=[],o&&s0(o,this,u)}const PL=sS.prototype;PL.append=function(u,c){this._pairs.push([u,c])};PL.toString=function(u){const c=u?function(g){return u.call(this,g,HP)}:HP;return this._pairs.map(function(m){return c(m[0])+"="+c(m[1])},"").join("&")};function iI(o){return encodeURIComponent(o).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function CL(o,u,c){if(!u)return o;const g=c&&c.encode||iI,m=c&&c.serialize;let w;if(m?w=m(u,c):w=ft.isURLSearchParams(u)?u.toString():new sS(u,c).toString(g),w){const M=o.indexOf("#");M!==-1&&(o=o.slice(0,M)),o+=(o.indexOf("?")===-1?"?":"&")+w}return o}class nI{constructor(){this.handlers=[]}use(u,c,g){return this.handlers.push({fulfilled:u,rejected:c,synchronous:g?g.synchronous:!1,runWhen:g?g.runWhen:null}),this.handlers.length-1}eject(u){this.handlers[u]&&(this.handlers[u]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(u){ft.forEach(this.handlers,function(g){g!==null&&u(g)})}}const _P=nI,TL={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},rI=typeof URLSearchParams<"u"?URLSearchParams:sS,oI=typeof FormData<"u"?FormData:null,sI=typeof Blob<"u"?Blob:null,lI=(()=>{let o;return typeof navigator<"u"&&((o=navigator.product)==="ReactNative"||o==="NativeScript"||o==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),uI=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),xs={isBrowser:!0,classes:{URLSearchParams:rI,FormData:oI,Blob:sI},isStandardBrowserEnv:lI,isStandardBrowserWebWorkerEnv:uI,protocols:["http","https","file","blob","url","data"]};function hI(o,u){return s0(o,new xs.classes.URLSearchParams,Object.assign({visitor:function(c,g,m,w){return xs.isNode&&ft.isBuffer(c)?(this.append(g,c.toString("base64")),!1):w.defaultVisitor.apply(this,arguments)}},u))}function aI(o){return ft.matchAll(/\w+|\[(\w*)]/g,o).map(u=>u[0]==="[]"?"":u[1]||u[0])}function fI(o){const u={},c=Object.keys(o);let g;const m=c.length;let w;for(g=0;g<m;g++)w=c[g],u[w]=o[w];return u}function LL(o){function u(c,g,m,w){let M=c[w++];const j=Number.isFinite(+M),O=w>=c.length;return M=!M&&ft.isArray(m)?m.length:M,O?(ft.hasOwnProp(m,M)?m[M]=[m[M],g]:m[M]=g,!j):((!m[M]||!ft.isObject(m[M]))&&(m[M]=[]),u(c,g,m[M],w)&&ft.isArray(m[M])&&(m[M]=fI(m[M])),!j)}if(ft.isFormData(o)&&ft.isFunction(o.entries)){const c={};return ft.forEachEntry(o,(g,m)=>{u(aI(g),m,c,0)}),c}return null}const cI={"Content-Type":void 0};function pI(o,u,c){if(ft.isString(o))try{return(u||JSON.parse)(o),ft.trim(o)}catch(g){if(g.name!=="SyntaxError")throw g}return(c||JSON.stringify)(o)}const l0={transitional:TL,adapter:["xhr","http"],transformRequest:[function(u,c){const g=c.getContentType()||"",m=g.indexOf("application/json")>-1,w=ft.isObject(u);if(w&&ft.isHTMLForm(u)&&(u=new FormData(u)),ft.isFormData(u))return m&&m?JSON.stringify(LL(u)):u;if(ft.isArrayBuffer(u)||ft.isBuffer(u)||ft.isStream(u)||ft.isFile(u)||ft.isBlob(u))return u;if(ft.isArrayBufferView(u))return u.buffer;if(ft.isURLSearchParams(u))return c.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),u.toString();let j;if(w){if(g.indexOf("application/x-www-form-urlencoded")>-1)return hI(u,this.formSerializer).toString();if((j=ft.isFileList(u))||g.indexOf("multipart/form-data")>-1){const O=this.env&&this.env.FormData;return s0(j?{"files[]":u}:u,O&&new O,this.formSerializer)}}return w||m?(c.setContentType("application/json",!1),pI(u)):u}],transformResponse:[function(u){const c=this.transitional||l0.transitional,g=c&&c.forcedJSONParsing,m=this.responseType==="json";if(u&&ft.isString(u)&&(g&&!this.responseType||m)){const M=!(c&&c.silentJSONParsing)&&m;try{return JSON.parse(u)}catch(j){if(M)throw j.name==="SyntaxError"?Se.from(j,Se.ERR_BAD_RESPONSE,this,null,this.response):j}}return u}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xs.classes.FormData,Blob:xs.classes.Blob},validateStatus:function(u){return u>=200&&u<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ft.forEach(["delete","get","head"],function(u){l0.headers[u]={}});ft.forEach(["post","put","patch"],function(u){l0.headers[u]=ft.merge(cI)});const lS=l0,dI=ft.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),gI=o=>{const u={};let c,g,m;return o&&o.split(`
`).forEach(function(M){m=M.indexOf(":"),c=M.substring(0,m).trim().toLowerCase(),g=M.substring(m+1).trim(),!(!c||u[c]&&dI[c])&&(c==="set-cookie"?u[c]?u[c].push(g):u[c]=[g]:u[c]=u[c]?u[c]+", "+g:g)}),u},GP=Symbol("internals");function Sc(o){return o&&String(o).trim().toLowerCase()}function uy(o){return o===!1||o==null?o:ft.isArray(o)?o.map(uy):String(o)}function yI(o){const u=Object.create(null),c=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let g;for(;g=c.exec(o);)u[g[1]]=g[2];return u}function mI(o){return/^[-_a-zA-Z]+$/.test(o.trim())}function Q1(o,u,c,g,m){if(ft.isFunction(g))return g.call(this,u,c);if(m&&(u=c),!!ft.isString(u)){if(ft.isString(g))return u.indexOf(g)!==-1;if(ft.isRegExp(g))return g.test(u)}}function vI(o){return o.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(u,c,g)=>c.toUpperCase()+g)}function xI(o,u){const c=ft.toCamelCase(" "+u);["get","set","has"].forEach(g=>{Object.defineProperty(o,g+c,{value:function(m,w,M){return this[g].call(this,u,m,w,M)},configurable:!0})})}class u0{constructor(u){u&&this.set(u)}set(u,c,g){const m=this;function w(j,O,A){const B=Sc(O);if(!B)throw new Error("header name must be a non-empty string");const z=ft.findKey(m,B);(!z||m[z]===void 0||A===!0||A===void 0&&m[z]!==!1)&&(m[z||O]=uy(j))}const M=(j,O)=>ft.forEach(j,(A,B)=>w(A,B,O));return ft.isPlainObject(u)||u instanceof this.constructor?M(u,c):ft.isString(u)&&(u=u.trim())&&!mI(u)?M(gI(u),c):u!=null&&w(c,u,g),this}get(u,c){if(u=Sc(u),u){const g=ft.findKey(this,u);if(g){const m=this[g];if(!c)return m;if(c===!0)return yI(m);if(ft.isFunction(c))return c.call(this,m,g);if(ft.isRegExp(c))return c.exec(m);throw new TypeError("parser must be boolean|regexp|function")}}}has(u,c){if(u=Sc(u),u){const g=ft.findKey(this,u);return!!(g&&this[g]!==void 0&&(!c||Q1(this,this[g],g,c)))}return!1}delete(u,c){const g=this;let m=!1;function w(M){if(M=Sc(M),M){const j=ft.findKey(g,M);j&&(!c||Q1(g,g[j],j,c))&&(delete g[j],m=!0)}}return ft.isArray(u)?u.forEach(w):w(u),m}clear(u){const c=Object.keys(this);let g=c.length,m=!1;for(;g--;){const w=c[g];(!u||Q1(this,this[w],w,u,!0))&&(delete this[w],m=!0)}return m}normalize(u){const c=this,g={};return ft.forEach(this,(m,w)=>{const M=ft.findKey(g,w);if(M){c[M]=uy(m),delete c[w];return}const j=u?vI(w):String(w).trim();j!==w&&delete c[w],c[j]=uy(m),g[j]=!0}),this}concat(...u){return this.constructor.concat(this,...u)}toJSON(u){const c=Object.create(null);return ft.forEach(this,(g,m)=>{g!=null&&g!==!1&&(c[m]=u&&ft.isArray(g)?g.join(", "):g)}),c}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([u,c])=>u+": "+c).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(u){return u instanceof this?u:new this(u)}static concat(u,...c){const g=new this(u);return c.forEach(m=>g.set(m)),g}static accessor(u){const g=(this[GP]=this[GP]={accessors:{}}).accessors,m=this.prototype;function w(M){const j=Sc(M);g[j]||(xI(m,M),g[j]=!0)}return ft.isArray(u)?u.forEach(w):w(u),this}}u0.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ft.freezeMethods(u0.prototype);ft.freezeMethods(u0);const tl=u0;function q1(o,u){const c=this||lS,g=u||c,m=tl.from(g.headers);let w=g.data;return ft.forEach(o,function(j){w=j.call(c,w,m.normalize(),u?u.status:void 0)}),m.normalize(),w}function jL(o){return!!(o&&o.__CANCEL__)}function fp(o,u,c){Se.call(this,o??"canceled",Se.ERR_CANCELED,u,c),this.name="CanceledError"}ft.inherits(fp,Se,{__CANCEL__:!0});function wI(o,u,c){const g=c.config.validateStatus;!c.status||!g||g(c.status)?o(c):u(new Se("Request failed with status code "+c.status,[Se.ERR_BAD_REQUEST,Se.ERR_BAD_RESPONSE][Math.floor(c.status/100)-4],c.config,c.request,c))}const SI=xs.isStandardBrowserEnv?function(){return{write:function(c,g,m,w,M,j){const O=[];O.push(c+"="+encodeURIComponent(g)),ft.isNumber(m)&&O.push("expires="+new Date(m).toGMTString()),ft.isString(w)&&O.push("path="+w),ft.isString(M)&&O.push("domain="+M),j===!0&&O.push("secure"),document.cookie=O.join("; ")},read:function(c){const g=document.cookie.match(new RegExp("(^|;\\s*)("+c+")=([^;]*)"));return g?decodeURIComponent(g[3]):null},remove:function(c){this.write(c,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function MI(o){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(o)}function kI(o,u){return u?o.replace(/\/+$/,"")+"/"+u.replace(/^\/+/,""):o}function EL(o,u){return o&&!MI(u)?kI(o,u):u}const NI=xs.isStandardBrowserEnv?function(){const u=/(msie|trident)/i.test(navigator.userAgent),c=document.createElement("a");let g;function m(w){let M=w;return u&&(c.setAttribute("href",M),M=c.href),c.setAttribute("href",M),{href:c.href,protocol:c.protocol?c.protocol.replace(/:$/,""):"",host:c.host,search:c.search?c.search.replace(/^\?/,""):"",hash:c.hash?c.hash.replace(/^#/,""):"",hostname:c.hostname,port:c.port,pathname:c.pathname.charAt(0)==="/"?c.pathname:"/"+c.pathname}}return g=m(window.location.href),function(M){const j=ft.isString(M)?m(M):M;return j.protocol===g.protocol&&j.host===g.host}}():function(){return function(){return!0}}();function PI(o){const u=/^([-+\w]{1,25})(:?\/\/|:)/.exec(o);return u&&u[1]||""}function CI(o,u){o=o||10;const c=new Array(o),g=new Array(o);let m=0,w=0,M;return u=u!==void 0?u:1e3,function(O){const A=Date.now(),B=g[w];M||(M=A),c[m]=O,g[m]=A;let z=w,$=0;for(;z!==m;)$+=c[z++],z=z%o;if(m=(m+1)%o,m===w&&(w=(w+1)%o),A-M<u)return;const ht=B&&A-B;return ht?Math.round($*1e3/ht):void 0}}function XP(o,u){let c=0;const g=CI(50,250);return m=>{const w=m.loaded,M=m.lengthComputable?m.total:void 0,j=w-c,O=g(j),A=w<=M;c=w;const B={loaded:w,total:M,progress:M?w/M:void 0,bytes:j,rate:O||void 0,estimated:O&&M&&A?(M-w)/O:void 0,event:m};B[u?"download":"upload"]=!0,o(B)}}const TI=typeof XMLHttpRequest<"u",LI=TI&&function(o){return new Promise(function(c,g){let m=o.data;const w=tl.from(o.headers).normalize(),M=o.responseType;let j;function O(){o.cancelToken&&o.cancelToken.unsubscribe(j),o.signal&&o.signal.removeEventListener("abort",j)}ft.isFormData(m)&&(xs.isStandardBrowserEnv||xs.isStandardBrowserWebWorkerEnv)&&w.setContentType(!1);let A=new XMLHttpRequest;if(o.auth){const ht=o.auth.username||"",rt=o.auth.password?unescape(encodeURIComponent(o.auth.password)):"";w.set("Authorization","Basic "+btoa(ht+":"+rt))}const B=EL(o.baseURL,o.url);A.open(o.method.toUpperCase(),CL(B,o.params,o.paramsSerializer),!0),A.timeout=o.timeout;function z(){if(!A)return;const ht=tl.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),Y={data:!M||M==="text"||M==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:ht,config:o,request:A};wI(function(K){c(K),O()},function(K){g(K),O()},Y),A=null}if("onloadend"in A?A.onloadend=z:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(z)},A.onabort=function(){A&&(g(new Se("Request aborted",Se.ECONNABORTED,o,A)),A=null)},A.onerror=function(){g(new Se("Network Error",Se.ERR_NETWORK,o,A)),A=null},A.ontimeout=function(){let rt=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const Y=o.transitional||TL;o.timeoutErrorMessage&&(rt=o.timeoutErrorMessage),g(new Se(rt,Y.clarifyTimeoutError?Se.ETIMEDOUT:Se.ECONNABORTED,o,A)),A=null},xs.isStandardBrowserEnv){const ht=(o.withCredentials||NI(B))&&o.xsrfCookieName&&SI.read(o.xsrfCookieName);ht&&w.set(o.xsrfHeaderName,ht)}m===void 0&&w.setContentType(null),"setRequestHeader"in A&&ft.forEach(w.toJSON(),function(rt,Y){A.setRequestHeader(Y,rt)}),ft.isUndefined(o.withCredentials)||(A.withCredentials=!!o.withCredentials),M&&M!=="json"&&(A.responseType=o.responseType),typeof o.onDownloadProgress=="function"&&A.addEventListener("progress",XP(o.onDownloadProgress,!0)),typeof o.onUploadProgress=="function"&&A.upload&&A.upload.addEventListener("progress",XP(o.onUploadProgress)),(o.cancelToken||o.signal)&&(j=ht=>{A&&(g(!ht||ht.type?new fp(null,o,A):ht),A.abort(),A=null)},o.cancelToken&&o.cancelToken.subscribe(j),o.signal&&(o.signal.aborted?j():o.signal.addEventListener("abort",j)));const $=PI(B);if($&&xs.protocols.indexOf($)===-1){g(new Se("Unsupported protocol "+$+":",Se.ERR_BAD_REQUEST,o));return}A.send(m||null)})},hy={http:bA,xhr:LI};ft.forEach(hy,(o,u)=>{if(o){try{Object.defineProperty(o,"name",{value:u})}catch{}Object.defineProperty(o,"adapterName",{value:u})}});const jI={getAdapter:o=>{o=ft.isArray(o)?o:[o];const{length:u}=o;let c,g;for(let m=0;m<u&&(c=o[m],!(g=ft.isString(c)?hy[c.toLowerCase()]:c));m++);if(!g)throw g===!1?new Se(`Adapter ${c} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(ft.hasOwnProp(hy,c)?`Adapter '${c}' is not available in the build`:`Unknown adapter '${c}'`);if(!ft.isFunction(g))throw new TypeError("adapter is not a function");return g},adapters:hy};function b1(o){if(o.cancelToken&&o.cancelToken.throwIfRequested(),o.signal&&o.signal.aborted)throw new fp(null,o)}function KP(o){return b1(o),o.headers=tl.from(o.headers),o.data=q1.call(o,o.transformRequest),["post","put","patch"].indexOf(o.method)!==-1&&o.headers.setContentType("application/x-www-form-urlencoded",!1),jI.getAdapter(o.adapter||lS.adapter)(o).then(function(g){return b1(o),g.data=q1.call(o,o.transformResponse,g),g.headers=tl.from(g.headers),g},function(g){return jL(g)||(b1(o),g&&g.response&&(g.response.data=q1.call(o,o.transformResponse,g.response),g.response.headers=tl.from(g.response.headers))),Promise.reject(g)})}const WP=o=>o instanceof tl?o.toJSON():o;function Va(o,u){u=u||{};const c={};function g(A,B,z){return ft.isPlainObject(A)&&ft.isPlainObject(B)?ft.merge.call({caseless:z},A,B):ft.isPlainObject(B)?ft.merge({},B):ft.isArray(B)?B.slice():B}function m(A,B,z){if(ft.isUndefined(B)){if(!ft.isUndefined(A))return g(void 0,A,z)}else return g(A,B,z)}function w(A,B){if(!ft.isUndefined(B))return g(void 0,B)}function M(A,B){if(ft.isUndefined(B)){if(!ft.isUndefined(A))return g(void 0,A)}else return g(void 0,B)}function j(A,B,z){if(z in u)return g(A,B);if(z in o)return g(void 0,A)}const O={url:w,method:w,data:w,baseURL:M,transformRequest:M,transformResponse:M,paramsSerializer:M,timeout:M,timeoutMessage:M,withCredentials:M,adapter:M,responseType:M,xsrfCookieName:M,xsrfHeaderName:M,onUploadProgress:M,onDownloadProgress:M,decompress:M,maxContentLength:M,maxBodyLength:M,beforeRedirect:M,transport:M,httpAgent:M,httpsAgent:M,cancelToken:M,socketPath:M,responseEncoding:M,validateStatus:j,headers:(A,B)=>m(WP(A),WP(B),!0)};return ft.forEach(Object.keys(o).concat(Object.keys(u)),function(B){const z=O[B]||m,$=z(o[B],u[B],B);ft.isUndefined($)&&z!==j||(c[B]=$)}),c}const FL="1.3.4",uS={};["object","boolean","number","function","string","symbol"].forEach((o,u)=>{uS[o]=function(g){return typeof g===o||"a"+(u<1?"n ":" ")+o}});const $P={};uS.transitional=function(u,c,g){function m(w,M){return"[Axios v"+FL+"] Transitional option '"+w+"'"+M+(g?". "+g:"")}return(w,M,j)=>{if(u===!1)throw new Se(m(M," has been removed"+(c?" in "+c:"")),Se.ERR_DEPRECATED);return c&&!$P[M]&&($P[M]=!0,console.warn(m(M," has been deprecated since v"+c+" and will be removed in the near future"))),u?u(w,M,j):!0}};function EI(o,u,c){if(typeof o!="object")throw new Se("options must be an object",Se.ERR_BAD_OPTION_VALUE);const g=Object.keys(o);let m=g.length;for(;m-- >0;){const w=g[m],M=u[w];if(M){const j=o[w],O=j===void 0||M(j,w,o);if(O!==!0)throw new Se("option "+w+" must be "+O,Se.ERR_BAD_OPTION_VALUE);continue}if(c!==!0)throw new Se("Unknown option "+w,Se.ERR_BAD_OPTION)}}const ow={assertOptions:EI,validators:uS},Il=ow.validators;class zy{constructor(u){this.defaults=u,this.interceptors={request:new _P,response:new _P}}request(u,c){typeof u=="string"?(c=c||{},c.url=u):c=u||{},c=Va(this.defaults,c);const{transitional:g,paramsSerializer:m,headers:w}=c;g!==void 0&&ow.assertOptions(g,{silentJSONParsing:Il.transitional(Il.boolean),forcedJSONParsing:Il.transitional(Il.boolean),clarifyTimeoutError:Il.transitional(Il.boolean)},!1),m!==void 0&&ow.assertOptions(m,{encode:Il.function,serialize:Il.function},!0),c.method=(c.method||this.defaults.method||"get").toLowerCase();let M;M=w&&ft.merge(w.common,w[c.method]),M&&ft.forEach(["delete","get","head","post","put","patch","common"],rt=>{delete w[rt]}),c.headers=tl.concat(M,w);const j=[];let O=!0;this.interceptors.request.forEach(function(Y){typeof Y.runWhen=="function"&&Y.runWhen(c)===!1||(O=O&&Y.synchronous,j.unshift(Y.fulfilled,Y.rejected))});const A=[];this.interceptors.response.forEach(function(Y){A.push(Y.fulfilled,Y.rejected)});let B,z=0,$;if(!O){const rt=[KP.bind(this),void 0];for(rt.unshift.apply(rt,j),rt.push.apply(rt,A),$=rt.length,B=Promise.resolve(c);z<$;)B=B.then(rt[z++],rt[z++]);return B}$=j.length;let ht=c;for(z=0;z<$;){const rt=j[z++],Y=j[z++];try{ht=rt(ht)}catch(Et){Y.call(this,Et);break}}try{B=KP.call(this,ht)}catch(rt){return Promise.reject(rt)}for(z=0,$=A.length;z<$;)B=B.then(A[z++],A[z++]);return B}getUri(u){u=Va(this.defaults,u);const c=EL(u.baseURL,u.url);return CL(c,u.params,u.paramsSerializer)}}ft.forEach(["delete","get","head","options"],function(u){zy.prototype[u]=function(c,g){return this.request(Va(g||{},{method:u,url:c,data:(g||{}).data}))}});ft.forEach(["post","put","patch"],function(u){function c(g){return function(w,M,j){return this.request(Va(j||{},{method:u,headers:g?{"Content-Type":"multipart/form-data"}:{},url:w,data:M}))}}zy.prototype[u]=c(),zy.prototype[u+"Form"]=c(!0)});const ay=zy;class hS{constructor(u){if(typeof u!="function")throw new TypeError("executor must be a function.");let c;this.promise=new Promise(function(w){c=w});const g=this;this.promise.then(m=>{if(!g._listeners)return;let w=g._listeners.length;for(;w-- >0;)g._listeners[w](m);g._listeners=null}),this.promise.then=m=>{let w;const M=new Promise(j=>{g.subscribe(j),w=j}).then(m);return M.cancel=function(){g.unsubscribe(w)},M},u(function(w,M,j){g.reason||(g.reason=new fp(w,M,j),c(g.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(u){if(this.reason){u(this.reason);return}this._listeners?this._listeners.push(u):this._listeners=[u]}unsubscribe(u){if(!this._listeners)return;const c=this._listeners.indexOf(u);c!==-1&&this._listeners.splice(c,1)}static source(){let u;return{token:new hS(function(m){u=m}),cancel:u}}}const FI=hS;function OI(o){return function(c){return o.apply(null,c)}}function AI(o){return ft.isObject(o)&&o.isAxiosError===!0}const sw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(sw).forEach(([o,u])=>{sw[u]=o});const II=sw;function OL(o){const u=new ay(o),c=pL(ay.prototype.request,u);return ft.extend(c,ay.prototype,u,{allOwnKeys:!0}),ft.extend(c,u,null,{allOwnKeys:!0}),c.create=function(m){return OL(Va(o,m))},c}const en=OL(lS);en.Axios=ay;en.CanceledError=fp;en.CancelToken=FI;en.isCancel=jL;en.VERSION=FL;en.toFormData=s0;en.AxiosError=Se;en.Cancel=en.CanceledError;en.all=function(u){return Promise.all(u)};en.spread=OI;en.isAxiosError=AI;en.mergeConfig=Va;en.AxiosHeaders=tl;en.formToJSON=o=>LL(ft.isHTMLForm(o)?new FormData(o):o);en.HttpStatusCode=II;en.default=en;const Rc=en,tx="http://localhost:3000/";function Xa(){const o=fL(),[u,c]=Mt.useState(!1),[g,m]=Mt.useState(""),[w,M]=Mt.useState();return{authenticated:u,login:async(z,$)=>{try{const ht=await Rc.post(tx+"api/login",{email:z,password:$});localStorage.setItem("token",ht.data),c(!0),o(-2),console.log("LOG IN SUCCESSFULLY!!!! 🥳")}catch(ht){console.error(ht.response.data),m(ht.response.data.message)}},logout:()=>{localStorage.removeItem("token"),c(!1),o("/register")},isAuthenticated:()=>{const z=localStorage.getItem("token");Rc.get(tx+"api/users",{headers:{Authorization:`token ${z}`}}).then($=>{M($.data)}).catch($=>{console.error($)}),c(!!z)},invalidInput:g,signUp:async(z,$,ht,rt)=>{try{const Y=await Rc.post(tx+"api/users",{firstName:z,lastName:$,email:ht,password:rt}).then(Et=>Et);Y.status===200?(localStorage.setItem("token",Y.data),c(!0),o(-1),console.log("REGISTER SUCCESSFULLY!!!! 🥳")):console.log("error while register")}catch(Y){console.log(Y.response),m(Y.response.data.message)}},user:w,setInvalidInput:m}}const Ka=()=>{const{authenticated:o,logout:u,isAuthenticated:c,user:g}=Xa();return Mt.useEffect(()=>{c()},[]),ut(Hi,{children:bt("div",{className:"header",children:[ut("h1",{className:"header-title",children:ut("a",{href:"/",children:"Moboga"})}),o?bt("div",{className:"header-username",children:[bt("h3",{className:"header-login-username",children:["Hi, ",g==null?void 0:g.name,"!"]}),ut("a",{onClick:()=>u(),children:"Log out"})]}):ut("div",{className:"header-username",children:ut("a",{href:"/register",children:"Register/Login"})})]})})},DI=({labels:o})=>ut("div",{children:ut("ul",{className:"labels-list",children:o.length>0?bt(Hi,{children:[ut("li",{className:"labels-list_item",children:o[0].name}),ut("li",{className:"labels-list_item",children:o[1].name}),ut("li",{className:"labels-list_item",children:o[2].name})]}):null})}),RI="http://localhost:3000/",BI=({mediaOid:o})=>{const[u,c]=Mt.useState(),g=()=>fetch(RI+`api/medias/${o}`).then(w=>w.json());return Mt.useEffect(()=>{g().then(m=>c(m))},[]),ut("div",{className:"media__card",children:u?bt(Hi,{children:[ut("h3",{children:u.name}),ut("img",{src:u.imgurl,className:"img"}),u.description==="to be written"?null:ut("p",{children:u.description})]}):null})},ex=({medias:o})=>ut("div",{className:"media__cards-area",children:o.map(u=>ut(BI,{mediaOid:u.oid}))}),zI="http://localhost:3000/",VI=async o=>{try{const u=await Rc.get(zI+`api/reviews_by_story_id/${o}`).then(c=>c.data);return console.log(u,"response from getting reviews by story id 🥲"),u}catch(u){console.error(u.response)}},UI=({user:o,reviewId:u,content:c,rating:g})=>ut("section",{children:bt("li",{className:"review-item",children:[bt("div",{className:"review-item__title",children:[ut("h4",{children:o}),bt("p",{children:["Rating: ",g]})]}),ut("p",{children:c})]},u)}),YI="http://localhost:3000/",HI=({update:o})=>{const u=n0(),[c,g]=Mt.useState(""),[m,w]=Mt.useState(""),{authenticated:M,isAuthenticated:j,user:O}=Xa(),A=async B=>{B.preventDefault();try{const z=await Rc.post(YI+"api/reviews",{userId:O==null?void 0:O.userId,userName:O==null?void 0:O.name,content:c,rating:m,mediaType:u.media,storyId:u.id}).then($=>$);g(""),w(""),o()}catch(z){console.log(z)}};return Mt.useEffect(()=>{j()},[]),ut(Hi,{children:M&&bt("form",{onSubmit:A,children:[ut("h2",{style:{textAlign:"left"},children:"Add a new review:"}),bt("div",{className:"add-review-area",children:[ut("textarea",{required:!0,placeholder:"Write here your review",value:c,onChange:B=>g(B.target.value),className:"review__text-input"}),bt("div",{children:[ut("label",{htmlFor:"rating",children:"Rating:"}),ut("input",{id:"rating",type:"number",required:!0,max:10,min:0,value:m,onChange:B=>w(B.target.value),className:"review__rate-input"})]}),ut("button",{type:"submit",children:"Add"})]})]})})},_I=()=>{const o=n0(),[u,c]=Mt.useState([]),{isAuthenticated:g,user:m}=Xa(),[w,M]=Mt.useState(!1),j=async()=>{if(o!=null&&o.id){const A=await VI(o.id);console.log(A),c(A)}},O=async()=>{M(!w)};return Mt.useEffect(()=>{g()},[]),Mt.useEffect(()=>{j()},[m,w]),bt("div",{className:"review-area",children:[ut("h2",{style:{textAlign:"left"},children:"Reviews:"}),ut("section",{children:u&&ut("ul",{children:u.map(A=>ut(UI,{user:A.userName,reviewId:A.id,content:A.content,rating:A.rating}))})}),ut("section",{children:ut(HI,{update:O})})]})},GI="http://localhost:3000/",XI=()=>{const o=n0(),[u,c]=Mt.useState();if(o.id){const g=()=>{const m=fetch(GI+`api/stories/${o.id}`).then(w=>w.json());return console.log("🤔🤔🤔🤔🤔",m),m};Mt.useEffect(()=>{g().then(m=>c(m))},[])}return bt(Hi,{children:[ut(Ka,{}),u?bt(Hi,{children:[ut("h1",{children:u.storyname}),ut(DI,{labels:u.labels})]}):null,u&&o.media?o.media==="movies"?ut(Hi,{children:ut(ex,{medias:u.movies})}):o.media==="books"?ut(Hi,{children:ut(ex,{medias:u.books})}):ut(Hi,{children:ut(ex,{medias:u.games})}):null,ut(_I,{}),ut(r0,{})]})},Mc=()=>{const o="#1DA1F2",[u,c]=Mt.useState(!1),g=()=>c(!u);return ut(Hi,{children:bt("div",{className:"media-card",style:{backgroundColor:o},children:[ut("div",{className:"media-card-header",onClick:g,children:ut("h2",{style:{color:"white"},onClick:g,children:"post-apocalyptic"})}),ut("div",{children:u?bt("ul",{className:`media-card-list ${u?"open":""}`,children:[ut("li",{className:"media-card-item",children:ut("a",{href:"./map/2",children:"The Last Of Us"})}),ut("li",{className:"media-card-item",children:ut("a",{href:"./map/4",children:"Resident Evil"})}),ut("li",{className:"media-card-item",children:ut("a",{href:"./map/3",children:"Mad Max"})})]}):null})]})})},KI=()=>bt(Hi,{children:[ut("h2",{children:"Or explore a story?"}),bt("div",{className:"cards-area",children:[ut(Mc,{}),ut(Mc,{}),ut(Mc,{}),ut(Mc,{}),ut(Mc,{})]})]}),WI=()=>bt("section",{className:"search-area",children:[ut("h2",{children:"Find a story"}),bt("div",{className:"search_bar-and-button",children:[ut("input",{type:"text",className:"search_searchbar"}),ut("button",{children:"Search"})]})]}),$I=()=>bt(Hi,{children:[ut(Ka,{}),ut(WI,{}),ut(KI,{}),ut(r0,{})]});(function(){var o;function u(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function c(t){var e=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:u(t)}}function g(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}var m=typeof Object.create=="function"?Object.create:function(t){function e(){}return e.prototype=t,new e},w;if(typeof Object.setPrototypeOf=="function")w=Object.setPrototypeOf;else{var M;t:{var j={a:!0},O={};try{O.__proto__=j,M=O.a;break t}catch{}M=!1}w=M?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var A=w;function B(t,e){if(t.prototype=m(e.prototype),t.prototype.constructor=t,A)A(t,e);else for(var i in e)if(i!="prototype")if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(e,i);n&&Object.defineProperty(t,i,n)}else t[i]=e[i];t.JA=e.prototype}var z=typeof global<"u"&&global!=null?global:self,$=typeof Object.assign=="function"?Object.assign:function(t,e){for(var i=1;i<arguments.length;i++){var n=arguments[i];if(n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ht=typeof Object.defineProperties=="function"?Object.defineProperty:function(t,e,i){t!=Array.prototype&&t!=Object.prototype&&(t[e]=i.value)};function rt(t,e){if(e){var i=z;t=t.split(".");for(var n=0;n<t.length-1;n++){var r=t[n];r in i||(i[r]={}),i=i[r]}t=t[t.length-1],n=i[t],e=e(n),e!=n&&e!=null&&ht(i,t,{writable:!0,value:e})}}rt("Object.assign",function(t){return t||$}),rt("Array.prototype.fill",function(t){return t||function(e,i,n){var r=this.length||0;for(0>i&&(i=Math.max(0,r+i)),(n==null||n>r)&&(n=r),n=Number(n),0>n&&(n=Math.max(0,r+n)),i=Number(i||0);i<n;i++)this[i]=e;return this}});var Y=typeof globalThis=="object"&&globalThis||typeof global=="object"&&global.global===global&&global||typeof self=="object"&&self.self===self&&self||{};Y.requestAnimationFrame===void 0&&(Y.setImmediate===void 0?Y.requestAnimationFrame=function(t){Y.setTimeout(t,0)}:Y.requestAnimationFrame=Y.setImmediate);function Et(){}function K(t,e){var i=-1;return function(){var n=this,r=arguments;i!==-1&&Y.clearTimeout(i),i=H(function(){i=-1,t.apply(n,r)},e)}}function H(t,e){return Y.setTimeout(t,e)}function J(t){return Y.document.createElement(t)}function R(t){throw Error(t)}function st(t,e){t="The object is frozen, so its properties cannot be set: "+t.toString(),e!==void 0&&(t+="  to value: "+e),R(t)}function dt(t,e,i,n){i=i===null?"*":typeof i=="string"?i:typeof i=="function"&&typeof i.className=="string"?i.className:"",n!==void 0&&(i+="."+n),R(i+" is not in the range "+e+": "+t)}function Lt(t){Y.console&&Y.console.log(t)}function xt(t){return typeof t=="object"&&t!==null}function Wt(t){return Array.isArray(t)||Y.NodeList&&t instanceof Y.NodeList||Y.HTMLCollection&&t instanceof Y.HTMLCollection}function ee(t){return Array.prototype.slice.call(t)}function nn(t,e,i){Array.isArray(t)?e>=t.length?t.push(i):t.splice(e,0,i):R("Cannot insert an object into an HTMLCollection or NodeList: "+i+" at "+e)}function jr(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):R("Cannot remove an object from an HTMLCollection or NodeList at "+e)}function Yt(){var t=ai.pop();return t===void 0?[]:t}function Vt(t){t.length=0,ai.push(t)}function Ms(t){if(typeof t=="function"){if(t.className)return t.className;if(t.name)return t.name;var e=t.toString();if(e=e.substring(9,e.indexOf("(")).trim(),e!=="")return t._className=e}else if(xt(t)&&t.constructor)return Ms(t.constructor);return typeof t}function Gi(t){var e=t;return xt(t)&&(t.text?e=t.text:t.name?e=t.name:t.key!==void 0?e=t.key:t.id!==void 0?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:t.Key!==void 0?e=t.Key:t.Id!==void 0?e=t.Id:t.ID!==void 0&&(e=t.ID))),e===void 0?"undefined":e===null?"null":e.toString()}function eh(t,e){if(t.hasOwnProperty(e))return!0;for(t=Object.getPrototypeOf(t);t&&t!==Function;){if(t.hasOwnProperty(e))return!0;var i=t.vA;if(i&&i[e])return!0;t=Object.getPrototypeOf(t)}return!1}function Tt(t,e,i){Object.defineProperty(ne.prototype,t,{get:e,set:i})}function mt(t){for(var e=[],i=0;256>i;i++)e["0123456789abcdef".charAt(i>>4)+"0123456789abcdef".charAt(i&15)]=String.fromCharCode(i);t.length%2&&(t="0"+t),i=[];for(var n=0,r=0;r<t.length;r+=2)i[n++]=e[t.substr(r,2)];for(t=i.join(""),t=t===""?"0":t,e=[],i=0;256>i;i++)e[i]=i;for(i=n=0;256>i;i++)n=(n+e[i]+119)%256,r=e[i],e[i]=e[n],e[n]=r;n=i=0;for(var s="",l=0;l<t.length;l++)i=(i+1)%256,n=(n+e[i])%256,r=e[i],e[i]=e[n],e[n]=r,s+=String.fromCharCode(t.charCodeAt(l)^e[(e[i]+e[n])%256]);return s}var oe=Y.navigator!==void 0&&0<Y.navigator.userAgent.indexOf("Trident/7"),ke=Y.navigator!==void 0&&Y.navigator.platform!==void 0&&Y.navigator.platform.match(/(iPhone|iPod|iPad|Mac)/i)!==null,ai=[];Et.className="Util",Et.Dx="32ab5ff3b26f42dc0ed90f21472913b5",Et.adym="gojs.net",Et.vfo="28e645fdb7",Et.className="Util";function Q(t,e,i){Oe(this),this.j=t,this.wa=e,this.m=i}Q.prototype.toString=function(){return"EnumValue."+this.wa};function Xn(t,e){return e==null||e===""?null:t[e]}z.Object.defineProperties(Q.prototype,{classType:{get:function(){return this.j}},name:{get:function(){return this.wa}},value:{get:function(){return this.m}}}),Q.className="EnumValue";function ll(){this.aw=[]}ll.prototype.toString=function(){return this.aw.join("")},ll.prototype.add=function(t){t!==""&&this.aw.push(t)},ll.className="StringBuilder";function We(){}We.className="PropertyCollection";var ks={xA:!1,CA:!1,zA:!1,BA:!1,GA:!1,EA:!1,kx:!1,yA:null,trace:function(t){Y.console&&Y.console.log(t)},AA:function(t,e,i,n){t.strokeStyle="red",t.fillStyle="red",t.font="8px sans-serif",t.beginPath(),t.moveTo(-10,0),t.lineTo(10,0),t.moveTo(0,-10),t.lineTo(0,10),t.stroke(),t.setTransform(1,0,0,1,0,0),t.scale(i,i),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.lineWidth=2,t.beginPath(),t.moveTo(n.left,n.top+20),t.lineTo(n.left,n.top),t.lineTo(n.left+20,n.top),t.moveTo(n.right,n.bottom-20),t.lineTo(n.right,n.bottom),t.lineTo(n.right-20,n.bottom),t.stroke(),t.fillText("DB: "+Math.round(n.x)+", "+Math.round(n.y)+", "+Math.round(n.width)+", "+Math.round(n.height),n.left,n.top-5)},wA:function(t){var e={},i;for(i in t){if(e.x=i,e.x!=="licenseKey"){var n=t[e.x];if(n.prototype!==void 0){e.Vl=Object.getOwnPropertyNames(n.prototype);for(var r={Rj:0};r.Rj<e.Vl.length;r={Rj:r.Rj},r.Rj++){var s=Object.getOwnPropertyDescriptor(n.prototype,e.Vl[r.Rj]);s.get!==void 0&&s.set===void 0&&Object.defineProperty(n.prototype,e.Vl[r.Rj],{set:function(l,h){return function(){throw Error("Property "+l.Vl[h.Rj]+" of "+l.x+" is read-only.")}}(e,r)})}}}e={Vl:e.Vl,x:e.x}}}};function fi(){}fi.prototype.reset=function(){},fi.prototype.next=function(){return!1},fi.prototype.wd=function(){return!1},fi.prototype.first=function(){return null},fi.prototype.any=function(){return!1},fi.prototype.all=function(){return!0},fi.prototype.each=function(){return this},fi.prototype.map=function(){return this},fi.prototype.filter=function(){return this},fi.prototype.$d=function(){},fi.prototype.toString=function(){return"EmptyIterator"},z.Object.defineProperties(fi.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 0}}}),fi.prototype.first=fi.prototype.first,fi.prototype.hasNext=fi.prototype.wd,fi.prototype.next=fi.prototype.next,fi.prototype.reset=fi.prototype.reset;var Kn=null;fi.className="EmptyIterator",Kn=new fi;function ze(t){this.key=-1,this.value=t}ze.prototype.reset=function(){this.key=-1},ze.prototype.next=function(){return this.key===-1?(this.key=0,!0):!1},ze.prototype.wd=function(){return this.next()},ze.prototype.first=function(){return this.key=0,this.value},ze.prototype.any=function(t){return this.key=-1,t(this.value)},ze.prototype.all=function(t){return this.key=-1,t(this.value)},ze.prototype.each=function(t){return this.key=-1,t(this.value),this},ze.prototype.map=function(t){return new ze(t(this.value))},ze.prototype.filter=function(t){return t(this.value)?new ze(this.value):Kn},ze.prototype.$d=function(){this.value=null},ze.prototype.toString=function(){return"SingletonIterator("+this.value+")"},z.Object.defineProperties(ze.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 1}}}),ze.prototype.first=ze.prototype.first,ze.prototype.hasNext=ze.prototype.wd,ze.prototype.next=ze.prototype.next,ze.prototype.reset=ze.prototype.reset,ze.className="SingletonIterator";function Ie(t){this.Bb=t,this.mf=null,t.Sa=null,this.qa=t.Ja,this.Za=-1}Ie.prototype.reset=function(){var t=this.Bb;t.Sa=null,this.qa=t.Ja,this.Za=-1},Ie.prototype.next=function(){var t=this.Bb;if(t.Ja!==this.qa&&0>this.key)return!1;t=t.s;var e=t.length,i=++this.Za,n=this.mf;if(n!==null)for(;i<e;){var r=t[i];if(n(r))return this.key=this.Za=i,this.value=r,!0;i++}else{if(i<e)return this.key=i,this.value=t[i],!0;this.$d()}return!1},Ie.prototype.wd=function(){return this.next()},Ie.prototype.first=function(){var t=this.Bb;this.qa=t.Ja,this.Za=0,t=t.s;var e=t.length,i=this.mf;if(i!==null){for(var n=0;n<e;){var r=t[n];if(i(r))return this.key=this.Za=n,this.value=r;n++}return null}return 0<e?(t=t[0],this.key=0,this.value=t):null},Ie.prototype.any=function(t){var e=this.Bb;e.Sa=null,this.Za=-1,e=e.s;for(var i=e.length,n=this.mf,r=0;r<i;r++){var s=e[r];if((n===null||n(s))&&t(s))return!0}return!1},Ie.prototype.all=function(t){var e=this.Bb;e.Sa=null,this.Za=-1,e=e.s;for(var i=e.length,n=this.mf,r=0;r<i;r++){var s=e[r];if((n===null||n(s))&&!t(s))return!1}return!0},Ie.prototype.each=function(t){var e=this.Bb;e.Sa=null,this.Za=-1,e=e.s;for(var i=e.length,n=this.mf,r=0;r<i;r++){var s=e[r];(n===null||n(s))&&t(s)}return this},Ie.prototype.map=function(t){var e=this.Bb;e.Sa=null,this.Za=-1;var i=[];e=e.s;for(var n=e.length,r=this.mf,s=0;s<n;s++){var l=e[s];(r===null||r(l))&&i.push(t(l))}return t=new tt,t.s=i,t.xb(),t.iterator},Ie.prototype.filter=function(t){var e=this.Bb;e.Sa=null,this.Za=-1;var i=[];e=e.s;for(var n=e.length,r=this.mf,s=0;s<n;s++){var l=e[s];(r===null||r(l))&&t(l)&&i.push(l)}return t=new tt,t.s=i,t.xb(),t.iterator},Ie.prototype.$d=function(){this.key=-1,this.value=null,this.qa=-1,this.mf=null,this.Bb.Sa=this},Ie.prototype.toString=function(){return"ListIterator@"+this.Za+"/"+this.Bb.count},z.Object.defineProperties(Ie.prototype,{iterator:{get:function(){return this}},predicate:{get:function(){return this.mf},set:function(t){this.mf=t}},count:{get:function(){var t=this.mf;if(t!==null){for(var e=0,i=this.Bb.s,n=i.length,r=0;r<n;r++)t(i[r])&&e++;return e}return this.Bb.s.length}}}),Ie.prototype.first=Ie.prototype.first,Ie.prototype.hasNext=Ie.prototype.wd,Ie.prototype.next=Ie.prototype.next,Ie.prototype.reset=Ie.prototype.reset,Ie.className="ListIterator";function ci(t){this.Bb=t,t.Eg=null,this.qa=t.Ja,this.Za=t.s.length}ci.prototype.reset=function(){var t=this.Bb;t.Eg=null,this.qa=t.Ja,this.Za=t.s.length},ci.prototype.next=function(){var t=this.Bb;if(t.Ja!==this.qa&&0>this.key)return!1;var e=--this.Za;return 0<=e?(this.key=e,this.value=t.s[e],!0):(this.$d(),!1)},ci.prototype.wd=function(){return this.next()},ci.prototype.first=function(){var t=this.Bb;this.qa=t.Ja;var e=t.s;return this.Za=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},ci.prototype.any=function(t){var e=this.Bb;e.Eg=null,e=e.s;var i=e.length;for(this.Za=i,--i;0<=i;i--)if(t(e[i]))return!0;return!1},ci.prototype.all=function(t){var e=this.Bb;e.Eg=null,e=e.s;var i=e.length;for(this.Za=i,--i;0<=i;i--)if(!t(e[i]))return!1;return!0},ci.prototype.each=function(t){var e=this.Bb;e.Eg=null,e=e.s;var i=e.length;for(this.Za=i,--i;0<=i;i--)t(e[i]);return this},ci.prototype.map=function(t){var e=this.Bb;e.Eg=null;var i=[];e=e.s;var n=e.length;for(this.Za=n,--n;0<=n;n--)i.push(t(e[n]));return t=new tt,t.s=i,t.xb(),t.iterator},ci.prototype.filter=function(t){var e=this.Bb;e.Eg=null;var i=[];e=e.s;var n=e.length;for(this.Za=n,--n;0<=n;n--){var r=e[n];t(r)&&i.push(r)}return t=new tt,t.s=i,t.xb(),t.iterator},ci.prototype.$d=function(){this.key=-1,this.value=null,this.qa=-1,this.Bb.Eg=this},ci.prototype.toString=function(){return"ListIteratorBackwards("+this.Za+"/"+this.Bb.count+")"},z.Object.defineProperties(ci.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.Bb.s.length}}}),ci.prototype.first=ci.prototype.first,ci.prototype.hasNext=ci.prototype.wd,ci.prototype.next=ci.prototype.next,ci.prototype.reset=ci.prototype.reset,ci.className="ListIteratorBackwards";function tt(t){Oe(this),this._isFrozen=!1,this.s=[],this.Ja=0,this.Eg=this.Sa=null,typeof t=="string"&&R("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),t!==void 0&&this.addAll(t)}o=tt.prototype,o.xb=function(){var t=this.Ja;t++,999999999<t&&(t=0),this.Ja=t},o.freeze=function(){return this._isFrozen=!0,this},o.ka=function(){return this._isFrozen=!1,this},o.toString=function(){return"List()#"+Ei(this)},o.add=function(t){return t===null?this:(this._isFrozen&&st(this,t),this.s.push(t),this.xb(),this)},o.push=function(t){this.add(t)},o.addAll=function(t){if(t===null)return this;this._isFrozen&&st(this);var e=this.s;if(Wt(t))for(var i=t.length,n=0;n<i;n++)e.push(t[n]);else for(t=t.iterator;t.next();)e.push(t.value);return this.xb(),this},o.clear=function(){this._isFrozen&&st(this),this.s.length=0,this.xb()},o.contains=function(t){return t===null?!1:this.s.indexOf(t)!==-1},o.has=function(t){return this.contains(t)},o.indexOf=function(t){return t===null?-1:this.s.indexOf(t)},o.L=function(t){var e=this.s;return(0>t||t>=e.length)&&dt(t,"0 <= i < length",tt,"elt:i"),e[t]},o.get=function(t){return this.L(t)},o.Xc=function(t,e){var i=this.s;(0>t||t>=i.length)&&dt(t,"0 <= i < length",tt,"setElt:i"),this._isFrozen&&st(this,t),i[t]=e},o.set=function(t,e){this.Xc(t,e)},o.first=function(){var t=this.s;return t.length===0?null:t[0]},o.fc=function(){var t=this.s,e=t.length;return 0<e?t[e-1]:null},o.pop=function(){this._isFrozen&&st(this);var t=this.s;return 0<t.length?t.pop():null},tt.prototype.any=function(t){for(var e=this.s,i=e.length,n=0;n<i;n++)if(t(e[n]))return!0;return!1},tt.prototype.all=function(t){for(var e=this.s,i=e.length,n=0;n<i;n++)if(!t(e[n]))return!1;return!0},tt.prototype.each=function(t){for(var e=this.s,i=e.length,n=0;n<i;n++)t(e[n]);return this},tt.prototype.map=function(t){for(var e=new tt,i=[],n=this.s,r=n.length,s=0;s<r;s++)i.push(t(n[s]));return e.s=i,e.xb(),e},tt.prototype.filter=function(t){for(var e=new tt,i=[],n=this.s,r=n.length,s=0;s<r;s++){var l=n[s];t(l)&&i.push(l)}return e.s=i,e.xb(),e},o=tt.prototype,o.Eb=function(t,e){0>t&&dt(t,">= 0",tt,"insertAt:i"),this._isFrozen&&st(this,t);var i=this.s;t>=i.length?i.push(e):i.splice(t,0,e),this.xb()},o.remove=function(t){if(t===null)return!1;this._isFrozen&&st(this,t);var e=this.s;return t=e.indexOf(t),t===-1?!1:(t===e.length-1?e.pop():e.splice(t,1),this.xb(),!0)},o.delete=function(t){return this.remove(t)},o.nb=function(t){var e=this.s;(0>t||t>=e.length)&&dt(t,"0 <= i < length",tt,"removeAt:i"),this._isFrozen&&st(this,t),t===e.length-1?e.pop():e.splice(t,1),this.xb()},o.removeRange=function(t,e){var i=this.s,n=i.length;if(0>t)t=0;else if(t>=n)return this;if(0>e)return this;if(e>=n&&(e=n-1),t>e)return this;this._isFrozen&&st(this);for(var r=t,s=e+1;s<n;)i[r++]=i[s++];return i.length=n-(e-t+1),this.xb(),this},tt.prototype.copy=function(){var t=new tt,e=this.s;return 0<e.length&&(t.s=Array.prototype.slice.call(e)),t},o=tt.prototype,o.Fa=function(){for(var t=this.s,e=this.count,i=Array(e),n=0;n<e;n++)i[n]=t[n];return i},o.Ev=function(){for(var t=new q,e=this.s,i=this.count,n=0;n<i;n++)t.add(e[n]);return t},o.sort=function(t){return this._isFrozen&&st(this),this.s.sort(t),this.xb(),this},o.wi=function(t,e,i){var n=this.s,r=n.length;e===void 0&&(e=0),i===void 0&&(i=r),this._isFrozen&&st(this);var s=i-e;if(1>=s)return this;if((0>e||e>=r-1)&&dt(e,"0 <= from < length",tt,"sortRange:from"),s===2)return i=n[e],r=n[e+1],0<t(i,r)&&(n[e]=r,n[e+1]=i,this.xb()),this;if(e===0)if(i>=r)n.sort(t);else for(e=n.slice(0,i),e.sort(t),t=0;t<i;t++)n[t]=e[t];else if(i>=r)for(i=n.slice(e),i.sort(t),t=e;t<r;t++)n[t]=i[t-e];else for(r=n.slice(e,i),r.sort(t),t=e;t<i;t++)n[t]=r[t-e];return this.xb(),this},o.reverse=function(){return this._isFrozen&&st(this),this.s.reverse(),this.xb(),this},z.Object.defineProperties(tt.prototype,{_dataArray:{get:function(){return this.s}},count:{get:function(){return this.s.length}},size:{get:function(){return this.s.length}},length:{get:function(){return this.s.length}},iterator:{get:function(){if(0>=this.s.length)return Kn;var t=this.Sa;return t!==null?(t.reset(),t):new Ie(this)}},iteratorBackwards:{get:function(){if(0>=this.s.length)return Kn;var t=this.Eg;return t!==null?(t.reset(),t):new ci(this)}}}),tt.prototype.reverse=tt.prototype.reverse,tt.prototype.sortRange=tt.prototype.wi,tt.prototype.sort=tt.prototype.sort,tt.prototype.toSet=tt.prototype.Ev,tt.prototype.toArray=tt.prototype.Fa,tt.prototype.removeRange=tt.prototype.removeRange,tt.prototype.removeAt=tt.prototype.nb,tt.prototype.delete=tt.prototype.delete,tt.prototype.remove=tt.prototype.remove,tt.prototype.insertAt=tt.prototype.Eb,tt.prototype.pop=tt.prototype.pop,tt.prototype.last=tt.prototype.fc,tt.prototype.first=tt.prototype.first,tt.prototype.set=tt.prototype.set,tt.prototype.setElt=tt.prototype.Xc,tt.prototype.get=tt.prototype.get,tt.prototype.elt=tt.prototype.L,tt.prototype.indexOf=tt.prototype.indexOf,tt.prototype.has=tt.prototype.has,tt.prototype.contains=tt.prototype.contains,tt.prototype.clear=tt.prototype.clear,tt.prototype.addAll=tt.prototype.addAll,tt.prototype.push=tt.prototype.push,tt.prototype.add=tt.prototype.add,tt.prototype.thaw=tt.prototype.ka,tt.prototype.freeze=tt.prototype.freeze,tt.className="List";function pi(t){this.bg=t,t.Sa=null,this.qa=t.Ja,this.sa=null}pi.prototype.reset=function(){var t=this.bg;t.Sa=null,this.qa=t.Ja,this.sa=null},pi.prototype.next=function(){var t=this.bg;if(t.Ja!==this.qa&&this.key===null)return!1;var e=this.sa;return e=e===null?t.ea:e.ua,e!==null?(this.sa=e,this.value=e.value,this.key=e.key,!0):(this.$d(),!1)},pi.prototype.wd=function(){return this.next()},pi.prototype.first=function(){var t=this.bg;if(this.qa=t.Ja,t=t.ea,t!==null){this.sa=t;var e=t.value;return this.key=t.key,this.value=e}return null},pi.prototype.any=function(t){var e=this.bg;for(this.sa=e.Sa=null,e=e.ea;e!==null;){if(t(e.value))return!0;e=e.ua}return!1},pi.prototype.all=function(t){var e=this.bg;for(this.sa=e.Sa=null,e=e.ea;e!==null;){if(!t(e.value))return!1;e=e.ua}return!0},pi.prototype.each=function(t){var e=this.bg;for(this.sa=e.Sa=null,e=e.ea;e!==null;)t(e.value),e=e.ua;return this},pi.prototype.map=function(t){var e=this.bg;e.Sa=null;var i=new tt;for(e=e.ea;e!==null;)i.add(t(e.value)),e=e.ua;return i.iterator},pi.prototype.filter=function(t){var e=this.bg;e.Sa=null;var i=new tt;for(e=e.ea;e!==null;){var n=e.value;t(n)&&i.add(n),e=e.ua}return i.iterator},pi.prototype.$d=function(){this.value=this.key=null,this.qa=-1,this.bg.Sa=this},pi.prototype.toString=function(){return this.sa!==null?"SetIterator@"+this.sa.value:"SetIterator"},z.Object.defineProperties(pi.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.bg.Nb}}}),pi.prototype.first=pi.prototype.first,pi.prototype.hasNext=pi.prototype.wd,pi.prototype.next=pi.prototype.next,pi.prototype.reset=pi.prototype.reset,pi.className="SetIterator";function q(t){Oe(this),this._isFrozen=!1,this.Ob={},this.Nb=0,this.Sa=null,this.Ja=0,this.gf=this.ea=null,typeof t=="string"&&R("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),t!==void 0&&this.addAll(t)}o=q.prototype,o.xb=function(){var t=this.Ja;t++,999999999<t&&(t=0),this.Ja=t},o.freeze=function(){return this._isFrozen=!0,this},o.ka=function(){return this._isFrozen=!1,this},o.toString=function(){return"Set()#"+Ei(this)},o.add=function(t){if(t===null)return this;this._isFrozen&&st(this,t);var e=t;return xt(t)&&(e=nu(t)),this.Ob[e]===void 0&&(this.Nb++,t=new Wa(t,t),this.Ob[e]=t,e=this.gf,e===null?this.ea=t:(t.hl=e,e.ua=t),this.gf=t,this.xb()),this},o.addAll=function(t){if(t===null)return this;if(this._isFrozen&&st(this),Wt(t))for(var e=t.length,i=0;i<e;i++)this.add(t[i]);else for(t=t.iterator;t.next();)this.add(t.value);return this},o.contains=function(t){if(t===null)return!1;var e=t;return xt(t)&&(e=Ei(t),e===void 0)?!1:this.Ob[e]!==void 0},o.has=function(t){return this.contains(t)},o.Ny=function(t){if(t===null)return!0;for(t=t.iterator;t.next();)if(!this.contains(t.value))return!1;return!0},o.Oy=function(t){if(t===null)return!0;for(t=t.iterator;t.next();)if(this.contains(t.value))return!0;return!1},o.first=function(){var t=this.ea;return t===null?null:t.value},q.prototype.any=function(t){for(var e=this.ea;e!==null;){if(t(e.value))return!0;e=e.ua}return!1},q.prototype.all=function(t){for(var e=this.ea;e!==null;){if(!t(e.value))return!1;e=e.ua}return!0},q.prototype.each=function(t){for(var e=this.ea;e!==null;)t(e.value),e=e.ua;return this},q.prototype.map=function(t){for(var e=new q,i=this.ea;i!==null;)e.add(t(i.value)),i=i.ua;return e},q.prototype.filter=function(t){for(var e=new q,i=this.ea;i!==null;){var n=i.value;t(n)&&e.add(n),i=i.ua}return e},o=q.prototype,o.remove=function(t){if(t===null)return!1;this._isFrozen&&st(this,t);var e=t;if(xt(t)&&(e=Ei(t),e===void 0)||(t=this.Ob[e],t===void 0))return!1;var i=t.ua,n=t.hl;return i!==null&&(i.hl=n),n!==null&&(n.ua=i),this.ea===t&&(this.ea=i),this.gf===t&&(this.gf=n),delete this.Ob[e],this.Nb--,this.xb(),!0},o.delete=function(t){return this.remove(t)},o.bp=function(t){if(t===null)return this;if(this._isFrozen&&st(this),Wt(t))for(var e=t.length,i=0;i<e;i++)this.remove(t[i]);else for(t=t.iterator;t.next();)this.remove(t.value);return this},o.iA=function(t){if(t===null||this.count===0)return this;this._isFrozen&&st(this);var e=new q;e.addAll(t),t=[];for(var i=this.iterator;i.next();){var n=i.value;e.contains(n)||t.push(n)}return this.bp(t),this},o.clear=function(){this._isFrozen&&st(this),this.Ob={},this.Nb=0,this.Sa!==null&&this.Sa.reset(),this.gf=this.ea=null,this.xb()},q.prototype.copy=function(){var t=new q,e=this.Ob,i;for(i in e)t.add(e[i].value);return t},q.prototype.Fa=function(){var t=Array(this.Nb),e=this.Ob,i=0,n;for(n in e)t[i]=e[n].value,i++;return t},q.prototype.Dv=function(){var t=new tt,e=this.Ob,i;for(i in e)t.add(e[i].value);return t};function Oe(t){t.__gohashid=ru++}function nu(t){var e=t.__gohashid;return e===void 0&&(e=ru++,t.__gohashid=e),e}function Ei(t){return t.__gohashid}z.Object.defineProperties(q.prototype,{count:{get:function(){return this.Nb}},size:{get:function(){return this.Nb}},iterator:{get:function(){if(0>=this.Nb)return Kn;var t=this.Sa;return t!==null?(t.reset(),t):new pi(this)}}}),q.prototype.toList=q.prototype.Dv,q.prototype.toArray=q.prototype.Fa,q.prototype.clear=q.prototype.clear,q.prototype.retainAll=q.prototype.iA,q.prototype.removeAll=q.prototype.bp,q.prototype.delete=q.prototype.delete,q.prototype.remove=q.prototype.remove,q.prototype.first=q.prototype.first,q.prototype.containsAny=q.prototype.Oy,q.prototype.containsAll=q.prototype.Ny,q.prototype.has=q.prototype.has,q.prototype.contains=q.prototype.contains,q.prototype.addAll=q.prototype.addAll,q.prototype.add=q.prototype.add,q.prototype.thaw=q.prototype.ka,q.prototype.freeze=q.prototype.freeze;var ru=1;q.className="Set",q.uniqueHash=Oe,q.hashIdUnique=nu,q.hashId=Ei;function ti(t){this.ma=t,this.qa=t.Ja,this.sa=null}ti.prototype.reset=function(){this.qa=this.ma.Ja,this.sa=null},ti.prototype.next=function(){var t=this.ma;if(t.Ja!==this.qa&&this.key===null)return!1;var e=this.sa;return e=e===null?t.ea:e.ua,e!==null?(this.sa=e,this.value=this.key=t=e.key,!0):(this.$d(),!1)},ti.prototype.wd=function(){return this.next()},ti.prototype.first=function(){var t=this.ma;return this.qa=t.Ja,t=t.ea,t!==null?(this.sa=t,this.value=this.key=t=t.key):null},ti.prototype.any=function(t){var e=this.ma;for(this.sa=null,e=e.ea;e!==null;){if(t(e.key))return!0;e=e.ua}return!1},ti.prototype.all=function(t){var e=this.ma;for(this.sa=null,e=e.ea;e!==null;){if(!t(e.key))return!1;e=e.ua}return!0},ti.prototype.each=function(t){var e=this.ma;for(this.sa=null,e=e.ea;e!==null;)t(e.key),e=e.ua;return this},ti.prototype.map=function(t){var e=this.ma;this.sa=null;var i=new tt;for(e=e.ea;e!==null;)i.add(t(e.key)),e=e.ua;return i.iterator},ti.prototype.filter=function(t){var e=this.ma;this.sa=null;var i=new tt;for(e=e.ea;e!==null;){var n=e.key;t(n)&&i.add(n),e=e.ua}return i.iterator},ti.prototype.$d=function(){this.value=this.key=null,this.qa=-1},ti.prototype.toString=function(){return this.sa!==null?"MapKeySetIterator@"+this.sa.value:"MapKeySetIterator"},z.Object.defineProperties(ti.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ma.Nb}}}),ti.prototype.first=ti.prototype.first,ti.prototype.hasNext=ti.prototype.wd,ti.prototype.next=ti.prototype.next,ti.prototype.reset=ti.prototype.reset,ti.className="MapKeySetIterator";function se(t){q.call(this),Oe(this),this._isFrozen=!0,this.ma=t}B(se,q),o=se.prototype,o.freeze=function(){return this},o.ka=function(){return this},o.toString=function(){return"MapKeySet("+this.ma.toString()+")"},o.add=function(){R("This Set is read-only: "+this.toString())},o.contains=function(t){return this.ma.contains(t)},o.has=function(t){return this.contains(t)},o.remove=function(){R("This Set is read-only: "+this.toString())},o.delete=function(t){return this.remove(t)},o.clear=function(){R("This Set is read-only: "+this.toString())},o.first=function(){var t=this.ma.ea;return t!==null?t.key:null},se.prototype.any=function(t){for(var e=this.ma.ea;e!==null;){if(t(e.key))return!0;e=e.ua}return!1},se.prototype.all=function(t){for(var e=this.ma.ea;e!==null;){if(!t(e.key))return!1;e=e.ua}return!0},se.prototype.each=function(t){for(var e=this.ma.ea;e!==null;)t(e.key),e=e.ua;return this},se.prototype.map=function(t){for(var e=new q,i=this.ma.ea;i!==null;)e.add(t(i.key)),i=i.ua;return e},se.prototype.filter=function(t){for(var e=new q,i=this.ma.ea;i!==null;){var n=i.key;t(n)&&e.add(n),i=i.ua}return e},se.prototype.copy=function(){return new se(this.ma)},se.prototype.Ev=function(){var t=new q,e=this.ma.Ob,i;for(i in e)t.add(e[i].key);return t},se.prototype.Fa=function(){var t=this.ma.Ob,e=Array(this.ma.Nb),i=0,n;for(n in t)e[i]=t[n].key,i++;return e},se.prototype.Dv=function(){var t=new tt,e=this.ma.Ob,i;for(i in e)t.add(e[i].key);return t},z.Object.defineProperties(se.prototype,{count:{get:function(){return this.ma.Nb}},size:{get:function(){return this.ma.Nb}},iterator:{get:function(){return 0>=this.ma.Nb?Kn:new ti(this.ma)}}}),se.prototype.toList=se.prototype.Dv,se.prototype.toArray=se.prototype.Fa,se.prototype.toSet=se.prototype.Ev,se.prototype.first=se.prototype.first,se.prototype.clear=se.prototype.clear,se.prototype.delete=se.prototype.delete,se.prototype.remove=se.prototype.remove,se.prototype.has=se.prototype.has,se.prototype.contains=se.prototype.contains,se.prototype.add=se.prototype.add,se.prototype.thaw=se.prototype.ka,se.prototype.freeze=se.prototype.freeze,se.className="MapKeySet";function di(t){this.ma=t,t.ff=null,this.qa=t.Ja,this.sa=null}di.prototype.reset=function(){var t=this.ma;t.ff=null,this.qa=t.Ja,this.sa=null},di.prototype.next=function(){var t=this.ma;if(t.Ja!==this.qa&&this.key===null)return!1;var e=this.sa;return e=e===null?t.ea:e.ua,e!==null?(this.sa=e,this.value=e.value,this.key=e.key,!0):(this.$d(),!1)},di.prototype.wd=function(){return this.next()},di.prototype.first=function(){var t=this.ma;if(this.qa=t.Ja,t=t.ea,t!==null){this.sa=t;var e=t.value;return this.key=t.key,this.value=e}return null},di.prototype.any=function(t){var e=this.ma;for(this.sa=e.ff=null,e=e.ea;e!==null;){if(t(e.value))return!0;e=e.ua}return!1},di.prototype.all=function(t){var e=this.ma;for(this.sa=e.ff=null,e=e.ea;e!==null;){if(!t(e.value))return!1;e=e.ua}return!0},di.prototype.each=function(t){var e=this.ma;for(this.sa=e.ff=null,e=e.ea;e!==null;)t(e.value),e=e.ua;return this},di.prototype.map=function(t){var e=this.ma;this.sa=e.ff=null;var i=new tt;for(e=e.ea;e!==null;)i.add(t(e.value)),e=e.ua;return i.iterator},di.prototype.filter=function(t){var e=this.ma;this.sa=e.ff=null;var i=new tt;for(e=e.ea;e!==null;){var n=e.value;t(n)&&i.add(n),e=e.ua}return i.iterator},di.prototype.$d=function(){this.value=this.key=null,this.qa=-1,this.ma.ff=this},di.prototype.toString=function(){return this.sa!==null?"MapValueSetIterator@"+this.sa.value:"MapValueSetIterator"},z.Object.defineProperties(di.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ma.Nb}}}),di.prototype.first=di.prototype.first,di.prototype.hasNext=di.prototype.wd,di.prototype.next=di.prototype.next,di.prototype.reset=di.prototype.reset,di.className="MapValueSetIterator";function Wa(t,e){this.key=t,this.value=e,this.hl=this.ua=null}Wa.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},Wa.className="KeyValuePair";function gi(t){this.ma=t,t.Sa=null,this.qa=t.Ja,this.sa=null}gi.prototype.reset=function(){var t=this.ma;t.Sa=null,this.qa=t.Ja,this.sa=null},gi.prototype.next=function(){var t=this.ma;if(t.Ja!==this.qa&&this.key===null)return!1;var e=this.sa;return e=e===null?t.ea:e.ua,e!==null?(this.sa=e,this.key=e.key,this.value=e.value,!0):(this.$d(),!1)},gi.prototype.wd=function(){return this.next()},gi.prototype.first=function(){var t=this.ma;return this.qa=t.Ja,t=t.ea,t!==null?(this.sa=t,this.key=t.key,this.value=t.value,t):null},gi.prototype.any=function(t){var e=this.ma;for(this.sa=e.Sa=null,e=e.ea;e!==null;){if(t(e))return!0;e=e.ua}return!1},gi.prototype.all=function(t){var e=this.ma;for(this.sa=e.Sa=null,e=e.ea;e!==null;){if(!t(e))return!1;e=e.ua}return!0},gi.prototype.each=function(t){var e=this.ma;for(this.sa=e.Sa=null,e=e.ea;e!==null;)t(e),e=e.ua;return this},gi.prototype.map=function(t){var e=this.ma;this.sa=e.Sa=null;var i=new tt;for(e=e.ea;e!==null;)i.add(t(e)),e=e.ua;return i.iterator},gi.prototype.filter=function(t){var e=this.ma;this.sa=e.Sa=null;var i=new tt;for(e=e.ea;e!==null;)t(e)&&i.add(e),e=e.ua;return i.iterator},gi.prototype.$d=function(){this.value=this.key=null,this.qa=-1,this.ma.Sa=this},gi.prototype.toString=function(){return this.sa!==null?"MapIterator@"+this.sa:"MapIterator"},z.Object.defineProperties(gi.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ma.Nb}}}),gi.prototype.first=gi.prototype.first,gi.prototype.hasNext=gi.prototype.wd,gi.prototype.next=gi.prototype.next,gi.prototype.reset=gi.prototype.reset,gi.className="MapIterator";function vt(t){Oe(this),this._isFrozen=!1,this.Ob={},this.Nb=0,this.ff=this.Sa=null,this.Ja=0,this.gf=this.ea=null,typeof t=="string"&&R("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),t!==void 0&&this.addAll(t)}o=vt.prototype,o.xb=function(){var t=this.Ja;t++,999999999<t&&(t=0),this.Ja=t},o.freeze=function(){return this._isFrozen=!0,this},o.ka=function(){return this._isFrozen=!1,this},o.toString=function(){return"Map()#"+Ei(this)},o.add=function(t,e){this._isFrozen&&st(this,t);var i=t;xt(t)&&(i=nu(t));var n=this.Ob[i];return n===void 0?(this.Nb++,t=new Wa(t,e),this.Ob[i]=t,i=this.gf,i===null?this.ea=t:(t.hl=i,i.ua=t),this.gf=t,this.xb()):n.value=e,this},o.set=function(t,e){return this.add(t,e)},o.addAll=function(t){if(t===null)return this;if(Wt(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];this.add(n.key,n.value)}else if(t instanceof vt)for(t=t.iterator;t.next();)this.add(t.key,t.value);else for(t=t.iterator;t.next();)e=t.value,this.add(e.key,e.value);return this},o.first=function(){return this.ea},vt.prototype.any=function(t){for(var e=this.ea;e!==null;){if(t(e))return!0;e=e.ua}return!1},vt.prototype.all=function(t){for(var e=this.ea;e!==null;){if(!t(e))return!1;e=e.ua}return!0},vt.prototype.each=function(t){for(var e=this.ea;e!==null;)t(e),e=e.ua;return this},vt.prototype.map=function(t){for(var e=new vt,i=this.ea;i!==null;)e.add(i.key,t(i)),i=i.ua;return e},vt.prototype.filter=function(t){for(var e=new vt,i=this.ea;i!==null;)t(i)&&e.add(i.key,i.value),i=i.ua;return e},o=vt.prototype,o.contains=function(t){var e=t;return xt(t)&&(e=Ei(t),e===void 0)?!1:this.Ob[e]!==void 0},o.has=function(t){return this.contains(t)},o.I=function(t){var e=t;return xt(t)&&(e=Ei(t),e===void 0)?null:(t=this.Ob[e],t===void 0?null:t.value)},o.get=function(t){return this.I(t)},o.remove=function(t){if(t===null)return!1;this._isFrozen&&st(this,t);var e=t;if(xt(t)&&(e=Ei(t),e===void 0)||(t=this.Ob[e],t===void 0))return!1;var i=t.ua,n=t.hl;return i!==null&&(i.hl=n),n!==null&&(n.ua=i),this.ea===t&&(this.ea=i),this.gf===t&&(this.gf=n),delete this.Ob[e],this.Nb--,this.xb(),!0},o.delete=function(t){return this.remove(t)},o.clear=function(){this._isFrozen&&st(this),this.Ob={},this.Nb=0,this.Sa!==null&&this.Sa.reset(),this.ff!==null&&this.ff.reset(),this.gf=this.ea=null,this.xb()},vt.prototype.copy=function(){var t=new vt,e=this.Ob,i;for(i in e){var n=e[i];t.add(n.key,n.value)}return t},vt.prototype.Fa=function(){var t=this.Ob,e=Array(this.Nb),i=0,n;for(n in t){var r=t[n];e[i]=new Wa(r.key,r.value),i++}return e},vt.prototype.Jf=function(){return new se(this)},z.Object.defineProperties(vt.prototype,{count:{get:function(){return this.Nb}},size:{get:function(){return this.Nb}},iterator:{get:function(){if(0>=this.count)return Kn;var t=this.Sa;return t!==null?(t.reset(),t):new gi(this)}},iteratorKeys:{get:function(){return 0>=this.count?Kn:new ti(this)}},iteratorValues:{get:function(){if(0>=this.count)return Kn;var t=this.ff;return t!==null?(t.reset(),t):new di(this)}}}),vt.prototype.toKeySet=vt.prototype.Jf,vt.prototype.toArray=vt.prototype.Fa,vt.prototype.clear=vt.prototype.clear,vt.prototype.delete=vt.prototype.delete,vt.prototype.remove=vt.prototype.remove,vt.prototype.get=vt.prototype.get,vt.prototype.getValue=vt.prototype.I,vt.prototype.has=vt.prototype.has,vt.prototype.contains=vt.prototype.contains,vt.prototype.first=vt.prototype.first,vt.prototype.addAll=vt.prototype.addAll,vt.prototype.set=vt.prototype.set,vt.prototype.add=vt.prototype.add,vt.prototype.thaw=vt.prototype.ka,vt.prototype.freeze=vt.prototype.freeze,vt.className="Map";function P(t,e){t===void 0?this.y=this.x=0:typeof t=="number"&&typeof e=="number"?(this.x=t,this.y=e):R("Invalid arguments to Point constructor: "+t+", "+e),this._isFrozen=!1}var yo,h0,a0,f0,cp;P.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this},P.prototype.h=function(t,e){return this.x=t,this.y=e,this},P.prototype.pg=function(t,e){return this.x=t,this.y=e,this},P.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},P.prototype.copy=function(){var t=new P;return t.x=this.x,t.y=this.y,t},o=P.prototype,o.ha=function(){return this._isFrozen=!0,Object.freeze(this),this},o.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},o.freeze=function(){return this._isFrozen=!0,this},o.ka=function(){return Object.isFrozen(this)&&R("cannot thaw constant: "+this),this._isFrozen=!1,this};function aS(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,i=0;t[e]==="";)e++;var n=t[e++];n&&(i=parseFloat(n));for(var r=0;t[e]==="";)e++;return(n=t[e++])&&(r=parseFloat(n)),new P(i,r)}return new P}function fS(t){return t.x.toString()+" "+t.y.toString()}o.toString=function(){return"Point("+this.x+","+this.y+")"},o.C=function(t){return t instanceof P?this.x===t.x&&this.y===t.y:!1},o.ei=function(t,e){return this.x===t&&this.y===e},o.Xa=function(t){return F.B(this.x,t.x)&&F.B(this.y,t.y)},o.add=function(t){return this.x+=t.x,this.y+=t.y,this},o.oe=function(t){return this.x-=t.x,this.y-=t.y,this},o.offset=function(t,e){return this.x+=t,this.y+=e,this},P.prototype.rotate=function(t){if(t===0)return this;var e=this.x,i=this.y;if(e===0&&i===0)return this;if(360<=t?t-=360:0>t&&(t+=360),t===90){t=0;var n=1}else t===180?(t=-1,n=0):t===270?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));return this.x=t*e-n*i,this.y=n*e+t*i,this},o=P.prototype,o.scale=function(t,e){return this.x*=t,this.y*=e,this},o.zf=function(t){var e=t.x-this.x;return t=t.y-this.y,e*e+t*t},o.vd=function(t,e){return t-=this.x,e-=this.y,t*t+e*e},o.normalize=function(){var t=this.x,e=this.y,i=Math.sqrt(t*t+e*e);return 0<i&&(this.x=t/i,this.y=e/i),this},o.ab=function(t){return cS(t.x-this.x,t.y-this.y)},o.direction=function(t,e){return cS(t-this.x,e-this.y)};function cS(t,e){if(t===0)return 0<e?90:0>e?270:0;if(e===0)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var i=180*Math.atan(Math.abs(e/t))/Math.PI;return 0>t?i=0>e?i+180:180-i:0>e&&(i=360-i),i}o.My=function(t,e){return F.Bl(t.x,t.y,e.x,e.y,this.x,this.y)},o.Zz=function(t,e,i,n){return F.mh(t,e,i,n,this.x,this.y,this),this},o.$z=function(t,e){return F.mh(t.x,t.y,e.x,e.y,this.x,this.y,this),this},o.nA=function(t,e,i,n){return F.Ko(this.x,this.y,t,e,i,n,this),this},o.oA=function(t,e){return F.Ko(this.x,this.y,t.x,t.y,e.width,e.height,this),this},o.ui=function(t,e){return this.x=t.x+e.x*t.width+e.offsetX,this.y=t.y+e.y*t.height+e.offsetY,this},o.vi=function(t,e,i,n,r){return this.x=t+r.x*i+r.offsetX,this.y=e+r.y*n+r.offsetY,this},o.transform=function(t){return t.Ga(this),this};function yi(t,e){return e.Md(t),t}function mi(t,e,i,n,r,s){var l=r-i,h=s-n,a=l*l+h*h;i-=t,n-=e;var f=-i*l-n*h;return 0>=f||f>=a?(l=r-t,h=s-e,Math.min(i*i+n*n,l*l+h*h)):(t=l*n-h*i,t*t/a)}function mo(t,e,i,n){return t=i-t,e=n-e,t*t+e*e}function c0(t,e,i,n){return t=i-t,e=n-e,t===0?0<e?90:0>e?270:0:e===0?0<t?0:180:isNaN(t)||isNaN(e)?0:(n=180*Math.atan(Math.abs(e/t))/Math.PI,0>t?n=0>e?n+180:180-n:0>e&&(n=360-n),n)}o.w=function(){return isFinite(this.x)&&isFinite(this.y)},P.alloc=function(){var t=p0.pop();return t===void 0?new P:t},P.allocAt=function(t,e){var i=p0.pop();return i===void 0?new P(t,e):(i.x=t,i.y=e,i)},P.free=function(t){p0.push(t)},P.prototype.isReal=P.prototype.w,P.prototype.setSpot=P.prototype.vi,P.prototype.setRectSpot=P.prototype.ui,P.prototype.snapToGridPoint=P.prototype.oA,P.prototype.snapToGrid=P.prototype.nA,P.prototype.projectOntoLineSegmentPoint=P.prototype.$z,P.prototype.projectOntoLineSegment=P.prototype.Zz,P.intersectingLineSegments=function(t,e,i,n,r,s,l,h){return F.Ml(t,e,i,n,r,s,l,h)},P.prototype.compareWithLineSegmentPoint=P.prototype.My,P.compareWithLineSegment=function(t,e,i,n,r,s){return F.Bl(t,e,i,n,r,s)},P.prototype.direction=P.prototype.direction,P.prototype.directionPoint=P.prototype.ab,P.prototype.normalize=P.prototype.normalize,P.prototype.distanceSquared=P.prototype.vd,P.prototype.distanceSquaredPoint=P.prototype.zf,P.prototype.scale=P.prototype.scale,P.prototype.rotate=P.prototype.rotate,P.prototype.offset=P.prototype.offset,P.prototype.subtract=P.prototype.oe,P.prototype.add=P.prototype.add,P.prototype.equalsApprox=P.prototype.Xa,P.prototype.equalTo=P.prototype.ei,P.prototype.equals=P.prototype.C,P.prototype.set=P.prototype.set,P.prototype.setTo=P.prototype.pg;var p0=[];P.className="Point",P.parse=aS,P.stringify=fS,P.distanceLineSegmentSquared=mi,P.distanceSquared=mo,P.direction=c0,P.Origin=yo=new P(0,0).ha(),P.InfiniteTopLeft=h0=new P(-1/0,-1/0).ha(),P.InfiniteBottomRight=a0=new P(1/0,1/0).ha(),P.SixPoint=f0=new P(6,6).ha(),P.NoPoint=cp=new P(NaN,NaN).ha(),P.parse=aS,P.stringify=fS,P.distanceLineSegmentSquared=mi,P.distanceSquared=mo,P.direction=c0;function pt(t,e){t===void 0?this.height=this.width=0:typeof t=="number"&&(0<=t||isNaN(t))&&typeof e=="number"&&(0<=e||isNaN(e))?(this.width=t,this.height=e):R("Invalid arguments to Size constructor: "+t+", "+e),this._isFrozen=!1}var ou,pp,d0,su,pS,g0,dp;pt.prototype.assign=function(t){return this.width=t.width,this.height=t.height,this},pt.prototype.h=function(t,e){return this.width=t,this.height=e,this},pt.prototype.pg=function(t,e){return this.width=t,this.height=e,this},pt.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},pt.prototype.copy=function(){var t=new pt;return t.width=this.width,t.height=this.height,t},o=pt.prototype,o.ha=function(){return this._isFrozen=!0,Object.freeze(this),this},o.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},o.freeze=function(){return this._isFrozen=!0,this},o.ka=function(){return Object.isFrozen(this)&&R("cannot thaw constant: "+this),this._isFrozen=!1,this};function dS(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,i=0;t[e]==="";)e++;var n=t[e++];n&&(i=parseFloat(n));for(var r=0;t[e]==="";)e++;return(n=t[e++])&&(r=parseFloat(n)),new pt(i,r)}return new pt}function gS(t){return t.width.toString()+" "+t.height.toString()}o.toString=function(){return"Size("+this.width+","+this.height+")"},o.C=function(t){return t instanceof pt?this.width===t.width&&this.height===t.height:!1},o.ei=function(t,e){return this.width===t&&this.height===e},o.Xa=function(t){return F.B(this.width,t.width)&&F.B(this.height,t.height)},o.yc=function(t,e){return t=this.width+t,this.width=0<=t?t:0,e=this.height+e,this.height=0<=e?e:0,this},o.w=function(){return isFinite(this.width)&&isFinite(this.height)},pt.alloc=function(){var t=yS.pop();return t===void 0?new pt:t},pt.free=function(t){yS.push(t)},pt.prototype.isReal=pt.prototype.w,pt.prototype.inflate=pt.prototype.yc,pt.prototype.equalsApprox=pt.prototype.Xa,pt.prototype.equalTo=pt.prototype.ei,pt.prototype.equals=pt.prototype.C,pt.prototype.set=pt.prototype.set,pt.prototype.setTo=pt.prototype.pg;var yS=[];pt.className="Size",pt.parse=dS,pt.stringify=gS,pt.ZeroSize=ou=new pt(0,0).ha(),pt.OneSize=pp=new pt(1,1).ha(),pt.SixSize=d0=new pt(6,6).ha(),pt.EightSize=su=new pt(8,8).ha(),pt.TenSize=pS=new pt(10,10).ha(),pt.InfiniteSize=g0=new pt(1/0,1/0).ha(),pt.NoSize=dp=new pt(NaN,NaN).ha(),pt.parse=dS,pt.stringify=gS;function V(t,e,i,n){t===void 0?this.height=this.width=this.y=this.x=0:typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&(0<=i||isNaN(i))&&typeof n=="number"&&(0<=n||isNaN(n))?(this.x=t,this.y=e,this.width=i,this.height=n):t instanceof P?(i=t.x,t=t.y,e instanceof P?(n=e.x,e=e.y,this.x=Math.min(i,n),this.y=Math.min(t,e),this.width=Math.abs(i-n),this.height=Math.abs(t-e)):e instanceof pt?(this.x=i,this.y=t,this.width=e.width,this.height=e.height):R("Incorrect second argument supplied to Rect constructor "+e)):R("Invalid arguments to Rect constructor: "+t+", "+e+", "+i+", "+n),this._isFrozen=!1}o=V.prototype,o.assign=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},o.h=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this};function vo(t,e,i){t.width=e,t.height=i}o.pg=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},o.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},o.Yc=function(t){return this.x=t.x,this.y=t.y,this},o.mA=function(t){return this.width=t.width,this.height=t.height,this},V.prototype.copy=function(){var t=new V;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},o=V.prototype,o.ha=function(){return this._isFrozen=!0,Object.freeze(this),this},o.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},o.freeze=function(){return this._isFrozen=!0,this},o.ka=function(){return Object.isFrozen(this)&&R("cannot thaw constant: "+this),this._isFrozen=!1,this};function mS(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,i=0;t[e]==="";)e++;var n=t[e++];n&&(i=parseFloat(n));for(var r=0;t[e]==="";)e++;(n=t[e++])&&(r=parseFloat(n));for(var s=0;t[e]==="";)e++;(n=t[e++])&&(s=parseFloat(n));for(var l=0;t[e]==="";)e++;return(n=t[e++])&&(l=parseFloat(n)),new V(i,r,s,l)}return new V}function vS(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()}o.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},o.C=function(t){return t instanceof V?this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height:!1},o.ei=function(t,e,i,n){return this.x===t&&this.y===e&&this.width===i&&this.height===n},o.Xa=function(t){return F.B(this.x,t.x)&&F.B(this.y,t.y)&&F.B(this.width,t.width)&&F.B(this.height,t.height)};function y0(t,e){return F.$(t.x,e.x)&&F.$(t.y,e.y)&&F.$(t.width,e.width)&&F.$(t.height,e.height)}o.ca=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},o.Oe=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},o.contains=function(t,e,i,n){return i===void 0&&(i=0),n===void 0&&(n=0),this.x<=t&&t+i<=this.x+this.width&&this.y<=e&&e+n<=this.y+this.height},o.offset=function(t,e){return this.x+=t,this.y+=e,this},o.yc=function(t,e){return gp(this,e,t,e,t)},o.zo=function(t){return gp(this,t.top,t.right,t.bottom,t.left)},o.Bv=function(t){return gp(this,-t.top,-t.right,-t.bottom,-t.left)},o.Cz=function(t,e,i,n){return gp(this,t,e,i,n)};function gp(t,e,i,n,r){var s=t.width;return i+r<=-s?(t.x+=s/2,t.width=0):(t.x-=r,t.width+=i+r),i=t.height,e+n<=-i?(t.y+=i/2,t.height=0):(t.y-=e,t.height+=e+n),t}o.Ax=function(t){return xS(this,t.x,t.y,t.width,t.height)},o.Su=function(t,e,i,n){return xS(this,t,e,i,n)};function xS(t,e,i,n,r){var s=Math.max(t.x,e),l=Math.max(t.y,i);return e=Math.min(t.x+t.width,e+n),i=Math.min(t.y+t.height,i+r),t.x=s,t.y=l,t.width=Math.max(0,e-s),t.height=Math.max(0,i-l),t}o.Tc=function(t){return this.Tu(t.x,t.y,t.width,t.height)},o.Tu=function(t,e,i,n){var r=this.width,s=this.x;return r!==1/0&&i!==1/0&&(r+=s,i+=t,isNaN(i)||isNaN(r)||s>i||t>r)?!1:(t=this.height,i=this.y,!(t!==1/0&&n!==1/0&&(t+=i,n+=e,isNaN(n)||isNaN(t)||i>n||e>t)))};function wS(t,e){var i=t.width,n=t.x,r=e.x-10;return n>e.width+10+10+r||r>i+n?!1:(i=t.height,t=t.y,n=e.y-10,!(t>e.height+10+10+n||n>i+t))}o.Ve=function(t){return Ve(this,t.x,t.y,0,0)},o.Zc=function(t){return Ve(this,t.x,t.y,t.width,t.height)},o.Gv=function(t,e,i,n){return i===void 0&&(i=0),n===void 0&&(n=0),Ve(this,t,e,i,n)};function Ve(t,e,i,n,r){var s=Math.min(t.x,e),l=Math.min(t.y,i);return e=Math.max(t.x+t.width,e+n),i=Math.max(t.y+t.height,i+r),t.x=s,t.y=l,t.width=e-s,t.height=i-l,t}o.vi=function(t,e,i){return this.x=t-i.offsetX-i.x*this.width,this.y=e-i.offsetY-i.y*this.height,this};function hr(t,e,i,n,r,s,l,h){return l===void 0&&(l=0),h===void 0&&(h=0),t<=r&&r+l<=t+i&&e<=s&&s+h<=e+n}function SS(t,e,i,n,r,s,l,h){return t>l+r||r>i+t?!1:!(e>h+s||s>n+e)}o.w=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},o.Hz=function(){return this.width===0&&this.height===0},V.alloc=function(){var t=m0.pop();return t===void 0?new V:t},V.allocAt=function(t,e,i,n){var r=m0.pop();return r===void 0?new V(t,e,i,n):r.h(t,e,i,n)},V.free=function(t){m0.push(t)},z.Object.defineProperties(V.prototype,{left:{get:function(){return this.x},set:function(t){this.x=t}},top:{get:function(){return this.y},set:function(t){this.y=t}},right:{get:function(){return this.x+this.width},set:function(t){this.x+=t-(this.x+this.width)}},bottom:{get:function(){return this.y+this.height},set:function(t){this.y+=t-(this.y+this.height)}},position:{get:function(){return new P(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},size:{get:function(){return new pt(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},center:{get:function(){return new P(this.x+this.width/2,this.y+this.height/2)},set:function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}}),V.prototype.isEmpty=V.prototype.Hz,V.prototype.isReal=V.prototype.w,V.intersectsLineSegment=function(t,e,i,n,r,s,l,h){return F.Bx(t,e,i,n,r,s,l,h)},V.prototype.setSpot=V.prototype.vi,V.prototype.union=V.prototype.Gv,V.prototype.unionRect=V.prototype.Zc,V.prototype.unionPoint=V.prototype.Ve,V.prototype.intersects=V.prototype.Tu,V.prototype.intersectsRect=V.prototype.Tc,V.prototype.intersect=V.prototype.Su,V.prototype.intersectRect=V.prototype.Ax,V.prototype.grow=V.prototype.Cz,V.prototype.subtractMargin=V.prototype.Bv,V.prototype.addMargin=V.prototype.zo,V.prototype.inflate=V.prototype.yc,V.prototype.offset=V.prototype.offset,V.prototype.contains=V.prototype.contains,V.prototype.containsRect=V.prototype.Oe,V.prototype.containsPoint=V.prototype.ca,V.prototype.equalsApprox=V.prototype.Xa,V.prototype.equalTo=V.prototype.ei,V.prototype.equals=V.prototype.C,V.prototype.setSize=V.prototype.mA,V.prototype.setPoint=V.prototype.Yc,V.prototype.set=V.prototype.set,V.prototype.setTo=V.prototype.pg;var yp=null,MS=null,m0=[];V.className="Rect",V.parse=mS,V.stringify=vS,V.contains=hr,V.intersects=SS,V.ZeroRect=yp=new V(0,0,0,0).ha(),V.NoRect=MS=new V(NaN,NaN,NaN,NaN).ha(),V.parse=mS,V.stringify=vS,V.contains=hr,V.intersects=SS;function Rt(t,e,i,n){t===void 0?this.left=this.bottom=this.right=this.top=0:e===void 0?this.left=this.bottom=this.right=this.top=t:i===void 0?(this.top=t,this.right=e,this.bottom=t,this.left=e):n!==void 0?(this.top=t,this.right=e,this.bottom=i,this.left=n):R("Invalid arguments to Margin constructor: "+t+", "+e+", "+i+", "+n),this._isFrozen=!1}Rt.prototype.assign=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Rt.prototype.pg=function(t,e,i,n){return this.top=t,this.right=e,this.bottom=i,this.left=n,this},Rt.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Rt.prototype.copy=function(){var t=new Rt;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},o=Rt.prototype,o.ha=function(){return this._isFrozen=!0,Object.freeze(this),this},o.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},o.freeze=function(){return this._isFrozen=!0,this},o.ka=function(){return Object.isFrozen(this)&&R("cannot thaw constant: "+this),this._isFrozen=!1,this};function kS(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,i=NaN;t[e]==="";)e++;var n=t[e++];if(n&&(i=parseFloat(n)),isNaN(i))return new Rt;for(var r=NaN;t[e]==="";)e++;if((n=t[e++])&&(r=parseFloat(n)),isNaN(r))return new Rt(i);for(var s=NaN;t[e]==="";)e++;if((n=t[e++])&&(s=parseFloat(n)),isNaN(s))return new Rt(i,r);for(var l=NaN;t[e]==="";)e++;return(n=t[e++])&&(l=parseFloat(n)),isNaN(l)?new Rt(i,r):new Rt(i,r,s,l)}return new Rt}function NS(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()}o.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},o.C=function(t){return t instanceof Rt?this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left:!1},o.ei=function(t,e,i,n){return this.top===t&&this.right===e&&this.bottom===i&&this.left===n},o.Xa=function(t){return F.B(this.top,t.top)&&F.B(this.right,t.right)&&F.B(this.bottom,t.bottom)&&F.B(this.left,t.left)},o.w=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},Rt.alloc=function(){var t=PS.pop();return t===void 0?new Rt:t},Rt.free=function(t){PS.push(t)},Rt.prototype.isReal=Rt.prototype.w,Rt.prototype.equalsApprox=Rt.prototype.Xa,Rt.prototype.equalTo=Rt.prototype.ei,Rt.prototype.equals=Rt.prototype.C,Rt.prototype.set=Rt.prototype.set,Rt.prototype.setTo=Rt.prototype.pg;var ih=null,v0=null,PS=[];Rt.className="Margin",Rt.parse=kS,Rt.stringify=NS,Rt.ZeroMargin=ih=new Rt(0,0,0,0).ha(),Rt.TwoMargin=v0=new Rt(2,2,2,2).ha(),Rt.parse=kS,Rt.stringify=NS;function at(t,e,i,n){t===void 0?this.offsetY=this.offsetX=this.y=this.x=0:(e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=t,this.y=e,this.offsetX=i,this.offsetY=n),this._isFrozen=!1}var $e,ei,xo,nh,$a,Ut,Ja,rh,lu,Xr,oh,sh,lh,uh,x0,w0,S0,M0,k0,N0,P0,C0,T0,L0,j0,Je,CS,TS,mp,LS,En,Fn,Xi,On,E0,F0;at.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},at.prototype.pg=function(t,e,i,n){return this.x=t,this.y=e,this.offsetX=i,this.offsetY=n,this},at.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},at.prototype.copy=function(){var t=new at;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},o=at.prototype,o.ha=function(){return this._isFrozen=!0,Object.freeze(this),this},o.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},o.freeze=function(){return this._isFrozen=!0,this},o.ka=function(){return Object.isFrozen(this)&&R("cannot thaw constant: "+this),this._isFrozen=!1,this};function pn(t,e){return t.x=NaN,t.y=NaN,t.offsetX=e,t}function O0(t){if(typeof t=="string"){if(t=t.trim(),t==="None")return $e;if(t==="TopLeft")return ei;if(t==="Top"||t==="TopCenter"||t==="MiddleTop")return xo;if(t==="TopRight")return nh;if(t==="Left"||t==="LeftCenter"||t==="MiddleLeft")return $a;if(t==="Center")return Ut;if(t==="Right"||t==="RightCenter"||t==="MiddleRight")return Ja;if(t==="BottomLeft")return rh;if(t==="Bottom"||t==="BottomCenter"||t==="MiddleBottom")return lu;if(t==="BottomRight")return Xr;if(t==="TopSide")return oh;if(t==="LeftSide")return sh;if(t==="RightSide")return lh;if(t==="BottomSide")return uh;if(t==="TopBottomSides")return x0;if(t==="LeftRightSides")return w0;if(t==="TopLeftSides")return S0;if(t==="TopRightSides")return M0;if(t==="BottomLeftSides")return k0;if(t==="BottomRightSides")return N0;if(t==="NotTopSide")return P0;if(t==="NotLeftSide")return C0;if(t==="NotRightSide")return T0;if(t==="NotBottomSide")return L0;if(t==="AllSides")return j0;if(t==="Default")return Je;t=t.split(" ");for(var e=0,i=0;t[e]==="";)e++;var n=t[e++];n!==void 0&&0<n.length&&(i=parseFloat(n));for(var r=0;t[e]==="";)e++;n=t[e++],n!==void 0&&0<n.length&&(r=parseFloat(n));for(var s=0;t[e]==="";)e++;n=t[e++],n!==void 0&&0<n.length&&(s=parseFloat(n));for(var l=0;t[e]==="";)e++;return n=t[e++],n!==void 0&&0<n.length&&(l=parseFloat(n)),new at(i,r,s,l)}return new at}function jS(t){return t.tb()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()}o.toString=function(){return this.tb()?this.offsetX===0&&this.offsetY===0?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.C($e)?"None":this.C(ei)?"TopLeft":this.C(xo)?"Top":this.C(nh)?"TopRight":this.C($a)?"Left":this.C(Ut)?"Center":this.C(Ja)?"Right":this.C(rh)?"BottomLeft":this.C(lu)?"Bottom":this.C(Xr)?"BottomRight":this.C(oh)?"TopSide":this.C(sh)?"LeftSide":this.C(lh)?"RightSide":this.C(uh)?"BottomSide":this.C(x0)?"TopBottomSides":this.C(w0)?"LeftRightSides":this.C(S0)?"TopLeftSides":this.C(M0)?"TopRightSides":this.C(k0)?"BottomLeftSides":this.C(N0)?"BottomRightSides":this.C(P0)?"NotTopSide":this.C(C0)?"NotLeftSide":this.C(T0)?"NotRightSide":this.C(L0)?"NotBottomSide":this.C(j0)?"AllSides":this.C(Je)?"Default":"None"},o.C=function(t){return t instanceof at?(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY:!1},o.ev=function(){return new at(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},o.Ff=function(t){if(!this.Vc())return!1;if(!t.Vc())if(t.C(CS))t=sh;else if(t.C(TS))t=lh;else if(t.C(mp))t=oh;else if(t.C(LS))t=uh;else return!1;return t=t.offsetY,(this.offsetY&t)===t},o.tb=function(){return!isNaN(this.x)&&!isNaN(this.y)},o.Jc=function(){return isNaN(this.x)||isNaN(this.y)},o.Vc=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===1&&this.offsetY!==0},o.ts=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===0&&this.offsetY===0},o.Tb=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===-1&&this.offsetY===0},at.alloc=function(){var t=ES.pop();return t===void 0?new at:t},at.free=function(t){ES.push(t)},at.prototype.isDefault=at.prototype.Tb,at.prototype.isNone=at.prototype.ts,at.prototype.isSide=at.prototype.Vc,at.prototype.isNoSpot=at.prototype.Jc,at.prototype.isSpot=at.prototype.tb,at.prototype.includesSide=at.prototype.Ff,at.prototype.opposite=at.prototype.ev,at.prototype.equals=at.prototype.C,at.prototype.set=at.prototype.set,at.prototype.setTo=at.prototype.pg;var ES=[];at.className="Spot",at.parse=O0,at.stringify=jS,at.None=$e=pn(new at(0,0,0,0),0).ha(),at.Default=Je=pn(new at(0,0,-1,0),-1).ha(),at.TopLeft=ei=new at(0,0,0,0).ha(),at.TopCenter=xo=new at(.5,0,0,0).ha(),at.TopRight=nh=new at(1,0,0,0).ha(),at.LeftCenter=$a=new at(0,.5,0,0).ha(),at.Center=Ut=new at(.5,.5,0,0).ha(),at.RightCenter=Ja=new at(1,.5,0,0).ha(),at.BottomLeft=rh=new at(0,1,0,0).ha(),at.BottomCenter=lu=new at(.5,1,0,0).ha(),at.BottomRight=Xr=new at(1,1,0,0).ha(),at.MiddleTop=En=xo,at.MiddleLeft=Fn=$a,at.MiddleRight=Xi=Ja,at.MiddleBottom=On=lu,at.Top=mp=xo,at.Left=CS=$a,at.Right=TS=Ja,at.Bottom=LS=lu,at.TopSide=oh=pn(new at(0,0,1,1),1).ha(),at.LeftSide=sh=pn(new at(0,0,1,2),1).ha(),at.RightSide=lh=pn(new at(0,0,1,4),1).ha(),at.BottomSide=uh=pn(new at(0,0,1,8),1).ha(),at.TopBottomSides=x0=pn(new at(0,0,1,9),1).ha(),at.LeftRightSides=w0=pn(new at(0,0,1,6),1).ha(),at.TopLeftSides=S0=pn(new at(0,0,1,3),1).ha(),at.TopRightSides=M0=pn(new at(0,0,1,5),1).ha(),at.BottomLeftSides=k0=pn(new at(0,0,1,10),1).ha(),at.BottomRightSides=N0=pn(new at(0,0,1,12),1).ha(),at.NotTopSide=P0=pn(new at(0,0,1,14),1).ha(),at.NotLeftSide=C0=pn(new at(0,0,1,13),1).ha(),at.NotRightSide=T0=pn(new at(0,0,1,11),1).ha(),at.NotBottomSide=L0=pn(new at(0,0,1,7),1).ha(),at.AllSides=j0=pn(new at(0,0,1,15),1).ha(),E0=new at(.156,.156).ha(),F0=new at(.844,.844).ha(),at.parse=O0,at.stringify=jS;function Nt(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}Nt.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},Nt.prototype.setTransform=function(t,e,i,n,r,s){return this.m11=t,this.m12=e,this.m21=i,this.m22=n,this.dx=r,this.dy=s,this},Nt.prototype.copy=function(){var t=new Nt;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},Nt.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},Nt.prototype.C=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy},Nt.prototype.rs=function(){return this.dx===0&&this.dy===0&&this.m11===1&&this.m12===0&&this.m21===0&&this.m22===1},Nt.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},Nt.prototype.multiply=function(t){var e=this.m11*t.m11+this.m21*t.m12,i=this.m12*t.m11+this.m22*t.m12,n=this.m11*t.m21+this.m21*t.m22,r=this.m12*t.m21+this.m22*t.m22;return this.dx=this.m11*t.dx+this.m21*t.dy+this.dx,this.dy=this.m12*t.dx+this.m22*t.dy+this.dy,this.m11=e,this.m12=i,this.m21=n,this.m22=r,this},Nt.prototype.$u=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),i=t.m22*e,n=-t.m12*e,r=-t.m21*e,s=t.m11*e,l=e*(t.m21*t.dy-t.m22*t.dx);return t=e*(t.m12*t.dx-t.m11*t.dy),e=this.m11*i+this.m21*n,i=this.m12*i+this.m22*n,n=this.m11*r+this.m21*s,r=this.m12*r+this.m22*s,this.dx=this.m11*l+this.m21*t+this.dx,this.dy=this.m12*l+this.m22*t+this.dy,this.m11=e,this.m12=i,this.m21=n,this.m22=r,this},Nt.prototype.Ol=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,i=-this.m21*t,n=this.m11*t,r=t*(this.m21*this.dy-this.m22*this.dx),s=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=i,this.m22=n,this.dx=r,this.dy=s,this},Nt.prototype.rotate=function(t,e,i){if(360<=t?t-=360:0>t&&(t+=360),t===0)return this;if(this.translate(e,i),t===90){t=0;var n=1}else t===180?(t=-1,n=0):t===270?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));var r=this.m12*t+this.m22*n,s=this.m11*-n+this.m21*t,l=this.m12*-n+this.m22*t;return this.m11=this.m11*t+this.m21*n,this.m12=r,this.m21=s,this.m22=l,this.translate(-e,-i),this},o=Nt.prototype,o.translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},o.scale=function(t,e){return e===void 0&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},o.Ga=function(t){var e=t.x,i=t.y;return t.h(e*this.m11+i*this.m21+this.dx,e*this.m12+i*this.m22+this.dy)},o.Md=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),i=t.x,n=t.y;return t.h(i*this.m22*e+n*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),i*-this.m12*e+n*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},o.Xw=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),i=1.25*t.x,n=1.2*t.y;return t.h(i*this.m22*e+n*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),i*-this.m12*e+n*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},o.kp=function(t){var e=t.x,i=t.y,n=e+t.width,r=i+t.height,s=this.m11,l=this.m12,h=this.m21,a=this.m22,f=this.dx,p=this.dy,d=e*s+i*h+f,y=e*l+i*a+p,x=n*s+i*h+f,v=n*l+i*a+p;return i=e*s+r*h+f,e=e*l+r*a+p,s=n*s+r*h+f,n=n*l+r*a+p,r=Math.min(d,x),d=Math.max(d,x),x=Math.min(y,v),y=Math.max(y,v),r=Math.min(r,i),d=Math.max(d,i),x=Math.min(x,e),y=Math.max(y,e),r=Math.min(r,s),d=Math.max(d,s),x=Math.min(x,n),y=Math.max(y,n),t.h(r,x,d-r,y-x),t},Nt.alloc=function(){var t=FS.pop();return t===void 0?new Nt:t},Nt.free=function(t){FS.push(t)},Nt.prototype.transformRect=Nt.prototype.kp,Nt.prototype.transformPoint=Nt.prototype.Ga,Nt.prototype.scale=Nt.prototype.scale,Nt.prototype.translate=Nt.prototype.translate,Nt.prototype.rotate=Nt.prototype.rotate,Nt.prototype.invert=Nt.prototype.Ol,Nt.prototype.multiplyInverted=Nt.prototype.$u,Nt.prototype.multiply=Nt.prototype.multiply,Nt.prototype.reset=Nt.prototype.reset,Nt.prototype.isIdentity=Nt.prototype.rs,Nt.prototype.equals=Nt.prototype.C,Nt.prototype.setTransform=Nt.prototype.setTransform,Nt.prototype.set=Nt.prototype.set;var FS=[];Nt.className="Transform",Nt.xF="54a702f3e53909c447824c6706603faf4c";var F={tA:"7da71ca0ad381e90",tg:(Math.sqrt(2)-1)/3*4,Qv:null,sqrt:function(t){if(0>=t)return 0;var e=F.Qv;if(e===null){e=[];for(var i=0;2e3>=i;i++)e[i]=Math.sqrt(i);F.Qv=e}return 1>t?(i=1/t,2e3>=i?1/e[i|0]:Math.sqrt(t)):2e3>=t?e[t|0]:Math.sqrt(t)},B:function(t,e){return t-=e,.5>t&&-.5<t},$:function(t,e){return t-=e,5e-8>t&&-5e-8<t},Ub:function(t,e,i,n,r,s,l){if(0>=r&&(r=1e-6),t<i)var h=t,a=i;else h=i,a=t;if(e<n)var f=e,p=n;else f=n,p=e;if(t===i)return f<=l&&l<=p&&t-r<=s&&s<=t+r;if(e===n)return h<=s&&s<=a&&e-r<=l&&l<=e+r;if(a+=r,h-=r,h<=s&&s<=a&&(p+=r,f-=r,f<=l&&l<=p))if(a-h>p-f)if(t-i>r||i-t>r){if(s=(n-e)/(i-t)*(s-t)+e,s-r<=l&&l<=s+r)return!0}else return!0;else if(e-n>r||n-e>r){if(l=(i-t)/(n-e)*(l-e)+t,l-r<=s&&s<=l+r)return!0}else return!0;return!1},Wr:function(t,e,i,n,r,s,l,h,a,f,p,d){if(F.Ub(t,e,l,h,d,i,n)&&F.Ub(t,e,l,h,d,r,s))return F.Ub(t,e,l,h,d,f,p);var y=(t+i)/2,x=(e+n)/2,v=(i+r)/2,S=(n+s)/2;r=(r+l)/2,s=(s+h)/2,n=(y+v)/2,i=(x+S)/2,v=(v+r)/2,S=(S+s)/2;var N=(n+v)/2,k=(i+S)/2;return F.Wr(t,e,y,x,n,i,N,k,a,f,p,d)||F.Wr(N,k,v,S,r,s,l,h,a,f,p,d)},Yw:function(t,e,i,n,r,s,l,h,a){var f=(i+r)/2,p=(n+s)/2;return a.h((((t+i)/2+f)/2+(f+(r+l)/2)/2)/2,(((e+n)/2+p)/2+(p+(s+h)/2)/2)/2),a},Iy:function(t,e,i,n,r,s,l,h){var a=(i+r)/2,f=(n+s)/2;return c0(((t+i)/2+a)/2,((e+n)/2+f)/2,(a+(r+l)/2)/2,(f+(s+h)/2)/2)},zl:function(t,e,i,n,r,s,l,h,a,f){if(F.Ub(t,e,l,h,a,i,n)&&F.Ub(t,e,l,h,a,r,s))Ve(f,t,e,0,0),Ve(f,l,h,0,0);else{var p=(t+i)/2,d=(e+n)/2,y=(i+r)/2,x=(n+s)/2;r=(r+l)/2,s=(s+h)/2,n=(p+y)/2,i=(d+x)/2,y=(y+r)/2,x=(x+s)/2;var v=(n+y)/2,S=(i+x)/2;F.zl(t,e,p,d,n,i,v,S,a,f),F.zl(v,S,y,x,r,s,l,h,a,f)}return f},Ne:function(t,e,i,n,r,s,l,h,a,f){if(F.Ub(t,e,l,h,a,i,n)&&F.Ub(t,e,l,h,a,r,s))f.length===0&&(f.push(t),f.push(e)),f.push(l),f.push(h);else{var p=(t+i)/2,d=(e+n)/2,y=(i+r)/2,x=(n+s)/2;r=(r+l)/2,s=(s+h)/2,n=(p+y)/2,i=(d+x)/2,y=(y+r)/2,x=(x+s)/2;var v=(n+y)/2,S=(i+x)/2;F.Ne(t,e,p,d,n,i,v,S,a,f),F.Ne(v,S,y,x,r,s,l,h,a,f)}return f},hv:function(t,e,i,n,r,s,l,h,a,f){if(F.Ub(t,e,r,s,f,i,n))return F.Ub(t,e,r,s,f,h,a);var p=(t+i)/2,d=(e+n)/2;i=(i+r)/2,n=(n+s)/2;var y=(p+i)/2,x=(d+n)/2;return F.hv(t,e,p,d,y,x,l,h,a,f)||F.hv(y,x,i,n,r,s,l,h,a,f)},HA:function(t,e,i,n,r,s,l){return l.h(((t+i)/2+(i+r)/2)/2,((e+n)/2+(n+s)/2)/2),l},gv:function(t,e,i,n,r,s,l,h){if(F.Ub(t,e,r,s,l,i,n))Ve(h,t,e,0,0),Ve(h,r,s,0,0);else{var a=(t+i)/2,f=(e+n)/2;i=(i+r)/2,n=(n+s)/2;var p=(a+i)/2,d=(f+n)/2;F.gv(t,e,a,f,p,d,l,h),F.gv(p,d,i,n,r,s,l,h)}return h},Zo:function(t,e,i,n,r,s,l,h){if(F.Ub(t,e,r,s,l,i,n))h.length===0&&(h.push(t),h.push(e)),h.push(r),h.push(s);else{var a=(t+i)/2,f=(e+n)/2;i=(i+r)/2,n=(n+s)/2;var p=(a+i)/2,d=(f+n)/2;F.Zo(t,e,a,f,p,d,l,h),F.Zo(p,d,i,n,r,s,l,h)}return h},Bo:function(t,e,i,n,r,s,l,h,a,f,p,d,y,x){if(F.Ub(t,e,l,h,y,i,n)&&F.Ub(t,e,l,h,y,r,s))return!F.Ml(t,e,l,h,a,f,p,d)||(y=(t-l)*(f-d)-(e-h)*(a-p),y===0)?!1:(x.h(((t*h-e*l)*(a-p)-(t-l)*(a*d-f*p))/y,((t*h-e*l)*(f-d)-(e-h)*(a*d-f*p))/y),!0);var v=(t+i)/2,S=(e+n)/2,N=(i+r)/2,k=(n+s)/2;r=(r+l)/2,s=(s+h)/2,n=(v+N)/2,i=(S+k)/2,N=(N+r)/2,k=(k+s)/2;var C=(n+N)/2,T=(i+k)/2,L=1/0,E=!1,I=0,Z=0;return F.Bo(t,e,v,S,n,i,C,T,a,f,p,d,y,x)&&(t=(x.x-a)*(x.x-a)+(x.y-f)*(x.y-f),t<L&&(L=t,E=!0,I=x.x,Z=x.y)),F.Bo(C,T,N,k,r,s,l,h,a,f,p,d,y,x)&&(x.x-a)*(x.x-a)+(x.y-f)*(x.y-f)<L&&(E=!0,I=x.x,Z=x.y),E&&(x.x=I,x.y=Z),E},Co:function(t,e,i,n,r,s,l,h,a,f,p,d,y){var x=0;if(F.Ub(t,e,l,h,y,i,n)&&F.Ub(t,e,l,h,y,r,s)){if(y=(t-l)*(f-d)-(e-h)*(a-p),y===0)return x;var v=((t*h-e*l)*(a-p)-(t-l)*(a*d-f*p))/y,S=((t*h-e*l)*(f-d)-(e-h)*(a*d-f*p))/y;if(v>=p)return x;if((a>p?a-p:p-a)<(f>d?f-d:d-f)){if(e<h?(a=e,t=h):(a=h,t=e),S<a||S>t)return x}else if(t<l?(a=t,t=l):a=l,v<a||v>t)return x;0<y?x++:0>y&&x--}else{v=(t+i)/2,S=(e+n)/2;var N=(i+r)/2,k=(n+s)/2;r=(r+l)/2,s=(s+h)/2,n=(v+N)/2,i=(S+k)/2,N=(N+r)/2,k=(k+s)/2;var C=(n+N)/2,T=(i+k)/2;x+=F.Co(t,e,v,S,n,i,C,T,a,f,p,d,y),x+=F.Co(C,T,N,k,r,s,l,h,a,f,p,d,y)}return x},mh:function(t,e,i,n,r,s,l){return F.$(t,i)?(e<n?(i=e,e=n):i=n,s<i?(l.h(t,i),!1):s>e?(l.h(t,e),!1):(l.h(t,s),!0)):F.$(e,n)?(t<i?(n=t,t=i):n=i,r<n?(l.h(n,e),!1):r>t?(l.h(t,e),!1):(l.h(r,e),!0)):(r=((t-r)*(t-i)+(e-s)*(e-n))/((i-t)*(i-t)+(n-e)*(n-e)),-5e-6>r?(l.h(t,e),!1):1.000005<r?(l.h(i,n),!1):(l.h(t+r*(i-t),e+r*(n-e)),!0))},Se:function(t,e,i,n,r,s,l,h,a){return F.B(t,i)&&F.B(e,n)?(a.h(t,e),!1):F.$(r,l)?F.$(t,i)?(F.mh(t,e,i,n,r,s,a),!1):F.mh(t,e,i,n,r,(n-e)/(i-t)*(r-t)+e,a):(h=(h-s)/(l-r),F.$(t,i)?(i=h*(t-r)+s,e<n?(r=e,e=n):r=n,i<r?(a.h(t,r),!1):i>e?(a.h(t,e),!1):(a.h(t,i),!0)):(l=(n-e)/(i-t),F.$(h,l)?(F.mh(t,e,i,n,r,s,a),!1):(r=(l*t-h*r+s-e)/(l-h),F.$(l,0)?(t<i?(n=t,t=i):n=i,r<n?(a.h(n,e),!1):r>t?(a.h(t,e),!1):(a.h(r,e),!0)):F.mh(t,e,i,n,r,l*(r-t)+e,a))))},FA:function(t,e,i,n,r){return F.Se(i.x,i.y,n.x,n.y,t.x,t.y,e.x,e.y,r)},DA:function(t,e,i,n,r,s,l,h,a,f){function p(N,k){var C=(N-t)*(N-t)+(k-e)*(k-e);C<d&&(d=C,a.h(N,k))}var d=1/0;p(a.x,a.y);var y=0,x=0,v=0,S=0;if(r<l?(y=r,x=l):(y=l,x=r),s<h?(v=r,S=l):(v=l,S=r),y=(x-y)/2+f,f=(S-v)/2+f,r=(r+l)/2,s=(s+h)/2,y===0||f===0)return a;if(.5>(i>t?i-t:t-i)){if(y=1-(i-r)*(i-r)/(y*y),0>y)return a;y=Math.sqrt(y),n=-f*y+s,p(i,f*y+s),p(i,n)}else{if(i=(n-e)/(i-t),n=1/(y*y)+i*i/(f*f),h=2*i*(e-i*t)/(f*f)-2*i*s/(f*f)-2*r/(y*y),y=h*h-4*n*(2*i*t*s/(f*f)-2*e*s/(f*f)+s*s/(f*f)+r*r/(y*y)-1+(e-i*t)*(e-i*t)/(f*f)),0>y)return a;y=Math.sqrt(y),f=(-h+y)/(2*n),p(f,i*f-i*t+e),y=(-h-y)/(2*n),p(y,i*y-i*t+e)}return a},Df:function(t,e,i,n,r,s,l,h,a){var f=1e21,p=t,d=e;if(F.Se(t,e,t,n,r,s,l,h,a)){var y=(a.x-r)*(a.x-r)+(a.y-s)*(a.y-s);y<f&&(f=y,p=a.x,d=a.y)}return F.Se(i,e,i,n,r,s,l,h,a)&&(y=(a.x-r)*(a.x-r)+(a.y-s)*(a.y-s),y<f&&(f=y,p=a.x,d=a.y)),F.Se(t,e,i,e,r,s,l,h,a)&&(e=(a.x-r)*(a.x-r)+(a.y-s)*(a.y-s),e<f&&(f=e,p=a.x,d=a.y)),F.Se(t,n,i,n,r,s,l,h,a)&&(t=(a.x-r)*(a.x-r)+(a.y-s)*(a.y-s),t<f&&(f=t,p=a.x,d=a.y)),a.h(p,d),1e21>f},ps:function(t,e,i){return F.Bx(t.x,t.y,t.width,t.height,e.x,e.y,i.x,i.y)},Bx:function(t,e,i,n,r,s,l,h){var a=t+i,f=e+n;return r===l?(s<h?(l=s,s=h):l=h,t<=r&&r<=a&&l<=f&&s>=e):s===h?(r<l?(h=r,r=l):h=l,e<=s&&s<=f&&h<=a&&r>=t):!!(hr(t,e,i,n,r,s)||hr(t,e,i,n,l,h)||F.Ml(t,e,a,e,r,s,l,h)||F.Ml(a,e,a,f,r,s,l,h)||F.Ml(a,f,t,f,r,s,l,h)||F.Ml(t,f,t,e,r,s,l,h))},Ml:function(t,e,i,n,r,s,l,h){return t===i&&e===n&&r===l&&s===h?t===r&&e===s:0>=F.Bl(t,e,i,n,r,s)*F.Bl(t,e,i,n,l,h)&&0>=F.Bl(r,s,l,h,t,e)*F.Bl(r,s,l,h,i,n)},Bl:function(t,e,i,n,r,s){return i-=t,n-=e,t=r-t,e=s-e,s=t*n-e*i,s===0&&(s=t*i+e*n,0<s&&(s=(t-i)*i+(e-n)*n,0>s&&(s=0))),s},Xo:function(t){return 0>t&&(t+=360),360<=t&&(t-=360),t},hx:function(t,e,i,n,r,s){var l=Math.PI;s||(n*=l/180,r*=l/180);var h=n>r?-1:1;s=[];var a=l/2,f=n;if(n=Math.min(2*l,Math.abs(r-n)),1e-5>n)return a=f+h*Math.min(n,a),h=t+i*Math.cos(f),f=e+i*Math.sin(f),t+=i*Math.cos(a),e+=i*Math.sin(a),i=(h+t)/2,a=(f+e)/2,s.push([h,f,i,a,i,a,t,e]),s;for(;1e-5<n;)r=f+h*Math.min(n,a),s.push(F.Qy(i,f,r,t,e)),n-=Math.abs(r-f),f=r;return s},Qy:function(t,e,i,n,r){var s=(i-e)/2,l=t*Math.cos(s),h=t*Math.sin(s),a=-h,f=l*l+a*a,p=f+l*l+a*h;return f=4/3*(Math.sqrt(2*f*p)-p)/(l*h-a*l),h=l-f*a,l=a+f*l,a=-l,f=s+e,s=Math.cos(f),f=Math.sin(f),[n+t*Math.cos(e),r+t*Math.sin(e),n+h*s-l*f,r+h*f+l*s,n+h*s-a*f,r+h*f+a*s,n+t*Math.cos(i),r+t*Math.sin(i)]},Ko:function(t,e,i,n,r,s,l){i=Math.floor((t-i)/r)*r+i,n=Math.floor((e-n)/s)*s+n;var h=i;return i+r-t<r/2&&(h=i+r),t=n,n+s-e<s/2&&(t=n+s),l.h(h,t),l},sx:function(t,e){var i=Math.max(t,e);t=Math.min(t,e);var n;do e=i%t,i=n=t,t=e;while(0<e);return n},Vy:function(t,e,i,n){var r=0>i,s=0>n;if(t<e)var l=1,h=0;else l=0,h=1;var a=l===0?t:e,f=l===0?i:n;return(l===0?r:s)&&(f=-f),l=h,i=l===0?i:n,(l===0?r:s)&&(i=-i),F.Wy(a,l===0?t:e,f,i,0,0)},Wy:function(t,e,i,n,r,s){if(0<n)if(0<i){r=t*t,s=e*e,t*=i;var l=e*n,h=-s+l,a=-s+Math.sqrt(t*t+l*l);e=h;for(var f=0;9999999999>f&&(e=.5*(h+a),!(e===h||e===a));++f){var p=t/(e+r),d=l/(e+s);if(p=p*p+d*d-1,0<p)h=e;else if(0>p)a=e;else break}i=r*i/(e+r)-i,n=s*n/(e+s)-n,i=Math.sqrt(i*i+n*n)}else i=Math.abs(n-e);else n=t*t-e*e,s=t*i,s<n?(n=s/n,s=e*Math.sqrt(Math.abs(1-n*n)),i=t*n-i,i=Math.sqrt(i*i+s*s)):i=Math.abs(i-t);return i},We:new We,rm:new We,Kf:new We,Lf:0,sm:100};F.za=F.tA;function W(t){Oe(this),this.o=2,t===void 0&&(t=W.m),this.na=t,this.Bc=this.Ac=this.hd=this.gd=0,t===W.m?this.ae=new tt:(W.V===null&&(W.V=new tt().freeze()),this.ae=W.V),this.Vp=this.ae.Ja,this.Dp=new V().freeze(),this.vm=this.pk=null,this.wm=NaN,this.cg=ei,this.dg=Xr,this.Nk=this.Ok=NaN,this.Sf=fe}W.prototype.copy=function(){var t=new W;if(t.o=this.o&-2,t.na=this.na,t.gd=this.gd,t.hd=this.hd,t.Ac=this.Ac,t.Bc=this.Bc,this.na===W.m){for(var e=this.ae.s,i=t.ae,n=0;n<e.length;n++)i.add(e[n].copy());t.ae=i}else t.ae=this.ae;return t.Vp=this.Vp,t.Dp.assign(this.Dp),t.pk=this.pk,t.vm=this.vm,t.wm=this.wm,t.cg=this.cg.J(),t.dg=this.dg.J(),t.Ok=this.Ok,t.Nk=this.Nk,t.Sf=this.Sf,t},W.prototype.ha=function(){return this.freeze(),Object.freeze(this),this},W.prototype.freeze=function(){if(this._isFrozen=!0,this.type!==W.m)return this;var t=this.figures;t.freeze(),t=t.s;for(var e=t.length,i=0;i<e;i++)t[i].freeze();return this},W.prototype.ka=function(){if(Object.isFrozen(this)&&R("cannot thaw constant: "+this),this._isFrozen=!1,this.type!==W.m)return this;var t=this.figures;t.ka(),t=t.s;for(var e=t.length,i=0;i<e;i++)t[i].ka();return this},W.prototype.Xa=function(t){if(!(t instanceof W))return!1;if(this.type!==t.type)return this.type===W.j&&t.type===W.m?OS(this,t):t.type===W.j&&this.type===W.m?OS(t,this):!1;if(this.type===W.m){var e=this.figures.s;t=t.figures.s;var i=e.length;if(i!==t.length)return!1;for(var n=0;n<i;n++)if(!e[n].Xa(t[n]))return!1;return!0}return F.B(this.startX,t.startX)&&F.B(this.startY,t.startY)&&F.B(this.endX,t.endX)&&F.B(this.endY,t.endY)};function OS(t,e){return t.type!==W.j||e.type!==W.m?!1:!!(e.figures.count===1&&(e=e.figures.L(0),e.segments.count===1&&F.B(t.startX,e.startX)&&F.B(t.startY,e.startY)&&(e=e.segments.L(0),e.type===te&&F.B(t.endX,e.endX)&&F.B(t.endY,e.endY))))}W.ga=function(t){return t.toString()},W.prototype.rb=function(t){t.classType===W&&(this.type=t)},W.prototype.toString=function(t){switch(t===void 0&&(t=-1),this.type){case W.j:return 0>t?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t)+"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);case W.u:var e=new V(this.startX,this.startY,0,0);return e.Gv(this.endX,this.endY,0,0),0>t?"M"+e.x.toString()+" "+e.y.toString()+"H"+e.right.toString()+"V"+e.bottom.toString()+"H"+e.left.toString()+"z":"M"+e.x.toFixed(t)+" "+e.y.toFixed(t)+"H"+e.right.toFixed(t)+"V"+e.bottom.toFixed(t)+"H"+e.left.toFixed(t)+"z";case W.F:if(e=new V(this.startX,this.startY,0,0),e.Gv(this.endX,this.endY,0,0),0>t)return t=e.left.toString()+" "+(e.y+e.height/2).toString(),"M"+t+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+(e.right.toString()+" "+(e.y+e.height/2).toString())+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+t;var i=e.left.toFixed(t)+" "+(e.y+e.height/2).toFixed(t);return"M"+i+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+(e.right.toFixed(t)+" "+(e.y+e.height/2).toFixed(t))+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+i;case W.m:e="",i=this.figures.s;for(var n=i.length,r=0;r<n;r++){var s=i[r];0<r&&(e+=" x "),s.isFilled&&(e+="F "),e+=s.toString(t)}return e;default:return this.type.toString()}},W.ob=function(t){t=t.split(/[Xx]/);for(var e=t.length,i="",n=0;n<e;n++){var r=t[n];i=r.match(/[Ff]/)!==null?n===0?i+r:i+("X"+(r[0]===" "?"":" ")+r):i+((n===0?"":"X ")+"F"+(r[0]===" "?"":" ")+r)}return i},W.parse=function(t,e){function i(){return S>=L-1?!0:f[S+1].match(E)!==null}function n(){return S++,f[S]}function r(gt){var ct=parseFloat(n()),Ft=parseFloat(n());N===N.toLowerCase()&&(ct=T.x+ct,Ft=T.y+Ft),gt.h(ct,Ft)}function s(){return r(T),T}function l(){return r(C),C}function h(){var gt=k.toLowerCase();return gt!=="c"&&gt!=="s"&&gt!=="q"&&gt!=="t"?T:new P(2*T.x-C.x,2*T.y-C.y)}e===void 0&&(e=!1);var a=/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm;t=t.replace(/,/gm," "),t=t.replace(a,"$1 $2"),t=t.replace(a,"$1 $2"),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^s])/gm,"$1 $2"),t=t.replace(/([^s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2"),t=t.replace(/([0-9])([+\-])/gm,"$1 $2"),t=t.replace(/[\s\r\t\n]+/gm," "),t=t.replace(/^\s+|\s+$/g,"");var f=t.split(" ");for(t=0;t<f.length;t++){var p=f[t];if(p.match(/(\.[0-9]*)(\.)/gm)!==null){a=Yt();for(var d="",y=!1,x=0;x<p.length;x++){var v=p[x];v!=="."||y?v==="."?(a.push(d),d="."):d+=v:(y=!0,d+=v)}for(a.push(d),f.splice(t,1),p=0;p<a.length;p++)f.splice(t+p,0,a[p]);t+=a.length-1,Vt(a)}}var S=-1,N="",k="";a=new P(0,0);var C=new P(0,0),T=new P(0,0),L=f.length;t=R2(null),y=d=p=!1,x=!0,v=null;for(var E=/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/;!(S>=L-1);)if(k=N,N=n(),N!=="")switch(N.toUpperCase()){case"X":x=!0,d=p=!1;break;case"M":for(v=s(),t.ic===null||x===!0?(Uh(t,v.x,v.y,p,!d,y),x=!1):t.moveTo(v.x,v.y),a.assign(T);!i();)v=s(),t.lineTo(v.x,v.y);break;case"L":for(;!i();)v=s(),t.lineTo(v.x,v.y);break;case"H":for(;!i();)T=new P((N===N.toLowerCase()?T.x:0)+parseFloat(n()),T.y),t.lineTo(T.x,T.y);break;case"V":for(;!i();)T=new P(T.x,(N===N.toLowerCase()?T.y:0)+parseFloat(n())),t.lineTo(T.x,T.y);break;case"C":for(;!i();){v=new P,r(v);var I=l(),Z=s();qo(t,v.x,v.y,I.x,I.y,Z.x,Z.y)}break;case"S":for(;!i();)v=h(),I=l(),Z=s(),qo(t,v.x,v.y,I.x,I.y,Z.x,Z.y);break;case"Q":for(;!i();)v=l(),I=s(),vd(t,v.x,v.y,I.x,I.y);break;case"T":for(;!i();)C=v=h(),I=s(),vd(t,v.x,v.y,I.x,I.y);break;case"B":for(;!i();){v=parseFloat(n()),I=parseFloat(n()),Z=parseFloat(n());var it=parseFloat(n()),et=parseFloat(n()),G=et,U=!1;i()||(G=parseFloat(n()),i()||(U=parseFloat(n())!==0)),N===N.toLowerCase()&&(Z+=T.x,it+=T.y),t.arcTo(v,I,Z,it,et,G,U)}break;case"A":for(;!i();)v=Math.abs(parseFloat(n())),I=Math.abs(parseFloat(n())),Z=parseFloat(n()),et=it=!1,U=G=0,G=n(),G.length===1?(it=!!parseFloat(G),et=!!parseFloat(n()),G=parseFloat(n())):G.length===2?(it=!!parseFloat(G[0]),et=!!parseFloat(G[1]),G=parseFloat(n())):(it=!!parseFloat(G[0]),et=!!parseFloat(G[1]),G=parseFloat(G.slice(2))),U=parseFloat(n()),N===N.toLowerCase()&&(G=T.x+G,U=T.y+U),T.h(G,U),cj(t,v,I,Z,it,et,G,U);break;case"Z":fj(t),T.assign(a);break;case"F":for(v="",I=1;f[S+I];)if(f[S+I]==="0")y=!0,I++;else if(f[S+I].match(/[Uu]/)!==null)I++;else if(f[S+I].match(E)===null)I++;else{v=f[S+I];break}v.match(/[Mm]/)?p=!0:0<t.ic.segments.length&&(t.ic.isFilled=!0);break;case"U":for(v="",I=1;f[S+I];)if(f[S+I].match(/[Ff]/)!==null)I++;else if(f[S+I].match(E)===null)I++;else{v=f[S+I];break}v.match(/[Mm]/)?d=!0:t.ic.isShadowed=!1}if(a=t.js,xd=t,e)for(e=a.figures.iterator;e.next();)e.value.isFilled=!0;return a},W.Ha=function(t,e){for(var i=t.length,n=P.alloc(),r=0;r<i;r++){var s=t[r];n.x=s[0],n.y=s[1],e.Ga(n),s[0]=n.x,s[1]=n.y,n.x=s[2],n.y=s[3],e.Ga(n),s[2]=n.x,s[3]=n.y,n.x=s[4],n.y=s[5],e.Ga(n),s[4]=n.x,s[5]=n.y,n.x=s[6],n.y=s[7],e.Ga(n),s[6]=n.x,s[7]=n.y}P.free(n)},W.prototype.Xu=function(){if(this._isInvalidBounds)return!0;if(this.type===W.m){if(this.Vp!==this.figures.Ja)return!0;for(var t=this.figures.s,e=t.length,i=0;i<e;i++)if(t[i].Xu())return!0}return!1},W.prototype.computeBounds=function(){if(this._isInvalidBounds=!1,this.vm=this.pk=null,this.wm=NaN,this.type===W.m){this.Vp=this.figures.Ja;for(var t=this.figures.s,e=t.length,i=0;i<e;i++){var n=t[i];n._isInvalidBounds=!1;var r=n.segments;n.lr=r.Ja,n=r.s,r=n.length;for(var s=0;s<r;s++){var l=n[s];l._isInvalidBounds=!1,l.Xd=null}}}t=this.Dp,t.ka(),isNaN(this.Ok)||isNaN(this.Nk)?t.h(0,0,0,0):t.h(0,0,this.Ok,this.Nk),AS(this,t,!1),Ve(t,0,0,0,0),t.freeze()},W.prototype.gx=function(){var t=new V;return AS(this,t,!0),t};function AS(t,e,i){switch(t.type){case W.j:case W.u:case W.F:i?e.h(t.gd,t.hd,0,0):Ve(e,t.gd,t.hd,0,0),Ve(e,t.Ac,t.Bc,0,0);break;case W.m:var n=t.figures;t=n.s,n=n.length;for(var r=0;r<n;r++){var s=t[r];i&&r===0?e.h(s.startX,s.startY,0,0):Ve(e,s.startX,s.startY,0,0);for(var l=s.segments.s,h=l.length,a=s.startX,f=s.startY,p=0;p<h;p++){var d=l[p];switch(d.type){case te:case Wn:a=d.endX,f=d.endY,Ve(e,a,f,0,0);break;case dn:F.zl(a,f,d.point1X,d.point1Y,d.point2X,d.point2Y,d.endX,d.endY,.5,e),a=d.endX,f=d.endY;break;case Er:F.gv(a,f,d.point1X,d.point1Y,d.endX,d.endY,.5,e),a=d.endX,f=d.endY;break;case me:case ar:var y=d.type===me?wo(d,s):ul(d,s,a,f),x=y.length;if(x===0){a=d.type===me?d.centerX:d.endX,f=d.type===me?d.centerY:d.endY,Ve(e,a,f,0,0);break}d=null;for(var v=0;v<x;v++)d=y[v],F.zl(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.5,e);d!==null&&(a=d[6],f=d[7]);break;default:R("Unknown Segment type: "+d.type)}}}break;default:R("Unknown Geometry type: "+t.type)}}W.prototype.normalize=function(){this._isFrozen&&st(this);var t=this.gx();return this.offset(-t.x,-t.y),new P(-t.x,-t.y)},W.prototype.offset=function(t,e){return this._isFrozen&&st(this),this.transform(1,0,0,1,t,e),this},W.prototype.scale=function(t,e){return this._isFrozen&&st(this),this.transform(t,0,0,e,0,0),this},W.prototype.rotate=function(t,e,i){this._isFrozen&&st(this),e===void 0&&(e=0),i===void 0&&(i=0);var n=Nt.alloc();return n.reset(),n.rotate(t,e,i),this.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),Nt.free(n),this},o=W.prototype,o.transform=function(t,e,i,n,r,s){switch(this.type){case W.j:case W.u:case W.F:var l=this.gd,h=this.hd;this.gd=l*t+h*i+r,this.hd=l*e+h*n+s,l=this.Ac,h=this.Bc,this.Ac=l*t+h*i+r,this.Bc=l*e+h*n+s;break;case W.m:for(var a=this.figures.s,f=a.length,p=0;p<f;p++){var d=a[p];l=d.startX,h=d.startY,d.startX=l*t+h*i+r,d.startY=l*e+h*n+s,d=d.segments.s;for(var y=d.length,x=0;x<y;x++){var v=d[x];switch(v.type){case te:case Wn:l=v.endX,h=v.endY,v.endX=l*t+h*i+r,v.endY=l*e+h*n+s;break;case dn:l=v.point1X,h=v.point1Y,v.point1X=l*t+h*i+r,v.point1Y=l*e+h*n+s,l=v.point2X,h=v.point2Y,v.point2X=l*t+h*i+r,v.point2Y=l*e+h*n+s,l=v.endX,h=v.endY,v.endX=l*t+h*i+r,v.endY=l*e+h*n+s;break;case Er:l=v.point1X,h=v.point1Y,v.point1X=l*t+h*i+r,v.point1Y=l*e+h*n+s,l=v.endX,h=v.endY,v.endX=l*t+h*i+r,v.endY=l*e+h*n+s;break;case me:l=v.centerX,h=v.centerY,v.centerX=l*t+h*i+r,v.centerY=l*e+h*n+s,e!==0&&(l=180*Math.atan2(e,t)/Math.PI,0>l&&(l+=360),v.startAngle+=l),0>t&&(v.startAngle=180-v.startAngle,v.sweepAngle=-v.sweepAngle),0>n&&(v.startAngle=-v.startAngle,v.sweepAngle=-v.sweepAngle),v.radiusX*=Math.sqrt(t*t+i*i),v.radiusY!==void 0&&(v.radiusY*=Math.sqrt(e*e+n*n));break;case ar:if(l=v.endX,h=v.endY,v.endX=l*t+h*i+r,v.endY=l*e+h*n+s,v.radiusX===0||v.radiusY===0)break;e!==0&&(l=180*Math.atan2(e,t)/Math.PI,0>l&&(l+=360),v.xAxisRotation+=l),0>t&&(v.xAxisRotation=180-v.xAxisRotation,v.isClockwiseArc=!v.isClockwiseArc),0>n&&(v.xAxisRotation=-v.xAxisRotation,v.isClockwiseArc=!v.isClockwiseArc),v.radiusX*=Math.sqrt(t*t+i*i),v.radiusY*=Math.sqrt(e*e+n*n);break;default:R("Unknown Segment type: "+v.type)}}}}return this._isInvalidBounds=!0,this},o.ca=function(t,e){e===void 0&&(e=0);var i=this.gd,n=this.hd,r=this.Ac,s=this.Bc;switch(this.type){case W.j:return F.Ub(i,n,r,s,e,t.x,t.y);case W.u:var l=V.allocAt(Math.min(i,r)-e,Math.min(n,s)-e,Math.abs(r-i)+2*e,Math.abs(s-n)+2*e);return t=l.ca(t),V.free(l),t;case W.F:l=Math.min(i,r)-e;var h=Math.min(n,s)-e;return i=(Math.abs(r-i)+2*e)/2,e=(Math.abs(s-n)+2*e)/2,0>=i||0>=e?!1:(l=t.x-(l+i),h=t.y-(h+e),1>=l*l/(i*i)+h*h/(e*e));case W.m:return A0(this,t,e,!0,!1);default:return!1}};function A0(t,e,i,n,r){var s=e.x;e=e.y;for(var l=t.bounds.x-20,h=0,a,f,p,d,y=t.figures.s,x=y.length,v=0;v<x;v++){var S=y[v],N=!S.isEvenOdd;if(S.isFilled){if(n&&S.ca(s,e,i))return!0;var k=S.segments;a=S.startX,f=S.startY;for(var C=a,T=f,L=k.s,E=0;E<=k.length;E++){var I=void 0;if(E!==k.length){I=L[E];var Z=I.type;t=I.endX,d=I.endY}else Z=te,t=C,d=T;switch(Z){case Wn:if(C=vp(s,e,l,e,a,f,C,T),isNaN(C))return!0;h+=C,C=t,T=d;break;case te:if(a=vp(s,e,l,e,a,f,t,d),isNaN(a))return!0;h+=a;break;case dn:p=F.Co(a,f,I.point1X,I.point1Y,I.point2X,I.point2Y,t,d,l,e,s,e,.5),h+=p;break;case Er:p=F.Co(a,f,(a+2*I.point1X)/3,(f+2*I.point1Y)/3,(2*I.point1X+t)/3,(2*I.point1Y+d)/3,t,d,l,e,s,e,.5),h+=p;break;case me:case ar:Z=I.type===me?wo(I,S):ul(I,S,a,f);var it=Z.length;if(it===0){if(a=vp(s,e,l,e,a,f,I.type===me?I.centerX:I.endX,I.type===me?I.centerY:I.endY),isNaN(a))return!0;h+=a;break}I=null;for(var et=0;et<it;et++){if(I=Z[et],et===0){if(p=vp(s,e,l,e,a,f,I[0],I[1]),isNaN(p))return!0;h+=p}p=F.Co(I[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7],l,e,s,e,.5),h+=p}I!==null&&(t=I[6],d=I[7]);break;default:R("Unknown Segment type: "+I.type)}a=t,f=d}if(N){if(h!==0)return!0}else if(h%2!==0)return!0;h=0}else if(S.ca(s,e,r?i:i+2))return!0}return!1}function vp(t,e,i,n,r,s,l,h){if(F.Ub(r,s,l,h,.05,t,e))return NaN;var a=(t-i)*(s-h);if(a===0)return 0;var f=((t*n-e*i)*(r-l)-(t-i)*(r*h-s*l))/a;if(e=(t*n-e*i)*(s-h)/a,f>=t)return 0;if((r>l?r-l:l-r)<(s>h?s-h:h-s)){if(s<h){if(e<s||e>h)return 0}else if(e<h||e>s)return 0}else if(r<l){if(f<r||f>l)return 0}else if(f<l||f>r)return 0;return 0<a?1:-1}function IS(t,e,i,n){t=t.figures.s;for(var r=t.length,s=0;s<r;s++)if(t[s].ca(e,i,n))return!0;return!1}o.Nu=function(t,e){if(0>t?t=0:1<t&&(t=1),e===void 0&&(e=new P),this.type===W.j)return e.h(this.startX+t*(this.endX-this.startX),this.startY+t*(this.endY-this.startY)),e;for(var i=this.flattenedSegments,n=this.flattenedLengths,r=i.length,s=this.flattenedTotalLength*t,l=0,h=0;h<r;h++){var a=n[h],f=a.length;for(t=0;t<f;t++){var p=a[t];if(l+p>=s)return n=s-l,n=p===0?0:n/p,i=i[h],h=i[2*t],r=i[2*t+1],e.h(h+(i[2*t+2]-h)*n,r+(i[2*t+3]-r)*n),e;l+=p}}return e},o.tx=function(t){if(0>t?t=0:1<t&&(t=1),this.type===W.j)return 180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;for(var e=this.flattenedSegments,i=this.flattenedLengths,n=e.length,r=this.flattenedTotalLength*t,s=0,l=0;l<n;l++){var h=i[l],a=h.length;for(t=0;t<a;t++){var f=h[t];if(s+f>=r)return r=e[l],e=r[2*t],i=r[2*t+1],n=r[2*t+2],t=r[2*t+3],1>Math.abs(n-e)&&1>Math.abs(t-i)?0:1>Math.abs(n-e)?0<=t-i?90:270:1>Math.abs(t-i)?0<=n-e?0:180:180*Math.atan2(t-i,n-e)/Math.PI;s+=f}}return NaN},o.Ou=function(t,e){if(0>t?t=0:1<t&&(t=1),e===void 0&&(e=[]),e.length=3,this.type===W.j)return e[0]=this.startX+t*(this.endX-this.startX),e[1]=this.startY+t*(this.endY-this.startY),e[2]=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI,e;for(var i=this.flattenedSegments,n=this.flattenedLengths,r=i.length,s=this.flattenedTotalLength*t,l=0,h=0;h<r;h++){var a=n[h],f=a.length;for(t=0;t<f;t++){var p=a[t];if(l+p>=s)return n=s-l,n=p===0?0:n/p,p=i[h],i=p[2*t],h=p[2*t+1],r=p[2*t+2],t=p[2*t+3],e[0]=i+(r-i)*n,e[1]=h+(t-h)*n,e[2]=1>Math.abs(r-i)&&1>Math.abs(t-h)?0:1>Math.abs(r-i)?0<=t-h?90:270:1>Math.abs(t-h)?0<=r-i?0:180:180*Math.atan2(t-h,r-i)/Math.PI,e;l+=p}}return e},o.ux=function(t){if(this.type===W.j){var e=this.startX,i=this.startY,n=this.endX,r=this.endY;if(e!==n||i!==r){var s=t.x;if(t=t.y,e===n){if(i<r){var l=i;n=r}else l=r,n=i;return t<=l?l===i?0:1:t>=n?n===i?0:1:Math.abs(t-i)/(n-l)}if(i===r)return e<n?l=e:(l=n,n=e),s<=l?l===e?0:1:s>=n?n===e?0:1:Math.abs(s-e)/(n-l);l=(n-e)*(n-e)+(r-i)*(r-i);var h=P.alloc();return F.mh(e,i,n,r,s,t,h),t=h.x,s=h.y,P.free(h),Math.sqrt(((t-e)*(t-e)+(s-i)*(s-i))/l)}}else if(this.type===W.u){l=this.startX,h=this.startY;var a=this.endX;if(r=this.endY,l!==a||h!==r){e=a-l,i=r-h,s=2*e+2*i,n=t.x,t=t.y,n=Math.min(Math.max(n,l),a),t=Math.min(Math.max(t,h),r),l=Math.abs(n-l),a=Math.abs(n-a),h=Math.abs(t-h),r=Math.abs(t-r);var f=Math.min(l,a,h,r);if(f===h)return n/s;if(f===a)return(e+t)/s;if(f===r)return(2*e+i-n)/s;if(f===l)return(2*e+2*i-t)/s}}else{e=this.flattenedSegments,i=this.flattenedLengths,s=this.flattenedTotalLength,n=P.alloc(),r=1/0,h=l=0,a=e.length;for(var p=f=0,d=0;d<a;d++)for(var y=e[d],x=i[d],v=y.length,S=0;S<v;S+=2){var N=y[S],k=y[S+1];if(S!==0){F.mh(f,p,N,k,t.x,t.y,n);var C=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y);C<r&&(r=C,l=h,l+=Math.sqrt((n.x-f)*(n.x-f)+(n.y-p)*(n.y-p))),h+=x[(S-2)/2]}f=N,p=k}return P.free(n),t=l/s,0>t?0:1<t?1:t}return 0};function DS(t){if(t.pk===null){var e=t.pk=[],i=t.vm=[],n=[],r=[];if(t.type===W.j)n.push(t.startX),n.push(t.startY),n.push(t.endX),n.push(t.endY),e.push(n),r.push(Math.sqrt((t.startX-t.endX)*(t.startX-t.endX)+(t.startY-t.endY)*(t.startY-t.endY))),i.push(r);else if(t.type===W.u)n.push(t.startX),n.push(t.startY),n.push(t.endX),n.push(t.startY),n.push(t.endX),n.push(t.endY),n.push(t.startX),n.push(t.endY),n.push(t.startX),n.push(t.startY),e.push(n),r.push(Math.abs(t.startX-t.endX)),r.push(Math.abs(t.startY-t.endY)),r.push(Math.abs(t.startX-t.endX)),r.push(Math.abs(t.startY-t.endY)),i.push(r);else if(t.type===W.F){var s=new De;s.startX=t.endX,s.startY=(t.startY+t.endY)/2;var l=new At(me);if(l.startAngle=0,l.sweepAngle=360,l.centerX=(t.startX+t.endX)/2,l.centerY=(t.startY+t.endY)/2,l.radiusX=Math.abs(t.startX-t.endX)/2,l.radiusY=Math.abs(t.startY-t.endY)/2,s.add(l),t=wo(l,s),r=t.length,r===0)n.push(l.centerX),n.push(l.centerY);else{l=s.startX,s=s.startY;for(var h=0;h<r;h++){var a=t[h];F.Ne(l,s,a[2],a[3],a[4],a[5],a[6],a[7],.5,n),l=a[6],s=a[7]}}e.push(n),i.push(I0(n))}else for(t=t.figures.iterator;t.next();){r=t.value,n=[],n.push(r.startX),n.push(r.startY),l=r.startX,s=r.startY,h=l,a=s;for(var f=r.segments.s,p=f.length,d=0;d<p;d++){var y=f[d];switch(y.type){case Wn:4<=n.length&&(e.push(n),i.push(I0(n))),n=[],n.push(y.endX),n.push(y.endY),l=y.endX,s=y.endY,h=l,a=s;break;case te:n.push(y.endX),n.push(y.endY),l=y.endX,s=y.endY;break;case dn:F.Ne(l,s,y.point1X,y.point1Y,y.point2X,y.point2Y,y.endX,y.endY,.5,n),l=y.endX,s=y.endY;break;case Er:F.Zo(l,s,y.point1X,y.point1Y,y.endX,y.endY,.5,n),l=y.endX,s=y.endY;break;case me:var x=wo(y,r),v=x.length;if(v===0){n.push(y.centerX),n.push(y.centerY),l=y.centerX,s=y.centerY;break}for(var S=0;S<v;S++){var N=x[S];F.Ne(l,s,N[2],N[3],N[4],N[5],N[6],N[7],.5,n),l=N[6],s=N[7]}break;case ar:if(x=ul(y,r,l,s),v=x.length,S=y.endX,N=y.endY,v===0){n.push(S),n.push(N),l=S,s=N;break}for(S=0;S<v;S++)N=x[S],F.Ne(l,s,N[2],N[3],N[4],N[5],N[6],N[7],.5,n),l=N[6],s=N[7];break;default:R("Segment not of valid type: "+y.type)}y.isClosed&&(n.push(h),n.push(a))}4<=n.length&&(e.push(n),i.push(I0(n)))}}}function I0(t){for(var e=[],i=0,n=0,r=t.length,s=0;s<r;s+=2){var l=t[s],h=t[s+1];s!==0&&e.push(Math.sqrt(mo(i,n,l,h))),i=l,n=h}return e}o.add=function(t){return this.ae.add(t),this},o.mm=function(t,e,i,n,r,s,l,h){return this._isFrozen&&st(this),this.cg=new at(t,e,r,s).freeze(),this.dg=new at(i,n,l,h).freeze(),this},z.Object.defineProperties(W.prototype,{_isFrozen:{get:function(){return(this.o&1)!==0},set:function(t){this.o=t?this.o|1:this.o&-2}},_isInvalidBounds:{get:function(){return(this.o&2)!==0},set:function(t){this.o=t?this.o|2:this.o&-3}},flattenedSegments:{get:function(){return DS(this),this.pk}},flattenedLengths:{get:function(){return DS(this),this.vm}},flattenedTotalLength:{get:function(){var t=this.wm;if(isNaN(t)){if(this.type===W.j){t=Math.abs(this.endX-this.startX);var e=Math.abs(this.endY-this.startY);t=Math.sqrt(t*t+e*e)}else if(this.type===W.u)t=2*Math.abs(this.endX-this.startX)+2*Math.abs(this.endY-this.startY);else{e=this.flattenedLengths;for(var i=e.length,n=t=0;n<i;n++)for(var r=e[n],s=r.length,l=0;l<s;l++)t+=r[l]}this.wm=t}return t}},type:{get:function(){return this.na},set:function(t){this.na!==t&&(this._isFrozen&&st(this,t),this.na=t,t===W.m?this.ae=new tt:(W.V===null&&(W.V=new tt().freeze()),this.ae=W.V),this._isInvalidBounds=!0)}},startX:{get:function(){return this.gd},set:function(t){this.gd!==t&&(this._isFrozen&&st(this,t),this.gd=t,this._isInvalidBounds=!0)}},startY:{get:function(){return this.hd},set:function(t){this.hd!==t&&(this._isFrozen&&st(this,t),this.hd=t,this._isInvalidBounds=!0)}},endX:{get:function(){return this.Ac},set:function(t){this.Ac!==t&&(this._isFrozen&&st(this,t),this.Ac=t,this._isInvalidBounds=!0)}},endY:{get:function(){return this.Bc},set:function(t){this.Bc!==t&&(this._isFrozen&&st(this,t),this.Bc=t,this._isInvalidBounds=!0)}},figures:{get:function(){return this.ae},set:function(t){this.ae!==t&&(this._isFrozen&&st(this,t),this.ae=t,this._isInvalidBounds=!0)}},spot1:{get:function(){return this.cg},set:function(t){this._isFrozen&&st(this,t),this.cg=t.J()}},spot2:{get:function(){return this.dg},set:function(t){this._isFrozen&&st(this,t),this.dg=t.J()}},defaultStretch:{get:function(){return this.Sf},set:function(t){this._isFrozen&&st(this,t),this.Sf=t}},bounds:{get:function(){return this.Xu()&&this.computeBounds(),this.Dp}}}),W.prototype.setSpots=W.prototype.mm,W.prototype.add=W.prototype.add,W.prototype.getFractionForPoint=W.prototype.ux,W.prototype.getPointAndAngleAlongPath=W.prototype.Ou,W.prototype.getAngleAlongPath=W.prototype.tx,W.prototype.getPointAlongPath=W.prototype.Nu,W.prototype.containsPoint=W.prototype.ca,W.prototype.transform=W.prototype.transform,W.prototype.rotate=W.prototype.rotate,W.prototype.scale=W.prototype.scale,W.prototype.offset=W.prototype.offset,W.prototype.normalize=W.prototype.normalize,W.prototype.computeBoundsWithoutOrigin=W.prototype.gx,W.prototype.equalsApprox=W.prototype.Xa,W.className="Geometry",W.j=new Q(W,"Line",0),W.u=new Q(W,"Rectangle",1),W.F=new Q(W,"Ellipse",2),W.m=new Q(W,"Path",3),W.V=null,W.hb="UuBbMmZzLlHhVvCcSsQqTtAaFfXx",W.className="Geometry",W.stringify=W.ga,W.fillPath=W.ob,W.parse=W.parse,W.Line=W.j,W.Rectangle=W.u,W.Ellipse=W.F,W.Path=W.m;function De(t,e,i,n,r){Oe(this),i===void 0&&(i=!0),n===void 0&&(n=!0),r===void 0&&(r=!1),this.o=2|(i?4:0)|(n?8:0)|(r?16:0),t!==void 0?this.gd=t:this.gd=0,e!==void 0?this.hd=e:this.hd=0,this.ll=new tt,this.lr=this.ll.Ja,this.bw=null}De.prototype.copy=function(){var t=new De;t.o=this.o&-2,t.gd=this.gd,t.hd=this.hd;for(var e=this.ll.s,i=e.length,n=t.ll,r=0;r<i;r++){var s=e[r].copy();n.add(s)}return t.lr=this.lr,t.bw=this.bw,t},o=De.prototype,o.Xa=function(t){if(!(t instanceof De&&F.B(this.startX,t.startX)&&F.B(this.startY,t.startY)))return!1;var e=this.segments.s;t=t.segments.s;var i=e.length;if(i!==t.length)return!1;for(var n=0;n<i;n++)if(!e[n].Xa(t[n]))return!1;return!0},o.toString=function(t){t===void 0&&(t=-1);for(var e=0>t?"M"+this.startX.toString()+" "+this.startY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t),i=this.segments.s,n=i.length,r=0;r<n;r++)e+=" "+i[r].toString(t);return e},o.freeze=function(){this._isFrozen=!0;var t=this.segments;t.freeze();var e=t.s;t=t.length;for(var i=0;i<t;i++)e[i].freeze();return this},o.ka=function(){this._isFrozen=!1;var t=this.segments;t.ka(),t=t.s;for(var e=t.length,i=0;i<e;i++)t[i].ka();return this},o.Xu=function(){if(this._isInvalidBounds)return!0;var t=this.segments;if(this.lr!==t.Ja)return!0;t=t.s;for(var e=t.length,i=0;i<e;i++)if(t[i]._isInvalidBounds)return!0;return!1},o.add=function(t){return this.ll.add(t),this},o.ca=function(t,e,i){for(var n=this.startX,r=this.startY,s=n,l=r,h=this.segments.s,a=h.length,f=0;f<a;f++){var p=h[f];switch(p.type){case Wn:s=p.endX,l=p.endY,n=p.endX,r=p.endY;break;case te:if(F.Ub(n,r,p.endX,p.endY,i,t,e))return!0;n=p.endX,r=p.endY;break;case dn:if(F.Wr(n,r,p.point1X,p.point1Y,p.point2X,p.point2Y,p.endX,p.endY,.5,t,e,i))return!0;n=p.endX,r=p.endY;break;case Er:if(F.hv(n,r,p.point1X,p.point1Y,p.endX,p.endY,.5,t,e,i))return!0;n=p.endX,r=p.endY;break;case me:case ar:var d=p.type===me?wo(p,this):ul(p,this,n,r),y=d.length,x=p.type===me?p.centerX:p.endX,v=p.type===me?p.centerY:p.endY;if(y===0){if(F.Ub(n,r,x,v,i,t,e))return!0;n=x,r=v;break}for(x=null,v=0;v<y;v++)if(x=d[v],v===0&&F.Ub(n,r,x[0],x[1],i,t,e)||F.Wr(x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],.5,t,e,i))return!0;x!==null&&(n=x[6],r=x[7]);break;default:R("Unknown Segment type: "+p.type)}if(p.isClosed&&(n!==s||r!==l)&&F.Ub(n,r,s,l,i,t,e))return!0}return!1},z.Object.defineProperties(De.prototype,{_isFrozen:{get:function(){return(this.o&1)!==0},set:function(t){this.o=t?this.o|1:this.o&-2}},_isInvalidBounds:{get:function(){return(this.o&2)!==0},set:function(t){this.o=t?this.o|2:this.o&-3}},isFilled:{get:function(){return(this.o&4)!==0},set:function(t){this._isFrozen&&st(this,t),this.o=t?this.o|4:this.o&-5}},isShadowed:{get:function(){return(this.o&8)!==0},set:function(t){this._isFrozen&&st(this,t),this.o=t?this.o|8:this.o&-9}},isEvenOdd:{get:function(){return(this.o&16)!==0},set:function(t){this._isFrozen&&st(this,t),this.o=t?this.o|16:this.o&-17}},startX:{get:function(){return this.gd},set:function(t){this._isFrozen&&st(this,t),this.gd=t,this._isInvalidBounds=!0}},startY:{get:function(){return this.hd},set:function(t){this._isFrozen&&st(this,t),this.hd=t,this._isInvalidBounds=!0}},segments:{get:function(){return this.ll},set:function(t){this._isFrozen&&st(this,t),this.ll=t,this._isInvalidBounds=!0}}}),De.prototype.add=De.prototype.add,De.prototype.equalsApprox=De.prototype.Xa,De.className="PathFigure";function At(t,e,i,n,r,s,l,h){Oe(this),t===void 0&&(t=te),this.na=t,this.o=2,e!==void 0?this.Ac=e:this.Ac=0,i!==void 0?this.Bc=i:this.Bc=0,n===void 0&&(n=0),r===void 0&&(r=0),s===void 0&&(s=0),l===void 0&&(l=0),t===ar?(t=s%360,0>t&&(t+=360),this.Ke=t,this.Sh=0,this.Th=Math.max(n,0),this.Lg=Math.max(r,0),typeof l=="boolean"?l&&(this.isLargeArc=!0):typeof l=="number"&&l&&(this.isLargeArc=!0),h&&(this.isClockwiseArc=!0)):(this.Ke=n,this.Sh=r,t===me&&(s=Math.max(s,0)),this.Th=s,typeof l=="number"?(t===me&&(l=Math.max(l,0)),this.Lg=l):this.Lg=0),this.Xd=null}At.prototype.copy=function(){var t=new At;return t.na=this.na,t.o=this.o&-2,t.Ac=this.Ac,t.Bc=this.Bc,t.Ke=this.Ke,t.Sh=this.Sh,t.Th=this.Th,t.Lg=this.Lg,t},o=At.prototype,o.Xa=function(t){if(!(t instanceof At)||this.type!==t.type||this.isClosed!==t.isClosed)return!1;switch(this.type){case Wn:case te:return F.B(this.endX,t.endX)&&F.B(this.endY,t.endY);case dn:return F.B(this.endX,t.endX)&&F.B(this.endY,t.endY)&&F.B(this.point1X,t.point1X)&&F.B(this.point1Y,t.point1Y)&&F.B(this.point2X,t.point2X)&&F.B(this.point2Y,t.point2Y);case Er:return F.B(this.endX,t.endX)&&F.B(this.endY,t.endY)&&F.B(this.point1X,t.point1X)&&F.B(this.point1Y,t.point1Y);case me:return F.B(this.startAngle,t.startAngle)&&F.B(this.sweepAngle,t.sweepAngle)&&F.B(this.centerX,t.centerX)&&F.B(this.centerY,t.centerY)&&F.B(this.radiusX,t.radiusX)&&F.B(this.radiusY,t.radiusY);case ar:return this.isClockwiseArc===t.isClockwiseArc&&this.isLargeArc===t.isLargeArc&&F.B(this.xAxisRotation,t.xAxisRotation)&&F.B(this.endX,t.endX)&&F.B(this.endY,t.endY)&&F.B(this.radiusX,t.radiusX)&&F.B(this.radiusY,t.radiusY);default:return!1}},o.rb=function(t){t.classType===At&&(this.type=t)},o.toString=function(t){switch(t===void 0&&(t=-1),this.type){case Wn:t=0>t?"M"+this.endX.toString()+" "+this.endY.toString():"M"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case te:t=0>t?"L"+this.endX.toString()+" "+this.endY.toString():"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case dn:t=0>t?"C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"C"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.point2X.toFixed(t)+" "+this.point2Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case Er:t=0>t?"Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"Q"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case me:t=0>t?"B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+this.startAngle.toFixed(t)+" "+this.sweepAngle.toFixed(t)+" "+this.centerX.toFixed(t)+" "+this.centerY.toFixed(t)+" "+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t);break;case ar:t=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.xAxisRotation.toFixed(t)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;default:t=this.type.toString()}return t+(this.isClosed?"z":"")},o.freeze=function(){return this._isFrozen=!0,this},o.ka=function(){return this._isFrozen=!1,this},o.close=function(){return this.isClosed=!0,this};function wo(t,e){if(t.Xd!==null&&e._isInvalidBounds===!1)return t.Xd;var i=t.radiusX,n=t.radiusY;if(n===void 0&&(n=i),i===0||n===0)return t.Xd=[],t.Xd;e=t.Ke;var r=t.Sh,s=F.hx(0,0,i<n?i:n,t.startAngle,t.startAngle+t.sweepAngle,!1);if(i!==n){var l=Nt.alloc();l.reset(),i<n?l.scale(1,n/i):l.scale(i/n,1),W.Ha(s,l),Nt.free(l)}for(i=s.length,n=0;n<i;n++)l=s[n],l[0]+=e,l[1]+=r,l[2]+=e,l[3]+=r,l[4]+=e,l[5]+=r,l[6]+=e,l[7]+=r;return t.Xd=s,t.Xd}function ul(t,e,i,n){function r(S,N,k,C){return(S*C<N*k?-1:1)*Math.acos((S*k+N*C)/(Math.sqrt(S*S+N*N)*Math.sqrt(k*k+C*C)))}if(t.Xd!==null&&e._isInvalidBounds===!1)return t.Xd;if(t.radiusX===0||t.radiusY===0)return t.Xd=[],t.Xd;e=t.Th;var s=t.Lg;e===0&&(e=1e-4),s===0&&(s=1e-4);var l=Math.PI/180*t.Ke,h=t.isLargeArc,a=t.isClockwiseArc,f=t.Ac,p=t.Bc,d=Math.cos(l),y=Math.sin(l),x=d*(i-f)/2+y*(n-p)/2;l=-y*(i-f)/2+d*(n-p)/2;var v=x*x/(e*e)+l*l/(s*s);return 1<v&&(e*=Math.sqrt(v),s*=Math.sqrt(v)),v=(h===a?-1:1)*Math.sqrt((e*e*s*s-e*e*l*l-s*s*x*x)/(e*e*l*l+s*s*x*x)),isNaN(v)&&(v=0),h=v*e*l/s,v=v*-s*x/e,isNaN(h)&&(h=0),isNaN(v)&&(v=0),i=(i+f)/2+d*h-y*v,n=(n+p)/2+y*h+d*v,p=r(1,0,(x-h)/e,(l-v)/s),d=(x-h)/e,f=(l-v)/s,x=(-x-h)/e,h=(-l-v)/s,l=r(d,f,x,h),x=(d*x+f*h)/(Math.sqrt(d*d+f*f)*Math.sqrt(x*x+h*h)),-1>=x?l=Math.PI:1<=x&&(l=0),!a&&0<l&&(l-=2*Math.PI),a&&0>l&&(l+=2*Math.PI),a=e>s?1:e/s,x=e>s?s/e:1,e=F.hx(0,0,e>s?e:s,p,p+l,!0),s=Nt.alloc(),s.reset(),s.translate(i,n),s.rotate(t.Ke,0,0),s.scale(a,x),W.Ha(e,s),Nt.free(s),t.Xd=e,t.Xd}z.Object.defineProperties(At.prototype,{_isFrozen:{get:function(){return(this.o&1)!==0},set:function(t){this.o=t?this.o|1:this.o&-2}},_isInvalidBounds:{get:function(){return(this.o&2)!==0},set:function(t){this.o=t?this.o|2:this.o&-3}},isClosed:{get:function(){return(this.o&8)!==0},set:function(t){this.isClosed!==t&&(this.o=t?this.o|8:this.o&-9,this._isInvalidBounds=!0)}},type:{get:function(){return this.na},set:function(t){this._isFrozen&&st(this,t),this.na=t,this._isInvalidBounds=!0}},endX:{get:function(){return this.Ac},set:function(t){this._isFrozen&&st(this,t),this.Ac=t,this._isInvalidBounds=!0}},endY:{get:function(){return this.Bc},set:function(t){this._isFrozen&&st(this,t),this.Bc=t,this._isInvalidBounds=!0}},point1X:{get:function(){return this.Ke},set:function(t){this._isFrozen&&st(this,t),this.Ke=t,this._isInvalidBounds=!0}},point1Y:{get:function(){return this.Sh},set:function(t){this._isFrozen&&st(this,t),this.Sh=t,this._isInvalidBounds=!0}},point2X:{get:function(){return this.Th},set:function(t){this._isFrozen&&st(this,t),this.Th=t,this._isInvalidBounds=!0}},point2Y:{get:function(){return this.Lg},set:function(t){this._isFrozen&&st(this,t),this.Lg=t,this._isInvalidBounds=!0}},centerX:{get:function(){return this.Ke},set:function(t){this._isFrozen&&st(this,t),this.Ke=t,this._isInvalidBounds=!0}},centerY:{get:function(){return this.Sh},set:function(t){this._isFrozen&&st(this,t),this.Sh=t,this._isInvalidBounds=!0}},radiusX:{get:function(){return this.Th},set:function(t){0>t&&dt(t,">= zero",At,"radiusX"),this._isFrozen&&st(this,t),this.Th=t,this._isInvalidBounds=!0}},radiusY:{get:function(){return this.Lg},set:function(t){0>t&&dt(t,">= zero",At,"radiusY"),this._isFrozen&&st(this,t),this.Lg=t,this._isInvalidBounds=!0}},startAngle:{get:function(){return this.Ac},set:function(t){this._isFrozen&&st(this,t),t%=360,0>t&&(t+=360),this.Ac=t,this._isInvalidBounds=!0}},sweepAngle:{get:function(){return this.Bc},set:function(t){this._isFrozen&&st(this,t),360<t&&(t=360),-360>t&&(t=-360),this.Bc=t,this._isInvalidBounds=!0}},isClockwiseArc:{get:function(){return(this.o&4)!==0},set:function(t){this._isFrozen&&st(this,t),this.o=t?this.o|4:this.o&-5,this._isInvalidBounds=!0}},isLargeArc:{get:function(){return(this.o&16)!==0},set:function(t){this._isFrozen&&st(this,t),this.o=t?this.o|16:this.o&-17,this._isInvalidBounds=!0}},xAxisRotation:{get:function(){return this.Ke},set:function(t){this._isFrozen&&st(this,t),t%=360,0>t&&(t+=360),this.Ke=t,this._isInvalidBounds=!0}}}),At.prototype.equalsApprox=At.prototype.Xa;var Wn=new Q(At,"Move",0),te=new Q(At,"Line",1),dn=new Q(At,"Bezier",2),Er=new Q(At,"QuadraticBezier",3),me=new Q(At,"Arc",4),ar=new Q(At,"SvgArc",4);At.className="PathSegment",At.Move=Wn,At.Line=te,At.Bezier=dn,At.QuadraticBezier=Er,At.Arc=me,At.SvgArc=ar;function gn(){this.H=null,this.uu=new P(0,0).freeze(),this.gt=new P(0,0).freeze(),this.wp=this.Lq=0,this.xp=1,this.rq="",this.Qr=this.Op=!1,this.Mp=this.zp=0,this.ug=this.hq=this.nq=!1,this.Tp=null,this.Lr=0,this.td=this.Hr=null}gn.prototype.copy=function(){var t=new gn;return this.clone(t)},gn.prototype.clone=function(t){return t.H=this.H,t.uu.assign(this.viewPoint),t.gt.assign(this.documentPoint),t.Lq=this.Lq,t.wp=this.wp,t.xp=this.xp,t.rq=this.rq,t.Op=this.Op,t.Qr=this.Qr,t.zp=this.zp,t.Mp=this.Mp,t.nq=this.nq,t.hq=this.hq,t.ug=this.ug,t.Tp=this.Tp,t.Lr=this.Lr,t.Hr=this.Hr,t.td=this.td,t},gn.prototype.toString=function(){var t="^";return this.modifiers!==0&&(t+="M:"+this.modifiers),this.button!==0&&(t+="B:"+this.button),this.key!==""&&(t+="K:"+this.key),this.clickCount!==0&&(t+="C:"+this.clickCount),this.delta!==0&&(t+="D:"+this.delta),this.handled&&(t+="h"),this.bubbles&&(t+="b"),this.documentPoint!==null&&(t+="@"+this.documentPoint.toString()),t},gn.prototype.No=function(t,e){var i=this.diagram;return i===null||kM(i,t,e),e},gn.prototype.wz=function(t,e){var i=this.diagram;return i===null||(kM(i,t,e),e.assign(i.Ks(e))),e},z.Object.defineProperties(gn.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},viewPoint:{get:function(){return this.uu},set:function(t){this.uu.assign(t)}},documentPoint:{get:function(){return this.gt},set:function(t){this.gt.assign(t)}},modifiers:{get:function(){return this.Lq},set:function(t){this.Lq=t}},button:{get:function(){return this.wp},set:function(t){if(this.wp=t,this.event===null)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}},buttons:{get:function(){return this.xp},set:function(t){this.xp=t}},key:{get:function(){return this.rq},set:function(t){this.rq=t}},down:{get:function(){return this.Op},set:function(t){this.Op=t}},up:{get:function(){return this.Qr},set:function(t){this.Qr=t}},clickCount:{get:function(){return this.zp},set:function(t){this.zp=t}},delta:{get:function(){return this.Mp},set:function(t){this.Mp=t}},isMultiTouch:{get:function(){return this.nq},set:function(t){this.nq=t}},handled:{get:function(){return this.hq},set:function(t){this.hq=t}},bubbles:{get:function(){return this.ug},set:function(t){this.ug=t}},event:{get:function(){return this.Tp},set:function(t){this.Tp=t}},isTouchEvent:{get:function(){var t=this.event;return t===null?!1:t.pointerType==="touch"||t.pointerType==="pen"}},timestamp:{get:function(){return this.Lr},set:function(t){this.Lr=t}},targetDiagram:{get:function(){return this.Hr},set:function(t){this.Hr=t}},targetObject:{get:function(){return this.td},set:function(t){this.td=t}},control:{get:function(){return(this.modifiers&1)!==0},set:function(t){this.modifiers=t?this.modifiers|1:this.modifiers&-2}},shift:{get:function(){return(this.modifiers&4)!==0},set:function(t){this.modifiers=t?this.modifiers|4:this.modifiers&-5}},alt:{get:function(){return(this.modifiers&2)!==0},set:function(t){this.modifiers=t?this.modifiers|2:this.modifiers&-3}},meta:{get:function(){return(this.modifiers&8)!==0},set:function(t){this.modifiers=t?this.modifiers|8:this.modifiers&-9}},left:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&1)!==0:this.button===0},set:function(t){this.buttons=t?this.buttons|1:this.buttons&-2}},right:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&2)!==0:this.button===2},set:function(t){this.buttons=t?this.buttons|2:this.buttons&-3}},middle:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&4)!==0:this.button===1},set:function(t){this.buttons=t?this.buttons|4:this.buttons&-5}}}),gn.prototype.getMultiTouchDocumentPoint=gn.prototype.wz,gn.prototype.getMultiTouchViewPoint=gn.prototype.No,gn.className="InputEvent";function uu(){this.H=null,this.wa="",this.Vq=this.Fr=null}uu.prototype.copy=function(){var t=new uu;return t.H=this.H,t.wa=this.wa,t.Fr=this.Fr,t.Vq=this.Vq,t},uu.prototype.toString=function(){var t="*"+this.name;return this.subject!==null&&(t+=":"+this.subject.toString()),this.parameter!==null&&(t+="("+this.parameter.toString()+")"),t},z.Object.defineProperties(uu.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},name:{get:function(){return this.wa},set:function(t){this.wa=t}},subject:{get:function(){return this.Fr},set:function(t){this.Fr=t}},parameter:{get:function(){return this.Vq},set:function(t){this.Vq=t}}}),uu.className="DiagramEvent";function ie(){this.Cm=Qt,this.nf=this.Kq="",this.In=this.Jn=this.On=this.Pn=this.Nn=this.H=this.$b=null}ie.prototype.clear=function(){this.In=this.Jn=this.On=this.Pn=this.Nn=this.H=this.$b=null},ie.prototype.copy=function(){var t=new ie;t.Cm=this.Cm,t.Kq=this.Kq,t.nf=this.nf,t.$b=this.$b,t.H=this.H,t.Nn=this.Nn;var e=this.Pn;return t.Pn=xt(e)&&typeof e.J=="function"?e.J():e,e=this.On,t.On=xt(e)&&typeof e.J=="function"?e.J():e,e=this.Jn,t.Jn=xt(e)&&typeof e.J=="function"?e.J():e,e=this.In,t.In=xt(e)&&typeof e.J=="function"?e.J():e,t},ie.prototype.rb=function(t){t.classType===ie&&(this.change=t)},ie.prototype.toString=function(){var t="";return t=this.change===fr?t+"* ":this.change===Qt?t+(this.model!==null?"!m":"!d"):t+((this.model!==null?"!m":"!d")+this.change),this.propertyName&&typeof this.propertyName=="string"&&(t+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(t+=" "+this.modelChange),t+=": ",this.change===fr?this.oldValue!==null&&(t+=" "+this.oldValue):(this.object!==null&&(t+=Gi(this.object)),this.oldValue!==null&&(t+="  old: "+Gi(this.oldValue)),this.oldParam!==null&&(t+=" "+this.oldParam),this.newValue!==null&&(t+="  new: "+Gi(this.newValue)),this.newParam!==null&&(t+=" "+this.newParam)),t},ie.prototype.I=function(t){return t?this.oldValue:this.newValue},ie.prototype.yz=function(t){return t?this.oldParam:this.newParam},ie.prototype.canUndo=function(){return this.model!==null||this.diagram!==null},ie.prototype.undo=function(){this.canUndo()&&(this.model!==null?this.model.changeState(this,!0):this.diagram!==null&&this.diagram.changeState(this,!0))},ie.prototype.canRedo=function(){return this.model!==null||this.diagram!==null},ie.prototype.redo=function(){this.canRedo()&&(this.model!==null?this.model.changeState(this,!1):this.diagram!==null&&this.diagram.changeState(this,!1))},z.Object.defineProperties(ie.prototype,{model:{get:function(){return this.$b},set:function(t){this.$b=t}},diagram:{get:function(){return this.H},set:function(t){this.H=t}},change:{get:function(){return this.Cm},set:function(t){this.Cm=t}},modelChange:{get:function(){return this.Kq},set:function(t){this.Kq=t}},propertyName:{get:function(){return this.nf},set:function(t){this.nf=t}},isTransactionFinished:{get:function(){return this.Cm===fr&&(this.nf==="CommittedTransaction"||this.nf==="FinishedUndo"||this.nf==="FinishedRedo")}},object:{get:function(){return this.Nn},set:function(t){this.Nn=t}},oldValue:{get:function(){return this.Pn},set:function(t){this.Pn=t}},oldParam:{get:function(){return this.On},set:function(t){this.On=t}},newValue:{get:function(){return this.Jn},set:function(t){this.Jn=t}},newParam:{get:function(){return this.In},set:function(t){this.In=t}}}),ie.prototype.redo=ie.prototype.redo,ie.prototype.canRedo=ie.prototype.canRedo,ie.prototype.undo=ie.prototype.undo,ie.prototype.canUndo=ie.prototype.canUndo,ie.prototype.getParam=ie.prototype.yz,ie.prototype.getValue=ie.prototype.I,ie.prototype.clear=ie.prototype.clear;var fr=new Q(ie,"Transaction",-1),Qt=new Q(ie,"Property",0),Ne=new Q(ie,"Insert",1),je=new Q(ie,"Remove",2);ie.className="ChangedEvent",ie.Transaction=fr,ie.Property=Qt,ie.Insert=Ne,ie.Remove=je;function Ue(){this.m=new tt().freeze(),this.wa="",this.j=!1}Ue.prototype.toString=function(t){var e="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(t!==void 0&&0<t){t=this.changes.count;for(var i=0;i<t;i++){var n=this.changes.L(i);n!==null&&(e+=`
  `+n.toString())}}return e},Ue.prototype.clear=function(){var t=this.changes;t.ka();for(var e=t.count-1;0<=e;e--){var i=t.L(e);i!==null&&i.clear()}t.clear(),t.freeze()},Ue.prototype.canUndo=function(){return this.isComplete},Ue.prototype.undo=function(){if(this.canUndo())for(var t=this.changes.count-1;0<=t;t--){var e=this.changes.L(t);e!==null&&e.undo()}},Ue.prototype.canRedo=function(){return this.isComplete},Ue.prototype.redo=function(){if(this.canRedo())for(var t=this.changes.count,e=0;e<t;e++){var i=this.changes.L(e);i!==null&&i.redo()}},Ue.prototype.Yj=function(){if(this.isComplete){var t=this.changes;t.ka();for(var e=new vt,i=0;i<t.count;i++){var n=t.L(i);if(n!==null&&n.change===Qt&&n.object){var r=e.get(n.object);r||(r=new vt,e.set(n.object,r));var s=r.get(n.propertyName);s===null?r.set(n.propertyName,-1):(0<s&&t.Xc(s,null),r.set(n.propertyName,i))}}for(i=e=0;i<t.count;i++)n=t.L(i),n!==null&&(i>e&&t.Xc(e,n),e++);for(;t.length>e;)t.pop();t.freeze()}},z.Object.defineProperties(Ue.prototype,{changes:{get:function(){return this.m}},name:{get:function(){return this.wa},set:function(t){this.wa=t}},isComplete:{get:function(){return this.j},set:function(t){this.j=t}}}),Ue.prototype.optimize=Ue.prototype.Yj,Ue.prototype.redo=Ue.prototype.redo,Ue.prototype.canRedo=Ue.prototype.canRedo,Ue.prototype.undo=Ue.prototype.undo,Ue.prototype.canUndo=Ue.prototype.canUndo,Ue.prototype.clear=Ue.prototype.clear,Ue.className="Transaction";function ue(){this.Mt=new q,this.Bd=!1,this.u=new tt().freeze(),this.ze=-1,this.m=999,this.Ce=!1,this.Ip=null,this.Zh=0,this.j=!1,this.Fe=new tt().freeze(),this.dl=new tt,this.ot=!0,this.yt=this.lq=this.Bt=this.At=!1}ue.prototype.toString=function(t){var e="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;e+="[";for(var i=this.nestedTransactionNames.count,n=0;n<i;n++)0<n&&(e+=" "),e+=this.nestedTransactionNames.L(n);if(e+="]",t!==void 0&&0<t)for(i=this.history.count,n=0;n<i;n++)e+=`
 `+this.history.L(n).toString(t-1);return e},ue.prototype.clear=function(){var t=this.history;t.ka();for(var e=t.count-1;0<=e;e--){var i=t.L(e);i!==null&&i.clear()}t.clear(),this.ze=-1,t.freeze(),this.Ce=!1,this.Ip=null,this.Zh=0,this.Fe.ka(),this.Fe.clear(),this.Fe.freeze(),this.dl.clear(),this.yt=this.lq=this.Bt=this.At=!1},ue.prototype.copyProperties=function(t){this.isEnabled=t.isEnabled,this.maxHistoryLength=t.maxHistoryLength,this.checksTransactionLevel=t.checksTransactionLevel},o=ue.prototype,o.Tw=function(t){this.Mt.add(t)},o.Qx=function(t){this.Mt.remove(t)},o.Ea=function(t){if(t===void 0&&(t=""),t===null&&(t=""),this.isUndoingRedoing)return!1;this.ot===!0&&(this.ot=!1,this.Zh++,this.isInternalTransaction||this.Lb("StartingFirstTransaction",t,this.currentTransaction),0<this.Zh&&this.Zh--),this.isEnabled&&(this.Fe.ka(),this.Fe.add(t),this.Fe.freeze(),this.currentTransaction===null?this.dl.add(0):this.dl.add(this.currentTransaction.changes.count)),this.Zh++;var e=this.transactionLevel===1;return e&&(this.isInternalTransaction||this.Lb("StartedTransaction",t,this.currentTransaction)),e},o.eb=function(t){return t===void 0&&(t=""),RS(this,!0,t)},o.If=function(){return RS(this,!1,"")};function RS(t,e,i){if(t.isUndoingRedoing)return!1;t.checksTransactionLevel&&1>t.transactionLevel&&Lt("Ending transaction without having started a transaction: "+i);var n=t.transactionLevel===1,r=t.currentTransaction;n&&e&&(t.isInternalTransaction||t.Lb("CommittingTransaction",i,r));var s=0;if(0<t.transactionLevel&&(t.Zh--,t.isEnabled)){var l=t.Fe.count;0<l&&(i===""&&(i=t.Fe.L(0)),t.Fe.ka(),t.Fe.nb(l-1),t.Fe.freeze()),l=t.dl.count,0<l&&(s=t.dl.L(l-1),t.dl.nb(l-1))}if(n){if(e){if(t.lq=!1,r===null&&i!==""&&(r=t.currentTransaction),t.isEnabled&&r!==null){for(r.isComplete||(r.isComplete=!0,r.name=i),e=t.history,e.ka(),n=e.count-1;n>t.historyIndex;n--)s=e.L(n),s!==null&&s.clear(),e.nb(n),t.lq=!0;n=t.maxHistoryLength,0<=n&&(n===0?e.clear():e.count>=n&&(s=e.L(0),s!==null&&s.clear(),e.nb(0),t.ze--)),n===0||e.count!==0&&e.get(e.count-1)===r||(e.add(r),t.ze++),e.freeze()}t.isInternalTransaction||t.Lb("CommittedTransaction",i,r)}else{t.Ce=!0;try{t.isEnabled&&r!==null&&(r.isComplete=!0,r.undo())}finally{t.isInternalTransaction||t.Lb("RolledBackTransaction",i,r),t.Ce=!1}r!==null&&r.clear()}return t.Ip=null,t.isPendingClear&&t.clear(),t.isPendingClear=!1,t.isPendingUnmodified=!1,!0}if(t.isEnabled&&!e&&r!==null){for(t=s,i=r.changes,r=i.count-1;r>=t;r--)e=i.L(r),e!==null&&e.undo(),i.ka(),i.nb(r);i.freeze()}return!1}ue.prototype.canUndo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToUndo;return!!(t!==null&&t.canUndo())},ue.prototype.undo=function(){if(this.canUndo()){var t=this.transactionToUndo;try{this.Ce=!0,this.Lb("StartingUndo","Undo",t),this.ze--,t.undo()}catch(e){Lt("undo error: "+e.toString())}finally{this.Lb("FinishedUndo","Undo",t),this.Ce=!1}}},ue.prototype.canRedo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToRedo;return!!(t!==null&&t.canRedo())},ue.prototype.redo=function(){if(this.canRedo()){var t=this.transactionToRedo;try{this.Ce=!0,this.Lb("StartingRedo","Redo",t),this.ze++,t.redo()}catch(e){Lt("redo error: "+e.toString())}finally{this.Lb("FinishedRedo","Redo",t),this.Ce=!1}}},ue.prototype.Lb=function(t,e,i){i===void 0&&(i=null);var n=new ie;for(n.change=fr,n.propertyName=t,n.object=i,n.oldValue=e,t=this.models;t.next();)e=t.value,n.model=e,e.Xr(n)},ue.prototype.Ru=function(t){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(t)){var e=this.currentTransaction;e===null&&(this.Ip=e=new Ue);var i=t.copy();e=e.changes,e.ka(),e.add(i),e.freeze(),this.checksTransactionLevel&&0>=this.transactionLevel&&!this.ot&&(t=t.diagram,t!==null&&t.mi===!1||Lt("Change not within a transaction: "+i.toString()))}},ue.prototype.skipsEvent=function(t){if(t===null||0>t.change.value)return!0;if(t=t.object,t===null)return!1;if(t.layer!==void 0){if(t=t.layer,t!==null&&t.isTemporary)return!0}else if(t.isTemporary)return!0;return!1},z.Object.defineProperties(ue.prototype,{models:{get:function(){return this.Mt.iterator}},isEnabled:{get:function(){return this.Bd},set:function(t){this.Bd=t}},transactionToUndo:{get:function(){return 0<=this.historyIndex&&this.historyIndex<=this.history.count-1?this.history.L(this.historyIndex):null}},transactionToRedo:{get:function(){return this.historyIndex<this.history.count-1?this.history.L(this.historyIndex+1):null}},isUndoingRedoing:{get:function(){return this.Ce}},history:{get:function(){return this.u}},maxHistoryLength:{get:function(){return this.m},set:function(t){this.m=t}},historyIndex:{get:function(){return this.ze}},currentTransaction:{get:function(){return this.Ip}},transactionLevel:{get:function(){return this.Zh}},isInTransaction:{get:function(){return 0<this.Zh}},checksTransactionLevel:{get:function(){return this.j},set:function(t){this.j=t}},nestedTransactionNames:{get:function(){return this.Fe}},isPendingClear:{get:function(){return this.At},set:function(t){this.At=t}},isPendingUnmodified:{get:function(){return this.Bt},set:function(t){this.Bt=t}},isInternalTransaction:{get:function(){return this.yt},set:function(t){this.yt=t}},isJustDiscarded:{get:function(){return this.lq}}}),ue.prototype.handleChanged=ue.prototype.Ru,ue.prototype.redo=ue.prototype.redo,ue.prototype.undo=ue.prototype.undo,ue.prototype.canUndo=ue.prototype.canUndo,ue.prototype.rollbackTransaction=ue.prototype.If,ue.prototype.commitTransaction=ue.prototype.eb,ue.prototype.startTransaction=ue.prototype.Ea,ue.prototype.removeModel=ue.prototype.Qx,ue.prototype.addModel=ue.prototype.Tw,ue.prototype.clear=ue.prototype.clear,ue.className="UndoManager";function Ot(){Oe(this),this.H=vh,this.wa="",this.Bd=!0,this.ob=!1,this.tm=null,this.xy=new gn,this.Tr=-1}Ot.prototype.toString=function(){return this.name!==""?this.name+" Tool":Ms(this.constructor)},Ot.prototype.updateAdornments=function(){},Ot.prototype.canStart=function(){return this.isEnabled},Ot.prototype.doStart=function(){},Ot.prototype.doActivate=function(){this.isActive=!0},Ot.prototype.doDeactivate=function(){this.isActive=!1},Ot.prototype.doStop=function(){},Ot.prototype.doCancel=function(){this.transactionResult=null,this.stopTool()},Ot.prototype.stopTool=function(){var t=this.diagram;t.currentTool===this&&(t.currentTool=null,t.currentCursor="")},Ot.prototype.doMouseDown=function(){!this.isActive&&this.canStart()&&this.doActivate()},Ot.prototype.doMouseMove=function(){},Ot.prototype.doMouseUp=function(){this.stopTool()},Ot.prototype.doMouseWheel=function(){},Ot.prototype.canStartMultiTouch=function(){return!0},Ot.prototype.standardPinchZoomStart=function(){var t=this.diagram,e=t.lastInput,i=e.No(0,P.allocAt(NaN,NaN)),n=e.No(1,P.allocAt(NaN,NaN));if(i.w()&&n.w()&&(this.doCancel(),t.Ll("hasGestureZoom"))){t.xw=t.scale;var r=n.x-i.x,s=n.y-i.y;t.Fw=Math.sqrt(r*r+s*s),e.bubbles=!1}P.free(i),P.free(n)},Ot.prototype.standardPinchZoomMove=function(){var t=this.diagram,e=t.lastInput,i=e.No(0,P.allocAt(NaN,NaN)),n=e.No(1,P.allocAt(NaN,NaN));if(i.w()&&n.w()&&(this.doCancel(),t.Ll("hasGestureZoom"))){var r=n.x-i.x,s=n.y-i.y;s=Math.sqrt(r*r+s*s)/t.Fw,r=new P((Math.min(n.x,i.x)+Math.max(n.x,i.x))/2,(Math.min(n.y,i.y)+Math.max(n.y,i.y))/2),s*=t.xw;var l=t.commandHandler;if(s!==t.scale&&l.canResetZoom(s)){var h=t.zoomPoint;t.zoomPoint=r,l.resetZoom(s),t.zoomPoint=h}e.bubbles=!1}P.free(i),P.free(n)},Ot.prototype.doKeyDown=function(){this.diagram.lastInput.key==="Esc"&&this.doCancel()},Ot.prototype.doKeyUp=function(){},Ot.prototype.Ea=function(t){return t===void 0&&(t=this.name),this.transactionResult=null,this.diagram.Ea(t)},Ot.prototype.stopTransaction=function(){var t=this.diagram;return this.transactionResult===null?t.If():t.eb(this.transactionResult)},Ot.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.lastInput,i=t.Jl(e.documentPoint,!1);if(i!==null){if(ke?e.meta:e.control){for(t.R("ChangingSelection",t.selection),e=i;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&(e.isSelected=!e.isSelected),t.R("ChangedSelection",t.selection)}else if(e.shift){if(!i.isSelected){for(t.R("ChangingSelection",t.selection),e=i;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&(e.isSelected=!0),t.R("ChangedSelection",t.selection)}}else if(!i.isSelected){for(e=i;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&t.select(e)}}else!e.left||(ke?e.meta:e.control)||e.shift||t.clearSelection()}},Ot.prototype.standardMouseClick=function(t,e){t===void 0&&(t=null),e===void 0&&(e=function(r){return!r.layer.isTemporary});var i=this.diagram,n=i.lastInput;return t=i.ec(n.documentPoint,t,e),n.targetObject=t,AL(t,n,i),n.handled};function AL(t,e,i){if(e.handled=!1,t===null||t.Gf()){var n=0;e.left?n=e.clickCount===1?1:e.clickCount===2?2:1:e.right&&e.clickCount===1&&(n=3);var r="ObjectSingleClicked";if(t!==null){switch(n){case 1:r="ObjectSingleClicked";break;case 2:r="ObjectDoubleClicked";break;case 3:r="ObjectContextClicked"}n!==0&&i.R(r,t)}else{switch(n){case 1:r="BackgroundSingleClicked";break;case 2:r="BackgroundDoubleClicked";break;case 3:r="BackgroundContextClicked"}n!==0&&i.R(r)}if(t!==null)for(;t!==null;){switch(i=null,n){case 1:i=t.click;break;case 2:i=t.doubleClick?t.doubleClick:t.click;break;case 3:i=t.contextClick}if(i!==null&&(i(e,t),e.handled))break;t=t.panel}else{switch(t=null,n){case 1:t=i.click;break;case 2:t=i.doubleClick?i.doubleClick:i.click;break;case 3:t=i.contextClick}t!==null&&t(e)}}}Ot.prototype.standardMouseOver=function(){var t=this.diagram,e=t.lastInput;if(t.animationManager.zb!==!0){var i=t.skipsUndoManager;t.skipsUndoManager=!0;var n=t.viewportBounds.ca(e.documentPoint)?t.ec(e.documentPoint,null,null):null;!e.event||e.event.type!=="pointercancel"&&e.event.type!=="pointerout"||(n=null),e.targetObject=n;var r=!1;if(n!==t.yk){var s=t.yk,l=s;for(t.yk=n,this.doCurrentObjectChanged(s,n),e.handled=!1;s!==null;){var h=s.mouseLeave;if(h!==null&&(n===s||n!==null&&n.og(s)||(h(e,s,n),r=!0,e.handled)))break;s=s.panel}for(s=l,e.handled=!1;n!==null&&(l=n.mouseEnter,!(l!==null&&(s===n||s!==null&&s.og(n)||(l(e,n,s),r=!0,e.handled))));)n=n.panel;n=t.yk}if(n!==null){for(s=n,l="";s!==null&&(l=s.cursor,l==="");)s=s.panel;for(t.currentCursor=l,e.handled=!1,s=n;s!==null&&(n=s.mouseOver,!(n!==null&&(n(e,s),r=!0,e.handled)));)s=s.panel}else this.doUpdateCursor(null),n=t.mouseOver,n!==null&&(n(e),r=!0);r&&t.Wb(),t.skipsUndoManager=i}},Ot.prototype.doUpdateCursor=function(){var t=this.diagram;t&&(t.currentCursor="")},Ot.prototype.doCurrentObjectChanged=function(){},Ot.prototype.standardMouseWheel=function(){var t=this.diagram,e=t.lastInput,i=e.delta;if(i!==0&&t.documentBounds.w()){var n=t.commandHandler,r=t.toolManager.mouseWheelBehavior;if(n!==null&&(r===Za&&!e.shift||r===hh&&e.control))(0<i?n.canIncreaseZoom():n.canDecreaseZoom())&&(r=t.zoomPoint,t.zoomPoint=e.viewPoint,0<i?n.increaseZoom():n.decreaseZoom(),t.zoomPoint=r),e.bubbles=!1;else if(r===Za&&e.shift||r===hh&&!e.control){n=t.position.copy();var s=e.event;r=s.deltaMode;var l=s.deltaX;s=s.deltaY;var h="pixel";if(l===0&&s===0||e.shift)!e.shift&&t.allowVerticalScroll?(i=3*i*t.scrollVerticalLineChange,t.scroll(h,0<i?"down":"up",Math.abs(i))):e.shift&&t.allowHorizontalScroll&&(i=3*i*t.scrollHorizontalLineChange,t.scroll(h,0<i?"left":"right",Math.abs(i)));else{switch(r){case 0:h="pixel";break;case 1:h="line";break;case 2:h="page"}l!==0&&t.allowHorizontalScroll&&(l*=t.scrollHorizontalLineChange/16,t.scroll(h,0<l?"right":"left",Math.abs(l))),s!==0&&t.allowVerticalScroll&&(s*=t.scrollVerticalLineChange/16,t.scroll(h,0<s?"down":"up",Math.abs(s)))}this.doWheelChange(t,n,e)}}},Ot.prototype.doWheelChange=function(t,e,i){t.position.C(e)&&i.event.wheelDeltaX===0||(i.bubbles=!1)},Ot.prototype.standardWaitAfter=function(t,e){e===void 0&&(e=this.diagram.lastInput),this.cancelWaitAfter();var i=this,n=e.clone(this.xy);this.Tr=H(function(){i.doWaitAfter(n)},t)},Ot.prototype.cancelWaitAfter=function(){this.Tr!==-1&&Y.clearTimeout(this.Tr),this.Tr=-1},Ot.prototype.doWaitAfter=function(){},Ot.prototype.findToolHandleAt=function(t,e){return t=this.diagram.ec(t,function(i){for(;i!==null&&!(i.panel instanceof jt);)i=i.panel;return i}),t===null?null:t.part.category===e?t:null},Ot.prototype.isBeyondDragSize=function(t,e){var i=this.diagram;t===void 0&&(t=i.firstInput.viewPoint),e===void 0&&(e=i.lastInput.viewPoint);var n=i.toolManager.dragSize,r=n.width;return n=n.height,i.firstInput.isTouchEvent&&(r+=6,n+=6),Math.abs(e.x-t.x)>r||Math.abs(e.y-t.y)>n},z.Object.defineProperties(Ot.prototype,{diagram:{get:function(){return this.H},set:function(t){t instanceof D&&(this.H=t)}},name:{get:function(){return this.wa},set:function(t){this.wa=t}},isEnabled:{get:function(){return this.Bd},set:function(t){this.Bd=t}},isActive:{get:function(){return this.ob},set:function(t){this.ob=t}},transactionResult:{get:function(){return this.tm},set:function(t){this.tm=t}}}),Ot.prototype.startTransaction=Ot.prototype.Ea,Ot.className="Tool";function ne(){Ot.call(this),this.name="ToolManager",this.hb=new tt,this.pb=new tt,this.Fb=new tt,this.F=this.V=850,this.m=new pt(2,2).ha(),this.Ha=5e3,this.ga=hh,this.u=zS,this.Hp=this.j=null,this.xj=-1}B(ne,Ot),ne.prototype.initializeStandardTools=function(){},ne.prototype.updateAdornments=function(t){var e=this.currentToolTip;if(e instanceof jt&&this.Hp===t){var i=e.adornedObject;(t!==null?i.part===t:i===null)?this.showToolTip(e,i):this.hideToolTip()}},ne.prototype.doMouseDown=function(){var t=this.diagram,e=t.lastInput;if(e.isTouchEvent&&this.gestureBehavior===xp&&(e.bubbles=!1),e.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===D0){e.bubbles=!0;return}if(this.gestureBehavior===xp)return;if(t.currentTool.canStartMultiTouch()){t.currentTool.standardPinchZoomStart();return}}for(var i=this.mouseDownTools.length,n=0;n<i;n++){var r=this.mouseDownTools.L(n);if(r.diagram=this.diagram,r.canStart()){t.doFocus(),t.currentTool=r,t.currentTool===r&&(r.isActive||r.doActivate(),r.doMouseDown());return}}t.lastInput.button===1&&(this.mouseWheelBehavior===hh?this.mouseWheelBehavior=Za:this.mouseWheelBehavior===Za&&(this.mouseWheelBehavior=hh)),this.doActivate(),this.standardWaitAfter(this.holdDelay,e)},ne.prototype.doMouseMove=function(){var t=this.diagram,e=t.lastInput;if(e.isMultiTouch){if(this.gestureBehavior===D0){e.bubbles=!0;return}if(this.gestureBehavior===xp)return;if(t.currentTool.canStartMultiTouch()){t.currentTool.standardPinchZoomMove();return}}if(this.isActive)for(var i=this.mouseMoveTools.length,n=0;n<i;n++){var r=this.mouseMoveTools.L(n);if(r.diagram=this.diagram,r.canStart()){t.doFocus(),t.currentTool=r,t.currentTool===r&&(r.isActive||r.doActivate(),r.doMouseMove());return}}BS(this,t),t=e.event,t===null||t.type!=="pointermove"&&t.cancelable||(e.bubbles=!0)};function BS(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.isActive?t.holdDelay:t.hoverDelay,e.lastInput)}ne.prototype.doCurrentObjectChanged=function(t,e){t=this.currentToolTip,t===null||e!==null&&t instanceof jt&&(e===t||e.og(t))||this.hideToolTip()},ne.prototype.doWaitAfter=function(t){var e=this.diagram;e.xa!==null&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!e.lastInput.handled&&(t=t.copy(),t.button=2,t.buttons=2,e.lastInput=t,e.nu=!0,e.doMouseUp()))},ne.prototype.doMouseHover=function(){var t=this.diagram,e=t.lastInput;e.targetObject===null&&(e.targetObject=t.ec(e.documentPoint,null,null));var i=e.targetObject;if(i!==null)for(e.handled=!1;i!==null&&(t=this.isActive?i.mouseHold:i.mouseHover,!(t!==null&&(t(e,i),e.handled)));)i=i.panel;else i=this.isActive?t.mouseHold:t.mouseHover,i!==null&&i(e)},ne.prototype.doToolTip=function(){var t=this.diagram,e=t.lastInput;if(e.targetObject===null&&(e.targetObject=t.ec(e.documentPoint,null,null)),e=e.targetObject,e!==null){if(t=this.currentToolTip,!(t instanceof jt)||e!==t&&!e.og(t)){for(;e!==null;){if(t=e.toolTip,t!==null){this.showToolTip(t,e);return}e=e.panel}this.hideToolTip()}}else e=t.toolTip,e!==null?this.showToolTip(e,null):this.hideToolTip()},ne.prototype.showToolTip=function(t,e){var i=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof jt){t.layerName="Tool",t.selectable=!1,t.scale=1/i.scale,t.category="ToolTip",t.placeholder!==null&&(t.placeholder.scale=i.scale);var n=t.diagram;n!==null&&n!==i&&n.remove(t),i.add(t),e!==null?t.adornedObject=e:t.data=i.model,t.Va(),this.positionToolTip(t,e)}else t instanceof _o&&t!==this.currentToolTip&&t.show(e,i,this);if(this.currentToolTip=t,this.xj!==-1&&(Y.clearTimeout(this.xj),this.xj=-1),t=this.toolTipDuration,0<t&&t!==1/0){var r=this;this.xj=H(function(){r.hideToolTip()},t)}},ne.prototype.positionToolTip=function(t){if(t.placeholder===null){var e=this.diagram,i=e.lastInput.documentPoint.copy(),n=t.measuredBounds,r=e.viewportBounds;e.lastInput.isTouchEvent&&(i.x-=n.width),i.x+n.width>r.right&&(i.x-=n.width+5/e.scale),i.x<r.x&&(i.x=r.x),i.y=i.y+20/e.scale+n.height>r.bottom?i.y-(n.height+5/e.scale):i.y+20/e.scale,i.y<r.y&&(i.y=r.y),t.position=i}},ne.prototype.hideToolTip=function(){this.xj!==-1&&(Y.clearTimeout(this.xj),this.xj=-1);var t=this.diagram,e=this.currentToolTip;e!==null&&(e instanceof jt?(t.remove(e),this.Hp!==null&&this.Hp.Hf(e.category),e.data=null,e.adornedObject=null):e instanceof _o&&e.hide!==null&&e.hide(t,this),this.currentToolTip=null)},ne.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.diagram;if(this.isActive)for(var e=this.mouseUpTools.length,i=0;i<e;i++){var n=this.mouseUpTools.L(i);if(n.diagram=this.diagram,n.canStart()){t.doFocus(),t.currentTool=n,t.currentTool===n&&(n.isActive||n.doActivate(),n.doMouseUp());return}}t.doFocus(),this.doDeactivate()},ne.prototype.doMouseWheel=function(){this.standardMouseWheel()},ne.prototype.doKeyDown=function(){var t=this.diagram;t.commandHandler!==null&&t.commandHandler.doKeyDown()},ne.prototype.doKeyUp=function(){var t=this.diagram;t.commandHandler!==null&&t.commandHandler.doKeyUp()},ne.prototype.findTool=function(t){for(var e=this.mouseDownTools.length,i=0;i<e;i++){var n=this.mouseDownTools.L(i);if(n.name===t)return n}for(e=this.mouseMoveTools.length,i=0;i<e;i++)if(n=this.mouseMoveTools.L(i),n.name===t)return n;for(e=this.mouseUpTools.length,i=0;i<e;i++)if(n=this.mouseUpTools.L(i),n.name===t)return n;return null},ne.prototype.replaceTool=function(t,e){e!==null&&(e.diagram=this.diagram);for(var i=this.mouseDownTools.length,n=0;n<i;n++){var r=this.mouseDownTools.L(n);if(r.name===t)return e!==null?this.mouseDownTools.Xc(n,e):this.mouseDownTools.nb(n),r}for(i=this.mouseMoveTools.length,n=0;n<i;n++)if(r=this.mouseMoveTools.L(n),r.name===t)return e!==null?this.mouseMoveTools.Xc(n,e):this.mouseMoveTools.nb(n),r;for(i=this.mouseUpTools.length,n=0;n<i;n++)if(r=this.mouseUpTools.L(n),r.name===t)return e!==null?this.mouseUpTools.Xc(n,e):this.mouseUpTools.nb(n),r;return null},ne.prototype.gb=function(t,e,i){e!==null&&(e.name=t,e.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,e):e!==null&&i.add(e)},z.Object.defineProperties(ne.prototype,{mouseWheelBehavior:{get:function(){return this.ga},set:function(t){this.ga=t}},gestureBehavior:{get:function(){return this.u},set:function(t){this.u=t}},currentToolTip:{get:function(){return this.j},set:function(t){this.j=t,this.Hp=t!==null&&t instanceof jt?t.adornedPart:null}},mouseDownTools:{get:function(){return this.hb}},mouseMoveTools:{get:function(){return this.pb}},mouseUpTools:{get:function(){return this.Fb}},hoverDelay:{get:function(){return this.V},set:function(t){this.V=t}},holdDelay:{get:function(){return this.F},set:function(t){this.F=t}},dragSize:{get:function(){return this.m},set:function(t){this.m=t.J()}},toolTipDuration:{get:function(){return this.Ha},set:function(t){this.Ha=t}}}),ne.prototype.replaceStandardTool=ne.prototype.gb;var hh=new Q(ne,"WheelScroll",0),Za=new Q(ne,"WheelZoom",1),IL=new Q(ne,"WheelNone",2),zS=new Q(ne,"GestureZoom",3),xp=new Q(ne,"GestureCancel",4),D0=new Q(ne,"GestureNone",5);ne.className="ToolManager",ne.WheelScroll=hh,ne.WheelZoom=Za,ne.WheelNone=IL,ne.GestureZoom=zS,ne.GestureCancel=xp,ne.GestureNone=D0;function re(){Ot.call(this),this.name="Dragging",this.u=this.Ow=this.pb=!0,this.m=this.Ha=this.V=this.Le=null,this.Vm=this.Fb=!1,this.pl=new P(NaN,NaN),this.zr=new P,this.hb=!0,this.Ek=100,this.zg=[],this.qe=new q().freeze(),this.ga=new Nh,this.yn=null,this.F="copy",this.Lc="",this.Mc="no-drop"}var hu;B(re,Ot),re.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;var e=t.lastInput;return!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.isTouchEvent&&e.timestamp-t.firstInput.timestamp<this.Ek)?!1:this.findDraggablePart()!==null},re.prototype.findDraggablePart=function(){var t=this.diagram;if(t=t.Jl(t.firstInput.documentPoint,!1),t===null)return null;for(;t!==null&&!t.canSelect();)t=t.containingGroup;return t!==null&&(t.canMove()||t.canCopy())?t:null},re.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.Jl(t.firstInput.documentPoint,!1);if(e!==null){for(;e!==null&&!e.canSelect();)e=e.containingGroup;this.currentPart=e,this.currentPart===null||this.currentPart.isSelected||(t.R("ChangingSelection",t.selection),e=t.lastInput,(ke?e.meta:e.control)||e.shift||t.clearSelection(!0),this.currentPart.isSelected=!0,t.R("ChangedSelection",t.selection))}}},re.prototype.doActivate=function(){var t=this.diagram;this.yn=null,this.currentPart===null&&this.standardMouseSelect();var e=this.currentPart;e!==null&&(e.canMove()||e.canCopy())&&(t.Bu(!0),Ye=null,this.isActive=!0,this.pl.set(t.position),R0(this,t.selection),this.zg.length=0,t.animationManager.zc(),this.draggedParts=this.computeEffectiveCollection(t.selection,this.dragOptions),this.Ow=this.diagram.layout.isRealtime,this.diagram.layout.isRealtime=!1,t.Is=!0,t.Ef("temporaryPixelRatio")===!0&&30<t.Ww&&of(t),Dp(t,this.draggedParts),this.Ea("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&(this.isDragOutStarted=!0,this.Vm=!1,Ye=this,hl=this.diagram,this.doSimulatedDragOut()))};function R0(t,e){if(t.dragsLink){var i=t.diagram;i.allowRelink&&(i.model.Tj()&&e.count===1&&e.first()instanceof X?(t.draggedLink=e.first(),t.draggedLink.canRelinkFrom()&&t.draggedLink.canRelinkTo()&&t.draggedLink.Cj(),t.Le=i.toolManager.findTool("Relinking"),t.Le===null&&(t.Le=new An,t.Le.diagram=i),t.Le.originalLink=t.draggedLink):(t.draggedLink=null,t.Le=null))}}re.prototype.computeEffectiveCollection=function(t,e){return this.diagram.commandHandler.computeEffectiveCollection(t,e)},re.prototype.Hd=function(t){return t===void 0?new Ps(yo):this.isGridSnapEnabled?new Ps(new P(Math.round(1e3*t.x)/1e3,Math.round(1e3*t.y)/1e3)):new Ps(t.copy())},re.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;if(this.diagram.layout.isRealtime=this.Ow,t.Bu(!1),t.rg(),B0(this),uf(t,this.draggedParts),this.draggedParts=this.currentPart=this.yn=null,this.Vm=this.isDragOutStarted=!1,0<hu.count){for(var e=hu,i=e.length,n=0;n<i;n++){var r=e.L(n);US(r),Ns(r),B0(r),r.diagram.rg()}e.clear()}US(this),this.pl.h(NaN,NaN),hl!==null&&(hl.currentCursor=""),Ye=hl=null,Ns(this),t.isMouseCaptured=!1,t.currentCursor="",t.Is=!1,this.stopTransaction(),Fp(t,!0)},re.prototype.stopTransaction=function(){var t=this.diagram,e=Ot.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.Yj(),e};function B0(t){var e=t.diagram,i=e.skipsUndoManager;e.skipsUndoManager=!0,YS(t,e.lastInput,null),e.skipsUndoManager=i,t.zg.length=0}function VS(){var t=Ye;Ns(t),V0(t);var e=t.diagram;t.pl.w()&&(e.position=t.pl),e.rg()}re.prototype.doCancel=function(){Ns(this),V0(this);var t=this.diagram;this.pl.w()&&(t.position=this.pl),this.stopTool()},re.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput;this.isActive&&(e.key==="Esc"?this.doCancel():e.key!==t.previousInput.key&&this.doMouseMove())},re.prototype.doKeyUp=function(){this.isActive&&this.doMouseMove()};function z0(t,e){if(t.copiedParts===null){var i=t.diagram;if((!e||!i.isReadOnly&&!i.isModelReadOnly)&&t.draggedParts!==null){var n=i.undoManager;for(n.isEnabled&&n.isInTransaction?n.currentTransaction!==null&&0<n.currentTransaction.changes.count&&(i.undoManager.If(),i.Ea("Drag")):V0(t),i.skipsUndoManager=!e,i.partManager.addsToTemporaryLayer=!e,t.startPoint=i.firstInput.documentPoint,e=t.copiesEffectiveCollection?t.draggedParts.Jf():i.selection,e=i.Ij(e,i,!0),i=new vt,n=t.draggedParts.iterator;n.next();){var r=n.key;if(r.Uc()&&r.canCopy()){var s=e.I(r);s!==null&&(s.location=r.location,s.Va(),i.add(s,t.Hd(s.location)))}}for(e=e.iterator;e.next();)n=e.value,n instanceof X&&n.canCopy()&&i.add(n,t.Hd());t.copiedParts=i,R0(t,i.Jf()),t.draggedLink!==null&&(i=t.draggedLink,e=i.routeBounds,es(i,t.startPoint.x-(e.x+e.width/2),t.startPoint.y-(e.y+e.height/2))),t.doUpdateCursor(null)}}}function Ns(t){var e=t.diagram;if(t.copiedParts!==null){if(e.Ds(t.copiedParts.Jf(),!1),t.copiedParts=null,t.draggedParts!==null)for(var i=t.draggedParts.iterator;i.next();)i.key instanceof X&&(i.value.point=new P(0,0));t.doUpdateCursor(null)}e.skipsUndoManager=!1,e.partManager.addsToTemporaryLayer=!1,t.startPoint=e.firstInput.documentPoint}function US(t){if(t.draggedLink!==null){if(t.dragsLink&&t.Le!==null){var e=t.Le;e.diagram.remove(e.temporaryFromNode),e.diagram.remove(e.temporaryToNode),t.Le.originalLink=null}t.draggedLink=null,t.Le=null}}function au(t,e,i){var n=t.diagram,r=t.startPoint,s=P.alloc();s.assign(n.lastInput.documentPoint),t.moveParts(e,s.oe(r),i),P.free(s),n.Ef("temporaryPixelRatio")===!0&&n.Vh===null&&30<n.Ww&&(of(n),n.Xl())}re.prototype.moveParts=function(t,e,i){i===void 0&&(i=!1);var n=this.diagram;n!==null&&hm(n,t,e,this.dragOptions,i)};function V0(t){if(t.draggedParts!==null){for(var e=t.diagram,i=t.draggedParts.iterator;i.next();){var n=i.key;n.Uc()&&(n.location=i.value.point)}for(i=t.draggedParts.iterator;i.next();)if(n=i.key,n instanceof X&&n.suspendsRouting){var r=i.value.point;t.draggedParts.add(n,t.Hd()),es(n,-r.x,-r.y)}e.Wc()}}function U0(t,e){var i=t.diagram;t.dragsLink&&(t.draggedLink!==null&&(t.draggedLink.fromNode=null,t.draggedLink.toNode=null),GS(t,!1));var n=t.findDragOverObject(e),r=i.lastInput;r.targetObject=n,t.doUpdateCursor(n);var s=i.skipsUndoManager,l=!1;try{if(i.skipsUndoManager=!0,l=YS(t,r,n),!t.isActive&&Ye===null)return;var h=n!==null?n.part:null;if(h===null||i.handlesDragDropForTopLevelParts&&h.isTopLevel&&!(h instanceof yt)){var a=i.mouseDragOver;a!==null&&(a(r),l=!0)}if(!t.isActive&&Ye===null||(t.doDragOver(e,n),!t.isActive&&Ye===null))return}finally{i.skipsUndoManager=s,l&&i.Wc()}t.yn=n,i.isReadOnly||!i.allowMove&&!i.allowCopy||!i.allowHorizontalScroll&&!i.allowVerticalScroll||i.bs(r.viewPoint)}re.prototype.findDragOverObject=function(t){var e=this;return nm(this.diagram,t,null,function(i){return i===null?i=!0:(i=i.part,i=!!(i===null||i instanceof jt||i.layer.isTemporary||e.draggedParts&&e.draggedParts.contains(i)||e.copiedParts&&e.copiedParts.contains(i))),!i})},re.prototype.doUpdateCursor=function(t){var e=this.diagram;(t===null||this.yn!==t)&&(!this.diagram.currentTool.isActive||this.mayCopy()?e.currentCursor=this.copyCursor:this.mayMove()?e.currentCursor=this.moveCursor:this.mayDragOut()&&(e.currentCursor=this.nodropCursor))};function YS(t,e,i){var n=!1,r=t.zg.length,s=0<r?t.zg[0]:null;if(i===s)return!1;e.handled=!1;for(var l=0;l<r;l++){var h=t.zg[l],a=h.mouseDragLeave;if(a!==null&&(a(e,h,i),n=!0,e.handled))break}if(t.zg.length=0,!t.isActive&&Ye===null||i===null)return n;for(e.handled=!1,r=i;r!==null;)t.zg.push(r),r=HS(r);for(r=t.zg.length,i=0;i<r&&(l=t.zg[i],h=l.mouseDragEnter,h===null||(h(e,l,s),n=!0,!e.handled));i++);return n}function HS(t){var e=t.panel;return e!==null?e:t instanceof lt&&!(t instanceof yt)&&(t=t.containingGroup,t!==null&&t.handlesDragDropForMembers)?t:null}function _S(t,e,i){var n=t.Le;if(n===null)return null;var r=t.diagram.lg(e,n.portGravity,function(f){return n.findValidLinkablePort(f,i)});t=P.alloc();var s=1/0,l=null;for(r=r.iterator;r.next();){var h=r.value;if(h.part!==null){var a=h.ja(Ut,t);a=e.zf(a),a<s&&(l=h,s=a)}}return P.free(t),l}function GS(t,e){var i=t.draggedLink;if(i!==null&&!(2>i.pointsCount)){var n=t.diagram;if(!n.isReadOnly){var r=t.Le;if(r!==null){var s=null,l=null;i.fromNode===null&&(s=_S(t,i.i(0),!1),s!==null&&(l=s.part));var h=null,a=null;i.toNode===null&&(h=_S(t,i.i(i.pointsCount-1),!0),h!==null&&(a=h.part)),r.isValidLink(l,s,a,h)?e?(i.defaultFromPoint=i.i(0),i.defaultToPoint=i.i(i.pointsCount-1),i.suspendsRouting=!1,i.fromNode=l,s!==null&&(i.fromPortId=s.portId),i.toNode=a,h!==null&&(i.toPortId=h.portId),i.fromPort!==n.Lx&&n.R("LinkRelinked",i,n.Lx),i.toPort!==n.Mx&&n.R("LinkRelinked",i,n.Mx)):QS(r,l,s,a,h):QS(r,null,null,null,null)}}}}re.prototype.doDragOver=function(){};function XS(t,e){var i=t.diagram;t.dragsLink&&GS(t,!0),B0(t);var n=t.findDragOverObject(e),r=i.lastInput;if(r.targetObject=n,n!==null){r.handled=!1;for(var s=n;s!==null;){var l=s.mouseDrop;if(l!==null&&(l(r,s),r.handled))break;DL(t,r,s),s=HS(s)}}else s=i.mouseDrop,s!==null&&s(r);if(t.isActive||Ye!==null){for(r=(t.copiedParts||t.draggedParts).iterator;r.next();)s=r.key,s instanceof b&&s.linksConnected.each(function(h){h.suspendsRouting=!1});if(t.doDropOnto(e,n),t.isActive||Ye!==null){for(t=V.alloc(),e=i.selection.iterator;e.next();)n=e.value,n instanceof b&&RL(i,n,t);V.free(t)}}}function DL(t,e,i){t=t.diagram,i=i.part,!t.handlesDragDropForTopLevelParts||!i.isTopLevel||i instanceof yt||(i=t.mouseDrop,i!==null&&i(e))}function RL(t,e,i){var n=!1;if(i=e.getAvoidableRect(i),t.viewportBounds.Oe(i)&&(n=!0),t=t.Lu(i,function(r){return r.part},function(r){return r instanceof X},!0,function(r){return r instanceof X},n),t.count!==0)for(t=t.iterator;t.next();)i=t.value,!i.Nd(e)&&i.isAvoiding&&i.bb()}re.prototype.doDropOnto=function(){},re.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;this.simulatedMouseMove(e.event,e.documentPoint,e.targetDiagram)||this.currentPart===null||this.draggedParts===null||(this.mayCopy()?(z0(this,!1),Dp(t,this.copiedParts),au(this,this.copiedParts,!1),uf(t,this.copiedParts)):this.mayMove()?(Ns(this),au(this,this.draggedParts,!0)):this.mayDragOut()?(z0(this,!1),au(this,this.copiedParts,!1)):Ns(this),U0(this,t.lastInput.documentPoint))}},re.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;if(!this.simulatedMouseUp(e.event,e.documentPoint,e.targetDiagram)){e=!1;var i=this.mayCopy();if(i&&this.copiedParts!==null?(Ns(this),z0(this,!0),Dp(t,this.copiedParts),au(this,this.copiedParts,!1),uf(t,this.copiedParts),this.copiedParts!==null&&(t.R("ChangingSelection",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(r){r.isSelected=!0}))):(e=!0,Ns(this),this.mayMove()&&(au(this,this.draggedParts,!0),U0(this,t.lastInput.documentPoint))),this.Vm=!0,XS(this,t.lastInput.documentPoint),this.isActive){var n=i?this.copiedParts.Jf():this.draggedParts.Jf();this.copiedParts=null,e&&BL(this),t.Ya(),uf(t,this.draggedParts),this.transactionResult=i?"Copy":"Move",t.R(i?"SelectionCopied":"SelectionMoved",n)}this.stopTool(),i&&t.R("ChangedSelection",t.selection)}}},re.prototype.simulatedMouseMove=function(t,e,i){if(Ye===null)return!1;var n=Ye.diagram;i instanceof D||(i=null);var r=hl;return i!==r&&(r!==null&&r!==n&&(r.rg(),Ye.isDragOutStarted=!1,r=r.toolManager.findTool("Dragging"),r!==null&&r.doSimulatedDragLeave()),hl=i,i!==null&&i!==n&&(VS(),r=i.toolManager.findTool("Dragging"),r!==null&&(hu.contains(r)||hu.add(r),r.doSimulatedDragEnter())),this.doUpdateCursor(null)),i===null||i===n||!i.allowDrop||i.isReadOnly||!i.allowInsert?!1:(n=i.toolManager.findTool("Dragging"),n!==null&&(t!==null&&(t.targetTouches!==void 0&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=i.getMouse(t)),i.lastInput.documentPoint=e,i.lastInput.viewPoint=i.jp(e),i.lastInput.down=!1,i.lastInput.up=!1,n.doSimulatedDragOver()),!0)},re.prototype.simulatedMouseUp=function(t,e,i){if(Ye===null)return!1;var n=hl,r=Ye.diagram;if(i===null)return Ye.doCancel(),!0;if(i!==n){var s=n.toolManager.findTool("Dragging");if(n!==null&&n!==r&&s!==null)return n.rg(),Ye.isDragOutStarted=!1,s.doSimulatedDragLeave(),!1;hl=i,n=i.toolManager.findTool("Dragging"),n!==null&&(VS(),hu.contains(n)||hu.add(n),n.doSimulatedDragEnter())}return i!==this.diagram?(t!==null?(t.targetTouches!==void 0&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=i.getMouse(t)):e===null&&(e=new P),i.lastInput.documentPoint=e,i.lastInput.viewPoint=i.jp(e),i.lastInput.down=!1,i.lastInput.up=!0,t=i.toolManager.findTool("Dragging"),t!==null&&t.doSimulatedDrop(),t=Ye,t!==null&&(i=t.mayCopy(),t.transactionResult=i?"Copy":"Move",t.stopTool()),!0):!1};function BL(t){if(t.draggedParts!==null)for(var e=t.draggedParts.iterator;e.next();){var i=e.key;i instanceof b&&(i=i.containingGroup,i===null||i.placeholder===null||t.draggedParts.contains(i)||i.placeholder.v())}}re.prototype.mayCopy=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||(ke?!t.lastInput.alt:!t.lastInput.control))return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canCopy())},re.prototype.mayDragOut=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canCopy())},re.prototype.mayMove=function(){var t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canMove())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canMove())},re.prototype.computeBorder=function(t,e,i){return this.Vm||this.draggedParts===null||this.draggedParts.contains(t)?null:i.assign(e)},re.prototype.vz=function(){return Ye},re.prototype.mayDragIn=function(){var t=this.diagram;if(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)return!1;var e=Ye;return!(e===null||e.diagram.model.dataFormat!==t.model.dataFormat)},re.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.diagram;t.animationManager.zc(),Xo(t),t.animationManager.zc(),t=Ye,t!==null&&(t.diagram.Is=!1),this.doUpdateCursor(null)}},re.prototype.doSimulatedDragLeave=function(){var t=Ye;t!==null&&t.doSimulatedDragOut(),this.doCancel()},re.prototype.doSimulatedDragOver=function(){var t=this.diagram;t.animationManager.Am=!0;var e=Ye;if(e!==null&&e.draggedParts!==null){if(!this.mayDragIn())return;KS(this,e.draggedParts.Jf(),!1,t.firstInput),au(this,this.copiedParts,!1),U0(this,t.lastInput.documentPoint)}t.animationManager.Am=!1},re.prototype.doSimulatedDrop=function(){var t=this.diagram,e=Ye;if(e!==null){var i=e.diagram;if(e.Vm=!0,Ns(this),!this.mayDragIn())return;t.animationManager.Am=!0,t.R("ChangingSelection",t.selection),this.Ea("Drop"),KS(this,e.draggedParts.Jf(),!0,t.lastInput),au(this,this.copiedParts,!1),this.copiedParts!==null&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(n){n.isSelected=!0})),XS(this,t.lastInput.documentPoint),t.Ya(),e=t.selection,this.copiedParts!==null?this.transactionResult="ExternalCopy":e=new q,this.copiedParts=null,t.doFocus(),t.R("ExternalObjectsDropped",e,i),this.stopTransaction(),t.R("ChangedSelection",t.selection)}t.animationManager.Am=!1};function KS(t,e,i,n){if(t.copiedParts===null){var r=t.diagram;if(!r.isReadOnly&&!r.isModelReadOnly){r.skipsUndoManager=!i,r.partManager.addsToTemporaryLayer=!i,t.startPoint=n.documentPoint,i=r.Ij(e,r,!0);var s=V.alloc();r=n=1/0;for(var l=-1/0,h=-1/0,a=e.iterator;a.next();){var f=a.value;if(f.isVisible()){var p=f.location;f=p.x,p=p.y,isNaN(f)||isNaN(p)||(f<n&&(n=f),p<r&&(r=p),f>l&&(l=f),p>h&&(h=p))}}for(n===1/0?s.h(0,0,0,0):s.h(n,r,l-n,h-r),n=s.x+s.width/2,r=s.y+s.height/2,V.free(s),s=t.zr,l=new vt,h=P.alloc(),a=e.iterator;a.next();)f=a.value,f instanceof X&&f.canCopy()&&(p=i.I(f),p!==null&&(p.points=f.points,es(p,s.x-n,s.y-r),p.suspendsRouting=!0,l.add(p,t.Hd())));for(e=e.iterator;e.next();)f=e.value,f.Uc()&&f.canCopy()&&(a=i.I(f),a!==null&&(f=f.location,h.h(s.x-(n-f.x),s.y-(r-f.y)),a.location=h,a.Va(),l.add(a,t.Hd(h))));P.free(h),t.copiedParts=l,R0(t,l.Jf()),t.draggedLink!==null&&(i=t.draggedLink,e=i.routeBounds,es(i,t.startPoint.x-(e.x+e.width/2),t.startPoint.y-(e.y+e.height/2))),t.doUpdateCursor(null)}}}re.prototype.doSimulatedDragOut=function(){var t=this.diagram;t.Is=!1,this.mayCopy()||this.mayMove()?t.currentCursor="":t.currentCursor=this.nodropCursor,this.yn=null},re.prototype.computeMove=function(t,e,i,n){return i=this.diagram,i!==null?i.computeMove(t,e,this.dragOptions,n):new P},z.Object.defineProperties(re.prototype,{isCopyEnabled:{get:function(){return this.pb},set:function(t){this.pb=t}},copiesEffectiveCollection:{get:function(){return this.u},set:function(t){this.u=t}},dragOptions:{get:function(){return this.ga},set:function(t){this.ga=t}},isGridSnapEnabled:{get:function(){return this.dragOptions.isGridSnapEnabled},set:function(t){this.dragOptions.isGridSnapEnabled=t}},isComplexRoutingRealtime:{get:function(){return this.hb},set:function(t){this.hb=t}},isGridSnapRealtime:{get:function(){return this.dragOptions.isGridSnapRealtime},set:function(t){this.dragOptions.isGridSnapRealtime=t}},gridSnapCellSize:{get:function(){return this.dragOptions.gridSnapCellSize},set:function(t){this.dragOptions.gridSnapCellSize.C(t)||(t=t.J(),this.dragOptions.gridSnapCellSize=t)}},gridSnapCellSpot:{get:function(){return this.dragOptions.gridSnapCellSpot},set:function(t){this.dragOptions.gridSnapCellSpot.C(t)||(t=t.J(),this.dragOptions.gridSnapCellSpot=t)}},gridSnapOrigin:{get:function(){return this.dragOptions.gridSnapOrigin},set:function(t){this.dragOptions.gridSnapOrigin.C(t)||(t=t.J(),this.dragOptions.gridSnapOrigin=t)}},dragsLink:{get:function(){return this.dragOptions.dragsLink},set:function(t){this.dragOptions.dragsLink=t}},dragsTree:{get:function(){return this.dragOptions.dragsTree},set:function(t){this.dragOptions.dragsTree=t}},copyCursor:{get:function(){return this.F},set:function(t){this.F=t}},moveCursor:{get:function(){return this.Lc},set:function(t){this.Lc=t}},nodropCursor:{get:function(){return this.Mc},set:function(t){this.Mc=t}},currentPart:{get:function(){return this.V},set:function(t){this.V=t}},copiedParts:{get:function(){return this.m},set:function(t){this.m=t}},draggedParts:{get:function(){return this.Ha},set:function(t){this.Ha=t}},draggingParts:{get:function(){return this.copiedParts!==null?this.copiedParts.Jf():this.draggedParts!==null?this.draggedParts.Jf():this.qe}},draggedLink:{get:function(){return this.diagram.draggedLink},set:function(t){this.diagram.draggedLink=t}},isDragOutStarted:{get:function(){return this.Fb},set:function(t){this.Fb=t}},startPoint:{get:function(){return this.zr},set:function(t){this.zr.C(t)||this.zr.assign(t)}},delay:{get:function(){return this.Ek},set:function(t){this.Ek=t}}}),re.prototype.getDraggingSource=re.prototype.vz;var Ye=null,hl=null;re.className="DraggingTool",hu=new tt,Tt("draggingTool",function(){return this.findTool("Dragging")},function(t){this.gb("Dragging",t,this.mouseMoveTools)}),ne.prototype.doCancel=function(){Ye!==null&&Ye.doCancel(),Ot.prototype.doCancel.call(this)};function Ze(){Ot.call(this),this.qe=100,this.Ha=!1,this.u="pointer";var t=new X,e=new wt;e.isPanelMain=!0,e.stroke="blue",t.add(e),e=new wt,e.toArrow="Standard",e.fill="blue",e.stroke="blue",t.add(e),t.layerName="Tool",this.zi=t,t=new b,e=new wt,e.portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=pp,t.add(e),t.selectable=!1,t.layerName="Tool",this.yi=t,this.j=e,t=new b,e=new wt,e.portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=pp,t.add(e),t.selectable=!1,t.layerName="Tool",this.Ai=t,this.m=e,this.Mc=this.Lc=this.pb=this.hb=this.Fb=null,this.ga=!0,this.gy=new vt,this.Mf=this.ej=this.Nf=null}B(Ze,Ot),Ze.prototype.doStop=function(){this.diagram.rg(),this.originalToPort=this.originalToNode=this.originalFromPort=this.originalFromNode=this.originalLink=null,this.validPortsCache.clear(),this.targetPort=null},Ze.prototype.copyPortProperties=function(t,e,i,n,r){if(t!==null&&e!==null&&i!==null&&n!==null){var s=e.Bf(),l=pt.alloc();l.width=e.naturalBounds.width*s,l.height=e.naturalBounds.height*s,n.desiredSize=l,pt.free(l),r?(n.toSpot=e.toSpot,n.toEndSegmentLength=e.toEndSegmentLength):(n.fromSpot=e.fromSpot,n.fromEndSegmentLength=e.fromEndSegmentLength),i.locationSpot=Ut,s=P.alloc(),i.location=e.ja(Ut,s),P.free(s),n.angle=e.ii(),this.portTargeted!==null&&this.portTargeted(t,e,i,n,r)}},Ze.prototype.setNoTargetPortProperties=function(t,e,i){e!==null&&(e.desiredSize=pp,e.fromSpot=$e,e.toSpot=$e),t!==null&&(t.location=this.diagram.lastInput.documentPoint),this.portTargeted!==null&&this.portTargeted(null,null,t,e,i)},Ze.prototype.doMouseDown=function(){this.isActive&&this.doMouseMove()},Ze.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),this.targetPort!==null&&this.targetPort.part instanceof b){var e=this.targetPort.part;this.isForwards?this.copyPortProperties(e,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(e,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.bs(t.lastInput.viewPoint)}},Ze.prototype.findValidLinkablePort=function(t,e){if(t===null)return null;var i=t.part;if(!(i instanceof b))return null;for(;t!==null;){var n=e?t.toLinkable:t.fromLinkable;if(n===!0&&(t.portId!==null||t instanceof b)&&(e?this.isValidTo(i,t):this.isValidFrom(i,t)))return t;if(n===!1)break;t=t.panel}return null},Ze.prototype.findTargetPort=function(t){var e=this.diagram,i=e.lastInput.documentPoint,n=this.portGravity;0>=n&&(n=.1);var r=this,s=e.lg(i,n,function(d){return r.findValidLinkablePort(d,t)},null,!0);for(n=1/0,e=null,s=s.iterator;s.next();){var l=s.value,h=l.part;if(h instanceof b){var a=l.ja(Ut,P.alloc()),f=i.x-a.x,p=i.y-a.y;P.free(a),a=f*f+p*p,a<n&&(f=this.validPortsCache.I(l),f!==null?f&&(e=l,n=a):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,h,l)||!t&&this.isValidLink(h,l,this.originalToNode,this.originalToPort)?(this.validPortsCache.add(l,!0),e=l,n=a):this.validPortsCache.add(l,!1))}}return e!==null&&(i=e.part,i instanceof b&&(i.layer===null||i.layer.allowLink))?e:null},Ze.prototype.isValidFrom=function(t,e){if(t===null||e===null)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(t.layer!==null&&!t.layer.allowLink||e.fromLinkable!==!0))return!1;var i=e.fromMaxLinks;if(1/0>i){if(this.originalLink!==null&&t===this.originalFromNode&&e===this.originalFromPort)return!0;if(e=e.portId,e===null&&(e=""),t.Jo(e).count>=i)return!1}return!0},Ze.prototype.isValidTo=function(t,e){if(t===null||e===null)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(t.layer!==null&&!t.layer.allowLink||e.toLinkable!==!0))return!1;var i=e.toMaxLinks;if(1/0>i){if(this.originalLink!==null&&t===this.originalToNode&&e===this.originalToPort)return!0;if(e=e.portId,e===null&&(e=""),t.Ld(e).count>=i)return!1}return!0},Ze.prototype.isInSameNode=function(t,e){return t===null||e===null?!1:t===e?!0:(t=t.part,e=e.part,t!==null&&t===e)},Ze.prototype.isLinked=function(t,e){if(t===null||e===null)return!1;var i=t.part;if(!(i instanceof b))return!1;t=t.portId,t===null&&(t="");var n=e.part;if(!(n instanceof b))return!1;for(e=e.portId,e===null&&(e=""),e=n.Ld(e);e.next();)if(n=e.value,n.fromNode===i&&n.fromPortId===t)return!0;return!1},Ze.prototype.isValidLink=function(t,e,i,n){if(!this.isValidFrom(t,e)||!this.isValidTo(i,n)||!(e===null||n===null||(e.fromLinkableSelfNode&&n.toLinkableSelfNode||!this.isInSameNode(e,n))&&(e.fromLinkableDuplicates&&n.toLinkableDuplicates||!this.isLinked(e,n)))||this.originalLink!==null&&(t!==null&&this.isLabelDependentOnLink(t,this.originalLink)||i!==null&&this.isLabelDependentOnLink(i,this.originalLink))||t!==null&&i!==null&&(t.data===null&&i.data!==null||t.data!==null&&i.data===null)||!this.isValidCycle(t,i,this.originalLink))return!1;if(t!==null){var r=t.linkValidation;if(r!==null&&!r(t,e,i,n,this.originalLink))return!1}return i!==null&&(r=i.linkValidation,r!==null&&!r(t,e,i,n,this.originalLink))?!1:(r=this.linkValidation,r!==null?r(t,e,i,n,this.originalLink):!0)},Ze.prototype.isLabelDependentOnLink=function(t,e){if(t===null)return!1;var i=t.labeledLink;if(i===null)return!1;if(i===e)return!0;var n=new q;return n.add(t),Y0(this,i,e,n)};function Y0(t,e,i,n){if(e===i)return!0;var r=e.fromNode;return r!==null&&r.isLinkLabel&&(n.add(r),Y0(t,r.labeledLink,i,n))?!0:(e=e.toNode,!!(e!==null&&e.isLinkLabel&&(n.add(e),Y0(t,e.labeledLink,i,n))))}Ze.prototype.isValidCycle=function(t,e,i){if(i===void 0&&(i=null),t===null||e===null)return this.isUnconnectedLinkValid;var n=this.diagram.validCycle;if(n!==Sm){if(n===YM){if(n=i||this.temporaryLink,n!==null&&!n.isTreeLink)return!0;for(n=e.linksConnected;n.next();){var r=n.value;if(r!==i&&r.isTreeLink&&r.toNode===e)return!1}return!Qa(this,t,e,i,!0)}if(n===HM){if(n=i||this.temporaryLink,n!==null&&!n.isTreeLink)return!0;for(n=t.linksConnected;n.next();)if(r=n.value,r!==i&&r.isTreeLink&&r.fromNode===t)return!1;return!Qa(this,t,e,i,!0)}if(n===zM)return t===e?t=!0:(n=new q,n.add(e),t=WS(this,n,t,e,i)),!t;if(n===VM)return!Qa(this,t,e,i,!1);if(n===UM)return t===e?t=!0:(n=new q,n.add(e),t=$S(this,n,t,e,i)),!t}return!0};function Qa(t,e,i,n,r){if(e===i)return!0;if(e===null||i===null)return!1;for(var s=e.linksConnected;s.next();){var l=s.value;if(l!==n&&(!r||l.isTreeLink)&&l.toNode===e&&(l=l.fromNode,l!==e&&Qa(t,l,i,n,r)))return!0}return!1}function WS(t,e,i,n,r){if(i===n)return!0;if(i===null||n===null||e.contains(i))return!1;e.add(i);for(var s=i.linksConnected;s.next();){var l=s.value;if(l!==r&&l.toNode===i&&(l=l.fromNode,l!==i&&WS(t,e,l,n,r)))return!0}return!1}function $S(t,e,i,n,r){if(i===n)return!0;if(i===null||n===null||e.contains(i))return!1;e.add(i);for(var s=i.linksConnected;s.next();){var l=s.value;if(l!==r){var h=l.fromNode;if(l=l.toNode,h=h===i?l:h,h!==i&&$S(t,e,h,n,r))return!0}}return!1}z.Object.defineProperties(Ze.prototype,{portGravity:{get:function(){return this.qe},set:function(t){0<=t&&(this.qe=t)}},isUnconnectedLinkValid:{get:function(){return this.Ha},set:function(t){this.Ha=t}},linkingCursor:{get:function(){return this.u},set:function(t){this.u=t}},temporaryLink:{get:function(){return this.zi},set:function(t){this.zi=t}},temporaryFromNode:{get:function(){return this.yi},set:function(t){(this.yi=t)&&(this.j=t.port)}},temporaryFromPort:{get:function(){return this.j},set:function(t){if(this.j!==null){var e=this.j.panel;if(e!==null){var i=e.O.indexOf(this.j);e.nb(i),e.Eb(i,t)}}this.j=t}},temporaryToNode:{get:function(){return this.Ai},set:function(t){(this.Ai=t)&&(this.m=t.port)}},temporaryToPort:{get:function(){return this.m},set:function(t){if(this.m!==null){var e=this.m.panel;if(e!==null){var i=e.O.indexOf(this.m);e.nb(i),e.Eb(i,t)}}this.m=t}},originalLink:{get:function(){return this.Fb},set:function(t){this.Fb=t}},originalFromNode:{get:function(){return this.hb},set:function(t){this.hb=t}},originalFromPort:{get:function(){return this.pb},set:function(t){this.pb=t}},originalToNode:{get:function(){return this.Lc},set:function(t){this.Lc=t}},originalToPort:{get:function(){return this.Mc},set:function(t){this.Mc=t}},isForwards:{get:function(){return this.ga},set:function(t){this.ga=t}},validPortsCache:{get:function(){return this.gy}},targetPort:{get:function(){return this.Nf},set:function(t){this.Nf=t}},linkValidation:{get:function(){return this.ej},set:function(t){this.ej=t}},portTargeted:{get:function(){return this.Mf},set:function(t){this.Mf=t}}}),Ze.className="LinkingBaseTool";function Di(){Ze.call(this),this.name="Linking",this.V={},this.F=null,this.K=wp,this.Td=null}B(Di,Ze),Di.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.ss()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize()?!1:this.findLinkablePort()!==null},Di.prototype.findLinkablePort=function(){var t=this.diagram,e=this.startObject;if(e===null&&(e=t.ec(t.firstInput.documentPoint,null,null)),e===null||(t=e.part,!(t instanceof b)))return null;var i=this.direction;if(i===wp||i===JS){var n=this.findValidLinkablePort(e,!1);if(n!==null||this.startObject===t&&(n=t.port,this.findValidLinkablePort(n,!1)))return this.isForwards=!0,n}return(i===wp||i===ZS)&&(e=this.findValidLinkablePort(e,!0),e!==null||this.startObject===t&&(e=t.port,this.findValidLinkablePort(e,!0)))?(this.isForwards=!1,e):null},Di.prototype.doActivate=function(){var t=this.diagram,e=this.findLinkablePort();e===null?this.stopTool():(this.Ea(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards?(this.temporaryToNode!==null&&(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=e,e=this.originalFromPort.part,e instanceof b&&(this.originalFromNode=e),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)):(this.temporaryFromNode!==null&&(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=e,e=this.originalToPort.part,e instanceof b&&(this.originalToNode=e),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)),t.add(this.temporaryFromNode),this.temporaryFromNode&&this.temporaryFromNode.Va(),t.add(this.temporaryToNode),this.temporaryToNode&&this.temporaryToNode.Va(),this.temporaryLink!==null&&(this.temporaryFromNode!==null&&(this.temporaryLink.fromNode=this.temporaryFromNode),this.temporaryToNode!==null&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.bb(),t.add(this.temporaryLink)),this.isActive=!0)},Di.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},Di.prototype.doStop=function(){Ze.prototype.doStop.call(this),this.startObject=null},Di.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=this.transactionResult=null,i=null,n=null,r=null,s=null;try{var l=this.targetPort=this.findTargetPort(this.isForwards);if(l!==null){var h=l.part;h instanceof b&&(this.isForwards?(this.originalFromNode!==null&&(e=this.originalFromNode,i=this.originalFromPort),n=h,r=l):(e=h,i=l,this.originalToNode!==null&&(n=this.originalToNode,r=this.originalToPort)))}else this.isForwards?this.originalFromNode!==null&&this.isUnconnectedLinkValid&&(e=this.originalFromNode,i=this.originalFromPort):this.originalToNode!==null&&this.isUnconnectedLinkValid&&(n=this.originalToNode,r=this.originalToPort);e!==null||n!==null?(s=this.insertLink(e,i,n,r),s!==null?(l===null&&(this.isForwards?s.defaultToPoint=t.lastInput.documentPoint:s.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.R("ChangingSelection",t.selection),t.clearSelection(!0),s.isSelected=!0),this.transactionResult=this.name,t.R("LinkDrawn",s)):this.doNoLink(e,i,n,r)):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),s&&t.allowSelect&&t.R("ChangedSelection",t.selection)}}},Di.prototype.isNewTreeLink=function(){var t=this.archetypeLinkData;if(t===null)return!0;if(t instanceof X)return t.isTreeLink;var e=this.diagram;return e===null?!0:(t=e.partManager.getLinkCategoryForData(t),e=e.partManager.findLinkTemplateForCategory(t),e!==null?e.isTreeLink:!0)},Di.prototype.insertLink=function(t,e,i,n){return this.diagram.partManager.insertLink(t,e,i,n)},Di.prototype.doNoLink=function(){},z.Object.defineProperties(Di.prototype,{archetypeLinkData:{get:function(){return this.V},set:function(t){this.V=t}},archetypeLabelNodeData:{get:function(){return this.F},set:function(t){this.F=t}},direction:{get:function(){return this.K},set:function(t){this.K=t}},startObject:{get:function(){return this.Td},set:function(t){this.Td=t}}});var wp=new Q(Di,"Either",0),JS=new Q(Di,"ForwardsOnly",0),ZS=new Q(Di,"BackwardsOnly",0);Di.className="LinkingTool",Di.Either=wp,Di.ForwardsOnly=JS,Di.BackwardsOnly=ZS;function An(){Ze.call(this),this.name="Relinking";var t=new wt;t.figure="Diamond",t.desiredSize=su,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=0,this.V=t,t=new wt,t.figure="Diamond",t.desiredSize=su,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=-1,this.Td=t,this.F=null,this.Aw=new V}B(An,Ze),An.prototype.updateAdornments=function(t){if(t!==null&&t instanceof X){var e="RelinkFrom",i=null;if(t.isSelected&&!this.diagram.isReadOnly){var n=t.selectionObject;n!==null&&t.canRelinkFrom()&&t.actualBounds.w()&&t.isVisible()&&n.actualBounds.w()&&n.Od()&&(i=t.Nj(e),i===null&&(i=this.makeAdornment(n,!1),t.Yg(e,i)))}i===null&&t.Hf(e),e="RelinkTo",i=null,t.isSelected&&!this.diagram.isReadOnly&&(n=t.selectionObject,n!==null&&t.canRelinkTo()&&t.actualBounds.w()&&t.isVisible()&&n.actualBounds.w()&&n.Od()&&(i=t.Nj(e),i===null?(i=this.makeAdornment(n,!0),t.Yg(e,i)):i.v())),i===null&&t.Hf(e)}},An.prototype.makeAdornment=function(t,e){var i=new jt;return i.type=_.Link,e=e?this.toHandleArchetype:this.fromHandleArchetype,e!==null&&i.add(e.copy()),i.adornedObject=t,i},An.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.ss()||!t.lastInput.left)return!1;var e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),e!==null},An.prototype.doActivate=function(){var t=this.diagram;if(this.originalLink===null){var e=this.handle;if(e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"),e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo"))),e===null)return;var i=e.part;if(!(i instanceof jt&&i.adornedPart instanceof X))return;this.handle=e,this.isForwards=i===null||i.category==="RelinkTo",this.originalLink=i.adornedPart}this.Ea(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.Aw.set(this.originalLink.actualBounds),this.originalLink!==null&&0<this.originalLink.pointsCount&&(this.originalLink.fromNode===null&&(this.temporaryFromPort!==null&&(this.temporaryFromPort.desiredSize=ou),this.temporaryFromNode!==null&&(this.temporaryFromNode.location=this.originalLink.i(0))),this.originalLink.toNode===null&&(this.temporaryToPort!==null&&(this.temporaryToPort.desiredSize=ou),this.temporaryToNode!==null&&(this.temporaryToNode.location=this.originalLink.i(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),this.temporaryLink!==null&&(this.temporaryFromNode!==null&&(this.temporaryLink.fromNode=this.temporaryFromNode),this.temporaryToNode!==null&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.bb(),t.add(this.temporaryLink)),this.isActive=!0},An.prototype.copyLinkProperties=function(t,e){if(t!==null&&e!==null){e.adjusting=t.adjusting,e.corner=t.corner;var i=t.curve;(i===_h||i===is)&&(i=Mi),e.curve=i,e.curviness=t.curviness,e.isTreeLink=t.isTreeLink,e.points=t.points,e.routing=t.routing,e.smoothness=t.smoothness,e.fromSpot=t.fromSpot,e.fromEndSegmentLength=t.fromEndSegmentLength,e.fromShortLength=t.fromShortLength,e.toSpot=t.toSpot,e.toEndSegmentLength=t.toEndSegmentLength,e.toShortLength=t.toShortLength}},An.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},An.prototype.doStop=function(){Ze.prototype.doStop.call(this),this.handle=null},An.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;this.transactionResult=null;var e=this.originalFromNode,i=this.originalFromPort,n=this.originalToNode,r=this.originalToPort,s=this.originalLink;try{if(this.targetPort=this.findTargetPort(this.isForwards),this.targetPort!==null){var l=this.targetPort.part;l instanceof b&&(this.isForwards?(n=l,r=this.targetPort):(e=l,i=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?r=n=null:i=e=null:s=null;s!==null?(this.reconnectLink(s,this.isForwards?n:e,this.isForwards?r:i,this.isForwards),this.targetPort===null&&(this.isForwards?s.defaultToPoint=t.lastInput.documentPoint:s.defaultFromPoint=t.lastInput.documentPoint,s.bb()),this.transactionResult=this.name,t.R("LinkRelinked",s,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.So(this.Aw)}finally{this.stopTool()}}},An.prototype.reconnectLink=function(t,e,i,n){return i=i!==null&&i.portId!==null?i.portId:"",n?(t.toNode=e,t.toPortId=i):(t.fromNode=e,t.fromPortId=i),!0},An.prototype.doNoRelink=function(){};function QS(t,e,i,n,r){e!==null?(t.copyPortProperties(e,i,t.temporaryFromNode,t.temporaryFromPort,!1),t.diagram.add(t.temporaryFromNode)):t.diagram.remove(t.temporaryFromNode),n!==null?(t.copyPortProperties(n,r,t.temporaryToNode,t.temporaryToPort,!0),t.diagram.add(t.temporaryToNode)):t.diagram.remove(t.temporaryToNode)}z.Object.defineProperties(An.prototype,{fromHandleArchetype:{get:function(){return this.V},set:function(t){this.V=t}},toHandleArchetype:{get:function(){return this.Td},set:function(t){this.Td=t}},handle:{get:function(){return this.F},set:function(t){if(t!==null&&!(t.part instanceof jt))throw Error("new handle is not in an Adornment: "+t);this.F=t}}}),An.className="RelinkingTool",Tt("linkingTool",function(){return this.findTool("Linking")},function(t){this.gb("Linking",t,this.mouseMoveTools)}),Tt("relinkingTool",function(){return this.findTool("Relinking")},function(t){this.gb("Relinking",t,this.mouseDownTools)});function ve(){Ot.call(this),this.name="LinkReshaping";var t=new wt;t.figure="Rectangle",t.desiredSize=d0,t.fill="lightblue",t.stroke="dodgerblue",this.m=t,t=new wt,t.figure="Diamond",t.desiredSize=su,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="move",this.u=t,this.F=3,this.Os=this.j=null,this.Bw=new P,this.Sq=new tt}B(ve,Ot),ve.prototype.Pu=function(t){return t&&t.reshapingBehavior.value!==0?t.reshapingBehavior:H0},ve.prototype.lm=function(t,e){t.reshapingBehavior=e},ve.prototype.updateAdornments=function(t){if(t!==null&&t instanceof X){var e=null;if(t.isSelected&&!this.diagram.isReadOnly){var i=t.path;i!==null&&t.canReshape()&&t.actualBounds.w()&&t.isVisible()&&i.actualBounds.w()&&i.Od()&&(e=t.Nj(this.name),e===null||e.ww!==t.pointsCount||e.Qw!==t.resegmentable)&&(e=this.makeAdornment(i),e!==null&&(e.ww=t.pointsCount,e.Qw=t.resegmentable,t.Yg(this.name,e)))}e===null&&t.Hf(this.name)}},ve.prototype.makeAdornment=function(t){var e=t.part,i=e.pointsCount,n=e.isOrthogonal,r=null;if(e.points!==null&&1<i){r=new jt,r.type=_.Link,i=e.firstPickIndex;var s=e.lastPickIndex,l=n?1:0;if(e.resegmentable&&e.computeCurve()!==un)for(var h=i+l;h<s-l;h++){var a=this.makeResegmentHandle(t,h);a!==null&&(a.segmentIndex=h,a.segmentFraction=.5,a.fromMaxLinks=999,r.add(a))}for(l=i+1;l<s;l++)if(h=this.makeHandle(t,l),h!==null){if(h.segmentIndex=l,l!==i)if(l===i+1&&n){a=e.i(i);var f=e.i(i+1);F.B(a.x,f.x)&&F.B(a.y,f.y)&&(f=e.i(i-1)),F.B(a.x,f.x)?(this.lm(h,ch),h.cursor="n-resize"):F.B(a.y,f.y)&&(this.lm(h,fh),h.cursor="w-resize")}else l===s-1&&n?(a=e.i(s-1),f=e.i(s),F.B(a.x,f.x)&&F.B(a.y,f.y)&&(a=e.i(s+1)),F.B(a.x,f.x)?(this.lm(h,ch),h.cursor="n-resize"):F.B(a.y,f.y)&&(this.lm(h,fh),h.cursor="w-resize")):l!==s&&(this.lm(h,_0),h.cursor="move");r.add(h)}r.adornedObject=t}return r},ve.prototype.makeHandle=function(){var t=this.handleArchetype;return t===null?null:t.copy()},ve.prototype.makeResegmentHandle=function(){var t=this.midHandleArchetype;return t===null?null:t.copy()},ve.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowReshape&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},ve.prototype.doActivate=function(){var t=this.diagram;if(this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle!==null){var e=this.handle.part.adornedPart;if(e instanceof X){if(this.Os=e,t.isMouseCaptured=!0,this.Ea(this.name),e.resegmentable&&this.handle.fromMaxLinks===999){var i=e.points.copy(),n=this.getResegmentingPoint();if(i.Eb(this.handle.segmentIndex+1,n),e.isOrthogonal&&i.Eb(this.handle.segmentIndex+1,n),e.points=i,e.Sb(),e.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),this.handle===null){this.doDeactivate();return}}this.Bw=e.i(this.handle.segmentIndex),this.Sq=e.points.copy(),this.isActive=!0}}},ve.prototype.doDeactivate=function(){this.stopTransaction(),this.Os=this.handle=null,this.isActive=this.diagram.isMouseCaptured=!1},ve.prototype.stopTransaction=function(){var t=this.diagram,e=Ot.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.Yj(),e},ve.prototype.doCancel=function(){var t=this.adornedLink;t!==null&&(t.points=this.Sq),this.stopTool()},ve.prototype.getResegmentingPoint=function(){return this.handle.ja(Ut)},ve.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeReshape(t.lastInput.documentPoint),this.reshape(t))},ve.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.computeReshape(t.lastInput.documentPoint);if(this.reshape(e),e=this.adornedLink,e!==null&&e.resegmentable){var i=this.handle.segmentIndex,n=e.i(i-1),r=e.i(i),s=e.i(i+1);if(e.isOrthogonal){if(i>e.firstPickIndex+1&&i<e.lastPickIndex-1){var l=e.i(i-2);if(Math.abs(n.x-r.x)<this.resegmentingDistance&&Math.abs(n.y-r.y)<this.resegmentingDistance&&(ah(this,l,n,r,s,!0)||ah(this,l,n,r,s,!1))){var h=e.points.copy();ah(this,l,n,r,s,!0)?(h.Xc(i-2,new P(l.x,(s.y+l.y)/2)),h.Xc(i+1,new P(s.x,(s.y+l.y)/2))):(h.Xc(i-2,new P((s.x+l.x)/2,l.y)),h.Xc(i+1,new P((s.x+l.x)/2,s.y))),h.nb(i),h.nb(i-1),e.points=h,e.Sb()}else l=e.i(i+2),Math.abs(r.x-s.x)<this.resegmentingDistance&&Math.abs(r.y-s.y)<this.resegmentingDistance&&(ah(this,n,r,s,l,!0)||ah(this,n,r,s,l,!1))&&(h=e.points.copy(),ah(this,n,r,s,l,!0)?(h.Xc(i-1,new P(n.x,(n.y+l.y)/2)),h.Xc(i+2,new P(l.x,(n.y+l.y)/2))):(h.Xc(i-1,new P((n.x+l.x)/2,n.y)),h.Xc(i+2,new P((n.x+l.x)/2,l.y))),h.nb(i+1),h.nb(i),e.points=h,e.Sb())}}else l=P.alloc(),F.mh(n.x,n.y,s.x,s.y,r.x,r.y,l)&&l.zf(r)<this.resegmentingDistance*this.resegmentingDistance&&(n=e.points.copy(),n.nb(i),e.points=n,e.Sb()),P.free(l)}t.Ya(),this.transactionResult=this.name,t.R("LinkReshaped",this.adornedLink,this.Sq)}this.stopTool()};function ah(t,e,i,n,r,s){return s?Math.abs(e.y-i.y)<t.resegmentingDistance&&Math.abs(i.y-n.y)<t.resegmentingDistance&&Math.abs(n.y-r.y)<t.resegmentingDistance:Math.abs(e.x-i.x)<t.resegmentingDistance&&Math.abs(i.x-n.x)<t.resegmentingDistance&&Math.abs(n.x-r.x)<t.resegmentingDistance}ve.prototype.reshape=function(t){var e=this.adornedLink;e.qh();var i=this.handle.segmentIndex,n=this.Pu(this.handle);if(e.isOrthogonal)if(i===e.firstPickIndex+1)i=e.firstPickIndex+1,n===ch?(e.M(i,e.i(i-1).x,t.y),e.M(i+1,e.i(i+2).x,t.y)):n===fh&&(e.M(i,t.x,e.i(i-1).y),e.M(i+1,t.x,e.i(i+2).y));else if(i===e.lastPickIndex-1)i=e.lastPickIndex-1,n===ch?(e.M(i-1,e.i(i-2).x,t.y),e.M(i,e.i(i+1).x,t.y)):n===fh&&(e.M(i-1,t.x,e.i(i-2).y),e.M(i,t.x,e.i(i+1).y));else{n=i;var r=e.i(n),s=e.i(n-1),l=e.i(n+1);F.B(s.x,r.x)&&F.B(r.y,l.y)?(F.B(s.x,e.i(n-2).x)&&!F.B(s.y,e.i(n-2).y)?(e.l(n,t.x,s.y),i++,n++):e.M(n-1,t.x,s.y),F.B(l.y,e.i(n+2).y)&&!F.B(l.x,e.i(n+2).x)?e.l(n+1,l.x,t.y):e.M(n+1,l.x,t.y)):F.B(s.y,r.y)&&F.B(r.x,l.x)?(F.B(s.y,e.i(n-2).y)&&!F.B(s.x,e.i(n-2).x)?(e.l(n,s.x,t.y),i++,n++):e.M(n-1,s.x,t.y),F.B(l.x,e.i(n+2).x)&&!F.B(l.y,e.i(n+2).y)?e.l(n+1,t.x,l.y):e.M(n+1,t.x,l.y)):F.B(s.x,r.x)&&F.B(r.x,l.x)?(F.B(s.x,e.i(n-2).x)&&!F.B(s.y,e.i(n-2).y)?(e.l(n,t.x,s.y),i++,n++):e.M(n-1,t.x,s.y),F.B(l.x,e.i(n+2).x)&&!F.B(l.y,e.i(n+2).y)?e.l(n+1,t.x,l.y):e.M(n+1,t.x,l.y)):F.B(s.y,r.y)&&F.B(r.y,l.y)&&(F.B(s.y,e.i(n-2).y)&&!F.B(s.x,e.i(n-2).x)?(e.l(n,s.x,t.y),i++,n++):e.M(n-1,s.x,t.y),F.B(l.y,e.i(n+2).y)&&!F.B(l.x,e.i(n+2).x)?e.l(n+1,l.x,t.y):e.M(n+1,l.x,t.y)),e.M(i,t.x,t.y)}else e.M(i,t.x,t.y),n=e.fromNode,r=e.fromPort,n!==null&&(s=n.findVisibleNode(),s!==null&&s!==n&&(n=s,r=n.port)),i===1&&e.computeSpot(!0,r).Jc()&&(s=r.ja(Ut,P.alloc()),n=e.getLinkPointFromPoint(n,r,s,t,!0,P.alloc()),e.M(0,n.x,n.y),P.free(s),P.free(n)),n=e.toNode,r=e.toPort,n!==null&&(s=n.findVisibleNode(),s!==null&&s!==n&&(n=s,r=n.port)),i===e.pointsCount-2&&e.computeSpot(!1,r).Jc()&&(i=r.ja(Ut,P.alloc()),t=e.getLinkPointFromPoint(n,r,i,t,!1,P.alloc()),e.M(e.pointsCount-1,t.x,t.y),P.free(i),P.free(t));e.xf()},ve.prototype.computeReshape=function(t){var e=this.adornedLink,i=this.handle.segmentIndex;switch(this.Pu(this.handle)){case _0:return t;case ch:return new P(e.i(i).x,t.y);case fh:return new P(t.x,e.i(i).y);default:case H0:return e.i(i)}},z.Object.defineProperties(ve.prototype,{handleArchetype:{get:function(){return this.m},set:function(t){this.m=t}},midHandleArchetype:{get:function(){return this.u},set:function(t){this.u=t}},handle:{get:function(){return this.j},set:function(t){if(t!==null&&!(t.part instanceof jt))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedLink:{get:function(){return this.Os}},resegmentingDistance:{get:function(){return this.F},set:function(t){this.F=t}},originalPoint:{get:function(){return this.Bw}},originalPoints:{get:function(){return this.Sq}}}),ve.prototype.setReshapingBehavior=ve.prototype.lm,ve.prototype.getReshapingBehavior=ve.prototype.Pu;var H0=new Q(ve,"None",0),fh=new Q(ve,"Horizontal",1),ch=new Q(ve,"Vertical",2),_0=new Q(ve,"All",3);ve.className="LinkReshapingTool",ve.None=H0,ve.Horizontal=fh,ve.Vertical=ch,ve.All=_0,Tt("linkReshapingTool",function(){return this.findTool("LinkReshaping")},function(t){this.gb("LinkReshaping",t,this.mouseDownTools)});function vi(){Ot.call(this),this.name="Resizing",this.m=new pt(1,1).freeze(),this.j=new pt(9999,9999).freeze(),this.vg=new pt(NaN,NaN).freeze(),this.V=!1,this.ga=!0,this.re=null;var t=new wt;t.alignmentFocus=Ut,t.figure="Rectangle",t.desiredSize=d0,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.F=t,this.u=null,this.Rq=new P,this.zw=new pt,this.Qn=new P,this.mt=new pt(0,0),this.lt=new pt(1/0,1/0),this.kt=new pt(1,1)}B(vi,Ot),vi.prototype.updateAdornments=function(t){if(!(t===null||t instanceof X)){if(t.isSelected&&!this.diagram.isReadOnly){var e=t.resizeObject,i=t.Nj(this.name);if(e!==null&&t.canResize()&&t.actualBounds.w()&&t.isVisible()&&e.actualBounds.w()&&e.Od()&&((i===null||i.adornedObject!==e)&&(i=this.makeAdornment(e)),i!==null)){e=e.ii(),js(t)&&this.updateResizeHandles(i,e),t.Yg(this.name,i);return}}t.Hf(this.name)}},vi.prototype.makeAdornment=function(t){var e=t.part.resizeAdornmentTemplate;if(e===null){e=new jt,e.type=_.Spot,e.locationSpot=Ut;var i=new Si;i.isPanelMain=!0,e.add(i),e.add(this.makeHandle(t,ei)),e.add(this.makeHandle(t,nh)),e.add(this.makeHandle(t,Xr)),e.add(this.makeHandle(t,rh)),e.add(this.makeHandle(t,En)),e.add(this.makeHandle(t,Xi)),e.add(this.makeHandle(t,On)),e.add(this.makeHandle(t,Fn))}else if(Dn(e),e=e.copy(),e===null)return null;return e.adornedObject=t,e},vi.prototype.makeHandle=function(t,e){return t=this.handleArchetype,t===null?null:(t=t.copy(),t.alignment=e,t)},vi.prototype.updateResizeHandles=function(t,e){if(t!==null){if(!t.alignment.Tb()&&(t.cursor==="pointer"||0<t.cursor.indexOf("resize")))t:{var i=t.alignment;if(i.Jc()&&(i=Ut),0>=i.x)e=0>=i.y?e+225:1<=i.y?e+135:e+180;else if(1<=i.x)0>=i.y?e+=315:1<=i.y&&(e+=45);else if(0>=i.y)e+=270;else if(1<=i.y)e+=90;else break t;0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"}else if(t instanceof _)for(t=t.elements;t.next();)this.updateResizeHandles(t.value,e)}},vi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowResize&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},vi.prototype.doActivate=function(){var t=this.diagram;this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle!==null&&(this.adornedObject=this.handle.part.adornedObject,this.adornedObject!==null&&(t.isMouseCaptured=!0,t.animationManager.zc(),this.Ea(this.name),this.Rq.set(this.adornedObject.ja(this.handle.alignment.ev())),this.Qn.set(this.adornedObject.part.location),this.zw.set(this.adornedObject.desiredSize),this.kt=this.computeCellSize(),this.mt=this.computeMinSize(),this.lt=this.computeMaxSize(),this.isActive=!0))},vi.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.re=this.handle=null,this.isActive=t.isMouseCaptured=!1},vi.prototype.stopTransaction=function(){var t=this.diagram,e=Ot.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.Yj(),e},vi.prototype.doCancel=function(){this.adornedObject!==null&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()},vi.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive){var e=this.mt,i=this.lt,n=this.kt,r=this.adornedObject.ls(t.lastInput.documentPoint,P.alloc()),s=this.computeReshape();e=this.computeResize(r,this.handle.alignment,e,i,n,s),this.resize(e),t.Wc(),P.free(r)}},vi.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.mt,i=this.lt,n=this.kt,r=this.adornedObject.ls(t.lastInput.documentPoint,P.alloc()),s=this.computeReshape();e=this.computeResize(r,this.handle.alignment,e,i,n,s),this.resize(e),P.free(r),t.Ya(),this.transactionResult=this.name,t.R("PartResized",this.adornedObject,this.originalDesiredSize)}this.stopTool()},vi.prototype.resize=function(t){var e=this.diagram,i=this.adornedObject;if(i!==null){if(i.desiredSize=t.size,t=i.part,t.Va(),i=i.ja(this.handle.alignment.ev()),t instanceof yt){var n=new tt;if(n.add(t),!this.dragsMembers&&t.placeholder===null){var r=new Nh;r.dragsMembers=!1}e.moveParts(n,this.oppositePoint.copy().oe(i),!0,r)}else t.location=t.location.copy().oe(i).add(this.oppositePoint);e.Wc()}},vi.prototype.computeResize=function(t,e,i,n,r,s){e.Jc()&&(e=Ut);var l=this.adornedObject.naturalBounds,h=l.x,a=l.y,f=l.x+l.width,p=l.y+l.height,d=1;if(!s){d=l.width;var y=l.height;0>=d&&(d=1),0>=y&&(y=1),d=y/d}return y=P.alloc(),F.Ko(t.x,t.y,h,a,r.width,r.height,y),t=l.copy(),0>=e.x?0>=e.y?(t.x=Math.max(y.x,f-n.width),t.x=Math.min(t.x,f-i.width),t.width=Math.max(f-t.x,i.width),t.y=Math.max(y.y,p-n.height),t.y=Math.min(t.y,p-i.height),t.height=Math.max(p-t.y,i.height),s||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width),t.x=f-t.width,t.y=p-t.height)):1<=e.y?(t.x=Math.max(y.x,f-n.width),t.x=Math.min(t.x,f-i.width),t.width=Math.max(f-t.x,i.width),t.height=Math.max(Math.min(y.y-a,n.height),i.height),s||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width),t.x=f-t.width)):(t.x=Math.max(y.x,f-n.width),t.x=Math.min(t.x,f-i.width),t.width=f-t.x,s||(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d,t.y=a+.5*(p-a-t.height))):1<=e.x?0>=e.y?(t.width=Math.max(Math.min(y.x-h,n.width),i.width),t.y=Math.max(y.y,p-n.height),t.y=Math.min(t.y,p-i.height),t.height=Math.max(p-t.y,i.height),s||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width),t.y=p-t.height)):1<=e.y?(t.width=Math.max(Math.min(y.x-h,n.width),i.width),t.height=Math.max(Math.min(y.y-a,n.height),i.height),s||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width))):(t.width=Math.max(Math.min(y.x-h,n.width),i.width),s||(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d,t.y=a+.5*(p-a-t.height))):0>=e.y?(t.y=Math.max(y.y,p-n.height),t.y=Math.min(t.y,p-i.height),t.height=p-t.y,s||(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width,t.x=h+.5*(f-h-t.width))):1<=e.y&&(t.height=Math.max(Math.min(y.y-a,n.height),i.height),s||(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width,t.x=h+.5*(f-h-t.width))),P.free(y),t},vi.prototype.computeReshape=function(){var t=he;return this.adornedObject instanceof wt&&(t=qm(this.adornedObject)),!(t===Fr||this.diagram.lastInput.shift)},vi.prototype.computeMinSize=function(){var t=this.adornedObject.minSize.copy(),e=this.minSize;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},vi.prototype.computeMaxSize=function(){var t=this.adornedObject.maxSize.copy(),e=this.maxSize;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},vi.prototype.computeCellSize=function(){var t=new pt(NaN,NaN),e=this.adornedObject.part;return e!==null&&(e=e.resizeCellSize,!isNaN(e.width)&&0<e.width&&(t.width=e.width),!isNaN(e.height)&&0<e.height&&(t.height=e.height)),e=this.cellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height),e=this.diagram,(isNaN(t.width)||isNaN(t.height))&&e&&(e=e.grid,e!==null&&e.visible&&this.isGridSnapEnabled&&(e=e.gridCellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height))),(isNaN(t.width)||t.width===0||t.width===1/0)&&(t.width=1),(isNaN(t.height)||t.height===0||t.height===1/0)&&(t.height=1),t},z.Object.defineProperties(vi.prototype,{handleArchetype:{get:function(){return this.F},set:function(t){this.F=t}},handle:{get:function(){return this.u},set:function(t){if(t!==null&&!(t.part instanceof jt))throw Error("new handle is not in an Adornment: "+t);this.u=t}},adornedObject:{get:function(){return this.re},set:function(t){if(t!==null&&t.part instanceof jt)throw Error("new handle must not be in an Adornment: "+t);this.re=t}},minSize:{get:function(){return this.m},set:function(t){if(!this.m.C(t)){var e=t.width;isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.m.h(e,t)}}},maxSize:{get:function(){return this.j},set:function(t){if(!this.j.C(t)){var e=t.width;isNaN(e)&&(e=1/0),t=t.height,isNaN(t)&&(t=1/0),this.j.h(e,t)}}},cellSize:{get:function(){return this.vg},set:function(t){this.vg.C(t)||this.vg.assign(t)}},isGridSnapEnabled:{get:function(){return this.V},set:function(t){this.V=t}},dragsMembers:{get:function(){return this.ga},set:function(t){this.ga=t}},oppositePoint:{get:function(){return this.Rq},set:function(t){this.Rq.C(t)||this.Rq.assign(t)}},originalDesiredSize:{get:function(){return this.zw}},originalLocation:{get:function(){return this.Qn}}}),vi.className="ResizingTool",Tt("resizingTool",function(){return this.findTool("Resizing")},function(t){this.gb("Resizing",t,this.mouseDownTools)});function rn(){Ot.call(this),this.name="Rotating",this.ga=45,this.V=2,this.Qn=new P,this.re=null;var t=new wt;t.figure="Ellipse",t.desiredSize=su,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.m=t,this.j=null,this.yw=0,this.er=new P(NaN,NaN),this.u=0,this.F=50}B(rn,Ot),rn.prototype.updateAdornments=function(t){if(t!==null){if(t.lh()){var e=t.rotateObject;if(e===t||e===t.path||e.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly&&(e=t.rotateObject,e!==null&&t.canRotate()&&t.actualBounds.w()&&t.isVisible()&&e.actualBounds.w()&&e.Od())){var i=t.Nj(this.name);if((i===null||i.adornedObject!==e)&&(i=this.makeAdornment(e)),i!==null){i.angle=e.ii(),i.placeholder===null&&(i.location=this.computeAdornmentLocation(e)),t.Yg(this.name,i);return}}t.Hf(this.name)}},rn.prototype.makeAdornment=function(t){var e=t.part.rotateAdornmentTemplate;if(e===null){e=new jt,e.type=_.Position,e.locationSpot=Ut;var i=this.handleArchetype;i!==null&&e.add(i.copy())}else if(Dn(e),e=e.copy(),e===null)return null;return e.adornedObject=t,e},rn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowRotate&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},rn.prototype.doActivate=function(){var t=this.diagram;if(this.adornedObject===null){if(this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle===null)return;this.adornedObject=this.handle.part.adornedObject}this.adornedObject!==null&&(t.isMouseCaptured=!0,t.delaysLayout=!0,this.Ea(this.name),this.yw=this.adornedObject.angle,this.er=this.computeRotationPoint(this.adornedObject),this.Qn=this.adornedObject.part.location.copy(),this.isActive=!0)},rn.prototype.computeRotationPoint=function(t){var e=t.part,i=e.locationObject;return e.rotationSpot.tb()?t.ja(e.rotationSpot):t===e||t===i?i.ja(e.locationSpot):t.ja(Ut)},rn.prototype.computeAdornmentLocation=function(t){var e=this.rotationPoint;e.w()||(e=this.computeRotationPoint(t)),e=t.ls(e);var i=this.handleAngle;0>i?i+=360:360<=i&&(i-=360),i=Math.round(45*Math.round(i/45));var n=this.handleDistance;return i===0?e.x=t.naturalBounds.width+n:i===45?(e.x=t.naturalBounds.width+n,e.y=t.naturalBounds.height+n):i===90?e.y=t.naturalBounds.height+n:i===135?(e.x=-n,e.y=t.naturalBounds.height+n):i===180?e.x=-n:i===225?(e.x=-n,e.y=-n):i===270?e.y=-n:i===315&&(e.x=t.naturalBounds.width+n,e.y=-n),t.ja(e)},rn.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.re=this.handle=null,this.er=new P(NaN,NaN),this.isActive=t.isMouseCaptured=!1},rn.prototype.stopTransaction=function(){var t=this.diagram,e=Ot.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.Yj(),e},rn.prototype.doCancel=function(){this.diagram.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()},rn.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeRotate(t.lastInput.documentPoint),this.rotate(t))},rn.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){t.delaysLayout=!1;var e=this.computeRotate(t.lastInput.documentPoint);this.rotate(e),t.Ya(),this.transactionResult=this.name,t.R("PartRotated",this.adornedObject,this.originalAngle)}this.stopTool()},rn.prototype.rotate=function(t){var e=this.adornedObject;if(e!==null){e.angle=t,e=e.part,e.Va();var i=e.locationObject,n=e.rotateObject;(i===n||i.og(n))&&(i=this.Qn.copy(),e.location=i.oe(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)),this.diagram.Wc()}},rn.prototype.computeRotate=function(t){t=this.rotationPoint.ab(t)-this.handleAngle;var e=this.adornedObject.panel;e!==null&&(t-=e.ii()),360<=t?t-=360:0>t&&(t+=360),e=Math.min(Math.abs(this.snapAngleMultiple),180);var i=Math.min(Math.abs(this.snapAngleEpsilon),e/2);return!this.diagram.lastInput.shift&&0<e&&0<i&&(t%e<i?t=Math.floor(t/e)*e:t%e>e-i&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:0>t&&(t+=360),t},z.Object.defineProperties(rn.prototype,{handleArchetype:{get:function(){return this.m},set:function(t){this.m=t}},handle:{get:function(){return this.j},set:function(t){if(t!==null&&!(t.part instanceof jt))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedObject:{get:function(){return this.re},set:function(t){if(t!==null&&t.part instanceof jt)throw Error("new handle must not be in an Adornment: "+t);this.re=t}},snapAngleMultiple:{get:function(){return this.ga},set:function(t){this.ga=t}},snapAngleEpsilon:{get:function(){return this.V},set:function(t){this.V=t}},originalAngle:{get:function(){return this.yw}},rotationPoint:{get:function(){return this.er},set:function(t){this.er=t.copy()}},handleAngle:{get:function(){return this.u},set:function(t){this.u=t}},handleDistance:{get:function(){return this.F},set:function(t){this.F=t}}}),rn.className="RotatingTool",Tt("rotatingTool",function(){return this.findTool("Rotating")},function(t){this.gb("Rotating",t,this.mouseDownTools)});function ph(){Ot.call(this),this.name="ClickSelecting"}B(ph,Ot),ph.prototype.canStart=function(){return!(!this.isEnabled||this.isBeyondDragSize())},ph.prototype.doMouseUp=function(){this.isActive&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()},ph.className="ClickSelectingTool";function Ho(){Ot.call(this),this.name="Action",this.kk=null}B(Ho,Ot),Ho.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram,e=t.lastInput,i=t.ec(e.documentPoint,function(n){for(;n.panel!==null&&!n.isActionable;)n=n.panel;return n});return i!==null&&i.isActionable?(this.kk=i,t.yk=t.ec(e.documentPoint,null,null),!0):!1},Ho.prototype.doMouseDown=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.kk;e!==null&&(t.targetObject=e,e.actionDown!==null&&e.actionDown(t,e))}else this.canStart()&&this.doActivate()},Ho.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.kk;e!==null&&(t.targetObject=e,e.actionMove!==null&&e.actionMove(t,e))}},Ho.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.kk;if(e===null)return;t.targetObject=e,e.actionUp!==null&&e.actionUp(t,e),this.standardMouseClick(function(i){for(;i.panel!==null&&(!i.isActionable||i!==e);)i=i.panel;return i},function(i){return i===e})}this.stopTool()},Ho.prototype.doCancel=function(){var t=this.diagram.lastInput,e=this.kk;e!==null&&(t.targetObject=e,e.actionCancel!==null&&e.actionCancel(t,e),this.stopTool())},Ho.prototype.doStop=function(){this.kk=null},Ho.className="ActionTool";function al(){Ot.call(this),this.name="ClickCreating",this.Oi=null,this.m=!0,this.j=!1,this.iw=new P(0,0)}B(al,Ot),al.prototype.canStart=function(){if(!this.isEnabled||this.archetypeNodeData===null)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(t.lastInput.clickCount===1&&(this.iw=t.lastInput.viewPoint.copy()),t.lastInput.clickCount!==2||this.isBeyondDragSize(this.iw))return!1}else if(t.lastInput.clickCount!==1)return!1;return!(t.currentTool!==this&&t.Jl(t.lastInput.documentPoint,!0)!==null)},al.prototype.doMouseUp=function(){var t=this.diagram;this.isActive&&this.insertPart(t.lastInput.documentPoint),this.stopTool()},al.prototype.insertPart=function(t){var e=this.diagram,i=this.archetypeNodeData;if(i===null)return null;var n=null;try{if(e.R("ChangingSelection",e.selection),this.Ea(this.name),i instanceof lt)i.Uc()&&(Dn(i),n=i.copy(),n!==null&&e.add(n));else if(i!==null){var r=e.model.copyNodeData(i);xt(r)&&(e.model.vf(r),n=e.Ic(r))}if(n!==null){var s=P.allocAt(t.x,t.y);this.isGridSnapEnabled&&fm(this.diagram,n,t,s),n.location=s,e.allowSelect&&(e.clearSelection(!0),n.isSelected=!0),P.free(s)}e.Ya(),this.transactionResult=this.name,e.R("PartCreated",n)}finally{this.stopTransaction(),e.R("ChangedSelection",e.selection)}return n},z.Object.defineProperties(al.prototype,{archetypeNodeData:{get:function(){return this.Oi},set:function(t){this.Oi=t}},isDoubleClick:{get:function(){return this.m},set:function(t){this.m=t}},isGridSnapEnabled:{get:function(){return this.j},set:function(t){this.j=t}}}),al.className="ClickCreatingTool";function Kr(){Ot.call(this),this.name="DragSelecting",this.Ek=175,this.m=!1;var t=new lt;t.layerName="Tool",t.selectable=!1;var e=new wt;e.name="SHAPE",e.figure="Rectangle",e.fill=null,e.stroke="magenta",t.add(e),this.j=t}B(Kr,Ot),Kr.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.timestamp-t.firstInput.timestamp<this.delay||t.Jl(e.documentPoint,!0)!==null))},Kr.prototype.doActivate=function(){var t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()},Kr.prototype.doDeactivate=function(){var t=this.diagram;t.rg(),t.remove(this.box),t.skipsUndoManager=!1,this.isActive=t.isMouseCaptured=!1},Kr.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive&&this.box!==null){var e=this.computeBoxBounds(),i=this.box.fb("SHAPE");i===null&&(i=this.box.sb());var n=pt.alloc().h(e.width,e.height);i.desiredSize=n,this.box.jm(e.x,e.y,!1),pt.free(n),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.bs(t.lastInput.viewPoint)}},Kr.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",t.R("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.R("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()},Kr.prototype.computeBoxBounds=function(){var t=this.diagram;return new V(t.firstInput.documentPoint,t.lastInput.documentPoint)},Kr.prototype.selectInRect=function(t){var e=this.diagram,i=e.lastInput;if(t=e.qx(t,this.isPartialInclusion),ke?i.meta:i.control)if(i.shift)for(t=t.iterator;t.next();)e=t.value,e.isSelected&&(e.isSelected=!1);else for(t=t.iterator;t.next();)e=t.value,e.isSelected=!e.isSelected;else if(i.shift)for(t=t.iterator;t.next();)e=t.value,e.isSelected||(e.isSelected=!0);else{for(i=new tt,e=e.selection.iterator;e.next();){var n=e.value;t.contains(n)||i.add(n)}for(e=i.iterator;e.next();)e.value.isSelected=!1;for(t=t.iterator;t.next();)e=t.value,e.isSelected||(e.isSelected=!0)}},z.Object.defineProperties(Kr.prototype,{delay:{get:function(){return this.Ek},set:function(t){this.Ek=t}},isPartialInclusion:{get:function(){return this.m},set:function(t){this.m=t}},box:{get:function(){return this.j},set:function(t){this.j=t}}}),Kr.className="DragSelectingTool";function Wr(){Ot.call(this),this.name="Panning",this.Ut=new P,this.wy=new P,this.ug=!1;var t=this;this.Gw=function(){var e=t.diagram;e!==null&&e.removeEventListener(Y.document,"scroll",t.Gw,!1),t.stopTool()}}B(Wr,Ot),Wr.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())},Wr.prototype.doActivate=function(){var t=this.diagram;this.ug?(t.lastInput.bubbles=!0,t.addEventListener(Y.document,"scroll",this.Gw,!1)):(t.currentCursor="move",t.isMouseCaptured=!0,this.Ut.assign(t.position)),this.isActive=!0},Wr.prototype.doDeactivate=function(){var t=this.diagram;t.currentCursor="",this.isActive=t.isMouseCaptured=!1},Wr.prototype.doCancel=function(){var t=this.diagram;t.position=this.Ut,t.isMouseCaptured=!1,this.stopTool()},Wr.prototype.doMouseMove=function(){this.move()},Wr.prototype.doMouseUp=function(){this.move(),this.stopTool()},Wr.prototype.move=function(){var t=this.diagram;if(this.isActive&&t)if(this.ug)t.lastInput.bubbles=!0;else{var e=t.position,i=t.firstInput.documentPoint,n=t.lastInput.documentPoint,r=e.x+i.x-n.x;i=e.y+i.y-n.y,t.allowHorizontalScroll||(r=e.x),t.allowVerticalScroll||(i=e.y),t.position=this.wy.h(r,i)}},z.Object.defineProperties(Wr.prototype,{bubbles:{get:function(){return this.ug},set:function(t){this.ug=t}},originalPosition:{get:function(){return this.Ut}}}),Wr.className="PanningTool",Tt("clickCreatingTool",function(){return this.findTool("ClickCreating")},function(t){this.gb("ClickCreating",t,this.mouseUpTools)}),Tt("clickSelectingTool",function(){return this.findTool("ClickSelecting")},function(t){this.gb("ClickSelecting",t,this.mouseUpTools)}),Tt("panningTool",function(){return this.findTool("Panning")},function(t){this.gb("Panning",t,this.mouseMoveTools)}),Tt("dragSelectingTool",function(){return this.findTool("DragSelecting")},function(t){this.gb("DragSelecting",t,this.mouseMoveTools)}),Tt("actionTool",function(){return this.findTool("Action")},function(t){this.gb("Action",t,this.mouseDownTools)});function _o(){this.F=this.u=this.j=this.m=null}z.Object.defineProperties(_o.prototype,{mainElement:{get:function(){return this.u},set:function(t){this.u=t}},show:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t)}},hide:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},valueFunction:{get:function(){return this.F},set:function(t){this.F=t}}}),_o.className="HTMLInfo";function cr(t,e,i){this.text=t,this.ex=e,this.visible=i}cr.className="ContextMenuButtonInfo";function on(){Ot.call(this),this.name="ContextMenu",this.m=this.bt=this.j=null,this.uw=new P,this.dt=null,this.zt=!1;var t=this;this.qu=function(){t.stopTool()}}B(on,Ot);function zL(t){var e=new _o;e.show=function(r,s,l){l.showDefaultContextMenu()},e.hide=function(r,s){s.hideDefaultContextMenu()},dh=e,t.qu=function(){t.stopTool()},e=J("div");var i=J("div");e.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",i.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var n=J("style");Y.document.getElementsByTagName("head")[0].appendChild(n),n.sheet.insertRule(".goCXul { list-style: none; }",0),n.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),n.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),n=t.diagram,n!==null&&(n.addEventListener(e,"contextmenu",G0,!1),n.addEventListener(e,"selectstart",G0,!1),n.addEventListener(i,"contextmenu",G0,!1)),e.className="goCXforeground",i.className="goCXbackground",Y.document.body&&(Y.document.body.appendChild(e),Y.document.body.appendChild(i)),ba=e,qa=i,X0=!0}function G0(t){return t.preventDefault(),!1}on.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return this.isBeyondDragSize()||!t.lastInput.right||1<t.lastInput.clickCount?!1:!!(t.lastInput.isTouchEvent&&this.defaultTouchContextMenu!==null||this.findObjectWithContextMenu()!==null)},on.prototype.doStart=function(){this.uw.set(this.diagram.firstInput.documentPoint)},on.prototype.doStop=function(){this.hideContextMenu(),this.currentObject=null},on.prototype.findObjectWithContextMenu=function(t){t===void 0&&(t=null);var e=this.diagram,i=e.lastInput,n=null;if(t instanceof D||(t instanceof ot?n=t:n=e.ec(i.documentPoint,null,function(r){return!r.layer.isTemporary})),n!==null){for(t=n;t!==null;){if(t.contextMenu!==null)return t;t=t.panel}if(e.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return n.part}else if(e.contextMenu!==null)return e;return null},on.prototype.doActivate=function(){},on.prototype.doMouseDown=function(){if(Ot.prototype.doMouseDown.call(this),this.isActive&&this.currentContextMenu instanceof jt){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.contains(this)&&qS(this)},on.prototype.doMouseUp=function(){if(this.isActive&&this.currentContextMenu instanceof jt){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}qS(this)};function qS(t){var e=t.diagram;if(t.isActive){var i=t.currentContextMenu;if(i!==null){if(!(i instanceof _o)){var n=e.ec(e.lastInput.documentPoint,null,null);n!==null&&n.og(i)&&t.standardMouseClick(null,null)}t.stopTool(),t.canStart()&&(e.currentTool=t,t.doMouseUp())}}else t.canStart()&&(bS(t,!0),t.isActive||t.stopTool())}function bS(t,e,i){if(i===void 0&&(i=null),!t.zt&&(t.zt=!0,e&&t.standardMouseSelect(),e=t.standardMouseClick(),t.zt=!1,!e)){if(t.isActive=!0,e=dh,i===null&&(i=t.findObjectWithContextMenu()),i!==null){var n=i.contextMenu;n!==null?(t.currentObject=i instanceof ot?i:null,t.showContextMenu(n,t.currentObject)):e!==null&&t.showContextMenu(e,t.currentObject)}else e!==null&&t.showContextMenu(e,null);t.currentContextMenu instanceof jt&&!t.currentContextMenu.visible&&t.stopTool()}}on.prototype.doMouseMove=function(){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()},on.prototype.showContextMenu=function(t,e){var i=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof jt){t.layerName="Tool",t.selectable=!1,t.scale=1/i.scale,t.category=this.name,t.placeholder!==null&&(t.placeholder.scale=i.scale);var n=t.diagram;n!==null&&n!==i&&n.remove(t),i.add(t),e!==null?t.adornedObject=e:t.data=i.model,t.Va(),this.positionContextMenu(t,e)}else t instanceof _o&&t.show(e,i,this);this.currentContextMenu=t},on.prototype.positionContextMenu=function(t){if(t.placeholder===null){var e=this.diagram,i=e.lastInput.documentPoint.copy(),n=t.measuredBounds,r=e.viewportBounds;e.lastInput.isTouchEvent&&(i.x-=n.width),i.x+n.width>r.right&&(i.x-=n.width+5/e.scale),i.x<r.x&&(i.x=r.x),i.y+n.height>r.bottom&&(i.y-=n.height+5/e.scale),i.y<r.y&&(i.y=r.y),t.position=i}},on.prototype.hideContextMenu=function(){var t=this.diagram,e=this.currentContextMenu;e!==null&&(e instanceof jt?(t.remove(e),this.bt!==null&&this.bt.Hf(e.category),e.data=null,e.adornedObject=null):e instanceof _o&&(e.hide!==null?e.hide(t,this):e.mainElement!==null&&(e.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())};function VL(t){var e=new tt;return e.add(new cr("Copy",function(i){i.commandHandler.copySelection()},function(i){return i.commandHandler.canCopySelection()})),e.add(new cr("Cut",function(i){i.commandHandler.cutSelection()},function(i){return i.commandHandler.canCutSelection()})),e.add(new cr("Delete",function(i){i.commandHandler.deleteSelection()},function(i){return i.commandHandler.canDeleteSelection()})),e.add(new cr("Paste",function(i){i.commandHandler.pasteSelection(t.mouseDownPoint)},function(i){return i.commandHandler.canPasteSelection(t.mouseDownPoint)})),e.add(new cr("Select All",function(i){i.commandHandler.selectAll()},function(i){return i.commandHandler.canSelectAll()})),e.add(new cr("Undo",function(i){i.commandHandler.undo()},function(i){return i.commandHandler.canUndo()})),e.add(new cr("Redo",function(i){i.commandHandler.redo()},function(i){return i.commandHandler.canRedo()})),e.add(new cr("Scroll To Part",function(i){i.commandHandler.scrollToPart()},function(i){return i.commandHandler.canScrollToPart()})),e.add(new cr("Zoom To Fit",function(i){i.commandHandler.zoomToFit()},function(i){return i.commandHandler.canZoomToFit()})),e.add(new cr("Reset Zoom",function(i){i.commandHandler.resetZoom()},function(i){return i.commandHandler.canResetZoom()})),e.add(new cr("Group Selection",function(i){i.commandHandler.groupSelection()},function(i){return i.commandHandler.canGroupSelection()})),e.add(new cr("Ungroup Selection",function(i){i.commandHandler.ungroupSelection()},function(i){return i.commandHandler.canUngroupSelection()})),e.add(new cr("Edit Text",function(i){i.commandHandler.editTextBlock()},function(i){return i.commandHandler.canEditTextBlock()})),e}on.prototype.showDefaultContextMenu=function(){var t=this.diagram;this.dt===null&&(this.dt=VL(this)),ba.innerHTML="",qa.addEventListener("pointerdown",this.qu,!1);var e=this,i=J("ul");i.className="goCXul",ba.appendChild(i),i.innerHTML="";for(var n=this.dt.iterator;n.next();){var r=n.value,s=r.visible;if(typeof r.ex=="function"&&(typeof s!="function"||s(t))){s=J("li"),s.className="goCXli";var l=J("a");l.className="goCXa",l.href="#",l.jy=r.ex,l.addEventListener("pointerdown",function(h){return this.jy(t),e.stopTool(),h.preventDefault(),!1},!1),l.textContent=r.text,s.appendChild(l),i.appendChild(s)}}ba.style.display="block",qa.style.display="block"},on.prototype.hideDefaultContextMenu=function(){if(this.currentContextMenu!==null&&this.currentContextMenu===dh){ba.style.display="none",qa.style.display="none";var t=this.diagram;t!==null&&t.removeEventListener(qa,"pointerdown",this.qu,!1),this.currentContextMenu=null}},z.Object.defineProperties(on.prototype,{currentContextMenu:{get:function(){return this.j},set:function(t){this.j=t,this.bt=t instanceof jt?t.adornedPart:null}},defaultTouchContextMenu:{get:function(){return X0===!1&&dh===null&&$n&&zL(this),dh},set:function(t){t===null&&(X0=!0),dh=t}},currentObject:{get:function(){return this.m},set:function(t){this.m=t}},mouseDownPoint:{get:function(){return this.uw}}});var dh=null,X0=!1,qa=null,ba=null;on.className="ContextMenuTool",Tt("contextMenuTool",function(){return this.findTool("ContextMenu")},function(t){this.gb("ContextMenu",t,this.mouseUpTools)});function Zt(){Ot.call(this),this.name="TextEditing",this.Wh=new Gt,this.ga=null,this.V=W0,this.tj=null,this.qa=tf,this.u=1,this.F=!0,this.m=null,this.j=new _o,this.et=null,UL(this,this.j)}B(Zt,Ot);function UL(t,e){if($n){var i=J("textarea");t.et=i,i.addEventListener("input",function(){if(t.textBlock!==null){var n=t.Jx(this.value);this.style.width=20+n.measuredBounds.width*this.pA+"px",this.rows=n.lineCount}},!1),i.addEventListener("keydown",function(n){if(t.textBlock!==null){var r=n.key;r==="Enter"?(t.textBlock.isMultiline===!1&&n.preventDefault(),t.acceptText(Mp)):r==="Tab"?(t.acceptText(K0),n.preventDefault()):r==="Escape"&&(t.doCancel(),t.diagram!==null&&t.diagram.doFocus())}},!1),i.addEventListener("focus",function(){if(t.currentTextEditor!==null&&t.state!==tf){var n=t.et;t.qa===ef&&(t.qa=kp),typeof n.select=="function"&&t.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},!1),i.addEventListener("blur",function(){if(t.currentTextEditor!==null&&t.state!==tf){var n=t.et;typeof n.focus=="function"&&n.focus(),typeof n.select=="function"&&t.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},!1),e.valueFunction=function(){return i.value},e.mainElement=i,e.show=function(n,r,s){if(n instanceof Gt&&s instanceof Zt)if(s.state===nf)i.style.border="3px solid red",i.focus();else{var l=n.ja(Ut),h=r.position,a=r.scale,f=n.Bf()*a;f<s.minimumEditorScale&&(f=s.minimumEditorScale);var p=n.naturalBounds.width*f+6,d=n.naturalBounds.height*f+2,y=(l.x-h.x)*a;l=(l.y-h.y)*a,h=n.verticalAlignment,a=(n.lineHeight+n.spacingAbove+n.spacingBelow)*n.lineCount*f,d=h.y*d-h.y*a+h.offsetY-(.5*d-.5*a)-a/2,i.value=n.text,r.div.style.font=n.font,i.style.position="absolute",i.style.zIndex="100",i.style.font="inherit",i.style.fontSize=100*f+"%",i.style.lineHeight="normal",i.style.width=p+"px",i.style.left=(y-p/2|0)-1+"px",i.style.top=(l+d|0)-1+"px",i.style.textAlign=n.textAlign,i.style.margin="0",i.style.padding="1px",i.style.border="0",i.style.outline="none",i.style.whiteSpace="pre-wrap",i.style.overflow="hidden",i.rows=n.lineCount,i.pA=f,i.className="goTXarea",r.div.appendChild(i),i.focus(),s.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}},e.hide=function(n){n.div.removeChild(i)}}}Zt.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t===null||t.isReadOnly||fu&&fu!==this&&(fu.acceptText(Sp),fu&&fu!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;var e=t.ec(t.lastInput.documentPoint);return e!==null&&e instanceof Gt&&e.editable&&e.part.canEdit()?(e=e.part,!(e===null||this.starting===W0&&!e.isSelected||this.starting===iM&&2>t.lastInput.clickCount)):!1},Zt.prototype.doStart=function(){fu=this,this.textBlock!==null&&this.doActivate()},Zt.prototype.doActivate=function(){if(!this.isActive){var t=this.diagram;if(t!==null){var e=this.textBlock;if(e===null&&(e=t.ec(t.lastInput.documentPoint)),e!==null&&e instanceof Gt&&(this.textBlock=e,e.part!==null)){t.animationManager.zc(),this.isActive=!0,this.qa=ef;var i=this.defaultTextEditor;e.textEditor!==null&&(i=e.textEditor),this.Wh=this.textBlock.copy();var n=new V(this.textBlock.ja(ei),this.textBlock.ja(Xr));t.rv(n),i.show(e,t,this),this.currentTextEditor=i}}}},Zt.prototype.doCancel=function(){this.stopTool()},Zt.prototype.doMouseUp=function(){this.canStart()&&this.doActivate()},Zt.prototype.doMouseDown=function(){this.isActive&&this.acceptText(Sp)},Zt.prototype.acceptText=function(t){switch(t){case Sp:this.qa===J0?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():(this.qa===ef||this.qa===nf||this.qa===kp)&&(this.qa=$0,tM(this));break;case eM:case Mp:case K0:(Mp!==t||this.textBlock.isMultiline!==!0)&&(this.qa===ef||this.qa===nf||this.qa===kp)&&(this.qa=$0,tM(this))}};function tM(t){var e=t.textBlock,i=t.diagram,n=t.currentTextEditor;if(e!==null&&n!==null){var r=e.text,s="";n.valueFunction!==null&&(s=n.valueFunction()),t.isValidText(e,r,s)?(t.Ea(t.name),t.qa=J0,t.transactionResult=t.name,e.text=s,t.doSuccess(r,s),i!==null&&i.R("TextEdited",e,r),t.stopTransaction(),t.stopTool(),i!==null&&i.doFocus()):(t.qa=nf,t.doError(r,s))}}Zt.prototype.doError=function(t,e){var i=this.textBlock;i.errorFunction!==null&&i.errorFunction(this,t,e),(t=this.currentTextEditor)&&t.show(i,this.diagram,this)},Zt.prototype.doSuccess=function(t,e){var i=this.textBlock;i.textEdited!==null&&i.textEdited(i,t,e)},Zt.prototype.doDeactivate=function(){var t=this.diagram;t!==null&&(this.qa=tf,this.currentTextEditor!==null&&this.currentTextEditor.hide(t,this),this.textBlock=null,this.isActive=!1)},Zt.prototype.doStop=function(){fu=null},Zt.prototype.isValidText=function(t,e,i){var n=this.textValidation;return n!==null&&!n(t,e,i)?!1:(n=t.textValidation,!!(n===null||n(t,e,i)))},Zt.prototype.Jx=function(t){var e=this.Wh;return e.text=t,e.measure(this.textBlock.Fh,1/0),e},z.Object.defineProperties(Zt.prototype,{textBlock:{get:function(){return this.ga},set:function(t){this.ga=t}},currentTextEditor:{get:function(){return this.m},set:function(t){this.m=t}},defaultTextEditor:{get:function(){return this.j},set:function(t){this.j=t}},starting:{get:function(){return this.V},set:function(t){this.V=t}},textValidation:{get:function(){return this.tj},set:function(t){this.tj=t}},minimumEditorScale:{get:function(){return this.u},set:function(t){this.u=t}},selectsTextOnActivate:{get:function(){return this.F},set:function(t){this.F=t}},state:{get:function(){return this.qa},set:function(t){this.qa!==t&&(this.qa=t)}}}),Zt.prototype.measureTemporaryTextBlock=Zt.prototype.Jx;var eM=new Q(Zt,"LostFocus",0),Sp=new Q(Zt,"MouseDown",1),K0=new Q(Zt,"Tab",2),Mp=new Q(Zt,"Enter",3),YL=new Q(Zt,"SingleClick",0),W0=new Q(Zt,"SingleClickSelected",1),iM=new Q(Zt,"DoubleClick",2),tf=new Q(Zt,"StateNone",0),ef=new Q(Zt,"StateActive",1),kp=new Q(Zt,"StateEditing",2),$0=new Q(Zt,"StateValidating",3),nf=new Q(Zt,"StateInvalid",4),J0=new Q(Zt,"StateValidated",5),fu=null;Zt.className="TextEditingTool",Zt.LostFocus=eM,Zt.MouseDown=Sp,Zt.Tab=K0,Zt.Enter=Mp,Zt.SingleClick=YL,Zt.SingleClickSelected=W0,Zt.DoubleClick=iM,Zt.StateNone=tf,Zt.StateActive=ef,Zt.StateEditing=kp,Zt.StateValidating=$0,Zt.StateInvalid=nf,Zt.StateValidated=J0,Tt("textEditingTool",function(){return this.findTool("TextEditing")},function(t){this.gb("TextEditing",t,this.mouseUpTools)});function yn(t){Tp||(sM(),Tp=!0),this.H=vh,this.Kk=this.zb=this.pq=this.Zb=!1,this.Mw=!0,this.Lk=Lp,this.Am=!1,this.Dh=this.Bd=!0,this.Ag=600,this.Zv=this.Kw=!1,this.Vd=new q,this.Zd=new ii,this.Zd.Ud=this,this.Bi=new q,this.mu=new q,this.Mr=new q,this.ir=new q,t&&Object.assign(this,t)}yn.prototype.Ue=function(t){this.H=t},yn.prototype.canStart=function(){return!0};function Go(t,e){t.Bd&&t.canStart(e)&&(t.Vd.add(e),t.defaultAnimation.isAnimating&&t.zc(),xi(t.H),t.zb=!0)}function Z0(t){if(t.Bd&&t.zb){var e=t.Zd,i=t.H,n=t.Vd.contains("Model");n&&(t.Kk=!0,t.Lk===Lp?(e.isViewportUnconstrained=!0,e.sc.clear(),e.add(i,"position",i.position.copy().offset(0,-200),i.position),e.add(i,"opacity",0,1)):t.Lk===uM&&e.sc.clear(),t.Mw=!!(t.Lk===lM&&i.au.C(i.pa)),i.R("InitialAnimationStarting",t)),n&&!t.Dh||e.sc.count===0?(t.Vd.clear(),t.zb=!1,e.sc.clear(),jp(e,i),t.Kk=!1,i.N()):(t.Vd.clear(),i.hg=!1,n=e.sc.get(i),i.autoScale!==mn&&n!==null&&(delete n.start.scale,delete n.end.scale),Y.requestAnimationFrame(function(){t.zb===!1||e.Zb||(i.Ef("temporaryPixelRatio")&&of(i),em(i),t.zb=!1,e.start(),e.Zb&&(gh(t),i.Ya(),aM(e,0),Xo(i,!0),yh(t),i.R("AnimationStarting",t)))}))}}function Np(t){return t.Vd.contains("Trigger")&&t.Vd.count===1}function nM(t,e,i,n){t.isTicking||Np(t)||e instanceof X&&(e.fromNode!==null||e.toNode!==null)||t.Zd.add(e,"position",i,n,!1)}o=yn.prototype,o.dv=function(t){return this.Zd.dv(t)},o.Vu=function(t){return this.Zd.Vu(t)};function HL(t,e){function i(){if(0<r.Mr.count&&(n.addAll(r.Mr),r.Mr.clear(),r.Zb=!0),r.Zb!==!1&&n.count!==0){r.mu.addAll(n);for(var s=r.mu.iterator;s.next();){var l=s.value;if(l.Zb!==!1){t:if(0<l.ul.count)var h=!0;else{for(h=l.sc.iterator;h.next();){var a=h.key;if(a instanceof ot&&a.diagram!==null||a instanceof D){h=!0;break t}}h=!1}h?hM(l,!1):l.Tk=!0}}r.mu.clear(),r.Zb!==!1&&(gh(r),Xo(r.H),yh(r)),Y.requestAnimationFrame(i)}}var n=t.Bi,r=t;t.Zb?t.Mr.add(e):(t.Zb=!0,n.add(e),Y.requestAnimationFrame(function(){i()}))}function _L(t){for(t=t.Bi.iterator;t.next();)t.value.Tk=!1}function gh(t){if(!t.pq){var e=t.H;t.Kw=e.skipsUndoManager,t.Zv=e.skipsModelSourceBindings,e.skipsUndoManager=!0,e.skipsModelSourceBindings=!0,t.pq=!0}}function yh(t){var e=t.H;e.skipsUndoManager=t.Kw,e.skipsModelSourceBindings=t.Zv,t.pq=!1}o.zc=function(t){var e=this.Zd;if(this.zb===!0&&(this.Kk=this.zb=!1,this.Vd.clear(),0<e.sc.count&&this.H.Wb()),this.Zb){if(e.Hl(!0),e.sc.clear(),jp(e,null),t===!0)for(t=this.Bi.Fa(),e=0;e<t.length;e++)t[e].Hl(!0)}else e.sc.clear(),jp(e,this.H)},o.Hl=function(t){t===this.defaultAnimation&&this.defaultAnimation.sc.clear(),this.Bi.remove(t),this.Bi.count===0&&(this.Zb=!1,this.H.Wb()),t===this.defaultAnimation&&(this.defaultAnimation.sc.clear(),this.H.R("AnimationFinished",this))},o.Aj=function(t,e){this.zb&&(this.Vd.contains("Expand Tree")||this.Vd.contains("Expand SubGraph"))&&(this.Zd.Aj(t,e),oM(this,t))},o.yj=function(t,e){this.zb&&(this.Vd.contains("Collapse Tree")||this.Vd.contains("Collapse SubGraph"))&&(this.Zd.yj(t,e),q0(this.Zd,e,"position",e.position,e.position),oM(this,t))};function rM(t,e,i){!t.zb||e.C(i)||Np(t)||(t.H.mi||(e=i.copy()),q0(t.Zd,t.H,"position",e,i))}function Q0(t,e,i){e.$c&&(e.Pg=i,t.ir.add(e))}function oM(t,e){for(e=e.findLinksConnected();e.next();){var i=e.value;i.$c&&(i.Pg=i.points.copy(),t.ir.add(i))}}function Pp(t,e,i,n,r){t===null&&(t=[0,0,0,0]),e===null&&(e=[0,0,0,0]);var s=t[0],l=t[1],h=t[2];t=t[3];var a=e[0],f=e[1],p=e[2];return e=e[3],h===0||h===100?(s=a,l=f):(p===0||p===100)&&(a=s,f=l),180<Math.abs(a-s)&&(a>s?s+=360:a+=360),s=r(i,s,a-s,n)%360,l=r(i,l,f-l,n),h=r(i,h,p-h,n),i=r(i,t,e-t,n),"hsla("+s+", "+l+"%, "+h+"%, "+i+")"}function sM(){function t(i,n,r,s,l,h){i.position=new P(s(l,n.x,r.x-n.x,h),s(l,n.y,r.y-n.y,h))}var e=new vt;e.add("position:diagram",t),e.add("position",t),e.add("position:part",function(i,n,r,s,l,h){l<h?i.jm(s(l,n.x,r.x-n.x,h),s(l,n.y,r.y-n.y,h),!1):i.position=new P(s(l,n.x,r.x-n.x,h),s(l,n.y,r.y-n.y,h))}),e.add("location",function(i,n,r,s,l,h){l<h?i.jm(s(l,n.x,r.x-n.x,h),s(l,n.y,r.y-n.y,h),!0):i.location=new P(s(l,n.x,r.x-n.x,h),s(l,n.y,r.y-n.y,h))}),e.add("position:placeholder",function(i,n,r,s,l,h){l<h?i.jm(s(l,n.x,r.x-n.x,h),s(l,n.y,r.y-n.y,h),!1):i.position=new P(s(l,n.x,r.x-n.x,h),s(l,n.y,r.y-n.y,h))}),e.add("position:nodeCollapse",function(i,n,r,s,l,h){var a=i.actualBounds,f=r.actualBounds;r=f.x+f.width/2-a.width/2,a=f.y+f.height/2-a.height/2,l<h?i.jm(s(l,n.x,r-n.x,h),s(l,n.y,a-n.y,h),!1):i.position=new P(s(l,n.x,r-n.x,h),s(l,n.y,a-n.y,h))}),e.add("desiredSize",function(i,n,r,s,l,h){i.desiredSize=new V(s(l,n.width,r.width-n.width,h),s(l,n.height,r.height-n.height,h))}),e.add("width",function(i,n,r,s,l,h){i.width=s(l,n,r-n,h)}),e.add("height",function(i,n,r,s,l,h){i.height=s(l,n,r-n,h)}),e.add("fill",function(i,n,r,s,l,h){i.fill=Pp(n,r,l,h,s)}),e.add("stroke",function(i,n,r,s,l,h){i.stroke=Pp(n,r,l,h,s)}),e.add("strokeWidth",function(i,n,r,s,l,h){i.strokeWidth=s(l,n,r-n,h)}),e.add("strokeDashOffset",function(i,n,r,s,l,h){i.strokeDashOffset=s(l,n,r-n,h)}),e.add("background",function(i,n,r,s,l,h){i.background=Pp(n,r,l,h,s)}),e.add("areaBackground",function(i,n,r,s,l,h){i.areaBackground=Pp(n,r,l,h,s)}),e.add("opacity",function(i,n,r,s,l,h){i.opacity=s(l,n,r-n,h)}),e.add("scale",function(i,n,r,s,l,h){i.scale=s(l,n,r-n,h)}),e.add("angle",function(i,n,r,s,l,h){i.angle=s(l,n,r-n,h)}),Cp=e}z.Object.defineProperties(yn.prototype,{animationReasons:{get:function(){return this.Vd}},isEnabled:{get:function(){return this.Bd},set:function(t){(this.Bd=t)&&this.Bi.each(function(e){e.isAnimating||e.runCount!==1/0||e.start()})}},duration:{get:function(){return this.Ag},set:function(t){1>t&&dt(t,">= 1",yn,"duration"),this.Ag=t}},isAnimating:{get:function(){return this.Zb}},isTicking:{get:function(){return this.pq}},isInitial:{get:function(){return this.Dh},set:function(t){this.Dh=t}},defaultAnimation:{get:function(){return this.Zd}},activeAnimations:{get:function(){return this.Bi}},initialAnimationStyle:{get:function(){return this.Lk},set:function(t){this.Lk=t}}}),yn.prototype.stopAnimation=yn.prototype.zc;var Cp=null,Tp=!1,Lp=new Q(yn,"Default",1),lM=new Q(yn,"AnimateLocations",2),uM=new Q(yn,"None",3);yn.className="AnimationManager",yn.defineAnimationEffect=function(t,e){Tp||(sM(),Tp=!0),Cp.add(t,e)},yn.Default=Lp,yn.AnimateLocations=lM,yn.None=uM;function ii(t){this.su=this.Jw=this.Ud=this.H=null,this.Tk=this.Zb=this.j=!1,this.$m=this.Jd=0,this.Gp=this.jt=fM,this.Sk=this.co=!1,this.$t=1,this.Yt=0,this.zd=this.Ag=NaN,this.cw=0,this.an=null,this.m=yo,this.sc=new vt,this.Qt=new vt,this.ul=new q,this.Rt=new q,this.$v=cl,t&&Object.assign(this,t)}ii.prototype.suspend=function(){this.Tk=!0},ii.prototype.advanceTo=function(t,e){e&&(this.Tk=!1),this.co&&t>=this.zd&&(this.Sk=!0,t-=this.zd),this.cw=t,hM(this,!0),gh(this.Ud),Xo(this.H),yh(this.Ud),this.H.redraw()};function jp(t,e){if(t.Qt.clear(),t.Sk=!1,t.Yt=0,t.zd=NaN,0<t.ul.count&&t.ul.clear(),0<t.Rt.count&&t.Rt.clear(),e!==null)for(t=e.links;t.next();)t.value.Pg=null}o=ii.prototype,o.start=function(){if(this.sc.count===0||this.Zb)return this;for(var t=this.H,e=this.sc.iterator;e.next();){var i=e.key;t===null&&(i instanceof D?t=i:i instanceof ot&&(t=i.diagram))}if(t!==null)this.H=t,this.Ud=t.animationManager;else return this;return e=this.Ud,e.isEnabled===!1?this:(this.zd=isNaN(this.Ag)?e.duration:this.Ag,this.Gp=this.jt,e.Kk&&e.Lk===Lp&&this===e.defaultAnimation&&(this.Gp=cM,this.zd=isNaN(this.Ag)?e.duration===600?900:e.duration:this.Ag),this.$v=t.scrollMode,this.isViewportUnconstrained&&(t.qj=Mm),gh(e),this.ul.each(function(n){n.data=null,t.add(n)}),yh(e),this.Zb=!0,this.Jd=+new Date,this.$m=this.Jd+this.zd,HL(e,this),this)},o.Ey=function(t,e){return t.Uc()?(this.ul.add(t),this.H=e,this):this},o.add=function(t,e,i,n,r){if(e==="position"&&i.Xa(n))return this;if(this.H===null&&(t instanceof D?this.H=t:t instanceof ot&&t.diagram!==null&&(this.H=t.diagram)),t instanceof lt){if(!t.isAnimated)return this;e==="position"&&(e="position:part")}return q0(this,t,e,i,n,r),this};function q0(t,e,i,n,r,s){var l=t.sc;if(e instanceof D&&i==="position"&&(i="position:diagram"),(i==="fill"||i==="stroke"||i==="background"||i==="areaBackground")&&(ko(n),Im(),n=[ln.j,ln.u,ln.m,ln.F],ko(r),Im(),r=[ln.j,ln.u,ln.m,ln.F]),l.contains(e)){var h=l.I(e),a=h.start,f=h.end;a[i]===void 0&&(a[i]=mh(n)),f[i]=mh(r)}else a={},f={},a[i]=mh(n),f[i]=mh(r),h=a.position,e instanceof ot&&h instanceof P&&!h.w()&&e.diagram.animationManager.Vd.contains("Expand SubGraph")&&h.assign(f.position),h=new pM(a,f,s),l.add(e,h);l=a[i],l instanceof P&&!l.w()&&l.assign(t.m),s&&i.indexOf("position:")===0&&e instanceof lt?h.Gu.location=mh(e.location):s&&(h.Gu[i]=mh(n))}function mh(t){return t instanceof P||t instanceof pt?t.copy():t}o.dv=function(t){return this.Zb?(t=this.sc.I(t),t!==null&&t.lv):!1},o.Vu=function(t){return this.Zb?(t=this.sc.I(t),t!==null&&(t.start.position||t.start.location)):!1};function hM(t,e){if(!t.Tk||e){var i=t.Ud;if(t.Zb!==!1){var n=+new Date,r=n>t.$m?t.zd:n-t.Jd;e&&(r=t.cw,r<t.zd?(t.Jd=+new Date-r,t.$m=t.Jd+t.zd):r=t.zd),gh(i),aM(t,r),Xo(t.H,!0),yh(i),n>t.$m&&(t.co&&!t.Sk?(t.Jd=+new Date,t.$m=t.Jd+t.zd,t.Sk=!0):t.Hl(!1))}}}function aM(t,e){for(var i=t.zd,n=t.sc.iterator,r=t.Sk;n.next();){var s=n.key;if(!(s instanceof ot&&s.diagram===null)){var l=n.value,h=r?l.end:l.start;l=r?l.start:l.end;var a=Cp,f;for(f in l)f==="position"&&(l["position:placeholder"]||l["position:nodeCollapse"])||a.get(f)===null||a.get(f)(s,h[f],l[f],t.Gp,e,i,t)}}}o.stop=function(){return this.Zb?(this.Hl(!0),this):this},o.Hl=function(t){if(this.su!==null&&this.su.fo.remove(this.Jw),this.Zb){var e=this.H,i=this.Ud;this.Tk=this.Zb=i.Kk=!1,gh(i);for(var n=this.sc,r=this.ul.iterator;r.next();)e.remove(r.value);for(r=this.Rt.iterator;r.next();)r.value.v();r=this.co,n=n.iterator;for(var s=Cp;n.next();){var l=n.key,h=n.value,a=r?h.end:h.start,f=r?h.start:h.end,p=h.Gu,d;for(d in f)if(s.get(d)!==null){var y=d;!h.Du||y!=="position:nodeCollapse"&&y!=="position:placeholder"||(y="position"),s.get(y)(l,a[d],p[d]!==void 0?p[d]:h.Du?a[d]:f[d],this.Gp,this.zd,this.zd,this)}h.Du&&p.location!==void 0&&l instanceof lt&&(l.location=p.location),h.lv&&l instanceof lt&&l.Vb(!1)}if(e.vs.clear(),Fp(e,!1),e.Ya(),e.N(),Xo(e,!0),i.defaultAnimation===this){for(d=i.ir.iterator;d.next();)r=d.value,r.Pg!==null&&(r.points=r.Pg,r.Pg=null);i.ir.clear()}Xo(e,!0),this.isViewportUnconstrained&&(e.scrollMode=this.$v),yh(i),this.Yt++,!t&&this.$t>this.Yt?(this.Sk=!1,this.start()):(this.an&&this.an(this),jp(this,null),i.Hl(this),e.Wb())}},o.Aj=function(t,e){var i=e.actualBounds,n=null;if(e instanceof yt&&(n=e.placeholder),n!==null?(i=n.ja(ei),n=n.padding,i.x+=n.left,i.y+=n.top,this.add(t,"position",i,t.position,!1)):this.add(t,"position",new P(i.x+i.width/2,i.y+i.height/2),t.position,!1),this.add(t,"scale",.01,t.scale,!1),t instanceof yt)for(t=t.memberParts;t.next();)n=t.value,n instanceof b&&this.Aj(n,e)},o.yj=function(t,e){if(t.isVisible()){var i=null;if(e instanceof yt&&(i=e.placeholder),i!==null){var n=i.ja(ei);i=i.padding,n.x+=i.left,n.y+=i.top,this.add(t,"position:placeholder",t.position,n,!0)}else this.add(t,"position:nodeCollapse",t.position,e,!0);if(this.add(t,"scale",t.scale,.01,!0),n=this.sc,n.contains(t)&&(n.I(t).lv=!0),t instanceof yt)for(t=t.memberParts;t.next();)n=t.value,n instanceof b&&this.yj(n,e)}},o.zz=function(t){var e=this.Qt.get(t);return e===null&&(e={},this.Qt.add(t,e)),e},z.Object.defineProperties(ii.prototype,{duration:{get:function(){return this.Ag},set:function(t){1>t&&dt(t,">= 1",ii,"duration"),this.Ag=t}},reversible:{get:function(){return this.co},set:function(t){this.co=t}},runCount:{get:function(){return this.$t},set:function(t){0<t?this.$t=t:R("Animation.runCount value must be a positive integer.")}},finished:{get:function(){return this.an},set:function(t){this.an!==t&&(this.an=t)}},easing:{get:function(){return this.jt},set:function(t){this.jt=t}},isViewportUnconstrained:{get:function(){return this.j},set:function(t){this.j=t}},isAnimating:{get:function(){return this.Zb}}}),ii.prototype.getTemporaryState=ii.prototype.zz,ii.prototype.stop=ii.prototype.stop,ii.prototype.add=ii.prototype.add,ii.prototype.addTemporaryPart=ii.prototype.Ey;function fM(t,e,i,n){return t/=n/2,1>t?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}function cM(t,e,i,n){return t===n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e}ii.className="Animation",ii.EaseLinear=function(t,e,i,n){return i*t/n+e},ii.EaseInOutQuad=fM,ii.EaseInQuad=function(t,e,i,n){return i*(t/=n)*t+e},ii.EaseOutQuad=function(t,e,i,n){return-i*(t/=n)*(t-2)+e},ii.EaseInExpo=function(t,e,i,n){return t===0?e:i*Math.pow(2,10*(t/n-1))+e},ii.EaseOutExpo=cM;function pM(t,e,i){this.start=t,this.end=e,this.Gu={},this.Du=i,this.lv=!1}pM.className="AnimationState";function $r(t,e,i){this.td=null,this.nf=t,this.po=i||dM,this.qk=null,e!==void 0&&(this.qk=e,i===void 0&&(this.po=b0))}$r.prototype.copy=function(){var t=new $r(this.nf);t.po=this.po;var e=this.qk;if(e!==null){var i={};e.duration!==void 0&&(i.duration=e.duration),e.finished!==void 0&&(i.finished=e.finished),e.easing!==void 0&&(i.easing=e.easing),t.qk=i}return t};function GL(t,e){t=t.qk,t!==null&&(t.duration&&(e.duration=t.duration),t.finished&&(e.finished=t.finished),t.easing&&(e.easing=t.easing))}z.Object.defineProperties($r.prototype,{propertyName:{get:function(){return this.nf},set:function(t){this.nf=t}},animationSettings:{get:function(){return this.qk},set:function(t){this.qk=t}},startCondition:{get:function(){return this.po},set:function(t){this.po=t}}});var dM=new Q($r,"Default",1),b0=new Q($r,"Immediate",2),gM=new Q($r,"Bundled",3);$r.className="AnimationTrigger",$r.Default=dM,$r.Immediate=b0,$r.Bundled=gM;function ni(t){Oe(this),this.H=null,this.Pa=new tt,this.wa="",this.qb=1,this.m=!1,this.j=this.Rh=this.u=this.Li=this.Ki=this.Ji=this.Ii=this.Gi=this.Hi=this.Fi=this.Ni=this.Ei=this.Mi=this.Di=this.Ci=!0,this.Tq=[],t&&Object.assign(this,t)}o=ni.prototype,o.clear=function(){for(var t=this.Pa,e=0;e<t.length;e++)av(t.s[e],null);t.clear(),this.Tq.length=0},o.Ue=function(t){this.H=t},o.toString=function(t){t===void 0&&(t=0);var e='Layer "'+this.name+'"';if(0>=t)return e;for(var i=0,n=0,r=0,s=0,l=0,h=this.Pa.iterator;h.next();){var a=h.value;a instanceof yt?r++:a instanceof b?n++:a instanceof X?s++:a instanceof jt?l++:i++}if(h="",0<i&&(h+=i+" Parts "),0<n&&(h+=n+" Nodes "),0<r&&(h+=r+" Groups "),0<s&&(h+=s+" Links "),0<l&&(h+=l+" Adornments "),1<t)for(t=this.Pa.iterator;t.next();)i=t.value,h+=`
    `+i.toString(),n=i.data,n!==null&&Ei(n)&&(h+=" #"+Ei(n)),i instanceof b?h+=" "+Gi(n):i instanceof X&&(h+=" "+Gi(i.fromNode)+" "+Gi(i.toNode));return e+" "+this.Pa.count+": "+h},o.ec=function(t,e,i){if(e===void 0&&(e=null),i===void 0&&(i=null),this.Rh===!1)return null;var n=!1;this.diagram!==null&&this.diagram.viewportBounds.ca(t)&&(n=!0);for(var r=P.alloc(),s=this.Pa.s,l=s.length;l--;){var h=s[l];if((n!==!0||js(h)!==!1)&&h.isVisible()&&(r.assign(t),yi(r,h.ke),h=h.ec(r,e,i),h!==null&&(e!==null&&(h=e(h)),h!==null&&(i===null||i(h)))))return P.free(r),h}return P.free(r),null},o.gi=function(t,e,i,n){if(e===void 0&&(e=null),i===void 0&&(i=null),n instanceof tt||n instanceof q||(n=new q),this.Rh===!1)return n;var r=!1;this.diagram!==null&&this.diagram.viewportBounds.ca(t)&&(r=!0);for(var s=P.alloc(),l=this.Pa.s,h=l.length;h--;){var a=l[h];if((r!==!0||js(a)!==!1)&&a.isVisible()){s.assign(t),yi(s,a.ke);var f=a;a.gi(s,e,i,n)&&(e!==null&&(f=e(f)),f===null||i!==null&&!i(f)||n.add(f))}}return P.free(s),n},o.Af=function(t,e,i,n,r){if(e===void 0&&(e=null),i===void 0&&(i=null),n===void 0&&(n=!1),r instanceof tt||r instanceof q||(r=new q),this.Rh===!1)return r;var s=!1;this.diagram!==null&&this.diagram.viewportBounds.Oe(t)&&(s=!0);for(var l=this.Pa.s,h=l.length;h--;){var a=l[h];if((s!==!0||js(a)!==!1)&&a.isVisible()){var f=a;a.Af(t,e,i,n,r)&&(e!==null&&(f=e(f)),f===null||i!==null&&!i(f)||r.add(f))}}return r},o.Lu=function(t,e,i,n,r,s,l){if(this.Rh===!1)return r;for(var h=this.Pa.s,a=h.length;a--;){var f=h[a];if((l!==!0||js(f)!==!1)&&s(f)&&f.isVisible()){var p=f;f.Af(t,e,i,n,r)&&(e!==null&&(p=e(p)),p===null||i!==null&&!i(p)||r.add(p))}}return r},o.lg=function(t,e,i,n,r,s){if(i===void 0&&(i=null),n===void 0&&(n=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof tt||r instanceof q)&&(s=r),r=!0),s instanceof tt||s instanceof q||(s=new q),this.Rh===!1)return s;var l=!1;this.diagram!==null&&this.diagram.viewportBounds.ca(t)&&(l=!0);for(var h=P.alloc(),a=P.alloc(),f=this.Pa.s,p=f.length;p--;){var d=f[p];if((l!==!0||js(d)!==!1)&&d.isVisible()){h.assign(t),yi(h,d.ke),a.h(t.x+e,t.y),yi(a,d.ke);var y=d;d.lg(h,a,i,n,r,s)&&(i!==null&&(y=i(y)),y===null||n!==null&&!n(y)||s.add(y))}}return P.free(h),P.free(a),s},o.yd=function(t,e){if(this.visible){var i=this.Pa.s,n=i.length;if(n!==0){t=Yt();for(var r=Yt(),s=0;s<n;s++){var l=i[s];if(l.rw=s,l instanceof X){if(l.$c===!1)continue}else if(l instanceof jt&&l.adornedPart!==null)continue;var h=l.actualBounds;l.isVisible()&&wS(h,e)?(l.yd(!0),t.push(l)):(l.yd(!1),l.adornments!==null&&0<l.adornments.count&&r.push(l))}for(e=0;e<t.length;e++)for(i=t[e],hv(i),i=i.adornments;i.next();)n=i.value,n.measure(1/0,1/0),n.arrange(),n.yd(!0);for(e=0;e<r.length;e++)hv(r[e]);Vt(t),Vt(r)}}};function rf(t,e){var i=1;return t.qb!==1&&(i=e.globalAlpha,e.globalAlpha=i*t.qb),i}o.cc=function(t,e,i){if(this.visible&&this.qb!==0&&(i===void 0&&(i=!0),i||!this.isTemporary)){i=this.Pa.s;var n=i.length;if(n!==0){if(t.isTemporary)for(var r=0;r<n;r++)i[r].Ej();r=rf(this,t);var s=this.Tq;s.length=0;for(var l=e.scale,h=V.alloc(),a=0;a<n;a++)this.Mj(t,i[a],e,s,l,h,!0);if(V.free(h),t.isTemporary)for(e=0;e<n;e++)i[e].Ej();t.globalAlpha=r}}};function XL(t,e,i,n,r){if(t.visible&&t.qb!==0&&(r||!t.isTemporary)){r=t.Pa.s;var s=r.length;if(s!==0){var l=rf(t,e),h=t.Tq;h.length=0;for(var a=i.scale,f=V.alloc(),p=0;p<s;p++){var d=r[p];n.contains(d)&&t.Mj(e,d,i,h,a,f,!1)}V.free(f),e.globalAlpha=l}}}o.Mj=function(t,e,i,n,r,s,l){if(l&&!js(e))t.Cs(e);else{if(n!==null&&e instanceof X&&(e.isOrthogonal&&n.push(e),e.$c===!1)){t.Cs(e);return}for(l=!1,n=e.containingGroup;n!==null;)l?n.ib!==null&&s.Ax(n.ib):n.ib!==null&&(l=!0,s.assign(n.ib)),n=n.containingGroup;var h=e.actualBounds;if(n=!1,l&&e.isVisible()){if(!s.Tc(h)){t.Cs(e);return}n=!s.Oe(h)}n&&(t.save(),t instanceof wn?t.Zj=s.copy():(t.beginPath(),t.rect(s.x,s.y,s.width,s.height),t.clip())),h.width*r>i.Iq||h.height*r>i.Iq?e.cc(t,i):(r=e.actualBounds,s=e.naturalBounds,r.width===0||r.height===0||isNaN(r.x)||isNaN(r.y)||!e.isVisible()||(i=e.transform,e.areaBackground!==null&&(sn(e,t,e.areaBackground,!0,!0,s,r),t.fillRect(r.x,r.y,r.width,r.height)),e.areaBackground===null&&e.background===null&&(sn(e,t,"rgba(0,0,0,0.3)",!0,!1,s,r),t.fillRect(r.x,r.y,r.width,r.height)),e.background!==null&&(t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),sn(e,t,e.background,!0,!1,s,r),t.fillRect(0,0,s.width/2,s.height/2),i.rs()||(e=1/(i.m11*i.m22-i.m12*i.m21),t.transform(i.m22*e,-i.m12*e,-i.m21*e,i.m11*e,e*(i.m21*i.dy-i.m22*i.dx),e*(i.m12*i.dx-i.m11*i.dy)))))),n&&(t.restore(),t.Qc(!0))}},o.g=function(t,e,i,n,r){var s=this.diagram;s!==null&&s.cb(Qt,t,this,e,i,n,r)},o.li=function(t,e,i){var n=this.Pa;if(av(e,this),t>=n.count)t=n.count;else if(n.L(t)===e)return-1;return n.Eb(t,e),e.Qo(i),n=this.diagram,n!==null&&(i?n.N():n.li(e)),Ep(this,t,e),t},o.mc=function(t,e,i){if(!i&&e.layer!==this&&e.layer!==null)return e.layer.mc(t,e,i);var n=this.Pa;if(0>t||t>=n.length){if(t=n.indexOf(e),0>t)return-1}else if(n.L(t)!==e&&(t=n.indexOf(e),0>t))return-1;return e.Ro(i),n.nb(t),n=this.diagram,n!==null&&(i?n.N():n.mc(e)),av(e,null),t};function Ep(t,e,i){if(e=KL(t,e,i),i instanceof yt&&i!==null&&isNaN(i.zOrder)){if(i.memberParts.count!==0){for(var n=-1,r=t.Pa.s,s=r.length,l=0;l<s;l++){var h=r[l];if(h===i&&(e=l,0<=n)||0>n&&h.containingGroup===i&&(n=l,0<=e))break}!(0>n)&&n<e&&(r=t.Pa,r.nb(e),r.Eb(n,i))}e=i.containingGroup,e!==null&&Ep(t,-1,e)}i.svg!==null&&i.svg.remove()}function KL(t,e,i){var n=i.zOrder;if(isNaN(n))return e;t=t.Pa;var r=t.count;if(1>=r)return e;if(0>e&&(e=t.indexOf(i)),0>e)return-1;for(var s=e-1,l=NaN;0<=s&&(l=t.L(s).zOrder,!!isNaN(l));)s--;for(var h=e+1,a=NaN;h<r&&(a=t.L(h).zOrder,!!isNaN(a));)h++;if(!isNaN(l)&&l>n)for(;;){if(s===-1||l<=n){if(s++,s===e)break;return t.nb(e),t.Eb(s,i),s}for(l=NaN;0<=--s&&(l=t.L(s).zOrder,isNaN(l)););}else if(!isNaN(a)&&a<n)for(;;){if(h===r||a>=n){if(h--,h===e)break;return t.nb(e),t.Eb(h,i),h}for(a=NaN;++h<r&&(a=t.L(h).zOrder,isNaN(a)););}return e}z.Object.defineProperties(ni.prototype,{parts:{get:function(){return this.Pa.iterator}},partsBackwards:{get:function(){return this.Pa.iteratorBackwards}},diagram:{get:function(){return this.H}},name:{get:function(){return this.wa},set:function(t){var e=this.wa;if(e!==t){var i=this.diagram;if(i!==null)for(e===""&&R("Cannot rename default Layer to: "+t),i=i.layers;i.next();)i.value.name===t&&R("Layer.name is already present in this diagram: "+t);for(this.wa=t,this.g("name",e,t),t=this.Pa.iterator;t.next();)t.value.layerName=this.wa}}},opacity:{get:function(){return this.qb},set:function(t){var e=this.qb;e!==t&&((0>t||1<t)&&dt(t,"0 <= value <= 1",ni,"opacity"),this.qb=t,this.g("opacity",e,t),t=this.diagram,t!==null&&t.N())}},isTemporary:{get:function(){return this.m},set:function(t){var e=this.m;e!==t&&((this.m=t)&&(this.isInDocumentBounds=!1),this.g("isTemporary",e,t))}},visible:{get:function(){return this.u},set:function(t){var e=this.u;if(e!==t){for(this.u=t,this.g("visible",e,t),e=this.Pa.iterator;e.next();)e.value.Vb(t);t=this.diagram,t!==null&&t.N()}}},pickable:{get:function(){return this.Rh},set:function(t){var e=this.Rh;e!==t&&(this.Rh=t,this.g("pickable",e,t))}},isInDocumentBounds:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,this.diagram!==null&&this.diagram.Ya())}},allowCopy:{get:function(){return this.Ci},set:function(t){var e=this.Ci;e!==t&&(this.Ci=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Di},set:function(t){var e=this.Di;e!==t&&(this.Di=t,this.g("allowDelete",e,t))}},allowTextEdit:{get:function(){return this.Mi},set:function(t){var e=this.Mi;e!==t&&(this.Mi=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Ei},set:function(t){var e=this.Ei;e!==t&&(this.Ei=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Ni},set:function(t){var e=this.Ni;e!==t&&(this.Ni=t,this.g("allowUngroup",e,t))}},allowLink:{get:function(){return this.Fi},set:function(t){var e=this.Fi;e!==t&&(this.Fi=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Hi},set:function(t){var e=this.Hi;e!==t&&(this.Hi=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Gi},set:function(t){var e=this.Gi;e!==t&&(this.Gi=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Ii},set:function(t){var e=this.Ii;e!==t&&(this.Ii=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Ji},set:function(t){var e=this.Ji;e!==t&&(this.Ji=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Ki},set:function(t){var e=this.Ki;e!==t&&(this.Ki=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Li},set:function(t){var e=this.Li;e!==t&&(this.Li=t,this.g("allowSelect",e,t))}}}),ni.prototype.findObjectsNear=ni.prototype.lg,ni.prototype.findObjectsIn=ni.prototype.Af,ni.prototype.findObjectsAt=ni.prototype.gi,ni.prototype.findObjectAt=ni.prototype.ec,ni.className="Layer";function D(t,e){if(GM||(rj(),GM=!0),Oe(this),vh=this,this.vb=!0,this.Ka=null,this.Ba=this.Ca=0,this.xa=null,$n){var i=this,n=function(){i.removeEventListener(Y.document,"DOMContentLoaded",n,!1),i.setRTL()};Y.document.body!==null?this.setRTL():i.addEventListener(Y.document,"DOMContentLoaded",n,!1)}this.kl=null,Bp.add("Model",Bt);var r=this;return this.Fb=function(s){var l=r.partManager;if(s.model===l.diagram.model&&l.diagram.aa){l.diagram.aa=!1;try{var h=s.change;s.modelChange===""&&h===Qt&&l.updateDataBindings(s.object,s.propertyName)}finally{l.diagram.aa=!0}}},this.Lc=function(s){r.partManager.doModelChanged(s)},this.eu=this.hu=null,mM(this),this.model=Vv(),this.Sg=!0,wM(this),this.layout=new Jt,this.Sg=!1,this.$j=this.bk=this.ck=this.ak=this.ri=this.Vz=this.Xj=this.Kv=null,this.Xl=function(){},this.preventDefault=null,this.on=!1,this.Ch=new XM,t!==void 0&&(typeof t=="string"||Y.Element&&t instanceof Element?tm(this,t):e=t),this.vb=!1,e&&this.km(e),this}var yM,vh;function mM(t){t.Ud=new yn,t.Ud.Ue(t),t.Db=17,t.Cw=!1,t.qn=!1,t.Zt="default",t.Wa=new tt,t.nj=new vt,t.jl="default",t.Sx(),t.Rx(),t.qb=1,t.pa=new P(NaN,NaN).freeze(),t.au=new P(NaN,NaN),t.Aa=1,t.Kp=1,t.ut=new P(NaN,NaN).freeze(),t.vt=NaN,t.Lt=1e-4,t.Ht=100,t.Ab=new Nt,t.wu=new P(NaN,NaN).freeze(),t.pt=new V(NaN,NaN,NaN,NaN).freeze(),t.pj=new Rt(0,0,0,0).freeze(),t.qj=cl,t.ku=!1,t.Wt=null,t.cu=null,t.uh=mn,t.vk=Je,t.Cg=mn,t.jq=Je,t.tt=ei,t.wt=ei,t.Cc=!0,t.mn=!1,t.Ae=new q,t.Ah=new vt,t.Um=!0,t.pp=250,t.rk=-1,t.rp=new Rt(16,16,16,16).freeze(),t.hg=!1,t.Fk=!1,t.cn=!0,t.Wp=new gn,t.Wp.diagram=t,t.Mg=new gn,t.Mg.diagram=t,t.$i=new gn,t.$i.diagram=t,t.wg=null,t.lf=null,t.nu=!1,ij(t),t.Yh=new q,t.Ct=!0,t.ru=pu,t.lw=!1,t.tu=Sm,t.ct="auto",t.Jp="auto",t.vh=null,t.Bh=null,t.xh=null,t.Nh=null,t.Lh=null,t.Kh=null,t.Nt=null,t.Ih=null,t.st=!1,t.Jh=null,t.Mh=null,t.Xh=null,t.yh=null,t.Ot=!1,t.Vt={},t.mj=[null,null],t.Sg=!1,t.Ew=!1,t.lu=!1,t.ft=!1,t.nw=!0,t.dd=!1,t.Xi=!1,t.Pw=!0,t.ze=-2,t.Kg=new vt,t.Un=new tt,t.Dg=!1,t.Bd=!0,t.Ps=!0,t.Ci=!0,t.Di=!0,t.Qs=!1,t.Rs=!0,t.Mi=!0,t.Ei=!0,t.Ni=!0,t.Ts=!0,t.Fi=!0,t.Hi=!0,t.Gi=!0,t.Ii=!0,t.Ji=!0,t.Ki=!0,t.Li=!0,t.Us=!0,t.Ws=!0,t.mw=!1,t.Rk=!1,t.jn=!0,t.kn=!0,t.Ss=!0,t.Vs=!0,t.fu=16,t.ju=16,t.jr=!1,t.du=!1,t.iu=0,t.gu=0,t.yb=new Rt(5).freeze(),t.Dw=new q().freeze(),t.It=999999999,t.jw=new q().freeze(),t.Wi=!0,t.Be=!0,t.rd=!0,t.ye=!1,t.df=!1,t.th=!0,t.ef=!1,t.qy=new q,t.kw=new q,t.Uh=null,t.Xv=new pt(8,8),t.Yv=999,t.xw=1,t.Fw=0,t.kd={scale:1,position:new P,bounds:new V,Zw:new pt,Kx:new pt,Ex:!1},t.Nw=new V(NaN,NaN,NaN,NaN).freeze(),t.to=new pt(NaN,NaN).freeze(),t.Np=new V(NaN,NaN,NaN,NaN).freeze(),t.Dt=!1,t.Hg=new vt;var e=new b,i=new Gt;i.bind(new ce("text","",Gi)),e.add(i),t.my=e,t.Hg.add("",e),e=new b,i=new Gt,i.stroke="brown",i.bind(new ce("text","",Gi)),e.add(i),t.Hg.add("Comment",e),e=new b,e.selectable=!1,e.avoidable=!1,i=new wt,i.figure="Ellipse",i.fill="black",i.stroke=null,i.desiredSize=new pt(3,3).ha(),e.add(i),t.Hg.add("LinkLabel",e),t.Vi=new vt,e=new yt,e.selectionObjectName="GROUPPANEL",e.type=_.Vertical,i=new Gt,i.font="bold 12pt sans-serif",i.bind(new ce("text","",Gi)),e.add(i),i=new _(_.Auto),i.name="GROUPPANEL";var n=new wt;n.figure="Rectangle",n.fill="rgba(128,128,128,0.2)",n.stroke="black",i.add(n),n=new Si,n.padding=new Rt(5,5,5,5).ha(),i.add(n),e.add(i),t.ky=e,t.Vi.add("",e),t.Hh=new vt,e=new X,i=new wt,i.isPanelMain=!0,e.add(i),i=new wt,i.toArrow="Standard",i.fill="black",i.stroke=null,i.strokeWidth=0,e.add(i),t.ly=e,t.Hh.add("",e),e=new X,i=new wt,i.isPanelMain=!0,i.stroke="brown",e.add(i),t.Hh.add("Comment",e),e=new jt,e.type=_.Auto,i=new wt,i.fill=null,i.stroke="dodgerblue",i.strokeWidth=3,e.add(i),i=new Si,i.margin=new Rt(1.5,1.5,1.5,1.5).ha(),e.add(i),t.Pt=e,t.rt=e,e=new jt,e.type=_.Link,i=new wt,i.isPanelMain=!0,i.fill=null,i.stroke="dodgerblue",i.strokeWidth=3,e.add(i),t.Ft=e,t.be=null,t.gq=!1,t.yk=null,t.partManager=new Bt,t.toolManager=new ne,t.toolManager.initializeStandardTools(),t.defaultTool=t.toolManager,t.currentTool=t.defaultTool,t.ht=null,t.Tm=new Nh,t.St=null,t.Tt=null,t.Gr=!1,t.commandHandler=xM(),t.Yp=null,t.Zp=cp,t.Lw=!1,t.Pb=1,t.Vh=null,t.Iq=1,t.Mq=0,t.vw=[0,0,0,0,0],t.Nq=0,t.sq=1,t.pw=0,t.qw=new P,t.yy=500,t.qp=new P,t.qq=!1}D.prototype.clear=function(){this.animationManager.zc(),this.model.clear(),Sh=null,hf="",vM(this,!1),this.Un.clear(),zh(),this.Kg.clear(),this.Uh=null,this.Ya(),this.Va(),this.N()};function vM(t,e){t.animationManager.zc(!0),t.Dw=new q().freeze(),t.jw=new q().freeze();var i=t.skipsUndoManager,n=t.$b!==null&&t.$b!==void 0;n&&(t.skipsUndoManager=!0);var r=null;t.be!==null&&(r=t.be.part,r!==null&&t.remove(r));var s=[],l=t.Wa.length;if(e){for(e=0;e<l;e++)for(var h=t.Wa.s[e].parts;h.next();){var a=h.value;a!==r&&a.data===null&&s.push(a)}for(e=0;e<s.length;e++)t.remove(s[e])}for(e=0;e<l;e++)t.Wa.s[e].clear();return t.partManager.clear(),t.Ae.clear(),t.Ah.clear(),t.Yh.clear(),t.yk=null,t.Un.clear(),zh(),t.Kg.clear(),ai=[],r!==null&&(t.add(r),t.partManager.parts.remove(r)),n&&(t.skipsUndoManager=i),s}function xM(){return null}D.prototype.reset=function(){this.clear(),this.vb=!0,mM(this),$o(this),this.Sg=!0,wM(this),this.layout=new Jt,this.Sg=!1,this.model=Vv(),this.model.undoManager=new ue,this.vb=this.on=!1,this.N()},D.prototype.setRTL=function(t){t=t===void 0?this.div:t,t===null&&(t=Y.document.body);var e=J("div");e.dir="rtl",e.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",e.textContent="A",t.appendChild(e);var i="reverse";0<e.scrollLeft?i="default":(e.scrollLeft=1,e.scrollLeft===0&&(i="negative")),t.removeChild(e),this.Zt=i},D.prototype.setScrollWidth=function(t){t=t===void 0?this.div:t,t===null&&(t=Y.document.body);var e=0;if($n){var i=BM;e=yM,i===null&&(i=BM=J("p"),i.style.width="100%",i.style.height="200px",i.style.boxSizing="content-box",e=yM=J("div"),e.style.position="absolute",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.boxSizing="content-box",e.appendChild(i)),e.style.overflow="hidden",t.appendChild(e);var n=i.offsetWidth;e.style.overflow="scroll",i=i.offsetWidth,n===i&&(i=e.clientWidth),t.removeChild(e),e=n-i,e!==0||ke||(e=11)}this.Db=e,this.Cw=!0},D.prototype.rb=function(t){t.classType===D&&(this.autoScale=t)},D.prototype.toString=function(t){t===void 0&&(t=0);var e="";if(this.div&&this.div.id&&(e=this.div.id),e='Diagram "'+e+'"',0>=t)return e;for(var i=this.Wa.iterator;i.next();)e+=`
  `+i.value.toString(t-1);return e};function tm(t,e){if($n){if(e!=null||R("Diagram setup requires an argument DIV."),t.Ka!==null&&R("Diagram has already completed setup."),typeof e=="string"?t.Ka=Y.document.getElementById(e):e instanceof HTMLDivElement?t.Ka=e:R("No DIV or DIV id supplied: "+e),t.Ka===null&&R("Invalid DIV id; could not get element with id: "+e),t.Ka.H!==void 0&&R("Invalid div id; div already has a Diagram associated with it."),!t.kl&&Y.ResizeObserver){var i=K(function(){t.Wb()},250);t.kl=new Y.ResizeObserver(function(){i()}),t.kl.observe(t.Ka)}Y.getComputedStyle(t.Ka,null).position==="static"&&(t.Ka.style.position="relative"),e=5;var n="rgba(2"+e+"5, 255, 255, 0)";e--,t.Ka.style["-webkit-tap-highlight-color"]=n,t.Ka.innerHTML="",t.Ka.H=t,t.Ka.goDiagram=t,t.Ka.go=Y.go;var r=new In(t);if(r.style!==void 0&&(r.style.position="absolute",r.style.top="0px",r.style.left="0px",Y.getComputedStyle(t.Ka,null).getPropertyValue("direction")==="rtl"&&(t.qn=!0),r.style.zIndex="2",r.style.userSelect="none",r.style.MozUserSelect="none",r.style.touchAction="none"),t.xa=r,t.jb=r.context,n=t.jb,t.Pb=t.computePixelRatio(),t.viewSize.w()||(t.Ca=t.Ka.clientWidth||1,t.Ba=t.Ka.clientHeight||1),NM(t,t.Ca,t.Ba),t.Ka.insertBefore(r.La,t.Ka.firstChild),r=new In(null),r.width=1,r.height=1,t.fw=r,t.ny=r.context,$n){r=J("div");var s=J("div");r.style.position="absolute",r.style.overflow="auto",r.style.width=t.Ca+"px",r.style.height=t.Ba+"px",r.style.zIndex="1",s.style.position="absolute",s.style.width="1px",s.style.height="1px",t.Ka.appendChild(r),r.appendChild(s),r.onscroll=$L,r.addEventListener("pointerdown",JL),r.H=t,r.ty=!0,r.uy=!0,t.hu=r,t.eu=s}t.Xl=K(function(){t.Vh=null,t.N()},300),t.Kv=K(function(){em(t)},250),t.preventDefault=function(l){return l.preventDefault(),!1},t.Xj=function(l){if(t.isEnabled){var h=cu(t,l,!0);h.bubbles=!0;var a=0,f=0;h.delta=0,l.deltaX!==void 0?(l.deltaX!==0&&(a=0<l.deltaX?1:-1),l.deltaY!==0&&(f=0<l.deltaY?1:-1),h.delta=Math.abs(l.deltaX)>Math.abs(l.deltaY)?-a:-f):l.wheelDeltaX!==void 0?(l.wheelDeltaX!==0&&(a=0<l.wheelDeltaX?-1:1),l.wheelDeltaY!==0&&(f=0<l.wheelDeltaY?-1:1),h.delta=Math.abs(l.wheelDeltaX)>Math.abs(l.wheelDeltaY)?-a:-f):l.wheelDelta!==void 0&&l.wheelDelta!==0&&(h.delta=0<l.wheelDelta?1:-1),t.doMouseWheel(),fl(h,l)}},t.Vz=function(l){t.isEnabled&&(t.Rk=!1,cu(t,l,!0),l=t.currentTool,l.cancelWaitAfter(),l.standardMouseOver())},t.ri=function(l){if(t.isEnabled){t.Rk=!0;var h=t.Vt;h[l.pointerId]===void 0&&(h[l.pointerId]=l),h=t.mj;var a=!1;if(h[0]===null||h[0].pointerId!==l.pointerId&&h[0].pointerType===l.pointerType)if(h[1]!==null&&h[1].pointerId===l.pointerId)h[1]=l,a=!0;else if(h[0]===null)h[0]=l;else if(h[1]===null)h[1]=l,a=!0;else{l.preventDefault();return}else h[0]=l;(h=l.pointerType==="touch"||l.pointerType==="pen")&&(t.nu=!1,t.qq=!0);var f=a;a=om(t,l,!0,!1,!0,f),sf(t,l,a),a.targetDiagram=rm(l,l.target),a.targetObject=null,f||a.clone(t.Wp),f=t.qw,h=h?25:10,l.timeStamp-t.pw<t.yy&&!(Math.abs(f.x-l.screenX)>h||Math.abs(f.y-l.screenY)>h)?t.sq++:t.sq=1,a.clickCount=t.sq,t.pw=l.timeStamp,t.qw.pg(l.screenX,l.screenY),t.doMouseDown(),l.button===1?l.preventDefault():fl(a,l)}},t.ak=function(l){if(t.isEnabled){t.Rk=!0;var h=t.mj;if(h[0]===null||h[0].pointerId!==l.pointerId&&h[0].pointerType===l.pointerType){if(h[1]!==null&&h[1].pointerId===l.pointerId){h[1]=l;return}if(h[0]===null)h[0]=l;else return}else h[0]=l;if(h[0].pointerId===l.pointerId){h=om(t,l,!1,!1,!1,h[1]!==null);var a=Y.document.elementFromPoint(l.clientX,l.clientY)||null;a!==null&&a.shadowRoot!==void 0&&a.shadowRoot!==null&&(a=a.shadowRoot.elementFromPoint(l.clientX,l.clientY));var f=t,p=l;a&&a.H&&(p=l,f=a.H),h.targetDiagram=f,sf(t,p,h),h.targetObject=null,t.doMouseMove(),fl(h,l)}}},t.ck=function(l){if(t.isEnabled){t.Rk=!0;var h=l.pointerType==="touch"||l.pointerType==="pen",a=t.Vt;if(h&&t.nu)delete a[l.pointerId],l.preventDefault();else if(a=t.mj,a[0]===null||a[0].pointerId!==l.pointerId&&a[0].pointerType===l.pointerType)a[1]!==null&&a[1].pointerId===l.pointerId&&(a[1]=null);else{a[0]=null,a=om(t,l,!1,!0,!0,!1);var f=Y.document.elementFromPoint(l.clientX,l.clientY)||null;f!==null&&f.shadowRoot!==void 0&&f.shadowRoot!==null&&(f=f.shadowRoot.elementFromPoint(l.clientX,l.clientY)),f!==null&&f.H instanceof D&&f.H!==t&&sf(f.H,l,a),f===null&&(f=l.target),sf(t,l,a),a.clickCount=t.sq,a.targetDiagram=rm(l,f),a.targetObject=null,t.doMouseUp(),fl(a,l),h&&(t.qq=!1)}}},t.bk=function(l){if(t.isEnabled){t.Rk=!1;var h=t.Vt;h[l.pointerId]&&delete h[l.pointerId],h=t.mj,h[0]!==null&&h[0].pointerId===l.pointerId&&(h[0]=null),h[1]!==null&&h[1].pointerId===l.pointerId&&(h[1]=null),l.pointerType!=="touch"&&l.pointerType!=="pen"&&(l=t.currentTool,l.cancelWaitAfter(),l.standardMouseOver())}},t.$j=function(l){var h=t.mj;h[0]!==null&&h[0].pointerId===l.pointerId?(h[0]=null,t.qq=!1):h[1]!==null&&h[1].pointerId===l.pointerId&&(h[1]=null)},t.it=n.Z["d"+KM[1]+KM[2]+"wI"+kh.slice(1,5)]["b"+Mj.slice(1,e)](n.Z,_M,e,e),n.Qc(!0),WL(t),t.jl==="svg"&&(e=t.nj.get("svg"),t.Ka.appendChild(e.La),t.jb=e.context)}}D.prototype.addEventListener=function(t,e,i,n){t.addEventListener(e,i,{capture:n,passive:!1})},D.prototype.removeEventListener=function(t,e,i,n){t.removeEventListener(e,i,{capture:n})};function WL(t){var e=t.xa.La;e instanceof HTMLCanvasElement||(e=t.div),t.addEventListener(e,"pointerdown",t.ri,!1),t.addEventListener(e,"pointermove",t.ak,!1),t.addEventListener(e,"pointerup",t.ck,!1),t.addEventListener(e,"pointerout",t.bk,!1),t.addEventListener(e,"pointercancel",t.$j,!1),t.addEventListener(e,"pointerenter",t.Xy,!1),t.addEventListener(e,"pointerleave",t.Yy,!1),t.addEventListener(e,"wheel",t.Xj,!1),t.addEventListener(e,"keydown",t.Kz,!1),t.addEventListener(e,"keyup",t.Lz,!1),t.addEventListener(e,"blur",t.Jy,!1),t.addEventListener(e,"focus",t.Ky,!1),t.addEventListener(e,"selectstart",function(i){return i.preventDefault(),!1},!1),t.addEventListener(e,"contextmenu",function(i){return i.preventDefault(),!1},!1),t.addEventListener(Y,"resize",t.Kv,!1)}function of(t){30<t.Mq&&(t.Vh=1)}function Fp(t,e){t.Vh!==null&&(t.Vh=null,e&&t.Xl(),ks&&ks.kx||(t.Mq=0,t.vw=[0,0,0,0,0],t.Nq=0))}D.prototype.computePixelRatio=function(){return this.Vh!==null?this.Vh:Y.devicePixelRatio||1},D.prototype.doMouseMove=function(){this.currentTool.doMouseMove()},D.prototype.doMouseDown=function(){this.currentTool.doMouseDown()},D.prototype.doMouseUp=function(){this.currentTool.doMouseUp()},D.prototype.doMouseWheel=function(){this.currentTool.doMouseWheel()},D.prototype.doKeyDown=function(){this.currentTool.doKeyDown()},D.prototype.doKeyUp=function(){this.currentTool.doKeyUp()},D.prototype.doFocus=function(){this.focus()},D.prototype.focus=function(){if(this.xa)if(this.scrollsPageOnFocus)this.xa.focus();else{var t=Y.scrollX||Y.pageXOffset,e=Y.scrollY||Y.pageYOffset;this.xa.focus(),Y.scrollTo(t,e)}},D.prototype.Ky=function(){this.H.R("GainedFocus")},D.prototype.Jy=function(){this.H.R("LostFocus")};function em(t){if(t.xa!==null){var e=t.Ka;if(e!==null&&e.clientWidth!==0&&e.clientHeight!==0){t.Cw||t.setScrollWidth();var i=t.df?t.Db:0,n=t.ye?t.Db:0,r=t.Pb;t.Pb=t.computePixelRatio(),t.Pb!==r&&(t.mn=!0,t.Wb()),(e.clientWidth!==t.Ca+i||e.clientHeight!==t.Ba+n)&&(t.Be=!0,t.Cc=!0,e=t.layout,e!==null&&e.isViewportSized&&t.autoScale===mn&&(t.Fk=!0,e.D()),t.dd||t.Wb())}}}function wM(t){var e=new ni;e.name="Background",t.wl(e),e=new ni,e.name="",t.wl(e),e=new ni,e.name="Foreground",t.wl(e),e=new ni,e.name="Adornment",e.isTemporary=!0,e.isInDocumentBounds=!1,t.wl(e),e=new ni,e.name="Tool",e.isTemporary=!0,e.isInDocumentBounds=!0,t.wl(e),e=new ni,e.name="Grid",e.allowSelect=!1,e.pickable=!1,e.isTemporary=!0,e.isInDocumentBounds=!1,t.Sw(e,t.Oj("Background"))}function SM(t){var e=new _(_.Grid);e.name="GRID";var i=new wt;return i.figure="LineH",i.stroke="lightgray",i.strokeWidth=.5,i.interval=1,e.add(i),i=new wt,i.figure="LineH",i.stroke="gray",i.strokeWidth=.5,i.interval=5,e.add(i),i=new wt,i.figure="LineH",i.stroke="gray",i.strokeWidth=1,i.interval=10,e.add(i),i=new wt,i.figure="LineV",i.stroke="lightgray",i.strokeWidth=.5,i.interval=1,e.add(i),i=new wt,i.figure="LineV",i.stroke="gray",i.strokeWidth=.5,i.interval=5,e.add(i),i=new wt,i.figure="LineV",i.stroke="gray",i.strokeWidth=1,i.interval=10,e.add(i),i=new lt,i.add(e),i.layerName="Grid",i.zOrder=0,i.isInDocumentBounds=!1,i.isAnimated=!1,i.pickable=!1,i.locationObjectName="GRID",t.add(i),t.partManager.parts.remove(i),e.visible=!1,e}function $L(){this.H.du?this.H.du=!1:this.H.isEnabled?this.H.ix(this):lm(this.H)}function JL(t){this.H.isEnabled?(this.H.iu=t.target.scrollTop,this.H.gu=t.target.scrollLeft):lm(this.H)}D.prototype.ix=function(t){if(this.xa!==null){var e=this.hu,i=this.eu;this.jr=!0;var n=this.documentBounds,r=this.viewportBounds,s=this.pj,l=n.x-s.left,h=n.y-s.top,a=n.width+s.left+s.right,f=n.height+s.top+s.bottom,p=n.right+s.right;s=n.bottom+s.bottom;var d=r.x;n=r.y;var y=r.width,x=r.height,v=r.right,S=r.bottom;r=this.scale;var N=t.scrollLeft;if(this.qn)switch(this.Zt){case"negative":N=N+t.scrollWidth-t.clientWidth;break;case"reverse":N=t.scrollWidth-N-t.clientWidth}var k=N;y<a||x<f?(N=P.allocAt(this.position.x,this.position.y),this.allowHorizontalScroll&&this.gu!==k&&(N.x=k/r+l,this.gu=k),this.allowVerticalScroll&&this.iu!==t.scrollTop&&(N.y=t.scrollTop/r+h,this.iu=t.scrollTop),this.position=N,P.free(N),this.Be=this.jr=!1):(N=P.alloc(),t.ty&&this.allowHorizontalScroll&&(l<d&&(this.position=N.h(k+l,this.position.y)),p>v&&(this.position=N.h(-(e.scrollWidth-this.Ca)+k-this.Ca/r+p,this.position.y))),t.uy&&this.allowVerticalScroll&&(h<n&&(this.position=N.h(this.position.x,t.scrollTop+h)),s>S&&(this.position=N.h(this.position.x,-(e.scrollHeight-this.Ba)+t.scrollTop-this.Ba/r+s))),P.free(N),this.rd=!0,this.Be=this.jr=!1,n=this.documentBounds,r=this.viewportBounds,p=n.right,v=r.right,s=n.bottom,S=r.bottom,l=n.x,d=r.x,h=n.y,n=r.y,y>=a&&l>=d&&p<=v&&(i.style.width="1px"),x>=f&&h>=n&&s<=S&&(i.style.height="1px"))}},D.prototype.computeBounds=function(t){return t===void 0&&(t=new V),xi(this),MM(this,t)};function MM(t,e){if(t.fixedBounds.w())return e.assign(t.fixedBounds),e.zo(t.yb),e;for(var i=!0,n=t.Wa.s,r=n.length,s=0;s<r;s++){var l=n[s];if(l.visible&&l.isInDocumentBounds){l=l.Pa.s;for(var h=l.length,a=0;a<h;a++){var f=l[a];f.isInDocumentBounds&&f.isVisible()&&(f=f.actualBounds,f.w()&&(i?(i=!1,e.assign(f)):e.Zc(f)))}}}return i&&e.h(0,0,0,0),e.zo(t.yb),e}D.prototype.computePartsBounds=function(t,e){e===void 0&&(e=!1);var i=null;if(Wt(t))for(var n=0;n<t.length;n++){var r=t[n];!e&&r instanceof X||(r.Va(),i===null?i=r.actualBounds.copy():i.Zc(r.actualBounds))}else for(t=t.iterator;t.next();)n=t.value,!e&&n instanceof X||(n.Va(),i===null?i=n.actualBounds.copy():i.Zc(n.actualBounds));return i===null?new V(NaN,NaN,0,0):i};function pr(t,e){if((e||t.ef)&&!t.vb&&t.xa!==null&&t.documentBounds.w()){if(t.vb=!0,e){var i=t.initialPosition;if(i.w()){t.vb=!1,t.position=i;return}i=P.alloc(),i.ui(t.documentBounds,t.initialDocumentSpot);var n=t.viewportBounds;n=V.allocAt(0,0,n.width,n.height);var r=P.alloc();r.ui(n,t.initialViewportSpot),r.h(i.x-r.x,i.y-r.y),t.position=r,V.free(n),P.free(r),P.free(i)}i=t.uh,e&&t.Cg!==mn&&(i=t.Cg);var s=i!==mn?xh(t,i):t.scale;i=t.pa.x,n=t.pa.y,r=t.Ca/s;var l=t.Ba/s,h=t.vk,a=t.jq;e&&!h.tb()&&(a.tb()||a.Tb())&&(h=a.Tb()?Ut:a),im(t,t.documentBounds,r,l,h,e),e=t.scale,t.scale=s,t.vb=!1,s=t.viewportBounds,F.B(s.x,i)&&F.B(s.y,n)&&F.B(s.width,r)&&F.B(s.height,l)||t.onViewportBoundsChanged(new V(i,n,r,l),s,e,!1)}}function xh(t,e){var i=t.Kp;if(t.xa===null)return i;t.Va();var n=t.documentBounds;if(!n.w())return i;var r=n.width;n=n.height;var s=t.Ca+(t.df?t.Db:0),l=t.Ba+(t.ye?t.Db:0),h=s/r,a=l/n;return e===Mh?(e=Math.min(a,h),e>i&&(e=i),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):e===zp?(e=a>h?(l-t.Db)/n:(s-t.Db)/r,e>i&&(e=i),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):t.scale}D.prototype.zoomToFit=function(){var t=this.qj;this.qj=cl,this.scale=xh(this,Mh),t!==cl&&(pr(this,!1),im(this,this.documentBounds,this.Ca/this.Aa,this.Ba/this.Aa,this.vk,!1)),this.qj=t},o=D.prototype,o.uA=function(t,e){e===void 0&&(e=Mh);var i=t.width,n=t.height;if(!(i===0||n===0||isNaN(i)&&isNaN(n))){var r=1;if(e===Mh||e===zp)if(isNaN(i))r=this.viewportBounds.height*this.scale/n;else if(isNaN(n))r=this.viewportBounds.width*this.scale/i;else{r=this.Ca;var s=this.Ba;r=e===zp?s/n>r/i?(s-(this.ye?this.Db:0))/n:(r-(this.df?this.Db:0))/i:Math.min(s/n,r/i)}this.scale=r,this.position=new P(t.x,t.y)}},o.Fy=function(t,e){this.Va();var i=this.documentBounds,n=this.viewportBounds;this.position=new P(i.x+(t.x*i.width+t.offsetX)-(e.x*n.width-e.offsetX),i.y+(t.y*i.height+t.offsetY)-(e.y*n.height-e.offsetY))},o.uz=function(t){if(t instanceof ot){this.Yp=t;var e=P.alloc();this.Zp=this.jp(t.ja(ei,e)),P.free(e)}else this.Yp=null,this.Zp=cp};function im(t,e,i,n,r,s){var l=P.allocAt(t.pa.x,t.pa.y),h=l.x,a=l.y;if(t.Yp!==null){var f=P.alloc();f=t.Yp.ja(ei,f),h=f.x-t.Zp.x/t.scale,a=f.y-t.Zp.y/t.scale,r=$e,P.free(f)}(s||t.scrollMode===cl)&&(r.tb()&&(i>e.width&&(h=e.x+(r.x*e.width+r.offsetX)-(r.x*i-r.offsetX)),n>e.height&&(a=e.y+(r.y*e.height+r.offsetY)-(r.y*n-r.offsetY))),r=t.pj,s=i-e.width,i<e.width+r.left+r.right?(h=Math.min(h+i/2,e.right+Math.max(s,r.right)-i/2),h=Math.max(h,e.left-Math.max(s,r.left)+i/2),h-=i/2):h>e.left?h=e.left:h<e.right-i&&(h=e.right-i),i=n-e.height,n<e.height+r.top+r.bottom?(a=Math.min(a+n/2,e.bottom+Math.max(i,r.bottom)-n/2),a=Math.max(a,e.top-Math.max(i,r.top)+n/2),a-=n/2):a>e.top?a=e.top:a<e.bottom-n&&(a=e.bottom-n)),l.x=isFinite(h)?h:-t.yb.left,l.y=isFinite(a)?a:-t.yb.top,t.positionComputation!==null&&(e=t.positionComputation(t,l),l.x=e.x,l.y=e.y),rM(t.Ud,t.pa,l),t.pa.h(l.x,l.y),$o(t),P.free(l)}o.Jl=function(t,e){if(e===void 0&&(e=!0),e){if(t=nm(this,t,function(i){return i.part},function(i){return i.canSelect()}),t instanceof lt)return t}else if(t=nm(this,t,function(i){return i.part}),t instanceof lt)return t;return null},o.ec=function(t,e,i){e===void 0&&(e=null),i===void 0&&(i=null),xi(this);for(var n=this.Wa.iteratorBackwards;n.next();){var r=n.value;if(r.visible&&(r=r.ec(t,e,i),r!==null))return r}return null};function nm(t,e,i,n){for(i===void 0&&(i=null),n===void 0&&(n=null),xi(t),t=t.Wa.iteratorBackwards;t.next();){var r=t.value;if(r.visible&&!r.isTemporary&&(r=r.ec(e,i,n),r!==null))return r}return null}o.gz=function(t,e,i){return e===void 0&&(e=!0),ZL(this,t,function(n){return n.part},e?function(n){return n instanceof lt&&n.canSelect()}:null,i)};function ZL(t,e,i,n,r){for(i===void 0&&(i=null),n===void 0&&(n=null),r instanceof tt||r instanceof q||(r=new q),xi(t),t=t.Wa.iteratorBackwards;t.next();){var s=t.value;s.visible&&!s.isTemporary&&s.gi(e,i,n,r)}return r}o.gi=function(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=null),n instanceof tt||n instanceof q||(n=new q),xi(this);for(var r=this.Wa.iteratorBackwards;r.next();){var s=r.value;s.visible&&s.gi(t,e,i,n)}return n},o.qx=function(t,e,i,n){return e===void 0&&(e=!1),i===void 0&&(i=!0),QL(this,t,function(r){return r instanceof lt&&(!i||r.canSelect())},e,n)},o.Af=function(t,e,i,n,r){e===void 0&&(e=null),i===void 0&&(i=null),n===void 0&&(n=!1),r instanceof tt||r instanceof q||(r=new q),xi(this);for(var s=this.Wa.iteratorBackwards;s.next();){var l=s.value;l.visible&&l.Af(t,e,i,n,r)}return r},o.Lu=function(t,e,i,n,r,s){var l=new q;xi(this);for(var h=this.Wa.iteratorBackwards;h.next();){var a=h.value;a.visible&&a.Lu(t,e,i,n,l,r,s)}return l};function QL(t,e,i,n,r){var s=null;for(i===void 0&&(i=null),n===void 0&&(n=!1),r instanceof tt||r instanceof q||(r=new q),xi(t),t=t.Wa.iteratorBackwards;t.next();){var l=t.value;l.visible&&!l.isTemporary&&l.Af(e,s,i,n,r)}return r}o.hz=function(t,e,i,n,r){return i===void 0&&(i=!0),n===void 0&&(n=!0),qL(this,t,e,function(s){return s instanceof lt&&(!n||s.canSelect())},i,r)},o.lg=function(t,e,i,n,r,s){i===void 0&&(i=null),n===void 0&&(n=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof tt||r instanceof q)&&(s=r),r=!0),s instanceof tt||s instanceof q||(s=new q),xi(this);for(var l=this.Wa.iteratorBackwards;l.next();){var h=l.value;h.visible&&h.lg(t,e,i,n,r,s)}return s};function qL(t,e,i,n,r,s){var l=null;for(n===void 0&&(n=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof tt||r instanceof q)&&(s=r),r=!0),s instanceof tt||s instanceof q||(s=new q),xi(t),t=t.Wa.iteratorBackwards;t.next();){var h=t.value;h.visible&&!h.isTemporary&&h.lg(e,i,l,n,r,s)}return s}D.prototype.acceptEvent=function(t){return cu(this,t,t instanceof MouseEvent)};function cu(t,e,i){var n=t.Mg;return t.Mg=t.$i,t.$i=n,n.diagram=t,n.event=e,i?sf(t,e,n):(n.viewPoint=t.Mg.viewPoint,n.documentPoint=t.Mg.documentPoint),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),n.modifiers=t,n.button=e.button,e.buttons!==void 0&&(n.buttons=e.buttons),ke&&e.button===0&&e.ctrlKey&&(n.button=2),n.down=!1,n.up=!1,n.clickCount=1,n.delta=0,n.handled=!1,n.bubbles=!1,n.timestamp=e.timeStamp,n.isMultiTouch=!1,n.targetDiagram=rm(e,e.target),n.targetObject=null,n}function rm(t,e){return e===null?null:(e=e.H)?e:((e=t.path)||typeof t.composedPath!="function"||(e=t.composedPath()),e&&e[0]&&e[0].H?e[0].H:null)}function om(t,e,i,n,r,s){var l=t.Mg;return t.Mg=t.$i,t.$i=l,l.diagram=t,l.clickCount=1,t=l.delta=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),l.modifiers=t,l.event=e,l.timestamp=e.timeStamp,l.button=e.button,l.buttons=e.buttons,ke&&e.button===0&&e.ctrlKey&&(l.button=2),l.down=i,l.up=n,l.handled=!1,l.bubbles=r,l.isMultiTouch=s,l}function fl(t,e){return t.bubbles?!0:(e.stopPropagation!==void 0&&e.stopPropagation(),e.cancelable!==!1&&e.preventDefault(),e.cancelBubble=!0,!1)}D.prototype.Kz=function(t){var e=this.H;if(!this.H.isEnabled)return!1;var i=cu(e,t,!1);switch(i.key=String.fromCharCode(t.which),i.down=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del";break;case 48:i.key="0";break;case 187:case 61:case 107:i.key="Add";break;case 189:case 173:case 109:i.key="Subtract";break;case 27:i.key="Esc"}return e.doKeyDown(),fl(i,t)},D.prototype.Lz=function(t){var e=this.H;if(!e.isEnabled)return!1;var i=cu(e,t,!1);switch(i.key=String.fromCharCode(t.which),i.up=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del"}return e.doKeyUp(),fl(i,t)},D.prototype.Xy=function(t){var e=this.H;if(!e.isEnabled)return!1;var i=cu(e,t,!0);return e.mouseEnter!==null&&e.mouseEnter(i),e.currentTool.standardMouseOver(),fl(i,t)},D.prototype.Yy=function(t){var e=this.H;if(!e.isEnabled)return!1;var i=cu(e,t,!0);return e.mouseLeave!==null&&e.mouseLeave(i),fl(i,t)},D.prototype.getMouse=function(t){var e=this.xa;if(e===null)return new P(0,0);var i=e.getBoundingClientRect();return e=t.clientX-this.Ca/i.width*i.left,t=t.clientY-this.Ba/i.height*i.top,this.Ab!==null?yi(new P(e,t),this.Ab):new P(e,t)};function sf(t,e,i){var n=t.xa,r=t.Ca,s=t.Ba,l=0,h=0;n!==null&&(n=n.getBoundingClientRect(),l=e.clientX-r/n.width*n.left,h=e.clientY-s/n.height*n.top),i.viewPoint.h(l,h),t.Ab!==null?(e=P.allocAt(l,h),t.Ab.Md(e),i.documentPoint.assign(e),P.free(e)):i.documentPoint.h(l,h)}function kM(t,e,i){if(t.mj[0]!==null){e=t.mj[e];var n=t.xa;n!==null&&(n=n.getBoundingClientRect(),i.h(e.clientX-t.Ca/n.width*n.left,e.clientY-t.Ba/n.height*n.top))}}D.prototype.Ya=function(){this.Wi||(this.Wi=!0,this.Wb(!1))};function bL(t){t.dd||xi(t),t.Va()}D.prototype.redraw=function(){this.vb||this.dd||(this.N(),this.Wc())},o=D.prototype,o.Jz=function(){return this.hg},o.Sy=function(t){t===void 0&&(t=null);var e=this.animationManager,i=e.isEnabled;e.zc(),e.isEnabled=!1,Xo(this),this.ef=!1,this.au=new P(NaN,NaN),e.isEnabled=i,this.dd=!0;var n=this;t!==null&&H(function(){n.dd=!1,Go(e,"Model"),t(n)},1)},o.Wb=function(t){if(t===void 0&&(t=!1),this.hg!==!0&&!(this.vb||t===!1&&this.dd)){this.hg=!0;var e=this;Y.requestAnimationFrame(function(){e.hg&&e.Wc()})}},o.Wc=function(){(!this.cn||this.hg)&&(this.cn&&(this.cn=!1),Xo(this))};function Op(t,e,i){!t.Be||t.vb||t.animationManager.defaultAnimation.isAnimating||lm(t)||(e&&xi(t),i&&pr(t,!1))}function Xo(t,e){if(!t.dd&&(t.hg=!1,t.Ka!==null||t.to.w())){t.dd=!0;var i=t.animationManager,n=t.Un;if(!i.isAnimating&&n.length!==0){for(var r=n.s,s=r.length,l=0;l<s;l++){var h=r[l];vn(h,!1),h.v()}n.clear()}n=t.kw,0<n.count&&(n.each(function(a){a.Jv()}),n.clear()),r=n=!1,i.defaultAnimation.isAnimating&&(r=!0,n=t.skipsUndoManager,t.skipsUndoManager=!0),i.zb||em(t),Op(t,!1,!0),t.be!==null&&(t.be.visible&&!t.gq&&(Wo(t),t.gq=!0),!t.be.visible&&t.gq&&(t.gq=!1)),xi(t),s=!1,(!t.ef||t.th)&&(t.ef?ym(t,!t.Fk):(t.Ea("Initial Layout"),i.isEnabled===!1&&i.zc(),ym(t,!1)),s=!0),t.Fk=!1,xi(t),t.lu||bL(t),Op(t,!0,!1),l=!1,s?(i=V.alloc(),i.assign(t.viewportBounds),t.ef||(l=t.ef=!0,t.skipsUndoManager||(t.undoManager.isPendingClear=!0),t.undoManager.isPendingUnmodified=!0,tj(t)),t.R("LayoutCompleted"),Op(t,!0,!1),V.free(i)):i.Kk&&i.Mw&&(t.Cg!==mn?t.scale=xh(t,t.Cg):t.uh!==mn?t.scale=xh(t,t.uh):(i=t.initialScale,isFinite(i)&&0<i&&(t.scale=i)),pr(t,!0)),s&&l&&t.eb("Initial Layout"),xi(t),e||t.cc(t.jb),r&&(t.skipsUndoManager=n),t.dd=!1}}function tj(t){if(t.Cg!==mn)t.scale=xh(t,t.Cg);else if(t.uh!==mn)t.scale=xh(t,t.uh);else{var e=t.initialScale;isFinite(e)&&0<e&&(t.scale=e)}pr(t,!0),e=t.Wa.s,t.yd(e,e.length,t,t.viewportBounds),t.R("InitialLayoutCompleted"),t.au.assign(t.pa),Wo(t)}function xi(t){if(t.Ae.count!==0&&(t.dd||!t.animationManager.isTicking)){for(var e=0;23>e;e++){var i=t.Ae.iterator;if(i===null||t.Ae.count===0)break;t.Ae=new q,t.Jv(i,t.Ae)}t.nodes.each(function(n){n instanceof yt&&n.U&65536&&(n.U=n.U^65536)})}}o.Jv=function(t,e){for(t.reset();t.next();){var i=t.value;!i.Uc()||i instanceof yt||(i.oi()?(i.measure(1/0,1/0),i.arrange()):e.add(i))}for(t.reset();t.next();)i=t.value,i instanceof yt&&i.isVisible()&&sm(this,i);for(t.reset();t.next();)i=t.value,i instanceof X&&i.isVisible()&&(i.oi()?(i.measure(1/0,1/0),i.arrange()):e.add(i));for(t.reset();t.next();)i=t.value,i instanceof jt&&i.isVisible()&&(i.oi()?(i.measure(1/0,1/0),i.arrange()):e.add(i))};function sm(t,e){for(var i=Yt(),n=Yt(),r=e.memberParts;r.next();){var s=r.value;s.isVisible()&&(s instanceof yt?(Jo(s)||Zn(s)||Ls(s))&&sm(t,s):s instanceof X?s.fromNode===e||s.toNode===e?n.push(s):i.push(s):(s.measure(1/0,1/0),s.arrange()))}for(t=i.length,r=0;r<t;r++)s=i[r],s.measure(1/0,1/0),s.arrange();for(Vt(i),e.measure(1/0,1/0),e.arrange(),t=n.length,e=0;e<t;e++)i=n[e],i.measure(1/0,1/0),i.arrange();Vt(n)}o.yd=function(t,e,i,n){if(this.rd||this.animationManager.isAnimating)for(var r=0;r<e;r++)t[r].yd(i,n)},o.cc=function(t){if(this.Ka!==null){if(this.xa===null&&R("No canvas specified"),this.jl==="svg"){if(this.Ka!==null){var e=this.animationManager;if(!e.zb&&(!e.isAnimating||e.isTicking)){wh(this);var i=this.Ca,n=this.Ba;if(t.Cv.resize(i,n,i,n),i=this.Wa.s,n=i.length,this.yd(i,n,this,this.viewportBounds),this.Cc||e.isAnimating){e=this.pa;var r=this.Aa,s=Math.round(e.x*r)/r,l=Math.round(e.y*r)/r,h=this.Ab;for(h.reset(),r!==1&&h.scale(r),e.x===0&&e.y===0||h.translate(-s,-l),t.pi=null,e2(t,h.m11,h.m12,h.m21,h.m22,h.dx,h.dy),this.qb!==1&&(t.globalAlpha=this.qb),Ip(this,t),e=0;e<n;e++)i[e].cc(t,this);this.Cc=this.rd=!1}}}}else t:if(s=this.animationManager,!s.zb&&(!s.isAnimating||s.isTicking)&&(i=new Date,wh(this),this.Ka.style.opacity!=="0")){if(n=t!==this.jb,e=this.Wa.s,r=e.length,this.yd(e,r,this,this.viewportBounds),n)t.Qc(!0),this.rd=!0;else if(!this.Cc&&!s.isAnimating)break t;l=this.pa,h=this.Aa;var a=Math.round(l.x*h)/h,f=Math.round(l.y*h)/h;for(s=this.Ab,s.reset(),h!==1&&s.scale(h),l.x===0&&l.y===0||s.translate(-a,-f),l=this.Pb,t.setTransform(l,0,0,l,0,0),t.clearRect(0,0,this.Ca,this.Ba),this.qb!==1&&(t.globalAlpha=this.qb),Ip(this,t),h=0;h<r;h++)t.setTransform(l,0,0,l,0,0),t.transform(s.m11,s.m12,s.m21,s.m22,s.dx,s.dy),t.vc(),e[h].cc(t,this);if(e=!1,this.Ch?af(this.Ch,this)&&(e=this.it()):e=!0,e&&(Nt.prototype.Md=Nt.prototype.Xw),n?(this.jb.Qc(!0),this.rd=!0):this.Cc=this.rd=!1,e=+new Date-+i,n=ks&&ks.kx,i=this.vw,n||this.Vh===null){for(i[this.Nq]=e,this.Nq=(this.Nq+1)%i.length,r=e=0;r<i.length;r++)e+=i[r];this.Mq=e/i.length}if(this.qb!==1&&(t.globalAlpha=1),n)for(t.setTransform(1,0,0,1,0,0),n=0;n<i.length;n++)t.fillText(i[n].toString(),20,150+ +(20*n))}}};function Ap(t,e,i,n,r,s,l,h,a,f){if(t.Ka!==null){t.xa===null&&R("No canvas specified"),l===void 0&&(l=null),h===void 0&&(h=null),a===void 0&&(a=!1),f===void 0&&(f=!1),wh(t),t.jb.Qc(!0),t.rd=!0,t.Xi=!0;var p=t.Aa;t.Aa=r;var d=t.Wa.s,y=d.length;try{var x=new V(s.x,s.y,n.width/r,n.height/r),v=x.copy();v.zo(i),Wo(t,v),xi(t),t.yd(d,y,t,x),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,n.width,n.height),h!==null&&h!==""&&(e.fillStyle=h,e.lx(0,0,n.width,n.height));var S=t.Pb;e.scale(S,S);var N=Nt.alloc();N.reset(),N.translate(i.left,i.top),N.scale(r),s.x===0&&s.y===0||N.translate(-s.x,-s.y),e.setTransform(N.m11,N.m12,N.m21,N.m22,N.dx,N.dy),e.vc(),e instanceof wn&&e2(e,N.m11,N.m12,N.m21,N.m22,N.dx,N.dy),Nt.free(N),Ip(t,e),e.globalAlpha=t.qb;var k=t.Oj("Grid");if(l){var C=new q,T=l.iterator;for(T.reset();T.next();){var L=T.value;L instanceof lt&&(f||L.layer!==k)&&(L.Ej(),C.add(L))}for(f=0;f<y;f++)XL(d[f],e,t,C,a);C.each(function(I){return I.Ej()})}else for(C=0;C<y;C++){var E=d[C];E===k?f&&E.cc(e,t,!0):E.cc(e,t,a)}t.Xi=!1,t.Ch&&af(t.Ch,t)&&t.it()}finally{t.Aa=p,t.jb.Qc(!0),t.rd=!0,t.yd(d,y,t,t.viewportBounds),Wo(t),t.jb instanceof wn&&(t.jb.Lj.IA(),t.redraw())}}}o.Ef=function(t){return this.Ng[t]},o.Wx=function(t,e){t==="minDrawingLength"&&(this.Iq=e),this.Ng[t]=e,this.redraw()},o.Sx=function(){this.Ng=new We,this.Ng.drawShadows=!0,this.Ng.textGreeking=!0,this.Ng.viewportOptimizations=!(ke||oe),this.Ng.temporaryPixelRatio=!0,this.Ng.pictureRatioOptimization=!0,this.Iq=this.Ng.minDrawingLength=1};function Ip(t,e){t=t.Ng,t!==null&&(t.imageSmoothingEnabled!==void 0&&e.Vx(!!t.imageSmoothingEnabled),t=t.defaultFont,t!=null&&(e.font=t))}o.Ll=function(t){return this.ln[t]},o.lA=function(t,e){this.ln[t]=e},o.Rx=function(){this.ln=new We,this.ln.extraTouchArea=10,this.ln.extraTouchThreshold=10,this.ln.hasGestureZoom=!0},o.set=function(t){return Object.assign(this,t),this},o.Au=function(t){return this.km(t)},o.km=function(t){return lf(this,t),this};function lf(t,e){var i=t instanceof _,n=t instanceof D,r;for(r in e){r===""&&R("Setting properties requires non-empty property names");var s=t,l=r;if(i||n){var h=r.indexOf(".");if(0<h){var a=r.substring(0,h);i?s=t.fb(a):(s=t[a],s==null&&(s=t.toolManager[a])),xt(s)?l=r.substr(h+1):R("Unable to find object named: "+a+" in "+t.toString()+" when trying to set property: "+r)}}if(l[0]!=="_"&&!eh(s,l))if(n&&l==="ModelChanged"){t.Uw(e[l]);continue}else if(n&&l==="Changed"){t.Me(e[l]);continue}else if(n&&eh(t.toolManager,l))s=t.toolManager;else if(n&&FM(t,l)){t.zj(l,e[l]);continue}else if(t instanceof nt&&l==="Changed"){t.Me(e[l]);continue}else R('Trying to set undefined property "'+l+'" on object: '+s.toString());s[l]=e[r],l[0]==="_"&&s instanceof ot&&s.Rw(l)}}o.$w=function(){if(this.Ah.count!==0&&!(1<this.undoManager.transactionLevel)){for(;0<this.Ah.count;){var t=this.Ah;for(this.Ah=new vt,t=t.iterator;t.next();){var e=t.key;e.So(t.value),e.nc()}}this.N()}},o.N=function(t){if(t===void 0)this.Cc=!0,this.Wb();else{var e=this.viewportBounds;t.w()&&e.Tc(t)&&(this.Cc=!0,this.Wb())}this.R("InvalidateDraw")},D.prototype.invalidateViewport=function(t,e){if(this.Cc!==!0)if(this.Cc=!0,this.jl==="svg")this.Wc();else{var i=this.Ef("temporaryPixelRatio")===!0;if(this.Ef("viewportOptimizations")===!0&&this.scrollMode!==Mm&&this.pj.ei(0,0,0,0)&&e.width===t.width&&e.height===t.height){var n=this.scale,r=Math.max(t.y,e.y),s=Math.min(t.y+t.height,e.y+e.height);if(0<Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x))*n&&0<Math.max(0,s-r)*n){if(!(this.dd||(this.hg=!1,this.Ka===null||(this.dd=!0,this.documentBounds.w()||(n=V.alloc(),gm(this,this.computeBounds(n)),V.free(n)),n=this.xa,n===null||n instanceof Or)))){var l=this.Pb;r=this.Ca*l;var h=this.Ba*l,a=this.scale*l;s=Math.round(Math.round(e.x*a)-Math.round(t.x*a)),e=Math.round(Math.round(e.y*a)-Math.round(t.y*a)),a=this.fw,t=this.ny,a.width!==r&&(a.width=r),a.height!==h&&(a.height=h),t.clearRect(0,0,r,h),a=190*l;var f=70*l,p=Math.max(s,0),d=Math.max(e,0),y=Math.floor(r-p),x=Math.floor(h-d);t.drawImage(n.La,p,d,y,x,0,0,y,x),af(this.Ch,this)&&t.clearRect(0,0,a,f),n=Yt(),t=Yt(),x=Math.abs(s),y=Math.abs(e);var v=p===0?0:r-x;p=P.allocAt(v,0),x=P.allocAt(x+v,h),t.push(new V(Math.min(p.x,x.x),Math.min(p.y,x.y),Math.abs(p.x-x.x),Math.abs(p.y-x.y)));var S=this.Ab;if(S.reset(),S.scale(l,l),this.Aa!==1&&S.scale(this.Aa),l=this.pa,(l.x!==0||l.y!==0)&&isFinite(l.x)&&isFinite(l.y)&&S.translate(-l.x,-l.y),yi(p,S),yi(x,S),n.push(new V(Math.min(p.x,x.x),Math.min(p.y,x.y),Math.abs(p.x-x.x),Math.abs(p.y-x.y))),v=d===0?0:h-y,p.h(0,v),x.h(r,y+v),t.push(new V(Math.min(p.x,x.x),Math.min(p.y,x.y),Math.abs(p.x-x.x),Math.abs(p.y-x.y))),yi(p,S),yi(x,S),n.push(new V(Math.min(p.x,x.x),Math.min(p.y,x.y),Math.abs(p.x-x.x),Math.abs(p.y-x.y))),af(this.Ch,this)&&(r=0<s?0:-s,h=0<e?0:-e,p.h(r,h),x.h(a+r,f+h),t.push(new V(Math.min(p.x,x.x),Math.min(p.y,x.y),Math.abs(p.x-x.x),Math.abs(p.y-x.y))),yi(p,S),yi(x,S),n.push(new V(Math.min(p.x,x.x),Math.min(p.y,x.y),Math.abs(p.x-x.x),Math.abs(p.y-x.y)))),P.free(p),P.free(x),Op(this,!1,!0),this.Ka===null&&R("No div specified"),this.xa===null&&R("No canvas specified"),!this.animationManager.zb&&(r=this.jb,this.Cc)){for(wh(this),h=this.Pb,r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,this.Ca*h,this.Ba*h),r.drawImage(this.fw.La,0<s?0:Math.round(-s),0<e?0:Math.round(-e)),s=this.pa,l=this.Aa,a=Math.round(s.x*l)/l,f=Math.round(s.y*l)/l,e=this.Ab,e.reset(),l!==1&&e.scale(l),s.x===0&&s.y===0||e.translate(-a,-f),r.save(),r.beginPath(),s=t.length,l=0;l<s;l++)a=t[l],a.width!==0&&a.height!==0&&r.rect(Math.floor(a.x),Math.floor(a.y),Math.ceil(a.width),Math.ceil(a.height));for(r.clip(),r.setTransform(h,0,0,h,0,0),r.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),r.vc(),e=this.Wa.s,s=e.length,this.yd(e,s,this,this.viewportBounds),Ip(this,r),r.globalAlpha=this.qb,h=0;h<s;h++)if(l=e[h],a=n,l.visible&&l.qb!==0){f=rf(l,r),d=l.Tq,d.length=0,p=this.scale,y=V.alloc(),x=l.Pa.s,S=x.length,v=a.length;for(var N=0;N<S;N++){var k=x[N],C=Sl(k,k.actualBounds);t:{for(var T=2/p,L=4/p,E=0;E<v;E++){var I=a[E];if(I.width!==0&&I.height!==0&&C.Tu(I.x-T,I.y-T,I.width+L,I.height+L)){C=!0;break t}}C=!1}C&&l.Mj(r,k,this,d,p,y,!0)}V.free(y),r.globalAlpha=f}r.restore(),r.Qc(!0),this.Ch&&af(this.Ch,this)&&this.it(),this.Cc=this.rd=!1,this.Xl()}Vt(n),Vt(t),this.dd=!1}}else this.Wc();i&&(of(this),this.Wc(),Fp(this,!0))}else i?(of(this),this.Wc(),Fp(this,!0)):this.Wc()}};function wh(t){t.mn!==!1&&(t.mn=!1,NM(t,t.Ca,t.Ba))}function NM(t,e,i){$o(t);var n=t.Pb;t.xa.resize(e*n,i*n,e,i)&&(t.Cc=!0,t.jb.Qc(!0))}function lm(t){var e=t.xa;if(e===null||!t.ef||t.to.w())return!0;var i=t.Ca,n=t.Ba,r=t.viewportBounds;if(!t.viewportBounds.w())return!0;var s=r.x,l=r.y,h=r.width,a=r.height,f=t.hu,p=t.eu,d=t.Ka,y=!1,x=t.df?t.Db:0,v=t.ye?t.Db:0,S=d.clientWidth||i+x,N=d.clientHeight||n+v;if((S!==i+x||N!==n+v)&&(t.df=!1,t.ye=!1,v=x=0,t.Ca=S,t.Ba=N,y=t.mn=!0,$o(t)),t.Be=!1,!(y||t.df||t.ye||t.jn||t.kn))return!0;var k=t.documentBounds,C=0,T=0,L=0,E=0;d=r.width;var I=r.height,Z=t.pj;t.contentAlignment.tb()?(k.width>d&&(C=Z.left,T=Z.right),k.height>I&&(L=Z.top,E=Z.bottom)):(C=Z.left,T=Z.right,L=Z.top,E=Z.bottom);var it=k.width+C+T,et=k.height+L+E;Z=t.scale;var G=it>S/Z,U=et>N/Z;if(!(y||t.df||t.ye||G||U))return!0;C=k.x-C,S=r.x,T=k.right+T,N=r.right+x,L=k.y-L;var gt=r.y;k=k.bottom+E,r=r.bottom+v;var ct="1px";if(E="1px",t.scrollMode===cl&&(G||U)&&(G&&t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(G=1,C+1<S&&(G=Math.max((S-C)*Z+t.Ca,G)),T>N+1&&(G=Math.max((T-N)*Z+t.Ca,G)),d+x+1<it&&(G=Math.max((it-d)*Z+t.Ca,G)),ct=G.toString()+"px"),U&&t.hasVerticalScrollbar&&t.allowVerticalScroll&&(G=1,L+1<gt&&(G=Math.max((gt-L)*Z+t.Ba,G)),k>r+1&&(G=Math.max((k-r)*Z+t.Ba,G)),I+v+1<et&&(G=Math.max((et-I)*Z+t.Ba,G)),E=G.toString()+"px")),G=ct!=="1px",U=E!=="1px",G&&U||!G&&!U||(U&&(N-=t.Db),G&&(r-=t.Db),it<d+x||!t.hasHorizontalScrollbar||!t.allowHorizontalScroll||(x=1,C+1<S&&(x=Math.max((S-C)*Z+t.Ca,x)),T>N+1&&(x=Math.max((T-N)*Z+t.Ca,x)),d+1<it&&(x=Math.max((it-d)*Z+t.Ca,x)),ct=x.toString()+"px"),G=ct!=="1px",x=t.Ba,G!==t.ye&&(x=G?t.Ba-t.Db:t.Ba+t.Db),et<I+v||!t.hasVerticalScrollbar||!t.allowVerticalScroll||(v=1,L+1<gt&&(v=Math.max((gt-L)*Z+x,v)),k>r+1&&(v=Math.max((k-r)*Z+x,v)),I+1<et&&(v=Math.max((et-I)*Z+x,v)),E=v.toString()+"px"),U=E!=="1px"),t.jr&&G===t.ye&&U===t.df)return i===t.Ca&&n===t.Ba||t.Wc(),!1;if(G!==t.ye&&(ct==="1px"?t.Ba=t.Ba+t.Db:t.Ba=Math.max(t.Ba-t.Db,1),y=!0),t.ye=G,p.style.width=ct,U!==t.df&&(E==="1px"?t.Ca=t.Ca+t.Db:t.Ca=Math.max(t.Ca-t.Db,1),y=!0,t.qn&&(v=P.alloc(),U?(e.style.left=t.Db+"px",t.position=v.h(t.pa.x+t.Db/t.scale,t.pa.y)):(e.style.left="0px",t.position=v.h(t.pa.x-t.Db/t.scale,t.pa.y)),P.free(v))),y&&$o(t),t.df=U,p.style.height=E,t.du=!0,y&&(t.mn=!0),e=f.scrollLeft,t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(d+1<it?e=(t.position.x-C)*Z:C+1<S?e=f.scrollWidth-f.clientWidth:T>N+1&&(e=t.position.x*Z)),t.qn)switch(t.Zt){case"negative":e=-(f.scrollWidth-e-f.clientWidth);break;case"reverse":e=f.scrollWidth-e-f.clientWidth}return f.scrollLeft=e,t.hasVerticalScrollbar&&t.allowVerticalScroll&&(I+1<et?f.scrollTop=(t.position.y-L)*Z:L+1<gt?f.scrollTop=f.scrollHeight-f.clientHeight:k>r+1&&(f.scrollTop=t.position.y*Z)),S=t.Ca,N=t.Ba,f.style.width=S+(t.df?t.Db:0)+"px",f.style.height=N+(t.ye?t.Db:0)+"px",i!==S||n!==N||t.animationManager.zb?(i=V.allocAt(s,l,h,a),t.onViewportBoundsChanged(i,t.viewportBounds,Z,y),V.free(i),!1):!0}o=D.prototype,o.add=function(t){var e=t.diagram;if(e!==this&&(e!==null&&R("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+e.toString()),e=this.Oj(t.layerName),e===null&&(e=this.Oj("")),e===null&&R('Cannot add a Part when unable find a Layer named "'+t.layerName+'" and there is no default Layer'),t.layer!==e)){var i=e.li(99999999,t,t.diagram===this);0<=i&&this.cb(Ne,"parts",e,null,t,null,i),e.isTemporary||this.Ya(),t.D(1),i=t.layerChanged,i!==null&&i(t,null,e)}},o.li=function(t){this.partManager.li(t);var e=this;vl(t,function(i){LM(e,i)}),(t instanceof jt||t instanceof yt&&t.placeholder!==null)&&t.v(),t.data!==null&&vl(t,function(i){Rv(e.partManager,i)}),Zn(t)!==!0&&Ls(t)!==!0||this.Ae.add(t),_2(t,!0,this),X2(t)?(t.actualBounds.w()&&this.N(Sl(t,t.actualBounds)),this.Ya()):t.isVisible()&&t.actualBounds.w()&&this.N(Sl(t,t.actualBounds)),this.Wb()},o.mc=function(t){t.Cj(),this.partManager.mc(t);var e=this;t.data!==null&&vl(t,function(i){Bv(e.partManager,i,e)}),this.Ae.remove(t),X2(t)?(t.actualBounds.w()&&this.N(Sl(t,t.actualBounds)),this.Ya()):t.isVisible()&&t.actualBounds.w()&&this.N(Sl(t,t.actualBounds)),this.Wb()},o.remove=function(t){um(this,t,!0)};function um(t,e,i){var n=e.layer;n!==null&&n.diagram===t&&(e.isSelected=!1,e.isHighlighted=!1,e.D(2),i&&e.Jj(),i=n.mc(-1,e,!1),0<=i&&t.cb(je,"parts",n,e,null,i,null),t=e.layerChanged,t!==null&&t(e,n,null))}o.Ds=function(t,e){if(e===void 0&&(e=!1),Wt(t))for(var i=t.length,n=0;n<i;n++){var r=t[n];e&&!r.canDelete()||this.remove(r)}else for(i=new q,i.addAll(t),t=i.iterator;t.next();)i=t.value,e&&!i.canDelete()||this.remove(i)},o.Ij=function(t,e,i){return i===void 0&&(i=!1),this.partManager.Ij(t,e,i)},D.prototype.moveParts=function(t,e,i,n){if(i===void 0&&(i=!1),n===void 0&&(n=am(this)),this.toolManager!==null){var r=new vt;if(t!==null)if(Wt(t))for(var s=0;s<t.length;s++)Ko(this,r,t[s],i,n);else for(t=t.iterator;t.next();)Ko(this,r,t.value,i,n);else{for(t=this.parts;t.next();)Ko(this,r,t.value,i,n);for(t=this.nodes;t.next();)Ko(this,r,t.value,i,n);for(t=this.links;t.next();)Ko(this,r,t.value,i,n)}hm(this,r,e,n,i)}};function Ko(t,e,i,n,r,s){if(!e.contains(i)&&(s===void 0&&(s=!1),!n||s||i.canMove()||i.canCopy()))if(r===void 0&&(r=am(t)),i instanceof b){if(e.add(i,t.Hd(r,i,i.location)),i instanceof yt&&(i.placeholder!==null||r.dragsMembers))for(s=i.memberParts;s.next();)Ko(t,e,s.value,n,r,r.groupsAlwaysMove);for(s=i.linksConnected;s.next();){var l=s.value;if(!e.contains(l)){var h=l.fromNode,a=l.toNode;h!==null&&e.contains(h)&&a!==null&&e.contains(a)&&Ko(t,e,l,n,r)}}if(r.dragsTree)for(i=i.Mu();i.next();)Ko(t,e,i.value,n,r)}else if(i instanceof X)for(e.add(i,t.Hd(r,i)),i=i.labelNodes;i.next();)Ko(t,e,i.value,n,r);else i instanceof jt||e.add(i,t.Hd(r,i,i.location))}function hm(t,e,i,n,r){if(e!==null&&e.count!==0){var s=P.alloc(),l=P.alloc();l.assign(i),isNaN(l.x)&&(l.x=0),isNaN(l.y)&&(l.y=0),(i=t.Gr)||Dp(t,e);for(var h=Yt(),a=Yt(),f=e.iterator,p=P.alloc();f.next();){var d=f.key,y=f.value;if(d.Uc()){var x=PM(t,d,e);x!==null?h.push(new WM(d,y,x)):(!r||d.canMove())&&(x=y.point,s.assign(x),t.computeMove(d,s.add(l),n,p),d.location=p,y.shifted===void 0&&(y.shifted=new P),y.shifted.assign(p.oe(x)))}else f.key instanceof X&&a.push(f.sa)}for(P.free(p),r=h.length,f=0;f<r;f++)d=h[f],s.assign(d.info.point),d.Qu.shifted===void 0&&(d.Qu.shifted=new P),d.node.location=s.add(d.Qu.shifted);for(r=P.alloc(),f=P.alloc(),d=a.length,y=0;y<d;y++){var v=a[y];if(x=v.key,x instanceof X)if(x.suspendsRouting){x.Pg=null,p=x.fromNode;var S=x.toNode;if(t.draggedLink!==null&&n.dragsLink)if(S=v.value.point,x.dragComputation===null)e.add(x,t.Hd(n,x,l)),es(x,l.x-S.x,l.y-S.y);else{v=P.allocAt(0,0),(p=x.i(0))&&p.w()&&v.assign(p);var N=p=P.alloc().assign(v).add(l);n.isGridSnapEnabled&&(n.isGridSnapRealtime||t.lastInput.up)&&(N=P.alloc(),fm(t,x,p,N,n)),p.assign(x.dragComputation(x,p,N)).oe(v),e.add(x,t.Hd(n,x,p)),es(x,p.x-S.x,p.y-S.y),P.free(v),P.free(p),N!==p&&P.free(N)}else p!==null&&(r.assign(p.location),N=e.I(p),N!==null&&r.oe(N.point)),S!==null&&(f.assign(S.location),N=e.I(S),N!==null&&f.oe(N.point)),p!==null&&S!==null?r.Xa(f)?(p=v.value.point,S=s,S.assign(r),S.oe(p),e.add(x,t.Hd(n,x,r)),es(x,S.x,S.y)):(x.suspendsRouting=!1,x.bb()):(v=v.value.point,p=p!==null?r:S!==null?f:l,e.add(x,t.Hd(n,x,p)),es(x,p.x-v.x,p.y-v.y))}else(x.fromNode===null||x.toNode===null)&&(p=v.value.point,e.add(x,t.Hd(n,x,l)),es(x,l.x-p.x,l.y-p.y))}P.free(s),P.free(l),P.free(r),P.free(f),Vt(h),Vt(a),i||(xi(t),uf(t,e))}}D.prototype.computeMove=function(t,e,i,n){if(n===void 0&&(n=new P),n.assign(e),t===null)return n;var r=e,s=i.isGridSnapEnabled;s&&(i.isGridSnapRealtime||this.lastInput.up)&&(r=P.alloc(),fm(this,t,e,r,i)),i=t.dragComputation!==null?t.dragComputation(t,e,r):r;var l=t.minLocation,h=l.x;isNaN(h)&&(h=s?Math.round(1e3*t.location.x)/1e3:t.location.x),l=l.y,isNaN(l)&&(l=s?Math.round(1e3*t.location.y)/1e3:t.location.y);var a=t.maxLocation,f=a.x;return isNaN(f)&&(f=s?Math.round(1e3*t.location.x)/1e3:t.location.x),a=a.y,isNaN(a)&&(a=s?Math.round(1e3*t.location.y)/1e3:t.location.y),n.h(Math.max(h,Math.min(i.x,f)),Math.max(l,Math.min(i.y,a))),r!==e&&P.free(r),n};function am(t){var e=t.toolManager.findTool("Dragging");return e!==null?e.dragOptions:t.Tm}function fm(t,e,i,n,r){if(r===void 0&&(r=am(t)),n.assign(i),e!==null){var s=t.grid;e=r.gridSnapCellSize,t=e.width,e=e.height;var l=r.gridSnapOrigin,h=l.x;if(l=l.y,r=r.gridSnapCellSpot,s!==null){var a=s.gridCellSize;isNaN(t)&&(t=a.width),isNaN(e)&&(e=a.height),s=s.gridOrigin,isNaN(h)&&(h=s.x),isNaN(l)&&(l=s.y)}s=P.allocAt(0,0),s.vi(0,0,t,e,r),F.Ko(i.x,i.y,h+s.x,l+s.y,t,e,n),P.free(s)}}function Dp(t,e){if(e!==null)for(t.Gr=!0,t=e.iterator;t.next();)e=t.key,e instanceof X&&(e.suspendsRouting=!0)}function uf(t,e){if(e!==null){for(e=e.iterator;e.next();){var i=e.key;i instanceof X&&(i.suspendsRouting=!1,Mv(i)&&i.bb())}t.Gr=!1}}function PM(t,e,i){return e=e.containingGroup,e!==null&&(t=PM(t,e,i),t!==null||(t=i.I(e),t!==null))?t:null}o=D.prototype,o.Hd=function(t,e,i){if(i===void 0)return new Ps(yo);var n=t.isGridSnapEnabled;return t.groupsSnapMembers||e.containingGroup===null||(n=!1),n?new Ps(new P(Math.round(1e3*i.x)/1e3,Math.round(1e3*i.y)/1e3)):new Ps(i.copy())};function cm(t,e,i){if(e.diagram!==null&&e.diagram!==t&&R("Cannot share a Layer with another Diagram: "+e+" of "+e.diagram),i===null?e.diagram!==null&&R("Cannot add an existing Layer to this Diagram again: "+e):(i.diagram!==t&&R("Existing Layer must be in this Diagram: "+i+" not in "+i.diagram),e===i&&R("Cannot move a Layer before or after itself: "+e)),e.diagram!==t){e=e.name,t=t.Wa,i=t.count;for(var n=0;n<i;n++)t.L(n).name===e&&R("Cannot add Layer with the name '"+e+"'; a Layer with the same name is already present in this Diagram.")}}o.wl=function(t){cm(this,t,null),t.Ue(this);var e=this.Wa,i=e.count-1;if(!t.isTemporary)for(;0<=i&&e.L(i).isTemporary;)i--;return e.Eb(i+1,t),this.$b!==null&&this.cb(Ne,"layers",this,null,t,null,i+1),this.N(),this.Ya(),this},o.Sw=function(t,e){cm(this,t,e),t.Ue(this);var i=this.Wa,n=i.indexOf(t);0<=n&&(i.remove(t),this.$b!==null&&this.cb(je,"layers",this,t,null,n,null));var r=i.count,s;for(s=0;s<r;s++)if(i.L(s)===e){i.Eb(s,t);break}return this.$b!==null&&this.cb(Ne,"layers",this,null,t,null,s),this.N(),0>n&&this.Ya(),this},o.Ay=function(t,e){cm(this,t,e),t.Ue(this);var i=this.Wa,n=i.indexOf(t);0<=n&&(i.remove(t),this.$b!==null&&this.cb(je,"layers",this,t,null,n,null));var r=i.count,s;for(s=0;s<r;s++)if(i.L(s)===e){i.Eb(s+1,t);break}return this.$b!==null&&this.cb(Ne,"layers",this,null,t,null,s+1),this.N(),0>n&&this.Ya(),this},o.dA=function(t){if(t.diagram!==this&&R("Cannot remove a Layer from another Diagram: "+t+" of "+t.diagram),t.name!==""){var e=this.Wa,i=e.indexOf(t);if(e.remove(t)){for(e=t.Pa.copy().iterator;e.next();){var n=e.value,r=n.layerName;r!==t.name?n.layerName=r:n.layerName=""}this.$b!==null&&this.cb(je,"layers",this,t,null,i,null),this.N(),this.Ya()}}},o.Oj=function(t){for(var e=this.layers;e.next();){var i=e.value;if(i.name===t)return i}return null},o.Uw=function(t){return this.lf===null&&(this.lf=new tt),this.lf.add(t),this.model.Me(t),this},o.fA=function(t){this.lf!==null&&(this.lf.remove(t),this.lf.count===0&&(this.lf=null)),this.model.ek(t)},o.Me=function(t){return this.wg===null&&(this.wg=new tt),this.wg.add(t),this},o.ek=function(t){this.wg!==null&&(this.wg.remove(t),this.wg.count===0&&(this.wg=null))},o.Xr=function(t){if(this.skipsUndoManager||this.model.skipsUndoManager||this.model.undoManager.Ru(t),t.change!==fr&&(this.isModified=!0),this.wg!==null)for(var e=this.wg,i=e.length,n=0;n<i;n++)e.L(n)(t)},o.cb=function(t,e,i,n,r,s,l){s===void 0&&(s=null),l===void 0&&(l=null);var h=new ie;h.diagram=this,h.change=t,h.propertyName=e,h.object=i,h.oldValue=n,h.oldParam=s,h.newValue=r,h.newParam=l,this.Xr(h)},o.g=function(t,e,i,n,r){this.cb(Qt,t,this,e,i,n,r)},D.prototype.changeState=function(t,e){if(t!==null&&t.diagram===this){var i=this.skipsModelSourceBindings;try{this.skipsModelSourceBindings=!0;var n=t.change;if(n===Qt){var r=t.object;if($t(r,t.propertyName,t.I(e)),r instanceof ot){var s=r.part;s!==null&&s.Sb()}this.isModified=!0}else if(n===Ne){var l=t.object,h=t.newParam,a=t.newValue;if(l instanceof _)if(typeof h=="number"&&a instanceof ot){e?l.mc(h):l.Eb(h,a);var f=l.part;f!==null&&f.Sb()}else typeof h=="number"&&a instanceof Ce&&(a.isRow?g2(l,h,e?void 0:a):y2(l,h,e?void 0:a));else if(l instanceof ni){var p=t.oldParam===!0;typeof h=="number"&&a instanceof lt&&(e?(a.isSelected=!1,a.isHighlighted=!1,a.Sb(),l.mc(p?h:-1,a,p)):l.li(h,a,p))}else l instanceof D?typeof h=="number"&&a instanceof ni&&(e?this.Wa.nb(h):(a.Ue(this),this.Wa.Eb(h,a))):R("unknown ChangedEvent.Insert object: "+t.toString());this.isModified=!0}else if(n===je){var d=t.object,y=t.oldParam,x=t.oldValue;if(d instanceof _)typeof y=="number"&&x instanceof ot?e?d.Eb(y,x):d.mc(y):typeof y=="number"&&x instanceof Ce&&(x.isRow?g2(d,y,e?x:void 0):y2(d,y,e?x:void 0));else if(d instanceof ni){var v=t.newParam===!0;typeof y=="number"&&x instanceof lt&&(e?0>d.Pa.indexOf(x)&&d.li(y,x,v):(x.isSelected=!1,x.isHighlighted=!1,x.Sb(),d.mc(v?y:-1,x,v)))}else d instanceof D?typeof y=="number"&&x instanceof ni&&(e?(x.Ue(this),this.Wa.Eb(y,x)):this.Wa.nb(y)):R("unknown ChangedEvent.Remove object: "+t.toString());this.isModified=!0}else n!==fr&&R("unknown ChangedEvent: "+t.toString())}finally{this.skipsModelSourceBindings=i}}},D.prototype.Ea=function(t){return this.undoManager.Ea(t)},D.prototype.eb=function(t){return this.undoManager.eb(t)},D.prototype.If=function(){return this.undoManager.If()},D.prototype.commit=function(t,e){e===void 0&&(e="");var i=this.skipsUndoManager;e===null&&(this.skipsUndoManager=!0,e=""),this.undoManager.Ea(e);var n=!1;try{t(this),n=!0}finally{n?this.undoManager.eb(e):this.undoManager.If(),this.skipsUndoManager=i}},D.prototype.updateAllTargetBindings=function(t){this.partManager.updateAllTargetBindings(t)},D.prototype.mp=function(){this.partManager.mp()};function CM(t,e,i){var n=t.animationManager;if(t.vb||t.dd)t.Aa=i,$o(t),t.N(),t.Be=!0,n.zb&&(Np(n)||n.Zd.add(n.H,"scale",e,t.Aa));else if(t.xa===null)t.Aa=i,$o(t);else{t.vb=!0;var r=t.viewportBounds.copy(),s=t.Ca,l=t.Ba,h=t.zoomPoint.x,a=t.zoomPoint.y,f=t.contentAlignment;isNaN(h)&&(f.Vc()?f.Ff(sh)?h=0:f.Ff(lh)&&(h=s-1):h=f.tb()?f.x*(s-1):s/2),isNaN(a)&&(f.Vc()?f.Ff(oh)?a=0:f.Ff(uh)&&(a=l-1):a=f.tb()?f.y*(l-1):l/2),t.scaleComputation===null||t.animationManager.defaultAnimation.isAnimating||(i=t.scaleComputation(t,i)),i<t.minScale&&(i=t.minScale),i>t.maxScale&&(i=t.maxScale),s=P.allocAt(t.pa.x+h/e-h/i,t.pa.y+a/e-a/i),t.position=s,P.free(s),t.Aa=i,$o(t),t.vb=!1,t.onViewportBoundsChanged(r,t.viewportBounds,e,!1),pr(t,!1),n.zb&&(Np(n)||n.Zd.add(n.H,"scale",e,t.Aa))}}D.prototype.onViewportBoundsChanged=function(t,e,i,n){if(!t.C(e)){n===void 0&&(n=!1),n||(this.Be=!0),this.rd=!0;var r=this.layout;r===null||!r.isViewportSized||this.autoScale!==mn||t.width===e.width&&t.height===e.height||r.D(),r=this.currentTool,this.Rk===!0&&r instanceof ne&&(this.lastInput.documentPoint=this.Ks(this.lastInput.viewPoint),BS(r,this)),this.vb||this.invalidateViewport(t,e),Wo(this),this.kd.scale=i,this.kd.position.x=t.x,this.kd.position.y=t.y,this.kd.bounds.assign(t),this.kd.Zw.width=Math.round(t.width*i),this.kd.Zw.height=Math.round(t.height*i),this.kd.Kx.width=this.Ca,this.kd.Kx.height=this.Ba,this.kd.Ex=n,this.R("ViewportBoundsChanged",this.kd,t),this.isVirtualized&&this.links.each(function(s){s.isAvoiding&&s.actualBounds.Tc(e)&&s.bb()})}};function Wo(t,e){var i=t.be;if(i!==null&&i.visible){for(var n=pt.alloc(),r=1,s=1,l=i.O.s,h=l.length,a=0;a<h;a++){var f=l[a],p=Math.abs(f.interval);2>p||(_m(f.figure)?s=s*p/F.sx(s,p):r=r*p/F.sx(r,p))}if(l=i.gridCellSize,n.h(s*l.width,r*l.height),e!==void 0)r=e.width,s=e.height,t=e.x,l=e.y;else{if(e=V.alloc(),t=t.viewportBounds,e.h(t.x,t.y,t.width,t.height),!e.w()){V.free(e);return}r=e.width,s=e.height,t=e.x,l=e.y,V.free(e)}i.width=r+2*n.width,i.height=s+2*n.height,e=P.alloc(),F.Ko(t,l,0,0,n.width,n.height,e),e.offset(-n.width,-n.height),pt.free(n),i.part.location=e,P.free(e)}}D.prototype.clearSelection=function(t){t===void 0&&(t=!1);var e=this.selection;if(e.count!==0){t||this.R("ChangingSelection",e);for(var i=e.Fa(),n=i.length,r=0;r<n;r++)i[r].isSelected=!1;e.ka(),e.clear(),e.freeze(),t||this.R("ChangedSelection",e)}},D.prototype.select=function(t){t!==null&&t.diagram===this&&(!t.isSelected||1<this.selection.count)&&(this.R("ChangingSelection",this.selection),this.clearSelection(!0),t.isSelected=!0,this.R("ChangedSelection",this.selection))},D.prototype.kA=function(t){if(this.R("ChangingSelection",this.selection),this.clearSelection(!0),Wt(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];n instanceof lt||R("Diagram.selectCollection given something that is not a Part: "+n),n.isSelected=!0}else for(t=t.iterator;t.next();)e=t.value,e instanceof lt||R("Diagram.selectCollection given something that is not a Part: "+e),e.isSelected=!0;this.R("ChangedSelection",this.selection)},D.prototype.clearHighlighteds=function(){var t=this.highlighteds;if(0<t.count){for(var e=t.Fa(),i=e.length,n=0;n<i;n++)e[n].isHighlighted=!1;t.ka(),t.clear(),t.freeze()}},o=D.prototype,o.Dz=function(t){t!==null&&t.diagram===this&&(!t.isHighlighted||1<this.highlighteds.count)&&(this.clearHighlighteds(),t.isHighlighted=!0)},o.Ez=function(t){t=new q().addAll(t);for(var e=this.highlighteds.copy().bp(t).iterator;e.next();)e.value.isHighlighted=!1;for(t=t.iterator;t.next();)e=t.value,e instanceof lt||R("Diagram.highlightCollection given something that is not a Part: "+e),e.isHighlighted=!0},o.scroll=function(t,e,i){i===void 0&&(i=1);var n=e==="up"||e==="down",r=0,s=P.alloc();if(t==="pixel")r=i;else if(t==="line")r=i*(n?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if(t==="page")t=n?this.viewportBounds.height:this.viewportBounds.width,t*=this.scale,t!==0&&(r=i*Math.max(t-(n?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0));else{if(t==="document"){r=this.documentBounds,i=this.viewportBounds,e==="up"?this.position=s.h(i.x,r.y):e==="left"?this.position=s.h(r.x,i.y):e==="down"?this.position=s.h(i.x,r.bottom-i.height):e==="right"&&(this.position=s.h(r.right-i.width,i.y)),P.free(s);return}R("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}r/=this.scale,i=this.position,e==="up"?this.position=s.h(i.x,i.y-r):e==="down"?this.position=s.h(i.x,i.y+r):e==="left"?this.position=s.h(i.x-r,i.y):e==="right"?this.position=s.h(i.x+r,i.y):R("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+e),P.free(s)},o.rv=function(t){var e=this.viewportBounds;e.Oe(t)||(t=t.center,t.x-=e.width/2,t.y-=e.height/2,this.position=t)},o.Yr=function(t){var e=this.viewportBounds;t=t.center,t.x-=e.width/2,t.y-=e.height/2,this.position=t},o.jp=function(t){var e=this.Ab;e.reset(),this.Aa!==1&&e.scale(this.Aa);var i=this.pa;return(i.x!==0||i.y!==0)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),t.copy().transform(this.Ab)},o.sA=function(t){var e=this.Ab,i=t.x,n=t.y,r=i+t.width,s=n+t.height,l=e.m11,h=e.m12,a=e.m21,f=e.m22,p=e.dx,d=e.dy,y=i*l+n*a+p;e=i*h+n*f+d;var x=r*l+n*a+p;return t=r*h+n*f+d,n=i*l+s*a+p,i=i*h+s*f+d,l=r*l+s*a+p,r=r*h+s*f+d,s=Math.min(y,x),y=Math.max(y,x),x=Math.min(e,t),e=Math.max(e,t),s=Math.min(s,n),y=Math.max(y,n),x=Math.min(x,i),e=Math.max(e,i),s=Math.min(s,l),y=Math.max(y,l),x=Math.min(x,r),e=Math.max(e,r),new V(s,x,y-s,e-x)},o.Ks=function(t){var e=this.Ab;e.reset(),this.Aa!==1&&e.scale(this.Aa);var i=this.pa;return(i.x!==0||i.y!==0)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),yi(t.copy(),this.Ab)};function TM(t){var e=t.isModified;t.Pw!==e&&(t.Pw=e,t.R("Modified"))}function ej(t){return t=Bp.get(t),t!==null?new t:new Bt}D.prototype.doModelChanged=function(t){var e=this;if(t.model===this.model){var i=t.change,n=t.propertyName;if(i===fr&&n[0]==="S")if(n==="StartingFirstTransaction"){var r=this;t=this.toolManager,t.mouseDownTools.each(function(a){return a.diagram=r}),t.mouseMoveTools.each(function(a){return a.diagram=r}),t.mouseUpTools.each(function(a){return a.diagram=r}),this.dd||this.ef||(this.Fk=!0,this.cn&&(this.hg=!0))}else n==="StartingUndo"||n==="StartingRedo"?(t=this.animationManager,t.defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.zc(),this.R("ChangingSelection",this.selection)):n==="StartedTransaction"&&(t=this.animationManager,t.defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.zc());else if(this.aa){this.aa=!1;try{if(t.modelChange===""&&i===fr){(n==="FinishedUndo"||n==="FinishedRedo")&&(this.R("ChangedSelection",this.selection),xi(this));var s=this.animationManager;n==="RolledBackTransaction"&&s.zc(),this.$w(),this.Fk=!0,this.Wc(),this.undoManager.transactionLevel!==0&&this.undoManager.transactionLevel!==1||Z0(s),n==="CommittedTransaction"&&this.undoManager.isJustDiscarded&&(this.ze=Math.min(this.ze,this.undoManager.historyIndex-1)),n!=="CommittedTransaction"&&n!=="RolledBackTransaction"||!this.undoManager.isPendingUnmodified||setTimeout(function(){e.isModified=!1},1);var l=t.isTransactionFinished;if(l&&(TM(this),this.vs.clear(),_L(this.animationManager)),!this.Ot&&l&&this.lastInput.targetDiagram){this.Ot=!0;var h=this;H(function(){h.currentTool.standardMouseOver(),h.Ot=!1},10)}}}finally{this.aa=!0}}}};function LM(t,e){e=e.O.s;for(var i=e.length,n=0;n<i;n++)pm(t,e[n])}function pm(t,e){if(e instanceof Ri){var i=e.element;if(i!==null&&i instanceof HTMLImageElement){i.yg instanceof q&&i.yg.add(t);var n=e.Bg;if(n!==null&&n.mq===!0&&e.diagram!==null&&e.diagram.Un.add(e),i.en)if(i=i.getAttribute("src")||"",n=t.Kg.I(i),n===null)n=[],n.push(e),t.Kg.add(i,n);else{for(t=0;t<n.length;t++)if(n[t]===e)return;n.push(e)}}}}function dm(t,e){if(e instanceof Ri){var i=e.element;if(i!==null&&i instanceof HTMLImageElement&&i.en){var n=i.getAttribute("src")||"",r=t.Kg.I(n);if(r!==null){for(var s=0;s<r.length;s++)if(r[s]===e){r.splice(s,1),r.length===0&&(t.Kg.remove(n),i.zq&&i.removeEventListener("load",i.zq),i.Sp&&i.removeEventListener("error",i.Sp),delete i.zq,delete i.Sp,i.yg instanceof q&&i.yg.remove(t),zh(n));break}}}}}D.prototype.Sd=function(){this.partManager.Sd()},D.prototype.yj=function(t,e){this.Ud.yj(t,e)},D.prototype.Aj=function(t,e){this.Ud.Aj(t,e)},D.prototype.findPartForKey=function(t){return this.partManager.findPartForKey(t)},D.prototype.Rb=function(t){return this.partManager.Rb(t)},D.prototype.findLinkForKey=function(t){return this.partManager.findLinkForKey(t)},o=D.prototype,o.Ic=function(t){return this.partManager.Ic(t)},o.fi=function(t){return this.partManager.fi(t)},o.Hc=function(t){return this.partManager.Hc(t)},o.gs=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];return this.partManager.gs.apply(this.partManager,e instanceof Array?e:g(c(e)))},o.fs=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];return this.partManager.fs.apply(this.partManager,e instanceof Array?e:g(c(e)))};function $o(t){var e=t.pa,i=t.Aa;t.Nw.h(e.x,e.y,Math.max(t.Ca,0)/i,Math.max(t.Ba,0)/i),t.rd=!0}function gm(t,e){t.Wi=!1;var i=t.Np;i.C(e)||(i=i.copy(),t.Np.assign(e),pr(t,!1),t.R("DocumentBoundsChanged",void 0,i),t.Be=!0,t.N())}o.Va=function(){if(this.Wi){var t=V.alloc();gm(this,this.computeBounds(t)),V.free(t)}},o.mz=function(){for(var t=new q,e=this.nodes;e.next();){var i=e.value;i.isTopLevel&&t.add(i)}for(e=this.links;e.next();)i=e.value,i.isTopLevel&&t.add(i);return t.iterator},o.lz=function(){return this.Yh.iterator},o.Oz=function(t){xi(this),t&&Rp(this,!0),this.dd?ym(this,!1):(this.Fk=!0,Xo(this))};function Rp(t,e){for(var i=t.Yh.iterator;i.next();)jM(t,i.value,e);t.layout&&(e?t.layout.isValidLayout=!1:t.layout.D())}function jM(t,e,i){if(e!==null){for(var n=e.cl.iterator;n.next();)jM(t,n.value,i);e.layout!==null&&(i?e.layout.isValidLayout=!1:e.layout.D())}}function ym(t,e){if(t.th&&!t.ft){var i=t.aa;t.aa=!0;var n=t.undoManager.transactionLevel,r=t.layout,s=t.animationManager;try{n===0&&(t.undoManager.isInternalTransaction=!0,t.Ea("Layout")),1>=n&&!s.defaultAnimation.isAnimating&&!s.zb&&(e||Go(s,"Layout")),t.th=!1;for(var l=t.Yh.iterator;l.next();)EM(t,l.value,e,n);r.isValidLayout||(!e||r.isRealtime||r.isRealtime===null||n===0?(r.doLayout(t),xi(t),r.isValidLayout=!0):t.th=!0)}finally{e=t.undoManager.isInternalTransaction,n===0&&(t.eb("Layout"),t.undoManager.isInternalTransaction=!1),!e||n!==0&&n!==1||Z0(s),t.aa=i}}}function EM(t,e,i,n){if(e!==null){for(var r=e.cl.iterator;r.next();)EM(t,r.value,i,n);r=e.layout,r===null||r.isValidLayout||(!i||r.isRealtime||n===0?(e.nh=!e.location.w(),r.doLayout(e),e.D(32),sm(t,e),r.isValidLayout=!0):t.th=!0)}}o.sz=function(){for(var t=new tt,e=this.nodes;e.next();){var i=e.value;i.isTopLevel&&i.gh()===null&&t.add(i)}return t.iterator};function ij(t){function e(r){var s=r.toLowerCase(),l=new tt;i.add(r,l),i.add(s,l),n.add(r,r),n.add(s,r)}var i=new vt,n=new vt;e("InitialAnimationStarting"),e("AnimationStarting"),e("AnimationFinished"),e("BackgroundSingleClicked"),e("BackgroundDoubleClicked"),e("BackgroundContextClicked"),e("ClipboardChanged"),e("ClipboardPasted"),e("DocumentBoundsChanged"),e("ExternalObjectsDropped"),e("GainedFocus"),e("InitialLayoutCompleted"),e("LayoutCompleted"),e("LinkDrawn"),e("LinkRelinked"),e("LinkReshaped"),e("LostFocus"),e("Modified"),e("ObjectSingleClicked"),e("ObjectDoubleClicked"),e("ObjectContextClicked"),e("PartCreated"),e("PartResized"),e("PartRotated"),e("SelectionMoved"),e("SelectionCopied"),e("SelectionDeleting"),e("SelectionDeleted"),e("SelectionGrouped"),e("SelectionUngrouped"),e("ChangingSelection"),e("ChangedSelection"),e("SubGraphCollapsed"),e("SubGraphExpanded"),e("TextEdited"),e("TreeCollapsed"),e("TreeExpanded"),e("ViewportBoundsChanged"),e("InvalidateDraw"),t.ew=i,t.dw=n}function FM(t,e){var i=t.dw.I(e);return i!==null?i:t.dw.I(e.toLowerCase())}function mm(t,e){var i=t.ew.I(e);if(i!==null||(i=t.ew.I(e.toLowerCase()),i!==null))return i;R("Unknown DiagramEvent name: "+e)}o.zj=function(t,e){return t=mm(this,t),t!==null&&t.add(e),this},o.Yl=function(t,e){t=mm(this,t),t!==null&&t.remove(e)},o.R=function(t,e,i){var n=mm(this,t),r=new uu;if(r.diagram=this,t=FM(this,t),t!==null&&(r.name=t),e!==void 0&&(r.subject=e),i!==void 0&&(r.parameter=i),e=n.length,e===1)n.L(0)(r);else if(e!==0)for(n=n.Fa(),i=0;i<e;i++)(0,n[i])(r)};function OM(t){if(t.animationManager.isTicking)return!1;var e=t.currentTool;return e===t.toolManager.findTool("Dragging")?!t.Gr||e.isComplexRoutingRealtime:!0}o.Vj=function(t,e){return vm(this,!1,null,e||null).Vj(t.x,t.y,t.width,t.height)},D.prototype.computeOccupiedArea=function(t){return this.isVirtualized?this.viewportBounds.copy():this.Wi?MM(this,t):t.assign(this.documentBounds)};function vm(t,e,i,n){var r=t.Uh;if(r===null&&(t.Uh=r=new Bf(t.avoidanceCellSize)),r.qs||r.group!==i||r.Xx!==n){if(r.Fx=Math.max(r.Js+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.width)),r.Gx=Math.max(r.Js+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.height)),i!==null&&(i=AM(t,i)),i===null){e=V.alloc(),t.computeOccupiedArea(e),e.yc(100,100),r.initialize(e);for(var s=t.nodes;s.next();){var l=s.value,h=l.layer;h!==null&&h.visible&&!h.isTemporary&&xm(t,l,n,e)}V.free(e)}else{for(0<i.memberParts.count&&(e=t.computePartsBounds(i.memberParts,!1),e.yc(20,20),r.initialize(e)),e=V.alloc(),s=i.memberParts;s.next();)l=s.value,l instanceof b&&xm(t,l,n,e);V.free(e)}r.group=i,r.Xx=n,r.qs=!1}else e&&ak(r);return r}function AM(t,e){return e.avoidable&&!e.isLinkLabel?e:e.containingGroup!==null?AM(t,e.containingGroup):null}function xm(t,e,i,n){if(e!==i&&e.isVisible()){if(e.avoidable&&!e.isLinkLabel){e=e.getAvoidableRect(n),t=t.Uh;var r=e.x,s=e.y;if(Gh(t,r,s))for(i=(s-t.Gd)/t.pc|0,n=Math.min((r+e.width-t.Fd)/t.oc|0,t.ai),e=Math.min((s+e.height-t.Gd)/t.pc|0,t.bi),r=(r-t.Fd)/t.oc|0;r<=n;r++)if(s=t.Yb[r],s.fill)s.fill(ns,i,e+1);else for(var l=i;l<=e;l++)s[l]=ns}else if(e instanceof yt)for(e=e.memberParts;e.next();)r=e.value,r instanceof b&&xm(t,r,i,n)}}function wm(t,e){t.Uh===null||t.Uh.qs||e!==void 0&&(!e.avoidable||e.isLinkLabel)||(t.Uh.qs=!0)}D.prototype.bs=function(t){this.qp.assign(t),this.computeAutoScrollPosition(this.qp).Xa(this.position)?this.rg():IM(this)};function IM(t){t.rk===-1&&(t.rk=H(function(){if(t.rk!==-1&&(t.rg(),t.lastInput.event!==null)){var e=t.computeAutoScrollPosition(t.qp);e.Xa(t.position)||(t.position=e,t.lastInput.documentPoint=t.Ks(t.qp),t.doMouseMove(),t.Wi=!0,e=V.alloc(),t.computeBounds(e),e.Zc(t.documentBounds),gm(t,e),V.free(e),t.Cc=!0,t.Wc(),IM(t))}},t.pp))}D.prototype.rg=function(){this.rk!==-1&&(Y.clearTimeout(this.rk),this.rk=-1)},D.prototype.computeAutoScrollPosition=function(t){var e=this.position,i=this.rp;if(0>=i.top&&0>=i.left&&0>=i.right&&0>=i.bottom)return e;var n=this.viewportBounds,r=this.scale;n=V.allocAt(0,0,n.width*r,n.height*r);var s=P.allocAt(0,0);if(t.x>=n.x&&t.x<n.x+i.left&&this.allowHorizontalScroll){var l=Math.max(this.scrollHorizontalLineChange,1);l|=0,s.x-=l,t.x<n.x+i.left/2&&(s.x-=l),t.x<n.x+i.left/4&&(s.x-=4*l)}else t.x<=n.x+n.width&&t.x>n.x+n.width-i.right&&this.allowHorizontalScroll&&(l=Math.max(this.scrollHorizontalLineChange,1),l|=0,s.x+=l,t.x>n.x+n.width-i.right/2&&(s.x+=l),t.x>n.x+n.width-i.right/4&&(s.x+=4*l));return t.y>=n.y&&t.y<n.y+i.top&&this.allowVerticalScroll?(l=Math.max(this.scrollVerticalLineChange,1),l|=0,s.y-=l,t.y<n.y+i.top/2&&(s.y-=l),t.y<n.y+i.top/4&&(s.y-=4*l)):t.y<=n.y+n.height&&t.y>n.y+n.height-i.bottom&&this.allowVerticalScroll&&(l=Math.max(this.scrollVerticalLineChange,1),l|=0,s.y+=l,t.y>n.y+n.height-i.bottom/2&&(s.y+=l),t.y>n.y+n.height-i.bottom/4&&(s.y+=4*l)),s.Xa(yo)||(e=new P(e.x+s.x/r,e.y+s.y/r)),V.free(n),P.free(s),e},o=D.prototype,o.xs=function(){return null},o.Zu=function(){return null},o.Vr=function(t,e){this.nj.add(t,e)},o.Bu=function(t){(this.Lw=t)||this.nodes.each(function(e){e instanceof yt&&(e.Up=null)})};function DM(t,e,i){function n(){var p=+new Date;for(s=!0,l.reset();l.next();)if(!l.value[0].Xk){s=!1;break}s||p-f>a?e(i,r,h):Y.requestAnimationFrame(n)}for(var r=i.callback,s=!0,l=t.Kg.iterator;l.next();)if(!l.value[0].Xk){s=!1;break}if(typeof r!="function"||s)return e(i,r,t);var h=t,a=i.callbackTimeout||300,f=+new Date;return Y.requestAnimationFrame(function(){n()}),null}o.Qz=function(t){return $n?(t===void 0&&(t={}),t.returnType="Image",this.Hx(t)):null},o.Hx=function(t){return t===void 0&&(t={}),DM(this,this.Rz,t)},o.Rz=function(t,e,i){var n=RM(i,t,"canvas",null);if(n===null)return null;i=n.Z.canvas;var r=null;if(i!==null)switch(r=t.returnType,r===void 0?r="string":r=r.toLowerCase(),r){case kh+"data":r=n.getImageData(0,0,i.width,i.height);break;case kh:n=(t.document||document).createElement("img"),n.src=i.toDataURL(t.type,t.details),r=n;break;case"blob":return typeof e!="function"&&R('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.'),typeof i.toBlob=="function"?(i.toBlob(e,t.type,t.details),"toBlob"):(e(null),null);default:r=i.toDataURL(t.type,t.details)}return typeof e=="function"?(e(r),null):r};function RM(t,e,i,n){if(t.animationManager.zc(),t.Wc(),t.xa===null)return null;typeof e!="object"&&R("properties argument must be an Object.");var r=e.size||null,s=e.scale||null;e.scale!==void 0&&isNaN(e.scale)&&(s="NaN");var l=e.maxSize;e.maxSize===void 0&&(l=i==="SVG"?new pt(1/0,1/0):new pt(2e3,2e3));var h=e.position||null,a=e.parts||null,f=e.padding===void 0?1:e.padding,p=e.background||null,d=e.omitTemporary;d===void 0&&(d=!0);var y=e.document||document,x=e.elementFinished||null,v=e.showTemporary;v===void 0&&(v=!d),e=e.showGrid,e===void 0&&(e=v),r!==null&&isNaN(r.width)&&isNaN(r.height)&&(r=null),typeof f=="number"?f=new Rt(f):f instanceof Rt||R("MakeImage padding must be a Margin or a number."),f.left=Math.max(f.left,0),f.right=Math.max(f.right,0),f.top=Math.max(f.top,0),f.bottom=Math.max(f.bottom,0),t.jb.Qc(!0),d=new In(null,y,void 0,!0);var S=d.context;if(!(r||s||a||h))return d.width=t.Ca+Math.ceil(f.left+f.right),d.height=t.Ba+Math.ceil(f.top+f.bottom),i==="SVG"?n===null?null:(n.resize(d.width,d.height,d.width,d.height),n.ownerDocument=y,n.cs=x,Ap(t,n.context,f,new pt(d.width,d.height),t.Aa,t.pa,a,p,v,e),n.context):(t.Um=!1,Ap(t,S,f,new pt(d.width,d.height),t.Aa,t.pa,a,p,v,e),t.Um=!0,d.context);var N=t.Kp,k=t.documentBounds.copy();if(k.Bv(t.yb),v)for(var C=t.Wa.s,T=C.length,L=0;L<T;L++){var E=C[L];if(E.visible&&E.isTemporary){E=E.Pa.s;for(var I=E.length,Z=0;Z<I;Z++){var it=E[Z];it.isInDocumentBounds&&it.isVisible()&&(it=it.actualBounds,it.w()&&k.Zc(it))}}}if(C=new P(k.x,k.y),a!==null){for(T=new V(0,0,0,0),L=!0,E=a.iterator,E.reset();E.next();)I=E.value,I instanceof lt&&(Z=I.layer,Z!==null&&!Z.visible||Z!==null&&!v&&Z.isTemporary||!I.isVisible()||(I=I.actualBounds,I.w()&&(L?(L=!1,T.assign(I)):T.Zc(I))));k.width=T.width,k.height=T.height,C.x=T.x,C.y=T.y}return h!==null&&h.w()&&(C=h,s||(s=N)),T=h=0,f!==null&&(h=f.left+f.right,T=f.top+f.bottom),L=E=0,r!==null&&(E=r.width,L=r.height,isFinite(E)&&(E=Math.max(0,E-h)),isFinite(L)&&(L=Math.max(0,L-T))),r!==null&&s!==null?(s==="NaN"&&(s=N),r.w()?(r=E,k=L):isNaN(L)?(r=E,k=k.height*s):(r=k.width*s,k=L)):r!==null?r.w()?(s=Math.min(E/k.width,L/k.height),r=E,k=L):isNaN(L)?(s=E/k.width,r=E,k=k.height*s):(s=L/k.height,r=k.width*s,k=L):s!==null?s==="NaN"&&l.w()?(s=Math.min((l.width-h)/k.width,(l.height-T)/k.height),s>N?(s=N,r=k.width,k=k.height):(r=l.width,k=l.height)):(r=k.width*s,k=k.height*s):(s=N,r=k.width,k=k.height),f!==null?(r+=h,k+=T):f=new Rt(0),l!==null&&(N=l.width,l=l.height,isNaN(N)&&(N=2e3),isNaN(l)&&(l=2e3),isFinite(N)&&(r=Math.min(r,N)),isFinite(l)&&(k=Math.min(k,l))),d.width=Math.ceil(r),d.height=Math.ceil(k),i==="SVG"?n===null?null:(n.resize(d.width,d.height,d.width,d.height),n.ownerDocument=y,n.cs=x,Ap(t,n.context,f,new pt(Math.ceil(r),Math.ceil(k)),s,C,a,p,v,e),n.context):(t.Um=!1,Ap(t,S,f,new pt(Math.ceil(r),Math.ceil(k)),s,C,a,p,v,e),t.Um=!0,d.context)}z.Object.defineProperties(D.prototype,{renderer:{get:function(){return this.jl},set:function(t){this instanceof Jr||(t===""&&(t="default"),t=t.toLowerCase(),t!==this.jl&&(this.jl=t,t==="default"||t==="canvas"?(t=this.nj.get("svg"),t!==null&&t.La.remove(),this.xa&&(this.jb=this.xa.context)):t==="svg"?(this.nj.contains("svg")?t=this.nj.get("svg"):(t=new Or(this,Y.document),this.Vr("svg",t)),this.div!==null&&this.div.appendChild(t.La),this.jb=t.context,this.xa&&(this.xa.context.setTransform(this.Pb,0,0,this.Pb,0,0),this.xa.context.clearRect(0,0,this.Ca,this.Ba))):t!=="debug"||this.nj.contains("SVG")||(t=new Or(this,Y.document),this.Vr("SVG",t),t.La.style.backgroundColor="whitesmoke",this.div!==null&&this.div.after(t.La)),this.Xl()))}},div:{get:function(){return this.Ka},set:function(t){if(this.Ka!==t){var e=this.Ka;e!==null?(e.H=void 0,e.goDiagram=void 0,e.go=void 0,e.innerHTML="",this.xa!==null&&(e=this.xa.La,this.removeEventListener(e,"pointermove",this.ak,!1),this.removeEventListener(e,"pointerdown",this.ri,!1),this.removeEventListener(e,"pointerup",this.ck,!1),this.removeEventListener(e,"pointerout",this.bk,!1),this.removeEventListener(e,"pointercancel",this.$j,!1),this.xa.jx()),this.kl&&(this.kl.disconnect(),this.kl=null),e=this.toolManager,e!==null&&(e.mouseDownTools.each(function(i){i.cancelWaitAfter()}),e.mouseMoveTools.each(function(i){i.cancelWaitAfter()}),e.mouseUpTools.each(function(i){i.cancelWaitAfter()})),e.cancelWaitAfter(),this.currentTool.doCancel(),this.xa=null,this.removeEventListener(Y,"resize",this.Kv,!1),this.removeEventListener(Y,"wheel",this.Xj,!0),vh===this&&(vh=null)):this.ri===null&&(this.ef=!1),this.Ka=null,t!==null&&((e=t.H)&&(e.div=null),tm(this,t),this.redraw())}}},Ww:{get:function(){return this.Mq}},mi:{get:function(){return this.ef}},draggedLink:{get:function(){return this.ht},set:function(t){this.ht!==t&&(this.ht=t,t!==null&&(this.St=t.fromPort,this.Tt=t.toPort))}},Lx:{get:function(){return this.St},set:function(t){this.St=t}},Mx:{get:function(){return this.Tt},set:function(t){this.Tt=t}},animationManager:{get:function(){return this.Ud}},undoManager:{get:function(){return this.$b.undoManager}},skipsUndoManager:{get:function(){return this.Sg},set:function(t){this.Sg=t,this.$b.skipsUndoManager=t}},delaysLayout:{get:function(){return this.ft},set:function(t){this.ft=t}},opacity:{get:function(){return this.qb},set:function(t){var e=this.qb;e!==t&&((0>t||1<t)&&dt(t,"0 <= value <= 1",D,"opacity"),this.qb=t,this.g("opacity",e,t),this.N())}},validCycle:{get:function(){return this.tu},set:function(t){var e=this.tu;e!==t&&(this.tu=t,this.g("validCycle",e,t))}},layers:{get:function(){return this.Wa.iterator}},isModelReadOnly:{get:function(){var t=this.$b;return t===null?!1:t.isReadOnly},set:function(t){var e=this.$b;e!==null&&(e.isReadOnly=t)}},isReadOnly:{get:function(){return this.Dg},set:function(t){var e=this.Dg;e!==t&&(this.Dg=t,this.g("isReadOnly",e,t))}},isEnabled:{get:function(){return this.Bd},set:function(t){var e=this.Bd;e!==t&&(this.Bd=t,this.g("isEnabled",e,t))}},allowClipboard:{get:function(){return this.Ps},set:function(t){var e=this.Ps;e!==t&&(this.Ps=t,this.g("allowClipboard",e,t))}},allowCopy:{get:function(){return this.Ci},set:function(t){var e=this.Ci;e!==t&&(this.Ci=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Di},set:function(t){var e=this.Di;e!==t&&(this.Di=t,this.g("allowDelete",e,t))}},allowDragOut:{get:function(){return this.Qs},set:function(t){var e=this.Qs;e!==t&&(this.Qs=t,this.g("allowDragOut",e,t))}},allowDrop:{get:function(){return this.Rs},set:function(t){var e=this.Rs;e!==t&&(this.Rs=t,this.g("allowDrop",e,t))}},allowTextEdit:{get:function(){return this.Mi},set:function(t){var e=this.Mi;e!==t&&(this.Mi=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Ei},set:function(t){var e=this.Ei;e!==t&&(this.Ei=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Ni},set:function(t){var e=this.Ni;e!==t&&(this.Ni=t,this.g("allowUngroup",e,t))}},allowInsert:{get:function(){return this.Ts},set:function(t){var e=this.Ts;e!==t&&(this.Ts=t,this.g("allowInsert",e,t))}},allowLink:{get:function(){return this.Fi},set:function(t){var e=this.Fi;e!==t&&(this.Fi=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Hi},set:function(t){var e=this.Hi;e!==t&&(this.Hi=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Gi},set:function(t){var e=this.Gi;e!==t&&(this.Gi=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Ii},set:function(t){var e=this.Ii;e!==t&&(this.Ii=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Ji},set:function(t){var e=this.Ji;e!==t&&(this.Ji=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Ki},set:function(t){var e=this.Ki;e!==t&&(this.Ki=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Li},set:function(t){var e=this.Li;e!==t&&(this.Li=t,this.g("allowSelect",e,t))}},allowUndo:{get:function(){return this.Us},set:function(t){var e=this.Us;e!==t&&(this.Us=t,this.g("allowUndo",e,t))}},allowZoom:{get:function(){return this.Ws},set:function(t){var e=this.Ws;e!==t&&(this.Ws=t,this.g("allowZoom",e,t))}},hasVerticalScrollbar:{get:function(){return this.kn},set:function(t){var e=this.kn;e!==t&&(this.kn=t,this.Be=!0,this.N(),this.g("hasVerticalScrollbar",e,t),pr(this,!1))}},hasHorizontalScrollbar:{get:function(){return this.jn},set:function(t){var e=this.jn;e!==t&&(this.jn=t,this.Be=!0,this.N(),this.g("hasHorizontalScrollbar",e,t),pr(this,!1))}},allowHorizontalScroll:{get:function(){return this.Ss},set:function(t){var e=this.Ss;e!==t&&(this.Ss=t,this.g("allowHorizontalScroll",e,t),pr(this,!1))}},allowVerticalScroll:{get:function(){return this.Vs},set:function(t){var e=this.Vs;e!==t&&(this.Vs=t,this.g("allowVerticalScroll",e,t),pr(this,!1))}},scrollHorizontalLineChange:{get:function(){return this.fu},set:function(t){var e=this.fu;e!==t&&(0>t&&dt(t,">= 0",D,"scrollHorizontalLineChange"),this.fu=t,this.g("scrollHorizontalLineChange",e,t))}},scrollVerticalLineChange:{get:function(){return this.ju},set:function(t){var e=this.ju;e!==t&&(0>t&&dt(t,">= 0",D,"scrollVerticalLineChange"),this.ju=t,this.g("scrollVerticalLineChange",e,t))}},lastInput:{get:function(){return this.$i},set:function(t){this.$i=t}},previousInput:{get:function(){return this.Mg},set:function(t){this.Mg=t}},firstInput:{get:function(){return this.Wp},set:function(t){this.Wp=t}},currentCursor:{get:function(){return this.ct},set:function(t){if(t===""&&(t=this.Jp),this.ct!==t){var e=this.xa,i=this.Ka;if(e!==null&&i!==null){this.ct=t;var n=e.style.cursor;e.style.cursor=t,i.style.cursor=t,e.style.cursor===n&&(e.style.cursor="-webkit-"+t,i.style.cursor="-webkit-"+t,e.style.cursor===n&&(e.style.cursor="-moz-"+t,i.style.cursor="-moz-"+t,e.style.cursor===n&&(e.style.cursor=t,i.style.cursor=t)))}}}},defaultCursor:{get:function(){return this.Jp},set:function(t){t===""&&(t="auto");var e=this.Jp;e!==t&&(this.Jp=t,this.g("defaultCursor",e,t))}},click:{get:function(){return this.vh},set:function(t){var e=this.vh;e!==t&&(this.vh=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.Bh},set:function(t){var e=this.Bh;e!==t&&(this.Bh=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.xh},set:function(t){var e=this.xh;e!==t&&(this.xh=t,this.g("contextClick",e,t))}},mouseOver:{get:function(){return this.Nh},set:function(t){var e=this.Nh;e!==t&&(this.Nh=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.Lh},set:function(t){var e=this.Lh;e!==t&&(this.Lh=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.Kh},set:function(t){var e=this.Kh;e!==t&&(this.Kh=t,this.g("mouseHold",e,t))}},mouseDragOver:{get:function(){return this.Nt},set:function(t){var e=this.Nt;e!==t&&(this.Nt=t,this.g("mouseDragOver",e,t))}},mouseDrop:{get:function(){return this.Ih},set:function(t){var e=this.Ih;e!==t&&(this.Ih=t,this.g("mouseDrop",e,t))}},handlesDragDropForTopLevelParts:{get:function(){return this.st},set:function(t){var e=this.st;e!==t&&(this.st=t,this.g("handlesDragDropForTopLevelParts",e,t))}},mouseEnter:{get:function(){return this.Jh},set:function(t){var e=this.Jh;e!==t&&(this.Jh=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.Mh},set:function(t){var e=this.Mh;e!==t&&(this.Mh=t,this.g("mouseLeave",e,t))}},toolTip:{get:function(){return this.Xh},set:function(t){var e=this.Xh;e!==t&&(this.Xh=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.yh},set:function(t){var e=this.yh;e!==t&&(this.yh=t,this.g("contextMenu",e,t))}},commandHandler:{get:function(){return this.ob},set:function(t){this.ob!==t&&(this.ob=t,t.Ue(this))}},toolManager:{get:function(){return this.qe},set:function(t){this.qe!==t&&(this.qe=t,t.diagram=this)}},defaultTool:{get:function(){return this.pb},set:function(t){var e=this.pb;e!==t&&(this.pb=t,t.diagram=this,this.currentTool===e&&(this.currentTool=t))}},currentTool:{get:function(){return this.hb},set:function(t){var e=this.hb;e&&(e.isActive&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),t===null&&(t=this.defaultTool),t!==null&&(this.hb=t,t.diagram=this,t.doStart())}},selection:{get:function(){return this.Dw}},maxSelectionCount:{get:function(){return this.It},set:function(t){var e=this.It;if(e!==t)if(0<=t&&!isNaN(t)){if(this.It=t,this.g("maxSelectionCount",e,t),!this.undoManager.isUndoingRedoing&&(t=this.selection.count-t,0<t)){this.R("ChangingSelection",this.selection),e=this.selection.Fa();for(var i=0;i<t;i++)e[i].isSelected=!1;this.R("ChangedSelection",this.selection)}}else dt(t,">= 0",D,"maxSelectionCount")}},nodeSelectionAdornmentTemplate:{get:function(){return this.Pt},set:function(t){var e=this.Pt;e!==t&&(this.Pt=t,this.g("nodeSelectionAdornmentTemplate",e,t))}},groupSelectionAdornmentTemplate:{get:function(){return this.rt},set:function(t){var e=this.rt;e!==t&&(this.rt=t,this.g("groupSelectionAdornmentTemplate",e,t))}},linkSelectionAdornmentTemplate:{get:function(){return this.Ft},set:function(t){var e=this.Ft;e!==t&&(this.Ft=t,this.g("linkSelectionAdornmentTemplate",e,t))}},highlighteds:{get:function(){return this.jw}},isModified:{get:function(){var t=this.undoManager;return t.isEnabled?t.currentTransaction!==null?!0:this.on&&this.ze!==t.historyIndex:this.on},set:function(t){if(this.on!==t){this.on=t;var e=this.undoManager;!t&&e.isEnabled&&(this.ze=e.historyIndex),t||TM(this)}}},model:{get:function(){return this.$b},set:function(t){var e=this.$b;if(e!==t){this.currentTool.doCancel(),e&&e.undoManager!==t.undoManager&&e.undoManager.isInTransaction&&R("Do not replace a Diagram.model while a transaction is in progress."),this.animationManager.zc(!0);var i=vM(this,!0);this.ef=!1,this.cn=!0,this.ze=-2,this.hg=!1;var n=this.vb;this.vb=!0,Go(this.animationManager,"Model"),e&&(this.lf!==null&&this.lf.each(function(s){return e.ek(s)}),e.ek(this.Lc)),this.$b=t,this.partManager=ej(this.$b.type);for(var r=0;r<i.length;r++)this.add(i[r]);t.Me(this.Fb),this.partManager.addAllModeledParts(),t.ek(this.Fb),t.Me(this.Lc),this.lf!==null&&this.lf.each(function(s){return t.Me(s)}),this.vb=n,this.Ya(),this.vb||this.N(),e&&t.undoManager.copyProperties(e.undoManager)}}},aa:{get:function(){return this.nw},set:function(t){this.nw=t}},vs:{get:function(){return this.qy}},skipsModelSourceBindings:{get:function(){return this.Ew},set:function(t){this.Ew=t}},Is:{get:function(){return this.lu},set:function(t){this.lu=t}},nodeTemplate:{get:function(){return this.Hg.I("")},set:function(t){var e=this.Hg.I("");e!==t&&(this.Hg.add("",t),this.g("nodeTemplate",e,t),this.undoManager.isUndoingRedoing||this.Sd())}},nodeTemplateMap:{get:function(){return this.Hg},set:function(t){var e=this.Hg;e!==t&&(this.Hg=t,this.g("nodeTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Sd())}},groupTemplate:{get:function(){return this.Vi.I("")},set:function(t){var e=this.Vi.I("");e!==t&&(this.Vi.add("",t),this.g("groupTemplate",e,t),this.undoManager.isUndoingRedoing||this.Sd())}},groupTemplateMap:{get:function(){return this.Vi},set:function(t){var e=this.Vi;e!==t&&(this.Vi=t,this.g("groupTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Sd())}},linkTemplate:{get:function(){return this.Hh.I("")},set:function(t){var e=this.Hh.I("");e!==t&&(this.Hh.add("",t),this.g("linkTemplate",e,t),this.undoManager.isUndoingRedoing||this.Sd())}},linkTemplateMap:{get:function(){return this.Hh},set:function(t){var e=this.Hh;e!==t&&(this.Hh=t,this.g("linkTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Sd())}},isMouseCaptured:{get:function(){return this.mw},set:function(t){var e=this.xa;e!==null&&(e=e.La,e instanceof SVGElement||(t?(this.lastInput.bubbles=!1,this.removeEventListener(e,"pointermove",this.ak,!1),this.removeEventListener(e,"pointerdown",this.ri,!1),this.removeEventListener(e,"pointerup",this.ck,!1),this.removeEventListener(e,"pointerout",this.bk,!1),this.removeEventListener(e,"pointercancel",this.$j,!1),this.addEventListener(Y,"pointermove",this.ak,!0),this.addEventListener(Y,"pointerdown",this.ri,!0),this.addEventListener(Y,"pointerup",this.ck,!0),this.addEventListener(Y,"pointerout",this.bk,!0),this.addEventListener(Y,"pointercancel",this.$j,!0),this.removeEventListener(e,"wheel",this.Xj,!1),this.addEventListener(Y,"wheel",this.Xj,!0),this.addEventListener(Y,"selectstart",this.preventDefault,!1)):(this.removeEventListener(Y,"pointermove",this.ak,!0),this.removeEventListener(Y,"pointerdown",this.ri,!0),this.removeEventListener(Y,"pointerup",this.ck,!0),this.removeEventListener(Y,"pointerout",this.bk,!0),this.removeEventListener(Y,"pointercancel",this.$j,!0),this.addEventListener(e,"pointermove",this.ak,!1),this.addEventListener(e,"pointerdown",this.ri,!1),this.addEventListener(e,"pointerup",this.ck,!1),this.addEventListener(e,"pointerout",this.bk,!1),this.addEventListener(e,"pointercancel",this.$j,!1),this.removeEventListener(Y,"wheel",this.Xj,!0),this.removeEventListener(Y,"selectstart",this.preventDefault,!1),this.addEventListener(e,"wheel",this.Xj,!1)),this.mw=t))}},position:{get:function(){return this.pa},set:function(t){var e=P.alloc().assign(this.pa);if(!e.C(t)){var i=this.viewportBounds.copy();this.pa.assign(t),rM(this.animationManager,e,this.pa),this.vb||this.xa===null&&!this.to.w()?$o(this):(this.vb=!0,t=this.scale,im(this,this.Np,this.Ca/t,this.Ba/t,this.vk,!1),this.vb=!1),this.vb||this.onViewportBoundsChanged(i,this.viewportBounds,this.Aa,!1)}P.free(e)}},initialPosition:{get:function(){return this.ut},set:function(t){this.ut.C(t)||(this.ut=t.J())}},initialScale:{get:function(){return this.vt},set:function(t){this.vt!==t&&(this.vt=t)}},grid:{get:function(){return this.be===null&&(this.be=SM(this)),this.be},set:function(t){var e=this.be;if(e!==t){e===null&&(e=this.be=SM(this)),t.type!==_.Grid&&R("Diagram.grid must be a Panel of type Panel.Grid");var i=e.panel;i!==null&&i.remove(e),this.be=t,t.name="GRID",i!==null&&i.add(t),Wo(this),this.N(),this.g("grid",e,t)}}},viewportBounds:{get:function(){return this.Nw}},viewSize:{get:function(){return this.to},set:function(t){var e=this.viewSize;e.C(t)||(this.to=t=t.J(),this.Ba=this.Ca=0,t.w()?(this.Ca=t.width,this.Ba=t.height):this.Ka!==null&&(this.Ca=this.Ka.clientWidth||1,this.Ba=this.Ka.clientHeight||1),$o(this),this.Ya(),this.g("viewSize",e,t),this.redraw())}},fixedBounds:{get:function(){return this.pt},set:function(t){var e=this.pt;e.C(t)||(t.width!==-1/0&&t.height!==1/0&&t.height!==-1/0||R("fixedBounds width/height must not be Infinity"),this.pt=t=t.J(),this.Ya(),this.g("fixedBounds",e,t))}},scrollMargin:{get:function(){return this.pj},set:function(t){typeof t=="number"&&(t=new Rt(t));var e=this.pj;e.C(t)||(this.pj=t=t.J(),this.g("scrollMargin",e,t),this.Xl())}},scrollMode:{get:function(){return this.qj},set:function(t){var e=this.qj;e!==t&&(this.qj=t,t===cl&&pr(this,!1),this.g("scrollMode",e,t),this.Be=!0,this.N())}},scrollsPageOnFocus:{get:function(){return this.ku},set:function(t){var e=this.ku;e!==t&&(this.ku=t,this.g("scrollsPageOnFocus",e,t))}},positionComputation:{get:function(){return this.Wt},set:function(t){var e=this.Wt;e!==t&&(this.Wt=t,pr(this,!1),this.g("positionComputation",e,t))}},scaleComputation:{get:function(){return this.cu},set:function(t){var e=this.cu;e!==t&&(this.cu=t,CM(this,this.scale,this.scale),this.g("scaleComputation",e,t))}},documentBounds:{get:function(){return this.Np}},isVirtualized:{get:function(){return this.Dt},set:function(t){var e=this.Dt;e!==t&&(this.Dt=t,this.g("isVirtualized",e,t))}},scale:{get:function(){return this.Aa},set:function(t){var e=this.Aa;e!==t&&CM(this,e,t)}},defaultScale:{get:function(){return this.Kp},set:function(t){this.Kp=t}},autoScale:{get:function(){return this.uh},set:function(t){var e=this.uh;e!==t&&(this.uh=t,this.g("autoScale",e,t),t!==mn&&pr(this,!1))}},initialAutoScale:{get:function(){return this.Cg},set:function(t){var e=this.Cg;e!==t&&(this.Cg=t,this.g("initialAutoScale",e,t))}},initialViewportSpot:{get:function(){return this.wt},set:function(t){var e=this.wt;e!==t&&(t.tb()||R("initialViewportSpot must be a specific Spot: "+t),this.wt=t,this.g("initialViewportSpot",e,t))}},initialDocumentSpot:{get:function(){return this.tt},set:function(t){var e=this.tt;e!==t&&(t.tb()||R("initialViewportSpot must be a specific Spot: "+t),this.tt=t,this.g("initialDocumentSpot",e,t))}},minScale:{get:function(){return this.Lt},set:function(t){var e=this.Lt;e!==t&&(0<t?(this.Lt=t,this.g("minScale",e,t),t>this.scale&&(this.scale=t)):dt(t,"> 0",D,"minScale"))}},maxScale:{get:function(){return this.Ht},set:function(t){var e=this.Ht;e!==t&&(0<t?(this.Ht=t,this.g("maxScale",e,t),t<this.scale&&(this.scale=t)):dt(t,"> 0",D,"maxScale"))}},zoomPoint:{get:function(){return this.wu},set:function(t){this.wu.C(t)||(this.wu=t=t.J())}},contentAlignment:{get:function(){return this.vk},set:function(t){var e=this.vk;e.C(t)||(this.vk=t=t.J(),this.g("contentAlignment",e,t),pr(this,!1))}},initialContentAlignment:{get:function(){return this.jq},set:function(t){var e=this.jq;e.C(t)||(this.jq=t=t.J(),this.g("initialContentAlignment",e,t))}},padding:{get:function(){return this.yb},set:function(t){typeof t=="number"&&(t=new Rt(t));var e=this.yb;e.C(t)||(this.yb=t=t.J(),this.Ya(),this.g("padding",e,t))}},partManager:{get:function(){return this.Mc},set:function(t){var e=this.Mc;e!==t&&(t.diagram!==null&&R("Cannot share PartManagers between Diagrams: "+t.toString()),e&&e.Ue(null),this.Mc=t,t.Ue(this))}},nodes:{get:function(){return this.partManager.nodes.iterator}},links:{get:function(){return this.partManager.links.iterator}},parts:{get:function(){return this.partManager.parts.iterator}},layout:{get:function(){return this.Oc},set:function(t){var e=this.Oc;e!==t&&(this.Oc=t,t.diagram=this,t.group=null,this.th=!0,this.g("layout",e,t),this.Wb())}},isTreePathToChildren:{get:function(){return this.Ct},set:function(t){var e=this.Ct;if(e!==t&&(this.Ct=t,this.g("isTreePathToChildren",e,t),!this.undoManager.isUndoingRedoing))for(t=this.nodes;t.next();)Tf(t.value)}},treeCollapsePolicy:{get:function(){return this.ru},set:function(t){var e=this.ru;e!==t&&(t!==pu&&t!==km&&t!==Nm&&R("Unknown Diagram.treeCollapsePolicy: "+t),this.ru=t,this.g("treeCollapsePolicy",e,t))}},Re:{get:function(){return this.lw},set:function(t){this.lw=t}},avoidanceCellSize:{get:function(){return this.Xv},set:function(t){this.Uh=null,this.Xv=new pt(Math.max(1,t.width),Math.max(1,t.height))}},avoidanceLimit:{get:function(){return this.Yv},set:function(t){this.Yv=Math.max(1,t)}},autoScrollInterval:{get:function(){return this.pp},set:function(t){var e=this.pp;e!==t&&(this.pp=t,this.g("autoScrollInterval",e,t))}},autoScrollRegion:{get:function(){return this.rp},set:function(t){typeof t=="number"&&(t=new Rt(t));var e=this.rp;e.C(t)||(this.rp=t=t.J(),this.Ya(),this.g("autoScrollRegion",e,t))}}}),z.Object.defineProperties(D,{licenseKey:{get:function(){return Pm.fc()},set:function(t){Pm.add(t.replace(/\s/g,""))}},version:{get:function(){return nj}}}),D.prototype.makeImageData=D.prototype.Hx,D.prototype.makeImage=D.prototype.Qz,D.prototype.cacheGroupExternalLinks=D.prototype.Bu,D.prototype.addRenderer=D.prototype.Vr,D.prototype.makeSVG=D.prototype.Zu,D.prototype.makeSvg=D.prototype.xs,D.prototype.stopAutoScroll=D.prototype.rg,D.prototype.doAutoScroll=D.prototype.bs,D.prototype.isUnoccupied=D.prototype.Vj,D.prototype.raiseDiagramEvent=D.prototype.R,D.prototype.removeDiagramListener=D.prototype.Yl,D.prototype.addDiagramListener=D.prototype.zj,D.prototype.findTreeRoots=D.prototype.sz,D.prototype.layoutDiagram=D.prototype.Oz,D.prototype.findTopLevelGroups=D.prototype.lz,D.prototype.findTopLevelNodesAndLinks=D.prototype.mz,D.prototype.ensureBounds=D.prototype.Va,D.prototype.findLinksByExample=D.prototype.fs,D.prototype.findNodesByExample=D.prototype.gs,D.prototype.findLinkForData=D.prototype.Hc,D.prototype.findNodeForData=D.prototype.fi,D.prototype.findPartForData=D.prototype.Ic,D.prototype.findLinkForKey=D.prototype.findLinkForKey,D.prototype.findNodeForKey=D.prototype.Rb,D.prototype.findPartForKey=D.prototype.findPartForKey,D.prototype.rebuildParts=D.prototype.Sd,D.prototype.transformViewToDoc=D.prototype.Ks,D.prototype.transformRectDocToView=D.prototype.sA,D.prototype.transformDocToView=D.prototype.jp,D.prototype.centerRect=D.prototype.Yr,D.prototype.scrollToRect=D.prototype.rv,D.prototype.scroll=D.prototype.scroll,D.prototype.highlightCollection=D.prototype.Ez,D.prototype.highlight=D.prototype.Dz,D.prototype.selectCollection=D.prototype.kA,D.prototype.select=D.prototype.select,D.prototype.updateAllRelationshipsFromData=D.prototype.mp,D.prototype.updateAllTargetBindings=D.prototype.updateAllTargetBindings,D.prototype.commit=D.prototype.commit,D.prototype.rollbackTransaction=D.prototype.If,D.prototype.commitTransaction=D.prototype.eb,D.prototype.startTransaction=D.prototype.Ea,D.prototype.raiseChanged=D.prototype.g,D.prototype.raiseChangedEvent=D.prototype.cb,D.prototype.removeChangedListener=D.prototype.ek,D.prototype.addChangedListener=D.prototype.Me,D.prototype.removeModelChangedListener=D.prototype.fA,D.prototype.addModelChangedListener=D.prototype.Uw,D.prototype.findLayer=D.prototype.Oj,D.prototype.removeLayer=D.prototype.dA,D.prototype.addLayerAfter=D.prototype.Ay,D.prototype.addLayerBefore=D.prototype.Sw,D.prototype.addLayer=D.prototype.wl,D.prototype.moveParts=D.prototype.moveParts,D.prototype.copyParts=D.prototype.Ij,D.prototype.removeParts=D.prototype.Ds,D.prototype.remove=D.prototype.remove,D.prototype.add=D.prototype.add,D.prototype.clearDelayedGeometries=D.prototype.$w,D.prototype.setProperties=D.prototype.km,D.prototype.attach=D.prototype.Au,D.prototype.set=D.prototype.set,D.prototype.resetInputOptions=D.prototype.Rx,D.prototype.setInputOption=D.prototype.lA,D.prototype.getInputOption=D.prototype.Ll,D.prototype.resetRenderingHints=D.prototype.Sx,D.prototype.setRenderingHint=D.prototype.Wx,D.prototype.getRenderingHint=D.prototype.Ef,D.prototype.maybeUpdate=D.prototype.Wc,D.prototype.requestUpdate=D.prototype.Wb,D.prototype.delayInitialization=D.prototype.Sy,D.prototype.isUpdateRequested=D.prototype.Jz,D.prototype.invalidateDocumentBounds=D.prototype.Ya,D.prototype.findObjectsNear=D.prototype.lg,D.prototype.findPartsNear=D.prototype.hz,D.prototype.findObjectsIn=D.prototype.Af,D.prototype.findPartsIn=D.prototype.qx,D.prototype.findObjectsAt=D.prototype.gi,D.prototype.findPartsAt=D.prototype.gz,D.prototype.findObjectAt=D.prototype.ec,D.prototype.findPartAt=D.prototype.Jl,D.prototype.focusObject=D.prototype.uz,D.prototype.alignDocument=D.prototype.Fy,D.prototype.zoomToRect=D.prototype.uA,D.prototype.zoomToFit=D.prototype.zoomToFit,D.prototype.diagramScroll=D.prototype.ix,D.prototype.focus=D.prototype.focus;var Bp=new vt,BM=null,$n=Y.document!==void 0,Sh=null,hf="",mn=new Q(D,"None",0),Mh=new Q(D,"Uniform",1),zp=new Q(D,"UniformToFill",2),Sm=new Q(D,"CycleAll",10),zM=new Q(D,"CycleNotDirected",11),VM=new Q(D,"CycleNotDirectedFast",12),UM=new Q(D,"CycleNotUndirected",13),YM=new Q(D,"CycleDestinationTree",14),HM=new Q(D,"CycleSourceTree",15),cl=new Q(D,"DocumentScroll",1),Mm=new Q(D,"InfiniteScroll",2),pu=new Q(D,"TreeParentCollapsed",21),km=new Q(D,"AllParentsCollapsed",22),Nm=new Q(D,"AnyParentsCollapsed",23),Pm=new tt,nj="2.3.4",kh="image",_M=null,GM=!1;function rj(){if($n){var t=Y.document.createElement("canvas"),e=t.getContext("2d"),i=mt("7ca11abfd022028846");e[i]=mt("398c3597c01238");for(var n=["5da73c80a36455d7038e4972187c3cae51fd22",Et.Dx+"4ae6247590da4bb21c324ba3a84e385776",Nt.xF+"fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387",F.za],r=1;5>r;r++)e[mt("7ca11abfd7330390")](mt(n[r-1]),10,15*r);for(e[i]=mt("39f046ebb36e4b"),i=1;5>i;i++)e[mt("7ca11abfd7330390")](mt(n[i-1]),10,15*i);(n.length!==4||n[0][0]!=="5"||n[3][0]!=="7")&&(Nt.prototype.Md=Nt.prototype.Xw),_M=t}}D.className="Diagram",D.fromDiv=function(t){var e=t;return typeof t=="string"&&(e=Y.document.getElementById(t)),e instanceof HTMLDivElement&&e.H instanceof D?e.H:null},D.inherit=function(t,e){function i(){}if(Object.getPrototypeOf(t).prototype)throw Error(`Used go.Diagram.inherit defining already defined class 
`+t);i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t},D.useDOM=function(t){$n=t?Y.document!==void 0:!1},D.isUsingDOM=function(){return $n},D.None=mn,D.Uniform=Mh,D.UniformToFill=zp,D.CycleAll=Sm,D.CycleNotDirected=zM,D.CycleNotDirectedFast=VM,D.CycleNotUndirected=UM,D.CycleDestinationTree=YM,D.CycleSourceTree=HM,D.DocumentScroll=cl,D.InfiniteScroll=Mm,D.TreeParentCollapsed=pu,D.AllParentsCollapsed=km,D.AnyParentsCollapsed=Nm;function XM(){this.vy=null,this.j="zz@orderNum",this._tk==="63ad05bbe23a1786468a4c741b6d2"?this.pd=this.j=!0:this.pd=null}function af(t,e){if(e.jb.setTransform(e.Pb,0,0,e.Pb,0,0),e.jb.vc(),t.pd===null)t:{e="f";var i=Y[mt("76a715b2f73f148a")][mt("72ba13b5")];if(t.pd=!0,$n){var n=D[mt("76a115b6ed251eaf4692")];if(n)for(var r=Pm.iterator;r.next()&&(n=r.value,n=mt(n).split(mt("39e9")),!(6>n.length));){var s=mt(n[1]).split(".");if(n[4]!=="7da71ca0")break;var l=mt(Et[mt("6cae19")]).split(".");if(s[0]>l[0]||s[0]===l[0]&&s[1]>=l[1]){var h=Y[mt("74a900bae4370f8b51")][mt("6fbb13a1c2311e8a57")].toLowerCase();if(l=h[mt("73a612b6fb191d")](mt("3aad1ab6e022098b4dc4")),s=mt(n[2]),-1<l&&(h=h[mt("73a612b6fb191d")](s.toLowerCase()+"/"),t.pd=!(-1<h&&h<l),!t.pd))break;for(l=i[mt("76ad18b4f73e")],h=i[mt("73a612b6fb191d")](mt("35e7"))+2;h<l;h++)e+=i[h];if(l=e[mt("73a612b6fb191d")](s),0>l&&s!==mt("7da71ca0ad381e90")&&(l=e[mt("73a612b6fb191d")](mt("76a715b2ef3e149757"))),0>l&&(l=e[mt("73a612b6fb191d")](mt("76a715b2ef3e149757"))),0>l&&(l=e[mt("73a612b6fb191d")](mt("2bfa41fdb3784bca12"))),0>l&&(l=i[mt("73a612b6fb191d")](mt("7baa19a6f76c1988428554"))),t.pd=!(0<=l&&l<e[mt("73a612b6fb191d")](mt("35"))||e[mt("73a612b6fb191d")](mt("35"))===-1),!t.pd||i[mt("73a612b6fb191d")](mt("7fb002b6ed25128b4da25b2e"))&&i[mt("73a612b6fb191d")](mt("75ba1beee63a1e875799507d"))&&(t.pd=!(-1<i[mt("73a612b6fb191d")](s)),!t.pd))break;if(s[0]==="#"){l=Y.document.createElement("div");for(var a=n[0].replace(/[A-Za-z]/g,"");4>a.length;)a+="9";if(h=a,a=a.substr(a.length-4),n="",n+=["gsh","gsf"][parseInt(a.substr(0,1),10)%2],n+=["Header","Background","Display","Feedback"][parseInt(a.substr(0,1),10)%4],l[mt("79a417a0f0181a8946")]=n,Y.document[mt("78a712aa")]){Y.document[mt("78a712aa")][mt("7bb806b6ed32388c4a875b")](l),a=Y.getComputedStyle(l).getPropertyValue(mt("78a704b7e62456904c9b12701b6532a8"));var f=Y.getComputedStyle(l).getPropertyValue(mt("75b817b0ea2202"));if(Y.document[mt("78a712aa")][mt("68ad1bbcf533388c4a875b")](l),a){if(l=Y[mt("77a902b0eb1b1e804a8a")],f==="0."+parseInt(h,10)%100||a.indexOf(parseInt(s[1]+s[2],16))!==-1&&a.indexOf(parseInt(s[3]+s[4],16))!==-1){t.pd=!1;break}else if(l&&l(mt("32ae19a1e0331fc94084537c067a67fa59f1386b89d006")).matches)for(n="."+n,s=0;s<document.styleSheets.length;s++){l=document.styleSheets[s].rules||document.styleSheets[s].cssRules;for(var p in l)if(n===l[p].selectorText){t.pd=!1;break t}}}}else t.pd=null,t.pd=!1}}}else{for(p=i[mt("76ad18b4f73e")],r=i[mt("73a612b6fb191d")](mt("35e7"))+2;r<p;r++)e+=i[r];i=e[mt("73a612b6fb191d")](mt("7da71ca0ad381e90")),t.pd=!(0<=i&&i<e[mt("73a612b6fb191d")](mt("35")))}}}return 0<t.pd&&t!==t.vy}XM.className="DiagramHelper";function Ps(t){this.j=t===void 0?new P:t,this.m=new P}z.Object.defineProperties(Ps.prototype,{point:{get:function(){return this.j},set:function(t){this.j=t}},shifted:{get:function(){return this.m},set:function(t){this.m=t}}});var KM="DraggingInfo";Ps.className="DraggingInfo";function WM(t,e,i){this.node=t,this.info=e,this.Qu=i}WM.className="DraggingNodeInfoPair";function Nh(){this.reset()}Nh.prototype.reset=function(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new pt(NaN,NaN).freeze(),this.gridSnapCellSpot=ei,this.gridSnapOrigin=new P(NaN,NaN).freeze(),this.groupsSnapMembers=this.dragsTree=this.dragsLink=!1,this.dragsMembers=this.groupsAlwaysMove=!0},Nh.className="DraggingOptions";function Vp(t,e){if(typeof t=="string"||Y.Element&&t instanceof Element)var i=D.call(this,t)||this;else i=D.call(this)||this,e=t;return $M(i),e&&i.km(e),i}B(Vp,D);function $M(t){t.allowDragOut=!0,t.allowMove=!1,t.isReadOnly=!0,t.contentAlignment=xo,t.layout=new Re}Vp.prototype.reset=function(){D.prototype.reset.call(this),$M(this)},Vp.className="Palette";function Jr(t,e){if(typeof t=="string"||Y.Element&&t instanceof Element)var i=D.call(this,t)||this;else i=D.call(this)||this,e=t;var n=i;i.animationManager.isEnabled=!1,i.vb=!0,i.V=null,i.jn=!1,i.kn=!1,i.F=!0,i.u=!0,i.ga=0,i.m=!1,i.ml=null,i.Wx("drawShadows",!1),t=new lt;var r=new wt;return r.stroke="magenta",r.strokeWidth=2,r.fill="transparent",r.name="BOXSHAPE",t.selectable=!0,t.selectionAdorned=!1,t.selectionObjectName="BOXSHAPE",t.locationObjectName="BOXSHAPE",t.resizeObjectName="BOXSHAPE",t.cursor="move",t.add(r),i.j=t,i.allowCopy=!1,i.allowDelete=!1,i.allowSelect=!0,i.autoScrollRegion=new Rt(0,0,0,0),i.pa.h(0,0),i.toolManager.gb("Dragging",new du,i.toolManager.mouseMoveTools),i.click=function(){var s=n.observed;if(s!==null){var l=s.viewportBounds,h=n.lastInput.documentPoint;s.position=new P(h.x-l.width/2,h.y-l.height/2)}},i.Nf=function(){n.Ya(),ff(n)},i.Td=function(){n.observed!==null&&(n.Ya(),n.N())},i.Ha=function(){1>n.updateDelay?n.N():n.m||(n.m=!0,setTimeout(function(){return n.redraw()},n.updateDelay))},i.Mf=function(){n.observed!==null&&ff(n)},i.autoScale=Mh,i.vb=!1,e&&Object.assign(i,e),i}B(Jr,D),Jr.prototype.computePixelRatio=function(){return 1},Jr.prototype.redraw=function(){if(this.m&&1<=this.updateDelay){this.m=!1;var t=this.xa,e=this.jb;if(t!==null&&e!==null){if(wh(this),this.ml===null){var i=new In(null);i.width=t.width,i.height=t.height,this.ml=i}try{this.xa=this.ml,this.jb=this.xa.context,this.jb.Qc(!0),this.jb.setTransform(1,0,0,1,0,0),this.jb.clearRect(0,0,this.xa.width,this.xa.height),JM(this)}finally{this.xa=t,this.jb=e}}}D.prototype.redraw.call(this)},Jr.prototype.cc=function(){if(this.Ka===null&&R("No div specified"),this.xa===null&&R("No canvas specified"),!(this.xa instanceof Or)&&(hv(this.box),this.Cc)){var t=this.observed;if(t!==null&&!t.animationManager.defaultAnimation.isAnimating&&t.mi){wh(this);var e=this.xa;t=this.jb,t.Qc(!0),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),1>this.updateDelay?JM(this):this.ml!==null&&(t.drawImage(this.ml.La,0,0),e=this.Ab,e.reset(),this.scale!==1&&e.scale(this.scale),this.position.x===0&&this.position.y===0||e.translate(-this.position.x,-this.position.y),t.scale(this.Pb,this.Pb),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.vc()),e=this.Wa.s;for(var i=e.length,n=0;n<i;n++)e[n].cc(t,this);this.Cc=this.rd=!1}}};function JM(t){var e=t.observed;if(e!==null){var i=t.drawsTemporaryLayers,n=t.drawsGrid&&i,r=e.grid;n&&r!==null&&r.visible&&!isNaN(r.width)&&!isNaN(r.height)&&(r=V.alloc().assign(t.viewportBounds).Zc(e.viewportBounds),Wo(e,r),V.free(r),xi(e));var s=t.Ab;s.reset(),t.scale!==1&&s.scale(t.scale),t.position.x===0&&t.position.y===0||s.translate(-t.position.x,-t.position.y),r=t.jb,r.scale(t.Pb,t.Pb),r.transform(s.m11,s.m12,s.m21,s.m22,s.dx,s.dy),r.vc(),e=e.Wa.s,s=e.length;for(var l=0;l<s;l++){var h=e[l],a=t;if(h.visible&&h.opacity!==0){var f=h.diagram.grid.part;if(!i&&h.isTemporary)n&&f.layer===h&&(h=rf(h,r),f.cc(r,a),r.globalAlpha=h);else{for(var p=rf(h,r),d=a.scale,y=V.alloc(),x=h.Pa.s,v=x.length,S=0;S<v;S++){var N=x[S];(n||N!==f)&&h.Mj(r,N,a,null,d,y,!1)}V.free(y),r.globalAlpha=p}}}}}function ff(t){var e=t.box;if(e!==null){var i=t.observed;if(i!==null){t.Cc=!0,i=i.viewportBounds;var n=e.selectionObject,r=pt.alloc();r.h(i.width,i.height),n.desiredSize=r,pt.free(r),t=2/t.scale,n instanceof wt&&(n.strokeWidth=t),e.location=new P(i.x-t/2,i.y-t/2),e.isSelected=!0}}}Jr.prototype.computeBounds=function(){var t=this.observed;if(t===null)return yp;var e=t.documentBounds.copy();return e.Zc(t.viewportBounds),e},Jr.prototype.invalidateViewport=function(){this.Cc!==!0&&(this.Cc=!0,this.Wb())},Jr.prototype.onViewportBoundsChanged=function(t,e,i,n){this.vb||(this.rd=!0,this.N(),this.Be=!0,this.Ya(),ff(this),this.kd.scale=i,this.kd.position.x=t.x,this.kd.position.y=t.y,this.kd.bounds.assign(t),this.kd.Ex=n,this.R("ViewportBoundsChanged",this.kd,t))},z.Object.defineProperties(Jr.prototype,{observed:{get:function(){return this.V},set:function(t){var e=this.V;if(t instanceof Jr&&R("Overview.observed Diagram may not be an Overview itself: "+t),e!==t){if(e!==null&&(this.remove(this.box),e.Yl("ViewportBoundsChanged",this.Nf),e.Yl("DocumentBoundsChanged",this.Td),e.Yl("InvalidateDraw",this.Ha),e.Yl("AnimationFinished",this.Mf)),this.V=t,t!==null&&(t.zj("ViewportBoundsChanged",this.Nf),t.zj("DocumentBoundsChanged",this.Td),t.zj("InvalidateDraw",this.Ha),t.zj("AnimationFinished",this.Mf),this.add(this.box)),this.Ya(),t===null){this.ml=null;var i=this.xa,n=this.jb;i&&n&&(n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,i.width,i.height))}else this.Ha(null),ff(this),this.N();this.g("observed",e,t)}}},box:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.remove(e),this.add(this.j),ff(this),this.g("box",e,t))}},drawsTemporaryLayers:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t,this.redraw())}},drawsGrid:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t,this.redraw())}},updateDelay:{get:function(){return this.ga},set:function(t){0>t&&(t=0),this.ga!==t&&(this.ga=t)}}}),Jr.className="Overview";function du(){re.call(this),this.j=null}B(du,re),du.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t===null||!t.allowMove||!t.allowSelect)return!1;var e=t.observed;if(e===null)return!1;var i=t.lastInput;return!i.left||t.currentTool!==this&&(!this.isBeyondDragSize()||i.isTouchEvent&&i.timestamp-t.firstInput.timestamp<this.delay)?!1:(this.findDraggablePart()===null&&(i=e.viewportBounds,this.j=new P(i.width/2,i.height/2),t=t.firstInput.documentPoint,e.position=new P(t.x-this.j.x,t.y-this.j.y)),!0)},du.prototype.doActivate=function(){this.j=null,re.prototype.doActivate.call(this)},du.prototype.doUpdateCursor=function(){var t=this.diagram,e=t.box;e!==null&&e.cursor&&(t.currentCursor=e.cursor)},du.prototype.moveParts=function(){var t=this.diagram,e=t.observed;if(e!==null){var i=t.box;if(i!==null){if(this.j===null){var n=t.firstInput.documentPoint;i=i.location,this.j=new P(n.x-i.x,n.y-i.y)}t=t.lastInput.documentPoint,e.position=new P(t.x-this.j.x,t.y-this.j.y)}}},du.className="OverviewDraggingTool";function Ht(){Oe(this),this.H=vh,this.Ha=this.u=this.m=!0,this.F=this.V=this.ob=this.ga=!1,this.gj=this.j=null,this.Fb=1.05,this.Et=NaN,this.ow=null,this.xu=NaN,this.vu=yp,this.hb=!0,this.$f=null,this.pb=200}Ht.prototype.toString=function(){return"CommandHandler"},Ht.prototype.Ue=function(t){this.H=t},Ht.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput,i=ke?e.meta:e.control,n=e.shift,r=e.alt,s=e.key;!i||s!=="C"&&s!=="Insert"?i&&s==="X"||n&&s==="Del"?this.canCutSelection()&&this.cutSelection():i&&s==="V"||n&&s==="Insert"?this.canPasteSelection()&&this.pasteSelection():i&&s==="Y"||r&&n&&s==="Backspace"?this.canRedo()&&this.redo():i&&s==="Z"||r&&s==="Backspace"?this.canUndo()&&this.undo():s==="Del"||s==="Backspace"?this.canDeleteSelection()&&this.deleteSelection():i&&s==="A"?this.canSelectAll()&&this.selectAll():s==="Esc"?this.canStopCommand()&&this.stopCommand():s==="Up"?t.allowVerticalScroll&&(i?t.scroll("pixel","up"):t.scroll("line","up")):s==="Down"?t.allowVerticalScroll&&(i?t.scroll("pixel","down"):t.scroll("line","down")):s==="Left"?t.allowHorizontalScroll&&(i?t.scroll("pixel","left"):t.scroll("line","left")):s==="Right"?t.allowHorizontalScroll&&(i?t.scroll("pixel","right"):t.scroll("line","right")):s==="PageUp"?n&&t.allowHorizontalScroll?t.scroll("page","left"):t.allowVerticalScroll&&t.scroll("page","up"):s==="PageDown"?n&&t.allowHorizontalScroll?t.scroll("page","right"):t.allowVerticalScroll&&t.scroll("page","down"):s==="Home"?i&&t.allowVerticalScroll?t.scroll("document","up"):!i&&t.allowHorizontalScroll&&t.scroll("document","left"):s==="End"?i&&t.allowVerticalScroll?t.scroll("document","down"):!i&&t.allowHorizontalScroll&&t.scroll("document","right"):s===" "?this.canScrollToPart()&&this.scrollToPart():s==="Subtract"?this.canDecreaseZoom()&&this.decreaseZoom():s==="Add"?this.canIncreaseZoom()&&this.increaseZoom():i&&s==="0"?this.canResetZoom()&&this.resetZoom():n&&s==="Z"?this.canZoomToFit()&&this.zoomToFit():i&&!n&&s==="G"?this.canGroupSelection()&&this.groupSelection():i&&n&&s==="G"?this.canUngroupSelection()&&this.ungroupSelection():s==="F2"||e.event&&e.event.key==="F2"?this.canEditTextBlock()&&this.editTextBlock():s==="ContextMenu"||e.event&&e.event.key==="ContextMenu"?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()},Ht.prototype.doKeyUp=function(){this.diagram.lastInput.bubbles=!0},Ht.prototype.stopCommand=function(){var t=this.diagram,e=t.currentTool;e instanceof ne&&t.allowSelect&&t.clearSelection(),e!==null&&e.doCancel()},Ht.prototype.canStopCommand=function(){return!0},Ht.prototype.selectAll=function(){var t=this.diagram;t.N();try{t.currentCursor="wait",t.R("ChangingSelection",t.selection);for(var e=t.parts;e.next();)e.value.isSelected=!0;for(var i=t.nodes;i.next();)i.value.isSelected=!0;for(var n=t.links;n.next();)n.value.isSelected=!0}finally{t.R("ChangedSelection",t.selection),t.currentCursor=""}},Ht.prototype.canSelectAll=function(){return this.diagram.allowSelect},Ht.prototype.deleteSelection=function(){var t=this.diagram;try{t.currentCursor="wait",t.R("ChangingSelection",t.selection),t.Ea("Delete"),t.R("SelectionDeleting",t.selection);for(var e=new q,i=t.selection.iterator;i.next();)Es(e,i.value,!0,this.deletesTree?1/0:0,this.deletesConnectedLinks?null:!1,function(n){return n.canDelete()});t.Ds(e,!0),t.R("SelectionDeleted",e)}finally{t.eb("Delete"),t.R("ChangedSelection",t.selection),t.currentCursor=""}},Ht.prototype.canDeleteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||t.selection.count===0)},Ht.prototype.copySelection=function(){var t=this.diagram,e=new q;for(t=t.selection.iterator;t.next();)Es(e,t.value,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,function(i){return i.canCopy()});this.copyToClipboard(e)},Ht.prototype.canCopySelection=function(){var t=this.diagram;return!!(t.allowCopy&&t.allowClipboard&&t.selection.count!==0)},Ht.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},Ht.prototype.canCutSelection=function(){var t=this.diagram;return!!(!t.isReadOnly&&!t.isModelReadOnly&&t.allowCopy&&t.allowDelete&&t.allowClipboard&&t.selection.count!==0)},Ht.prototype.copyToClipboard=function(t){var e=this.diagram,i=null;if(t===null)Sh=null,hf="";else{i=e.model;var n=!1,r=!1,s=null;try{i.Pl()&&(n=i.Hj,i.Hj=this.copiesParentKey),i.Tj()&&(r=i.Gj,i.Gj=this.copiesGroupKey),s=e.Ij(t,null,!0)}finally{i.Pl()&&(i.Hj=n),i.Tj()&&(i.Gj=r),i=new tt,i.addAll(s),Sh=i,hf=e.model.dataFormat}}e.R("ClipboardChanged",i)},Ht.prototype.pasteFromClipboard=function(){var t=new q,e=Sh;if(e===null)return t;var i=this.diagram;if(hf!==i.model.dataFormat)return t;var n=i.model,r=!1,s=!1,l=null;try{n.Pl()&&(r=n.Hj,n.Hj=this.copiesParentKey),n.Tj()&&(s=n.Gj,n.Gj=this.copiesGroupKey),l=i.Ij(e,i,!1)}finally{for(n.Pl()&&(n.Hj=r),n.Tj()&&(n.Gj=s),e=l.iterator;e.next();)i=e.value,n=e.key,i.location.w()||(n.location.w()?i.location=n.location:!i.position.w()&&n.position.w()&&(i.position=n.position)),t.add(i)}return t},Ht.prototype.pasteSelection=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.currentCursor="wait",e.R("ChangingSelection",e.selection),e.Ea("Paste");var i=this.pasteFromClipboard();0<i.count&&e.clearSelection(!0);for(var n=i.iterator;n.next();)n.value.isSelected=!0;if(t!==null){var r=e.computePartsBounds(e.selection);if(r.w()){var s=this.computeEffectiveCollection(e.selection,e.Tm);hm(e,s,new P(t.x-r.centerX,t.y-r.centerY),e.Tm,!1)}}e.R("ClipboardPasted",i)}finally{e.eb("Paste"),e.R("ChangedSelection",e.selection),e.currentCursor=""}},Ht.prototype.canPasteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||Sh===null||Sh.count===0||hf!==t.model.dataFormat)},Ht.prototype.undo=function(){this.diagram.undoManager.undo()},Ht.prototype.canUndo=function(){var t=this.diagram;return t.isReadOnly||t.isModelReadOnly?!1:t.allowUndo&&t.undoManager.canUndo()},Ht.prototype.redo=function(){this.diagram.undoManager.redo()},Ht.prototype.canRedo=function(){var t=this.diagram;return t.isReadOnly||t.isModelReadOnly?!1:t.allowUndo&&t.undoManager.canRedo()},Ht.prototype.decreaseZoom=function(t){t===void 0&&(t=1/this.zoomFactor);var e=this.diagram;e.autoScale===mn&&(t=e.scale*t,t<e.minScale||t>e.maxScale||(e.scale=t))},Ht.prototype.canDecreaseZoom=function(t){t===void 0&&(t=1/this.zoomFactor);var e=this.diagram;return e.autoScale!==mn?!1:(t=e.scale*t,t<e.minScale||t>e.maxScale?!1:e.allowZoom)},Ht.prototype.increaseZoom=function(t){t===void 0&&(t=this.zoomFactor);var e=this.diagram;e.autoScale===mn&&(t=e.scale*t,t<e.minScale||t>e.maxScale||(e.scale=t))},Ht.prototype.canIncreaseZoom=function(t){t===void 0&&(t=this.zoomFactor);var e=this.diagram;return e.autoScale!==mn?!1:(t=e.scale*t,t<e.minScale||t>e.maxScale?!1:e.allowZoom)},Ht.prototype.resetZoom=function(t){t===void 0&&(t=this.defaultScale);var e=this.diagram;t<e.minScale||t>e.maxScale||(e.scale=t)},Ht.prototype.canResetZoom=function(t){t===void 0&&(t=this.defaultScale);var e=this.diagram;return t<e.minScale||t>e.maxScale?!1:e.allowZoom},Ht.prototype.zoomToFit=function(){var t=this.diagram,e=t.animationManager;e.zc(),t.redraw();var i=t.position,n=t.scale;Go(e,"Zoom To Fit"),this.isZoomToFitRestoreEnabled&&n===this.xu&&!isNaN(this.Et)&&t.documentBounds.C(this.vu)?(t.scale=this.Et,t.position=this.ow,this.xu=NaN,this.vu=yp):(this.Et=n,this.ow=i.copy(),t.zoomToFit(),this.xu=t.scale,this.vu=t.documentBounds.copy()),Z0(e)},Ht.prototype.canZoomToFit=function(){return this.diagram.allowZoom},Ht.prototype.scrollToPart=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.Va(),t===null){try{this.$f!==null&&(this.$f.next()?t=this.$f.value:this.$f=null)}catch{this.$f=null}t===null&&(0<e.highlighteds.count?this.$f=e.highlighteds.iterator:0<e.selection.count&&(this.$f=e.selection.iterator),this.$f!==null&&this.$f.next()&&(t=this.$f.value))}if(t!==null){var i=e.animationManager;Go(i,"Scroll To Part");var n=this.scrollToPartPause;if(0<n){var r=gu(this,t,[t]);if(r.length===1)e.Ea(),e.Yr(t.actualBounds),e.eb("Scroll To Part");else{var s=function(){e.Ea();for(var a=r.pop();0<r.length&&a instanceof b&&a.isTreeExpanded&&(!(a instanceof yt)||a.isSubGraphExpanded);)a=r.pop();0<r.length?(a instanceof lt&&e.rv(a.actualBounds),a instanceof b&&!a.isTreeExpanded&&(a.isTreeExpanded=!0),a instanceof yt&&!a.isSubGraphExpanded&&(a.isSubGraphExpanded=!0)):(a instanceof lt&&e.Yr(a.actualBounds),e.Yl("LayoutCompleted",l)),e.eb("Scroll To Part")},l=function(){H(s,(i.isEnabled?i.duration:0)+n)};e.zj("LayoutCompleted",l),s()}}else{var h=e.position.copy();e.Yr(t.actualBounds),h.Xa(e.position)&&i.zc()}}};function gu(t,e,i){if(e.isVisible())return i;if(e instanceof jt)gu(t,e.adornedPart,i);else if(e instanceof X){var n=e.fromNode;n!==null&&gu(t,n,i),e=e.toNode,e!==null&&gu(t,e,i)}else e instanceof b&&(n=e.labeledLink,n!==null&&gu(t,n,i),n=e.mg(),n!==null&&(n.isTreeExpanded||n.wasTreeExpanded||i.push(n),gu(t,n,i))),e=e.containingGroup,e!==null&&(e.isSubGraphExpanded||e.wasSubGraphExpanded||i.push(e),gu(t,e,i));return i}Ht.prototype.canScrollToPart=function(t){return t===void 0&&(t=null),t!==null&&!(t instanceof lt)?!1:(t=this.diagram,t.selection.count===0&&t.highlighteds.count===0?!1:t.allowHorizontalScroll&&t.allowVerticalScroll)},Ht.prototype.collapseTree=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Ea("Collapse Tree"),Go(e.animationManager,"Collapse Tree");var i=new tt;if(t!==null&&t.isTreeExpanded)t.collapseTree(),i.add(t);else if(t===null)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof b&&r.isTreeExpanded&&(r.collapseTree(),i.add(r))}e.R("TreeCollapsed",i)}finally{e.eb("Collapse Tree")}},Ht.prototype.canCollapseTree=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null){if(!(t instanceof b&&t.isTreeExpanded))return!1;if(0<t.Lo().count)return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof b&&e.isTreeExpanded&&0<e.Lo().count)return!0;return!1},Ht.prototype.expandTree=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Ea("Expand Tree"),Go(e.animationManager,"Expand Tree");var i=new tt;if(t!==null&&!t.isTreeExpanded)t.expandTree(),i.add(t);else if(t===null)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof b&&!r.isTreeExpanded&&(r.expandTree(),i.add(r))}e.R("TreeExpanded",i)}finally{e.eb("Expand Tree")}},Ht.prototype.canExpandTree=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null){if(!(t instanceof b)||t.isTreeExpanded)return!1;if(0<t.Lo().count)return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof b&&!e.isTreeExpanded&&0<e.Lo().count)return!0;return!1},Ht.prototype.groupSelection=function(){var t=this.diagram,e=t.model;if(e.Uj()){var i=this.archetypeGroupData;if(i!==null){var n=null;try{t.currentCursor="wait",t.R("ChangingSelection",t.selection),t.Ea("Group");for(var r=new tt,s=t.selection.iterator;s.next();){var l=s.value;l.Uc()&&l.canGroup()&&r.add(l)}for(var h=new tt,a=r.iterator;a.next();){var f=a.value;s=!1;for(var p=r.iterator;p.next();)if(f.Nd(p.value)){s=!0;break}s||h.add(f)}if(0<h.count){var d=h.first().containingGroup;if(d!==null)for(;d!==null;){r=!1;for(var y=h.iterator;y.next();)if(!y.value.Nd(d)){r=!0;break}if(r)d=d.containingGroup;else break}if(i instanceof yt)Dn(i),n=i.copy(),n!==null&&t.add(n);else if(e.Wu(i)){var x=e.copyNodeData(i);xt(x)&&(e.vf(x),n=t.fi(x))}if(n!==null){d!==null&&this.isValidMember(d,n)&&(n.containingGroup=d);for(var v=h.iterator;v.next();){var S=v.value;this.isValidMember(n,S)&&(S.containingGroup=n)}t.clearSelection(!0),n.isSelected=!0}}t.R("SelectionGrouped",n)}finally{t.eb("Group"),t.R("ChangedSelection",t.selection),t.currentCursor=""}}}},Ht.prototype.canGroupSelection=function(){var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowGroup||!t.model.Uj()||this.archetypeGroupData===null)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Uc()&&e.canGroup())return!0}return!1};function Cm(t){var e=Yt();for(t=t.iterator;t.next();){var i=t.value;i instanceof X||e.push(i)}t=new q,i=e.length;for(var n=0;n<i;n++){for(var r=e[n],s=!0,l=0;l<i;l++)if(r.Nd(e[l])){s=!1;break}s&&t.add(r)}return Vt(e),t}Ht.prototype.isValidMember=function(t,e){if(e===null||t===e||e instanceof X)return!1;if(t!==null){if(t===e||t.Nd(e))return!1;var i=t.memberValidation;if(i!==null&&!i(t,e)||t.data===null&&e.data!==null||t.data!==null&&e.data===null)return!1}return i=this.memberValidation,i!==null?i(t,e):!0},Ht.prototype.ungroupSelection=function(t){t===void 0&&(t=null);var e=this.diagram,i=e.model;if(i.Uj())try{e.currentCursor="wait",e.R("ChangingSelection",e.selection),e.Ea("Ungroup");var n=new tt;if(t!==null)n.add(t);else for(var r=e.selection.iterator;r.next();){var s=r.value;s instanceof yt&&s.canUngroup()&&n.add(s)}var l=new tt;if(0<n.count){e.clearSelection(!0);for(var h=n.iterator;h.next();){var a=h.value;a.expandSubGraph();var f=a.containingGroup,p=f!==null&&f.data!==null?i.va(f.data):void 0;l.addAll(a.memberParts);for(var d=l.iterator;d.next();){var y=d.value;if(y.isSelected=!0,!(y instanceof X)){var x=y.data;x!==null?i.hp(x,p):y.containingGroup=f}}e.remove(a)}}e.R("SelectionUngrouped",n,l)}finally{e.eb("Ungroup"),e.R("ChangedSelection",e.selection),e.currentCursor=""}},Ht.prototype.canUngroupSelection=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||!e.allowUngroup||!e.model.Uj())return!1;if(t!==null){if(!(t instanceof yt))return!1;if(t.canUngroup())return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof yt&&e.canUngroup())return!0;return!1},Ht.prototype.addTopLevelParts=function(t,e){var i=!0;for(t=Cm(t).iterator;t.next();){var n=t.value;n.containingGroup!==null&&(!e||this.isValidMember(null,n)?n.containingGroup=null:i=!1)}return i},Ht.prototype.collapseSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Ea("Collapse SubGraph"),Go(e.animationManager,"Collapse SubGraph");var i=new tt;if(t!==null&&t.isSubGraphExpanded)t.collapseSubGraph(),i.add(t);else if(t===null)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof yt&&r.isSubGraphExpanded&&(r.collapseSubGraph(),i.add(r))}e.R("SubGraphCollapsed",i)}finally{e.eb("Collapse SubGraph")}},Ht.prototype.canCollapseSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null)return!!(t instanceof yt&&t.isSubGraphExpanded);for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof yt&&e.isSubGraphExpanded)return!0;return!1},Ht.prototype.expandSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Ea("Expand SubGraph"),Go(e.animationManager,"Expand SubGraph");var i=new tt;if(t!==null&&!t.isSubGraphExpanded)t.expandSubGraph(),i.add(t);else if(t===null)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof yt&&!r.isSubGraphExpanded&&(r.expandSubGraph(),i.add(r))}e.R("SubGraphExpanded",i)}finally{e.eb("Expand SubGraph")}},Ht.prototype.canExpandSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null)return t instanceof yt&&!t.isSubGraphExpanded;for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof yt&&!e.isSubGraphExpanded)return!0;return!1},Ht.prototype.editTextBlock=function(t){t===void 0&&(t=null);var e=this.diagram,i=e.toolManager.findTool("TextEditing");if(i!==null){if(t===null){t=null;for(var n=e.selection.iterator;n.next();){var r=n.value;if(r.canEdit()){t=r;break}}if(t===null)return;t=t.Il(function(s){return s instanceof Gt&&s.editable})}t!==null&&(e.currentTool=null,i.textBlock=t,e.currentTool=i)}},Ht.prototype.canEditTextBlock=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowTextEdit||e.toolManager.findTool("TextEditing")===null)return!1;if(t!==null){if(!(t instanceof Gt))return!1;if(t=t.part,t!==null&&t.canEdit())return!0}else for(e=e.selection.iterator;e.next();)if(t=e.value,t.canEdit()&&(t=t.Il(function(i){return i instanceof Gt&&i.editable}),t!==null))return!0;return!1},Ht.prototype.showContextMenu=function(t){var e=this.diagram,i=e.toolManager.findTool("ContextMenu");if(i!==null&&(t===void 0&&(t=0<e.selection.count?e.selection.first():e),t=i.findObjectWithContextMenu(t),t!==null)){var n=e.lastInput,r=null;t instanceof ot?r=t.ja(Ut):e.viewportBounds.ca(n.documentPoint)||(r=e.viewportBounds,r=new P(r.x+r.width/2,r.y+r.height/2)),r!==null&&(n.viewPoint=e.jp(r),n.documentPoint=r,n.left=!1,n.right=!0,n.up=!0),e.currentTool=i,bS(i,!1,t)}},Ht.prototype.canShowContextMenu=function(t){var e=this.diagram,i=e.toolManager.findTool("ContextMenu");return i===null?!1:(t===void 0&&(t=0<e.selection.count?e.selection.first():e),i.findObjectWithContextMenu(t)!==null)},Ht.prototype.computeEffectiveCollection=function(t,e){var i=this.diagram,n=i.toolManager.findTool("Dragging"),r=i.currentTool===n;if(e===void 0&&(e=r?n.dragOptions:i.Tm),n=new vt,t===null)return n;for(var s=t.iterator;s.next();)Ko(i,n,s.value,r,e);if(i.draggedLink!==null&&e.dragsLink)return n;for(s=t.iterator;s.next();)t=s.value,t instanceof X&&(e=t.fromNode,e===null||n.contains(e)?(e=t.toNode,e===null||n.contains(e)||n.remove(t)):n.remove(t));return n},z.Object.defineProperties(Ht.prototype,{diagram:{get:function(){return this.H}},copiesClipboardData:{get:function(){return this.m},set:function(t){this.m=t}},copiesConnectedLinks:{get:function(){return this.u},set:function(t){this.u=t}},deletesConnectedLinks:{get:function(){return this.Ha},set:function(t){this.Ha=t}},copiesTree:{get:function(){return this.ga},set:function(t){this.ga=t}},deletesTree:{get:function(){return this.ob},set:function(t){this.ob=t}},copiesParentKey:{get:function(){return this.V},set:function(t){this.V=t}},copiesGroupKey:{get:function(){return this.F},set:function(t){this.F=t}},archetypeGroupData:{get:function(){return this.j},set:function(t){this.j=t}},memberValidation:{get:function(){return this.gj},set:function(t){this.gj=t}},defaultScale:{get:function(){return this.diagram.defaultScale},set:function(t){this.diagram.defaultScale=t}},zoomFactor:{get:function(){return this.Fb},set:function(t){1<t||R("zoomFactor must be larger than 1.0, not: "+t),this.Fb=t}},isZoomToFitRestoreEnabled:{get:function(){return this.hb},set:function(t){this.hb=t}},scrollToPartPause:{get:function(){return this.pb},set:function(t){this.pb=t}}}),Ht.className="CommandHandler",xM=function(){return new Ht};function ot(){Oe(this),this.o=30723,this.qb=1,this.Zm="",this.Oa=this.Je=null,this.pa=new P(NaN,NaN).freeze(),this.bd=dp,this.Ab=new Nt,this.sh=new Nt,this.Jb=null,this.Aa=this.Gk=1,this.Ib=0,this.Gg=ih,this.rc=new V(NaN,NaN,NaN,NaN).freeze(),this.Gb=new V(NaN,NaN,NaN,NaN).freeze(),this.ac=new V(0,0,NaN,NaN).freeze(),this.ba=this.Vn=this.Wn=null,this.nk=this.Hb=Je,this.xg=this.eo=0,this.V=this.ib=this.zh=this.A=this.Ua=null,this.pf=!1,this.fo=this.Jg=null}var fe,he,Fr,Ge,Qe,Jn,cf,pf,df,gf;ot.prototype.cloneProtected=function(t){t.o=this.o|6144,t.qb=this.qb,t.Zm=this.Zm,t.Oa=this.Oa,t.pa.assign(this.pa),t.bd=this.bd.J(),this.Jb!==null?t.Jb=this.Jb.copy():t.Jb=null,t.Aa=this.Aa,t.Ib=this.Ib,t.Gg=this.Gg.J(),t.rc.assign(this.rc),t.Gb.assign(this.Gb),t.ac.assign(this.ac),t.Vn=this.Vn,this.ba!==null&&(t.ba=this.ba.copy()),t.Hb=this.Hb.J(),t.nk=this.nk.J(),t.eo=this.eo,t.xg=this.xg,this.Ua!==null&&(t.Ua=this.Ua.copy()),this.A!==null&&(t.A=this.A.jc?this.A:this.A.copy()),this.zh!==null&&(t.zh=ee(this.zh)),this.ib!==null&&(t.ib=this.ib.copy())},ot.prototype.Rw=function(t){var e=this.zh;if(Wt(e)){for(var i=0;i<e.length;i++)if(e[i]===t)return}else this.zh=e=[];e.push(t)},ot.prototype.yf=function(t){t.Wn=null,t.Jg=null,t.v()},ot.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),this.zh!==null)for(var e=0;e<this.zh.length;e++){var i=this.zh[e];t[i]=this[i]}return t},ot.prototype.copy=function(){return this.clone()},o=ot.prototype,o.rb=function(t){t.classType===X?t.name.indexOf("Orient")===0?this.segmentOrientation=t:R("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.classType===ot&&(this.stretch=t)},o.toString=function(){return Ms(this.constructor)+"#"+Ei(this)},o.ph=function(){this.A!==null&&(this.A.jc=!0)};function Pe(t){t.A===null?t.A=new mu:t.A.jc&&(t.A=t.A.copy())}o.Sc=function(){if(this.ba===null){var t=new mf;t.Ui=$e,t.wj=$e,t.Si=10,t.uj=10,t.Ti=0,t.vj=0,this.ba=t}},o.cb=function(t,e,i,n,r,s,l){var h=this.part;if(h!==null&&(h.dk(t,e,i,n,r,s,l),i===this&&t===Qt&&yu(this)&&pl(this,h,e),s=this.diagram,this.animationTriggers===null||s===null||!s.mi||s.undoManager.isUndoingRedoing||s.animationManager.Am||(t=this.animationTriggers.get(e),t!==null&&s.animationManager.isEnabled&&!s.animationManager.isTicking&&(this.fo===null&&(this.fo=new vt),l=s.undoManager.transactionLevel===0,t.startCondition===b0?l=!0:t.startCondition===gM&&(l=!1),l?(s=new ii,GL(t,s),l=this.fo.get(t),l!==null&&l.stop(),this.fo.add(t,s),s.su=this,s.Jw=t,s.add(this,e,n,r),s.start()):(Go(s.animationManager,"Trigger"),s.animationManager.defaultAnimation.add(this,e,n,r)))),this instanceof _&&i===h&&(h.o&16777216)!==0&&h.data!==null))for(i=this.O.s,n=i.length,r=0;r<n;r++)h=i[r],h instanceof _&&vl(h,function(a){a.data!==null&&a.o&16777216&&a.Ma(e)})};function pl(t,e,i){var n=t.eh();if(n!==null)for(var r=t.localBindings.iterator;r.next();){var s=r.value,l=null;if(s.sourceName!==null){if(l=Ok(s,n,t),l===null)continue;s.np(t,l,i,null)}else if(s.isToModel){var h=e.diagram;h===null||h.skipsModelSourceBindings||s.np(t,h.model.modelData,i,n)}else{if(h=n.data,h===null)continue;var a=e.diagram;a===null||a.skipsModelSourceBindings||s.np(t,h,i,n)}l===t&&(h=n.es(s.xi),h!==null&&s.Iv(h,l,i))}}o.es=function(t){return this.bindingId===t?this:null},o.g=function(t,e,i){this.cb(Qt,t,this,e,i)},o.De=function(t,e,i,n){var r=this.rc;if(r.h(t,e,i,n),this.Aa!==1||this.Ib!==0){this.Jb===null&&(this.Jb=new Nt);var s=this.Jb;s.reset(),this.ko(s,t,e,i,n),s.kp(r)}};function ZM(t,e,i,n){return t.pickable===!1?!1:(n.multiply(t.transform),i?t.Tc(e,n):t.ah(e,n))}o.px=function(t,e,i){if(this.pickable===!1)return!1;var n=this.naturalBounds;return e=t.zf(e),i?mi(t.x,t.y,0,0,0,n.height)<=e||mi(t.x,t.y,0,n.height,n.width,n.height)<=e||mi(t.x,t.y,n.width,n.height,n.width,0)<=e||mi(t.x,t.y,n.width,0,0,0)<=e:t.vd(0,0)<=e&&t.vd(0,n.height)<=e&&t.vd(n.width,0)<=e&&t.vd(n.width,n.height)<=e},o.pe=function(){return!0},o.ca=function(t){var e=P.alloc();e.assign(t),this.transform.Ga(e);var i=this.actualBounds;if(!i.w())return P.free(e),!1;var n=this.diagram;if(n!==null&&n.qq){var r=n.Ll("extraTouchThreshold"),s=n.Ll("extraTouchArea"),l=s/2,h=this.naturalBounds;n=this.Bf()*n.scale;var a=1/n;if(h.width*n<r&&h.height*n<r)return t=hr(i.x-l*a,i.y-l*a,i.width+s*a,i.height+s*a,e.x,e.y),P.free(e),t}return r=!1,(this instanceof jt||this instanceof wt?hr(i.x-5,i.y-5,i.width+10,i.height+10,e.x,e.y):i.ca(e))&&(this.ib&&!this.ib.ca(e)?r=!1:this.areaBackground!==null&&i.ca(e)||this.Oa!==null&&this.ac.ca(t)?r=!0:r=this.bh(t)),P.free(e),r},o.bh=function(t){var e=this.naturalBounds;return hr(0,0,e.width,e.height,t.x,t.y)},o.Oe=function(t){if(this.angle===0)return this.actualBounds.Oe(t);var e=this.naturalBounds;e=V.allocAt(0,0,e.width,e.height);var i=this.transform,n=!1,r=P.allocAt(t.x,t.y);return e.ca(i.Md(r))&&(r.h(t.x,t.bottom),e.ca(i.Md(r))&&(r.h(t.right,t.bottom),e.ca(i.Md(r))&&(r.h(t.right,t.y),e.ca(i.Md(r))&&(n=!0)))),P.free(r),V.free(e),n},o.ah=function(t,e){if(e===void 0)return t.Oe(this.actualBounds);var i=this.naturalBounds,n=!1,r=P.allocAt(0,0);return t.ca(e.Ga(r))&&(r.h(0,i.height),t.ca(e.Ga(r))&&(r.h(i.width,i.height),t.ca(e.Ga(r))&&(r.h(i.width,0),t.ca(e.Ga(r))&&(n=!0)))),P.free(r),n},o.Tc=function(t,e){if(e===void 0&&(e=this.transform,this.angle===0))return t.Tc(this.actualBounds);var i=this.naturalBounds,n=P.allocAt(0,0),r=P.allocAt(0,i.height),s=P.allocAt(i.width,i.height),l=P.allocAt(i.width,0),h=!1;if(t.ca(e.Ga(n))||t.ca(e.Ga(r))||t.ca(e.Ga(s))||t.ca(e.Ga(l)))h=!0;else{i=V.allocAt(0,0,i.width,i.height);var a=P.allocAt(t.x,t.y);i.ca(e.Md(a))?h=!0:(a.h(t.x,t.bottom),i.ca(e.Md(a))?h=!0:(a.h(t.right,t.bottom),i.ca(e.Md(a))?h=!0:(a.h(t.right,t.y),i.ca(e.Md(a))&&(h=!0)))),P.free(a),V.free(i),!h&&(F.ps(t,n,r)||F.ps(t,r,s)||F.ps(t,s,l)||F.ps(t,l,n))&&(h=!0)}return P.free(n),P.free(r),P.free(s),P.free(l),h},o.ja=function(t,e){if(e===void 0&&(e=new P),t instanceof at){var i=this.naturalBounds;e.h(t.x*i.width+t.offsetX,t.y*i.height+t.offsetY)}else e.set(t);return this.ke.Ga(e),e},o.ji=function(t){t===void 0&&(t=new V);var e=this.naturalBounds,i=this.ke,n=P.allocAt(0,0).transform(i);return t.h(n.x,n.y,0,0),n.h(e.width,0).transform(i),Ve(t,n.x,n.y,0,0),n.h(e.width,e.height).transform(i),Ve(t,n.x,n.y,0,0),n.h(0,e.height).transform(i),Ve(t,n.x,n.y,0,0),P.free(n),t},o.ii=function(){var t=this.ke;return t.m11===1&&t.m12===0?t=0:(t=180*Math.atan2(t.m12,t.m11)/Math.PI,0>t&&(t+=360)),t},o.Bf=function(){if(!(this.o&4096))return this.Gk;var t=this.Aa;return this.panel!==null?t*this.panel.Bf():t},o.ls=function(t,e){return e===void 0&&(e=new P),e.assign(t),this.ke.Md(e),e},o.ms=function(t,e,i){return this.Qj(t.x,t.y,e.x,e.y,i)},o.Qj=function(t,e,i,n,r){var s=this.transform,l=1/(s.m11*s.m22-s.m12*s.m21),h=s.m22*l,a=-s.m12*l,f=-s.m21*l,p=s.m11*l,d=l*(s.m21*s.dy-s.m22*s.dx),y=l*(s.m12*s.dx-s.m11*s.dy);return this.areaBackground!==null?(s=this.actualBounds,F.Df(s.left,s.top,s.right,s.bottom,t,e,i,n,r)):(l=t*h+e*f+d,t=t*a+e*p+y,e=i*h+n*f+d,i=i*a+n*p+y,r.h(0,0),n=this.naturalBounds,i=F.Df(0,0,n.width,n.height,l,t,e,i,r),r.transform(s),i)},ot.prototype.measure=function(t,e,i,n){if(Jo(this)!==!1){var r=this.Gg,s=r.right+r.left;r=r.top+r.bottom,t=Math.max(t-s,0),e=Math.max(e-r,0),i=Math.max((i||0)-s,0),n=Math.max((n||0)-r,0),s=this.angle,r=this.desiredSize;var l=this.eq();s===90||s===270?(t=isFinite(r.height)?r.height+l:t,e=isFinite(r.width)?r.width+l:e):(t=isFinite(r.width)?r.width+l:t,e=isFinite(r.height)?r.height+l:e),r=i||0,l=n||0;var h=this instanceof _;switch(dr(this,!0)){case he:l=r=0,h&&(e=t=1/0);break;case fe:isFinite(t)&&t>i&&(r=t),isFinite(e)&&e>n&&(l=e);break;case Ge:isFinite(t)&&t>i&&(r=t),l=0,h&&(e=1/0);break;case Qe:isFinite(e)&&e>n&&(l=e),r=0,h&&(t=1/0)}h=this.maxSize;var a=this.minSize;r>h.width&&a.width<h.width&&(r=h.width),l>h.height&&a.height<h.height&&(l=h.height),i=Math.max(r/this.scale,a.width),n=Math.max(l/this.scale,a.height),h.width<i&&(i=Math.min(a.width,i)),h.height<n&&(n=Math.min(a.height,n)),t=Math.min(h.width,t),e=Math.min(h.height,e),t=Math.max(i,t),e=Math.max(n,e),(s===90||s===270)&&(s=t,t=e,e=s,s=i,i=n,n=s),this.rc.ka(),this.Sl(t,e,i,n),this.rc.freeze(),this.rc.w()||R("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.rc.toString()),vn(this,!1)}},ot.prototype.Sl=function(){},ot.prototype.le=function(){return!1},ot.prototype.arrange=function(t,e,i,n,r){this.Qk();var s=V.alloc();s.assign(this.Gb),this.Gb.ka(),Zn(this)===!1?this.Gb.h(t,e,i,n):this.$g(t,e,i,n),this.Gb.freeze(),r===void 0?this.ib=null:this.ib=r,i=!1,r!==void 0?i=!0:(r=this.panel,r!==null&&Co(r)&&(r=r.panel),r!==null&&(r=r.ac,n=this.measuredBounds,this.areaBackground!==null&&(n=this.Gb),i=e+n.height,n=t+n.width,i=!(0<=t+.05&&n<=r.width+.05&&0<=e+.05&&i<=r.height+.05),this instanceof Gt&&(t=this.naturalBounds,this.Fq>t.height||this.Cb>t.width))&&(i=!0)),this.o=i?this.o|256:this.o&-257,this.Gb.w()||R("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.Gb.toString()),this.Tl(s,this.Gb),dl(this,!1),V.free(s)},o=ot.prototype,o.$g=function(){};function Tm(t,e,i,n,r){if(t.Gb.h(e,i,n,r),!t.desiredSize.w()){var s=t.rc;i=t.Gg,e=i.right+i.left;var l=i.top+i.bottom;switch(i=s.width+e,s=s.height+l,n+=e,r+=l,e=dr(t,!0),i===n&&s===r&&(e=he),e){case he:(i>n||s>r)&&(vn(t,!0),t.measure(i>n?n:i,s>r?r:s,0,0));break;case fe:vn(t,!0),t.measure(n,r,0,0);break;case Ge:vn(t,!0),t.measure(n,s,0,0);break;case Qe:vn(t,!0),t.measure(i,r,0,0)}}}o.Tl=function(t,e){var i=this.part;i!==null&&i.diagram!==null&&(i.selectionObject!==this&&i.resizeObject!==this&&i.rotateObject!==this||pv(i,!0),this.N(),y0(t,e)||(i.kh(),this.Mn(i)))},o.Mn=function(t){this.portId!==null&&(pv(t,!0),t instanceof b&&J2(t,this))},o.cc=function(t,e){if(!oj(this,t,e)&&this.visible){var i=this.opacity;if(i!==0){var n=1;i!==1&&(n=t.globalAlpha,t.globalAlpha=n*i);var r="";this.filter!==""&&(r=t.filter,t.filter=this.filter);var s=this instanceof _&&Co(this),l=this.Gb;if(s){var h=this.Gb,a=this.ac,f=this.areaBackground,p=this.Oa;f===null&&p===null||t.vc(),f!==null&&(sn(this,t,f,!0,!0,a,h),f instanceof Dt&&f.type===Sn?(t.beginPath(),t.rect(h.x,h.y,h.width,h.height),t.kg(f)):t.fillRect(h.x,h.y,h.width,h.height)),p!==null&&(sn(this,t,p,!0,!1,a,h),p instanceof Dt&&p.type===Sn?(t.beginPath(),t.rect(h.x,h.y,h.width,h.height),t.kg(p)):t.fillRect(h.x,h.y,h.width,h.height)),this.dh(t,e)}if(!s&&(s||l.width!==0&&l.height!==0&&!isNaN(l.x)&&!isNaN(l.y))){s=this.transform,h=this.panel,this.o&4096&&Yp(this),f=this.part,a=!1;var d=0;f&&e.Ef("drawShadows")&&(a=f.isShadowed)&&(p=f.shadowOffset,d=Math.max(p.y,p.x)*e.scale*e.Pb),p=this.le();var y;if(!(y=e.Xi||!p)){var x=this.naturalBounds;y=this.sh;var v=y.m11,S=y.m21,N=y.dx,k=y.m12,C=y.m22,T=y.dy,L,E=L=0;y=L*v+E*S+N;var I=L*k+E*C+T;L=x.width+d,E=0;var Z=L*v+E*S+N;L=L*k+E*C+T,E=Math.min(y,Z);var it=Math.min(I,L),et=Math.max(y+0,Z)-E,G=Math.max(I+0,L)-it;y=E,I=it,L=x.width+d,E=x.height+d,Z=L*v+E*S+N,L=L*k+E*C+T,E=Math.min(y,Z),it=Math.min(I,L),et=Math.max(y+et,Z)-E,G=Math.max(I+G,L)-it,y=E,I=it,L=0,E=x.height+d,Z=L*v+E*S+N,L=L*k+E*C+T,E=Math.min(y,Z),it=Math.min(I,L),et=Math.max(y+et,Z)-E,G=Math.max(I+G,L)-it,y=E,I=it,d=e.viewportBounds,x=d.x,v=d.y,y=!(y>d.width+x||x>et+y||I>d.height+v||v>G+I)}if(y){if(y=(this.o&256)!==0,t.clipInsteadOfFill&&(y=!1),this instanceof Gt&&(t.font=this.font),y){if(I=h.pe()?h.naturalBounds:h.actualBounds,this.ib!==null?(x=this.ib,et=x.x,G=x.y,d=x.width,x=x.height):(et=Math.max(l.x,I.x),G=Math.max(l.y,I.y),d=Math.min(l.right,I.right)-et,x=Math.min(l.bottom,I.bottom)-G),et>l.width+l.x||l.x>I.width+I.x){i!==1&&(t.globalAlpha=n),this.filter!==""&&(t.filter=r);return}t.save(),t.beginPath(),t.rect(et,G,d,x),t.clip()}if(p){if(!f.isVisible()){i!==1&&(t.globalAlpha=n),this.filter!==""&&(t.filter=r);return}a&&(I=f.shadowOffset,t.Av(I.x*e.scale*this.scale*e.Pb,I.y*e.scale*this.scale*e.Pb,f.shadowBlur),Mo(t),t.shadowColor=f.shadowColor)}a&&this.shadowVisible===!0?Mo(t):a&&this.shadowVisible===!1&&Zr(t),f=this.naturalBounds,this.areaBackground!==null&&(t.vc(),Lm(this,t,f,l)),t.transform(s.m11,s.m12,s.m21,s.m22,s.dx,s.dy),a&&(h!==null&&h.o&512||h!==null&&(h.type===_.Auto||h.type===_.Spot)&&h.sb()!==this)&&this.shadowVisible===null&&Zr(t),this.Oa!==null&&(t.vc(),Up(this,t,f,l)),a&&(this.Oa!==null||this.areaBackground!==null||h!==null&&h.o&512||h!==null&&(h.type===_.Auto||h.type===_.Spot)&&h.sb()!==this)?(Hp(this,!0),this.shadowVisible===null&&Zr(t)):Hp(this,!1),this.dh(t,e),a&&this.o&512&&Mo(t),p&&a&&Zr(t),y&&(t.restore(),t.Qc(this instanceof _)),s.rs()||(e=1/(s.m11*s.m22-s.m12*s.m21),t.transform(s.m22*e,-s.m12*e,-s.m21*e,s.m11*e,e*(s.m21*s.dy-s.m22*s.dx),e*(s.m12*s.dx-s.m11*s.dy)))}}i!==1&&(t.globalAlpha=n),this.filter!==""&&(t.filter=r)}}};function QM(t,e,i,n){var r=t.part,s=!1;return r&&e.Ef("drawShadows")&&(s=r.isShadowed),i.clipInsteadOfFill&&(s=!1),t.le()&&s&&Mo(i),s&&t.shadowVisible===!0?Mo(i):s&&t.shadowVisible===!1&&Zr(i),r=t.panel,s&&(r!==null&&r.o&512||r!==null&&(r.type===_.Auto||r.type===_.Spot)&&r.sb()!==t)&&t.shadowVisible===null&&Zr(i),i.Dl&&(e=e.computePixelRatio(),e="drop-shadow("+i.shadowOffsetX/e+"px "+i.shadowOffsetY/e+"px "+i.shadowBlur/e/2+"px "+i.shadowColor+")",t.background!==null&&n.Oa.setAttributeNS(null,"filter",e),t.areaBackground!==null&&n.nd.setAttributeNS(null,"filter",e)),s&&(t.Oa!==null||t.areaBackground!==null||r!==null&&r.o&512||r!==null&&(r.type===_.Auto||r.type===_.Spot)&&r.sb()!==t)?(Hp(t,!0),t.shadowVisible===null&&Zr(i)):Hp(t,!1),s}function qM(t,e,i,n,r){n.Dl&&(i=i.computePixelRatio(),t.zv(e,"drop-shadow("+n.shadowOffsetX/i+"px "+n.shadowOffsetY/i+"px "+n.shadowBlur/i/2+"px "+n.shadowColor+")")),r&&t.o&512&&Mo(n),t.le()&&Zr(n)}o.zv=function(){};function Lm(t,e,i,n){sn(t,e,t.areaBackground,!0,!0,i,n),t.areaBackground instanceof Dt&&t.areaBackground.type===Sn?(e.beginPath(),e.rect(n.x,n.y,n.width,n.height),e.kg(t.areaBackground)):e.fillRect(n.x,n.y,n.width,n.height)}function Up(t,e,i,n){var r=t.eq(),s=i.x,l=i.y,h=i.width+r,a=i.height+r;sn(t,e,t.Oa,!0,!1,i,n),t.Oa instanceof Dt&&t.Oa.type===Sn?(e.beginPath(),e.rect(s-r/2,l-r/2,h,a),e.kg(t.Oa)):e.fillRect(s-r/2,l-r/2,h,a)}function bM(t,e,i){for(var n=e.O.s,r=n.length,s=-1,l=0;l<r;l++)if(n[l]===t){s=l;break}if(t=s,t!==-1)if(t===0)e.svg.nd?e.svg.nd.after(i):e.svg.Oa?e.svg.Oa.after(i):e.type===_.Table?(e=e.svg.getElementsByClassName("gojs-ts"),e=e.length!==0?e[0]:null,e!==null&&(e.innerHTML="",e.after(i))):e.svg.prepend(i);else{for(;t!==0&&!e.L(t-1).Od();)t--;t===0?e.svg.prepend(i):(t=e.L(t-1).svg,t!==null?t.after(i):e.svg.appendChild(i))}}function oj(t,e,i){if(!(e instanceof wn))return!1;if(!t.visible||t.opacity===0||t.le()&&!t.isVisible())return t.svg!==null&&t.svg.parentNode!==null&&t.svg.remove(),!0;if(t.le()&&t.isShadowed){var n=t.shadowOffset;e.Av(n.x*i.scale*t.scale*i.Pb,n.y*i.scale*t.scale*i.Pb,t.shadowBlur),Mo(e),e.shadowColor=t.shadowColor}n=t.panel;var r=t.jk(e);if(t.gk(e,i,r))return t.svg.parentElement!==null?(t.le()&&(e.pi=t.svg),!0):(t.le()?(e.pi!==null?e.pi.after(t.svg):e.Lj.prepend(t.svg),e.pi=t.svg):n&&bM(t,n,t.svg),!0);t instanceof Gt&&(e.font=t.font),e.ud=null;var s=t.transform,l=t instanceof _;t.o&4096&&Yp(t);var h=t.Gb;if(e.lc.ia=[1,0,0,1,0,0],e.m=!1,r&&(e.m=!0,t instanceof _&&Co(t)?Gp(e,1,0,0,1,0,0):Gp(e,s.m11,s.m12,s.m21,s.m22,s.dx,s.dy),l&&(t.svg=e.Pd)),r=t.naturalBounds,t.areaBackground!==null){var a=s.copy().Ol();e.lc.ia=[a.m11,a.m12,a.m21,a.m22,a.dx,a.dy],Lm(t,e,r,h),e.lc.ia=[1,0,0,1,0,0],e.ud.nd=e.Pd,e.ud.prepend(e.Pd)}return l||e.m||(e.lc.ia=[s.m11,s.m12,s.m21,s.m22,s.dx,s.dy]),t.background!==null&&(t instanceof _&&Co(t)?(e.lc.ia=[s.m11,s.m12,s.m21,s.m22,s.dx,s.dy],Up(t,e,r,h),e.lc.ia=[1,0,0,1,0,0]):Up(t,e,r,h),e.ud.Oa=e.Pd,e.ud.prepend(e.Pd)),s=QM(t,i,e,e.ud),t.dh(e,i),l&&e.jh.pop(),e.m&&e.jh.pop(),r=e.Cv.cs,a=l?t.svg:e.ud,!l&&t.svg!==null&&a!==t.svg&&t.svg.parentNode===t.panel.svg?(t.svg.replaceWith(a),t.svg=a,a!==null&&t.Vo(e,n,h,a),!0):(t.svg=a,r!==null&&a===null&&(Xp(e),e.jh.pop()),a===null||(t.Vo(e,n,h,a),qM(t,a,i,e,s),e.globalAlpha!==1&&a.setAttributeNS(null,"opacity",e.globalAlpha.toString()),t.filter!==""&&a.setAttributeNS(null,"filter",t.filter),t.le()?(e.pi?e.pi.after(a):e.Lj.prepend(a),e.pi=a):n!==null&&bM(t,n,a),r!==null&&r(t,a)),!0)}o.Vo=function(t,e,i,n){var r=(this.o&256)!==0;t.clipInsteadOfFill&&(r=!1),r?(e=e.pe()?e.naturalBounds:e.actualBounds,t=Math.min(i.right,e.right)-Math.max(i.x,e.x),i=Math.min(i.bottom,e.bottom)-Math.max(i.y,e.y),this.ib!==null&&(i=this.ib,t=i.width,i=i.height),n.setAttributeNS(null,"clip-path","path('M 0,0 L "+t+" 0 L "+t+" "+i+" L 0 "+i+" z')")):n.removeAttributeNS(null,"clip-path")},o.dh=function(){},o.jv=function(){this.pf=!0},o.gk=function(t,e,i){if(this.pf)return this.jv(),this.pf=!1;var n=this.svg;if(n===null)return!1;if(!this.visible)return n.remove(),!1;if(n.nodeName!=="g"&&i||n.nodeName==="g"&&!i)return!1;i=this.transform,this instanceof _&&Co(this)||n.setAttributeNS(null,"transform","matrix("+i.m11+", "+i.m12+", "+i.m21+", "+i.m22+", "+i.dx+", "+i.dy+")");var r=t.globalAlpha.toString();if(r==="1"?n.removeAttribute("opacity"):n.setAttributeNS(null,"opacity",r),this.filter===""?n.removeAttribute("filter"):n.setAttributeNS(null,"filter",this.filter),t.lc.ia=[1,0,0,1,0,0],this.areaBackground!==null||n.nd!==void 0){if(r=n.nd,this.areaBackground===null)n.nd.remove(),n.nd=void 0;else{var s=i.copy().Ol();t.lc.ia=[s.m11,s.m12,s.m21,s.m22,s.dx,s.dy],Lm(this,t,this.naturalBounds,this.actualBounds),t.lc.ia=[1,0,0,1,0,0],n.nd?n.nd.replaceWith(t.Pd):n.prepend(t.Pd),n.nd=t.Pd}r&&Kp(t,r)}return(this.background!==null||n.Oa!==void 0)&&(r=n.Oa,this.background===null?(Kp(t,n.Oa),n.Oa.remove(),n.Oa=void 0):(this instanceof _&&Co(this)&&(t.lc.ia=[i.m11,i.m12,i.m21,i.m22,i.dx,i.dy]),Up(this,t,this.naturalBounds,this.actualBounds),n.Oa?(Kp(t,n.Oa),n.Oa.replaceWith(t.Pd)):n.prepend(t.Pd),n.Oa=t.Pd),r&&Kp(t,r)),this.Vo(t,this.panel,this.actualBounds,n),i=QM(this,e,t,n),qM(this,n,e,t,i),!0},o.jk=function(t){if(this.background!==null||this.areaBackground!==null)return!0;var e=(this.o&256)!==0;return t.clipInsteadOfFill&&(e=!1),!!e};function sn(t,e,i,n,r,s,l){if(i!==null){var h=1,a=1;if(typeof i=="string")n?e.fillStyle=i:e.strokeStyle=i;else if(i.type===Qo)n?e.fillStyle=i.color:e.strokeStyle=i.color;else{var f=t.eq();if(h=s.width,a=s.height,r?(h=l.width,a=l.height):n||(h+=f,a+=f),(s=e instanceof ml)&&i.ue&&(i.type===Ah||i.uk===h&&i.$s===a))var p=i.ue;else{var d=0,y=0,x=0,v=0,S=0,N=0;if(N=S=0,r?(S=l.x,N=l.y):n||(S-=f/2,N-=f/2),d=i.start.x*h+i.start.offsetX,y=i.start.y*a+i.start.offsetY,x=i.end.x*h+i.end.offsetX,v=i.end.y*a+i.end.offsetY,d+=S,x+=S,y+=N,v+=N,i.type===No)p=e.createLinearGradient(d,y,x,v);else if(i.type===Sn)N=isNaN(i.endRadius)?Math.max(h,a)/2:i.endRadius,isNaN(i.startRadius)?(S=0,N=Math.max(h,a)/2):S=i.startRadius,p=e.createRadialGradient(d,y,S,x,v,N);else if(i.type===Ah)try{p=e.createPattern(i.pattern,"repeat")}catch{p=null}if(i.type!==Ah&&(r=i.colorStops,r!==null))for(r=r.iterator;r.next();)p.addColorStop(r.key,r.value);if(s&&(i.ue=p,p!==null&&(i.uk=h,i.$s=a),p===null&&i.type===Ah&&i.uk!==-1)){i.uk=-1;var k=t.diagram;k!==null&&i.uk===-1&&H(function(){k.redraw()},600)}}n?e.fillStyle=p:e.strokeStyle=p}}}o.og=function(t){if(t instanceof _)t:{if(this!==t&&t!==null)for(var e=this.panel;e!==null;){if(e===t){t=!0;break t}e=e.panel}t=!1}else t=!1;return t},o.Od=function(){if(!this.visible)return!1;var t=this.panel;return t!==null?t.Od():!0},o.Gf=function(){for(var t=this instanceof _?this:this.panel;t!==null&&t.isEnabled;)t=t.panel;return t===null};function Yp(t){if(t.o&2048){var e=t.Ab;if(e.reset(),!t.Gb.w()||!t.rc.w()){Ch(t,!1);return}if(e.translate(t.Gb.x-t.rc.x,t.Gb.y-t.rc.y),t.scale!==1||t.angle!==0){var i=t.naturalBounds;t.ko(e,i.x,i.y,i.width,i.height)}Ch(t,!1),Cs(t,!0)}t.o&4096&&(e=t.panel,e===null?(t.sh.set(t.Ab),t.Gk=t.scale,Cs(t,!1)):e.ke!==null&&(i=t.sh,i.reset(),e.pe()?i.multiply(e.sh):e.panel!==null&&i.multiply(e.panel.sh),i.multiply(t.Ab),t.Gk=t.scale*e.Gk,Cs(t,!1)))}o.ko=function(t,e,i,n,r){if(this.Aa!==1&&t.scale(this.Aa),this.Ib!==0){var s=P.alloc();s.vi(e,i,n,r,Ut),t.rotate(this.Ib,s.x,s.y),P.free(s)}},o.v=function(t){if(!Jo(this)){t===void 0&&(t=!1),vn(this,!0),dl(this,!0);var e=this.panel;e===null||t||e.v()}},o.Sj=function(){Jo(this)||(vn(this,!0),dl(this,!0))};function Ph(t){if(!Zn(t)){var e=t.panel;e!==null?e.v():t.le()&&(e=t.diagram,e!==null&&(e.Ae.add(t),t instanceof b&&t.xd(),e.Wb())),dl(t,!0)}}o.Qk=function(){!(this.o&2048)&&(Ch(this,!0),Cs(this,!0))},o.Uu=function(){Cs(this,!0)},o.N=function(){var t=this.part;t!==null&&t.N()};function dr(t,e){var i=t.stretch,n=t.panel;return n!==null&&n.type===_.Table?yf(t,n.getRowDefinition(t.row),n.getColumnDefinition(t.column),e):n!==null&&n.type===_.Auto&&n.sb()===t?So(t,fe,e):i===Jn?n!==null?n.type===_.Spot&&n.sb()===t?So(t,fe,e):(i=n.defaultStretch,i===Jn?So(t,he,e):So(t,i,e)):So(t,he,e):So(t,i,e)}function yf(t,e,i,n){var r=t.stretch;if(r!==Jn)return So(t,r,n);var s=r=null;switch(e.stretch){case Qe:s=!0;break;case fe:s=!0}switch(i.stretch){case Ge:r=!0;break;case fe:r=!0}return e=t.panel.defaultStretch,r===null&&(r=e===Ge||e===fe),s===null&&(s=e===Qe||e===fe),r===!0&&s===!0?So(t,fe,n):r===!0?So(t,Ge,n):s===!0?So(t,Qe,n):So(t,he,n)}function So(t,e,i){if(i)return e;if(e===he||(i=t.desiredSize,i.w()))return he;if(t=t.angle,!isNaN(i.width))if(t!==90&&t!==270){if(e===Ge)return he;if(e===fe)return Qe}else{if(e===Qe)return he;if(e===fe)return Ge}if(!isNaN(i.height))if(t!==90&&t!==270){if(e===Qe)return he;if(e===fe)return Ge}else{if(e===Ge)return he;if(e===fe)return Qe}return e}function Hp(t,e){t.o=e?t.o|512:t.o&-513}function yu(t){return(t.o&1024)!==0}function jm(t,e){t.o=e?t.o|1024:t.o&-1025}function Ch(t,e){t.o=e?t.o|2048:t.o&-2049}function Cs(t,e){t.o=e?t.o|4096:t.o&-4097}function Jo(t){return(t.o&8192)!==0}function vn(t,e){t.o=e?t.o|8192:t.o&-8193}function Zn(t){return(t.o&16384)!==0}function dl(t,e){t.o=e?t.o|16384:t.o&-16385}o.Ej=function(){this.svg=null},o.ti=function(t){this.Je=t,this.svg!==null&&this.svg.remove()},o.wv=function(){},o.vv=function(t){return this.pa=t,Ph(this),!0},o.jm=function(t,e){(this.pa.x!==t||this.pa.y!==e)&&(this.pa.h(t,e),this.Qk())},o.eq=function(){return 0};function gl(t){var e=t.part;if(e instanceof b&&(t.portId!==null||t===e.port)){var i=e.diagram;i===null||i.undoManager.isUndoingRedoing||J2(e,t)}}function t2(t){var e=t.diagram;e===null||e.undoManager.isUndoingRedoing||(t instanceof _?t instanceof b?t.xd():t.nm(t,function(i){gl(i)}):gl(t))}o.bind=function(t,e,i,n){var r=null;return typeof t=="string"?r=new ce(t,e,i,n):r=t,r.td=this,t=this.eh(),t!==null&&m2(t)&&R("Cannot add a Binding to a template that has already been copied: "+r),this.localBindings===null&&(this.localBindings=new tt),this.localBindings.add(r),this},o.set=function(t){return Object.assign(this,t),this},o.Au=function(t){return Em(this,t),this},o.apply=function(t){return t(this),this},o.km=function(t){return lf(this,t),this},o.kz=function(){return this.eh()},o.eh=function(){for(var t=this instanceof _?this:this.panel;t!==null;){if(t.allBindings!==null)return t;t=t.panel}return null},o.Fv=function(t){return t.td=this,this.animationTriggers===null&&(this.animationTriggers=new vt),this.animationTriggers.add(t.propertyName,t),this};function xn(t,e){for(var i=1;i<arguments.length;++i);i=arguments;var n=null,r=null;if(typeof t=="function")r=t;else if(typeof t=="string"){var s=Th.I(t);typeof s=="function"?(i=ee(arguments),n=s(i),xt(n)||R('GraphObject.make invoked object builder "'+t+'", but it did not return an Object')):r=Y.go[t]}if(n===null&&(r!=null&&r.constructor||R("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),n=new r),r=1,n instanceof D&&1<i.length){s=n;var l=i[1];(typeof l=="string"||l instanceof HTMLDivElement)&&(tm(s,l),r++)}for(;r<i.length;r++)s=i[r],s===void 0?R("Undefined value at argument "+r+" for object being constructed by GraphObject.make: "+n):Em(n,s);return n}function Em(t,e){if(typeof e=="string")if(t instanceof Gt)t.text=e;else if(t instanceof wt)t.figure=e;else if(t instanceof Ri)t.source=e;else if(t instanceof _)e=Qn.I(e),e!==null&&(t.type=e);else if(t instanceof Dt){var i=Xn(Dt,e);i!==null?t.type=i:R("Unknown Brush type as an argument to GraphObject.make: "+e)}else t instanceof W?(e=Xn(W,e),e!==null&&(t.type=e)):t instanceof At&&(e=Xn(At,e),e!==null&&(t.type=e));else if(e instanceof ot)t instanceof _||R("A GraphObject can only be added to a Panel, not to: "+t),t.add(e);else if(e instanceof Ce){var n;e.isRow&&typeof t.getRowDefinition=="function"?n=t.getRowDefinition(e.index):e.isRow||typeof t.getColumnDefinition!="function"||(n=t.getColumnDefinition(e.index)),n instanceof Ce?S2(n,e):R("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+t)}else if(e instanceof Q)typeof t.rb=="function"&&t.rb(e);else if(e instanceof xe)t.type=e;else if(e instanceof ce)t instanceof ot||t instanceof Ce?t.bind(e):R("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(e instanceof $r)t instanceof ot?t.Fv(e):R("An AnimationTrigger can only be applied to a GraphObject, not to: "+t);else if(e instanceof De)t instanceof W&&t.type===W.m?t.figures.add(e):R("A PathFigure can only be added to a Path Geometry, not to: "+t);else if(e instanceof At)t instanceof De?t.segments.add(e):R("A PathSegment can only be added to a PathFigure, not to: "+t);else if(e instanceof Jt)t instanceof D||t instanceof yt?t.layout=e:R("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(e))for(i=0;i<e.length;i++)Em(t,e[i]);else if(typeof e=="object"&&e!==null)if(t instanceof Dt){i=new We;for(var r in e)n=parseFloat(r),isNaN(n)?i[r]=e[r]:t.addColorStop(n,e[r]);lf(t,i)}else if(t instanceof Ce){e.row!==void 0?(r=e.row,(r==null||r===1/0||isNaN(r)||0>r)&&R("Must specify non-negative integer row for RowColumnDefinition "+e+", not: "+r),t.isRow=!0,t.index=r):e.column!==void 0&&(r=e.column,(r==null||r===1/0||isNaN(r)||0>r)&&R("Must specify non-negative integer column for RowColumnDefinition "+e+", not: "+r),t.isRow=!1,t.index=r),r=new We;for(i in e)i!=="row"&&i!=="column"&&(r[i]=e[i]);lf(t,r)}else lf(t,e);else R('Unknown initializer "'+e+'" for object being constructed by GraphObject.make: '+t)}function Zo(t,e){Th.add(t,e)}function _p(t,e,i){i===void 0&&(i=null);var n=t[1];if(typeof i=="function"?i(n):typeof n=="string")return t.splice(1,1),n;if(e===void 0)throw Error("no "+(typeof i=="function"?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return e}z.Object.defineProperties(ot.prototype,{bindingId:{get:function(){return this.A!==null?this.A.tp:-1},set:function(t){this.bindingId!==t&&(this.A===null&&(this.A=new mu),this.A.tp=t)}},localBindings:{get:function(){return this.A!==null?this.A.qe:null},set:function(t){this.localBindings!==t&&(this.A===null&&(this.A=new mu),this.A.qe=t)}},srcBindings:{get:function(){return this.A!==null?this.A.tm:null},set:function(t){this.srcBindings!==t&&(this.A===null&&(this.A=new mu),this.A.tm=t)}},shadowVisible:{get:function(){return this.A!==null?this.A.zi:null},set:function(t){var e=this.shadowVisible;e!==t&&(Pe(this),this.A.zi=t,this.N(),this.g("shadowVisible",e,t))}},enabledChanged:{get:function(){return this.A!==null?this.A.Fb:null},set:function(t){var e=this.enabledChanged;e!==t&&(Pe(this),this.A.Fb=t,this.g("enabledChanged",e,t))}},segmentOrientation:{get:function(){return this.Ua!==null?this.Ua.kr:Mi},set:function(t){var e=this.segmentOrientation;e!==t&&(this.Ua===null&&(this.Ua=new Ts),this.Ua.kr=t,this.v(),this.g("segmentOrientation",e,t),t===Mi&&(this.angle=0))}},segmentIndex:{get:function(){return this.Ua!==null?this.Ua.u:-1/0},set:function(t){t=Math.round(t);var e=this.segmentIndex;e!==t&&(this.Ua===null&&(this.Ua=new Ts),this.Ua.u=t,this.v(),this.g("segmentIndex",e,t))}},segmentFraction:{get:function(){return this.Ua!==null?this.Ua.m:0},set:function(t){isNaN(t)||0>t?t=0:1<t&&(t=1);var e=this.segmentFraction;e!==t&&(this.Ua===null&&(this.Ua=new Ts),this.Ua.m=t,this.v(),this.g("segmentFraction",e,t))}},segmentOffset:{get:function(){return this.Ua!==null?this.Ua.F:yo},set:function(t){var e=this.segmentOffset;e.C(t)||(t=t.J(),this.Ua===null&&(this.Ua=new Ts),this.Ua.F=t,this.v(),this.g("segmentOffset",e,t))}},stretch:{get:function(){return this.A!==null?this.A.eg:Jn},set:function(t){var e=this.stretch;e!==t&&(Pe(this),this.A.eg=t,this.v(),this.g("stretch",e,t))}},name:{get:function(){return this.A!==null?this.A.wa:""},set:function(t){var e=this.name;e!==t&&(Pe(this),this.A.wa=t,this.part!==null&&(this.part.Oh=null),this.g("name",e,t))}},opacity:{get:function(){return this.qb},set:function(t){var e=this.qb;e!==t&&((0>t||1<t)&&dt(t,"0 <= value <= 1",ot,"opacity"),this.qb=t,this.g("opacity",e,t),t=this.diagram,e=this.part,t!==null&&e!==null&&t.N(Sl(e,e.actualBounds)))}},filter:{get:function(){return this.Zm},set:function(t){var e=this.Zm;e!==t&&(this.Zm=t,this.g("filter",e,t),t=this.diagram,e=this.part,t!==null&&e!==null&&t.N(Sl(e,e.actualBounds)))}},visible:{get:function(){return(this.o&1)!==0},set:function(t){var e=(this.o&1)!==0;e!==t&&(this.o^=1,this.g("visible",e,t),e=this.panel,e!==null?e.v():this.le()&&this.Vb(t),this.N(),t2(this))}},pickable:{get:function(){return(this.o&2)!==0},set:function(t){var e=(this.o&2)!==0;e!==t&&(this.o^=2,this.g("pickable",e,t))}},fromLinkableDuplicates:{get:function(){return(this.o&4)!==0},set:function(t){var e=(this.o&4)!==0;e!==t&&(this.o^=4,this.g("fromLinkableDuplicates",e,t))}},fromLinkableSelfNode:{get:function(){return(this.o&8)!==0},set:function(t){var e=(this.o&8)!==0;e!==t&&(this.o^=8,this.g("fromLinkableSelfNode",e,t))}},toLinkableDuplicates:{get:function(){return(this.o&16)!==0},set:function(t){var e=(this.o&16)!==0;e!==t&&(this.o^=16,this.g("toLinkableDuplicates",e,t))}},toLinkableSelfNode:{get:function(){return(this.o&32)!==0},set:function(t){var e=(this.o&32)!==0;e!==t&&(this.o^=32,this.g("toLinkableSelfNode",e,t))}},isPanelMain:{get:function(){return(this.o&64)!==0},set:function(t){var e=(this.o&64)!==0;e!==t&&(this.o^=64,this.v(),this.g("isPanelMain",e,t))}},isActionable:{get:function(){return(this.o&128)!==0},set:function(t){var e=(this.o&128)!==0;e!==t&&(this.o^=128,this.g("isActionable",e,t))}},areaBackground:{get:function(){return this.A!==null?this.A.nd:null},set:function(t){var e=this.areaBackground;e!==t&&(t!==null&&xu(t,"GraphObject.areaBackground"),t instanceof Dt&&t.freeze(),Pe(this),this.A.nd=t,this.N(),this.g("areaBackground",e,t))}},background:{get:function(){return this.Oa},set:function(t){var e=this.Oa;e!==t&&(t!==null&&xu(t,"GraphObject.background"),t instanceof Dt&&t.freeze(),this.Oa=t,this.N(),this.g("background",e,t))}},part:{get:function(){if(this.le())return this;if(this.Jg!==null)return this.Jg;var t;for(t=this.panel;t;){if(t instanceof lt)return this.Jg=t;t=t.panel}return null}},svg:{get:function(){return this.V},set:function(t){this.V=t}},panel:{get:function(){return this.Je}},layer:{get:function(){var t=this.part;return t!==null?t.layer:null}},diagram:{get:function(){var t=this.part;return t!==null?t.diagram:null}},position:{get:function(){return this.pa},set:function(t){var e=t.x,i=t.y,n=this.pa,r=n.x;n=n.y,(r===e||isNaN(r)&&isNaN(e))&&(n===i||isNaN(n)&&isNaN(i))?this.wv():(t=t.copy(),this.vv(t,r,n)&&this.g("position",new P(r,n),t))}},actualBounds:{get:function(){return this.Gb}},scale:{get:function(){return this.Aa},set:function(t){var e=this.Aa;e!==t&&(0>=t&&R("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.Aa=t,this.v(),this.g("scale",e,t))}},angle:{get:function(){return this.Ib},set:function(t){var e=this.Ib;e!==t&&(t%=360,0>t&&(t+=360),e!==t&&(this.Ib=t,t2(this),this.v(),this.g("angle",e,t)))}},desiredSize:{get:function(){return this.bd},set:function(t){var e=t.width,i=t.height,n=this.bd,r=n.width,s=n.height;(r===e||isNaN(r)&&isNaN(e))&&(s===i||isNaN(s)&&isNaN(i))||(this.bd=t=t.J(),this.v(),this instanceof wt&&this.nc(),this.g("desiredSize",n,t),yu(this)&&(t=this.part,t!==null&&(pl(this,t,"width"),pl(this,t,"height"))))}},width:{get:function(){return this.bd.width},set:function(t){var e=this.bd.width;e===t||isNaN(e)&&isNaN(t)||(e=this.bd,this.bd=t=new pt(t,this.bd.height).freeze(),this.v(),this instanceof wt&&this.nc(),this.g("desiredSize",e,t),yu(this)&&(t=this.part,t!==null&&pl(this,t,"width")))}},height:{get:function(){return this.bd.height},set:function(t){var e=this.bd.height;e===t||isNaN(e)&&isNaN(t)||(e=this.bd,this.bd=t=new pt(this.bd.width,t).freeze(),this.v(),this instanceof wt&&this.nc(),this.g("desiredSize",e,t),yu(this)&&(t=this.part,t!==null&&pl(this,t,"height")))}},minSize:{get:function(){return this.A!==null?this.A.u:ou},set:function(t){var e=this.minSize;e.C(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),Pe(this),this.A.u=t,this.v(),this.g("minSize",e,t))}},maxSize:{get:function(){return this.A!==null?this.A.m:g0},set:function(t){var e=this.maxSize;e.C(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),Pe(this),this.A.m=t,this.v(),this.g("maxSize",e,t))}},measuredBounds:{get:function(){return this.rc}},naturalBounds:{get:function(){return this.ac}},margin:{get:function(){return this.Gg},set:function(t){typeof t=="number"&&(t=new Rt(t));var e=this.Gg;e.C(t)||(this.Gg=t=t.J(),this.v(),this.g("margin",e,t))}},transform:{get:function(){return this.o&2048&&Yp(this),this.Ab}},ke:{get:function(){return this.o&4096&&Yp(this),this.sh}},animationTriggers:{get:function(){return this.A!==null?this.A.hb:null},set:function(t){this.animationTriggers!==t&&(Pe(this),this.A.hb=t)}},reshapingBehavior:{get:function(){return this.A!==null?this.A.Nf:he},set:function(t){this.reshapingBehavior!==t&&(Pe(this),this.A.Nf=t)}},alignment:{get:function(){return this.Hb},set:function(t){var e=this.Hb;e.C(t)||(t.Jc()&&!t.Tb()&&R("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.Hb=t=t.J(),Ph(this),this.g("alignment",e,t))}},column:{get:function(){return this.xg},set:function(t){t=Math.round(t);var e=this.xg;e!==t&&(0>t&&dt(t,">= 0",ot,"column"),this.xg=t,this.v(),this.g("column",e,t),this.svg!==null&&this.svg.remove())}},columnSpan:{get:function(){return this.A!==null?this.A.pb:1},set:function(t){t=Math.round(t);var e=this.columnSpan;e!==t&&(1>t&&dt(t,">= 1",ot,"columnSpan"),Pe(this),this.A.pb=t,this.v(),this.g("columnSpan",e,t))}},row:{get:function(){return this.eo},set:function(t){t=Math.round(t);var e=this.eo;e!==t&&(0>t&&dt(t,">= 0",ot,"row"),this.eo=t,this.v(),this.g("row",e,t),this.svg!==null&&this.svg.remove())}},rowSpan:{get:function(){return this.A!==null?this.A.yi:1},set:function(t){t=Math.round(t);var e=this.rowSpan;e!==t&&(1>t&&dt(t,">= 1",ot,"rowSpan"),Pe(this),this.A.yi=t,this.v(),this.g("rowSpan",e,t))}},spanAllocation:{get:function(){return this.A!==null?this.A.Ai:null},set:function(t){var e=this.spanAllocation;e!==t&&(Pe(this),this.A.Ai=t,this.v(),this.g("spanAllocation",e,t))}},alignmentFocus:{get:function(){return this.nk},set:function(t){var e=this.nk;e.C(t)||(this.nk=t=t.J(),this.v(),this.g("alignmentFocus",e,t))}},portId:{get:function(){return this.Vn},set:function(t){var e=this.Vn;if(e!==t){var i=this.part;i===null||i instanceof b||R("Cannot set portID on a Link: "+t),e!==null&&i!==null&&mv(i,this),this.Vn=t,t!==null&&i!==null&&(i.Qe=!0,q2(i,this)),this.g("portId",e,t)}}},toSpot:{get:function(){return this.ba!==null?this.ba.wj:$e},set:function(t){var e=this.toSpot;e.C(t)||(t=t.J(),this.Sc(),this.ba.wj=t,this.g("toSpot",e,t),gl(this))}},toEndSegmentLength:{get:function(){return this.ba!==null?this.ba.uj:10},set:function(t){var e=this.toEndSegmentLength;e!==t&&(0>t&&dt(t,">= 0",ot,"toEndSegmentLength"),this.Sc(),this.ba.uj=t,this.g("toEndSegmentLength",e,t),gl(this))}},toShortLength:{get:function(){return this.ba!==null?this.ba.vj:0},set:function(t){var e=this.toShortLength;e!==t&&(this.Sc(),this.ba.vj=t,this.g("toShortLength",e,t),gl(this))}},toLinkable:{get:function(){return this.ba!==null?this.ba.Nr:null},set:function(t){var e=this.toLinkable;e!==t&&(this.Sc(),this.ba.Nr=t,this.g("toLinkable",e,t))}},toMaxLinks:{get:function(){return this.ba!==null?this.ba.Or:1/0},set:function(t){var e=this.toMaxLinks;e!==t&&(0>t&&dt(t,">= 0",ot,"toMaxLinks"),this.Sc(),this.ba.Or=t,this.g("toMaxLinks",e,t))}},fromSpot:{get:function(){return this.ba!==null?this.ba.Ui:$e},set:function(t){var e=this.fromSpot;e.C(t)||(t=t.J(),this.Sc(),this.ba.Ui=t,this.g("fromSpot",e,t),gl(this))}},fromEndSegmentLength:{get:function(){return this.ba!==null?this.ba.Si:10},set:function(t){var e=this.fromEndSegmentLength;e!==t&&(0>t&&dt(t,">= 0",ot,"fromEndSegmentLength"),this.Sc(),this.ba.Si=t,this.g("fromEndSegmentLength",e,t),gl(this))}},fromShortLength:{get:function(){return this.ba!==null?this.ba.Ti:0},set:function(t){var e=this.fromShortLength;e!==t&&(this.Sc(),this.ba.Ti=t,this.g("fromShortLength",e,t),gl(this))}},fromLinkable:{get:function(){return this.ba!==null?this.ba.aq:null},set:function(t){var e=this.fromLinkable;e!==t&&(this.Sc(),this.ba.aq=t,this.g("fromLinkable",e,t))}},fromMaxLinks:{get:function(){return this.ba!==null?this.ba.bq:1/0},set:function(t){var e=this.fromMaxLinks;e!==t&&(0>t&&dt(t,">= 0",ot,"fromMaxLinks"),this.Sc(),this.ba.bq=t,this.g("fromMaxLinks",e,t))}},cursor:{get:function(){return this.A!==null?this.A.j:""},set:function(t){var e=this.cursor;e!==t&&(Pe(this),this.A.j=t,this.g("cursor",e,t))}},click:{get:function(){return this.A!==null?this.A.vh:null},set:function(t){var e=this.click;e!==t&&(Pe(this),this.A.vh=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.A!==null?this.A.Bh:null},set:function(t){var e=this.doubleClick;e!==t&&(Pe(this),this.A.Bh=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.A!==null?this.A.xh:null},set:function(t){var e=this.contextClick;e!==t&&(Pe(this),this.A.xh=t,this.g("contextClick",e,t))}},mouseEnter:{get:function(){return this.A!==null?this.A.Jh:null},set:function(t){var e=this.mouseEnter;e!==t&&(Pe(this),this.A.Jh=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.A!==null?this.A.Mh:null},set:function(t){var e=this.mouseLeave;e!==t&&(Pe(this),this.A.Mh=t,this.g("mouseLeave",e,t))}},mouseOver:{get:function(){return this.A!==null?this.A.Nh:null},set:function(t){var e=this.mouseOver;e!==t&&(Pe(this),this.A.Nh=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.A!==null?this.A.Lh:null},set:function(t){var e=this.mouseHover;e!==t&&(Pe(this),this.A.Lh=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.A!==null?this.A.Kh:null},set:function(t){var e=this.mouseHold;e!==t&&(Pe(this),this.A.Kh=t,this.g("mouseHold",e,t))}},mouseDragEnter:{get:function(){return this.A!==null?this.A.Mf:null},set:function(t){var e=this.mouseDragEnter;e!==t&&(Pe(this),this.A.Mf=t,this.g("mouseDragEnter",e,t))}},mouseDragLeave:{get:function(){return this.A!==null?this.A.Td:null},set:function(t){var e=this.mouseDragLeave;e!==t&&(Pe(this),this.A.Td=t,this.g("mouseDragLeave",e,t))}},mouseDrop:{get:function(){return this.A!==null?this.A.Ih:null},set:function(t){var e=this.mouseDrop;e!==t&&(Pe(this),this.A.Ih=t,this.g("mouseDrop",e,t))}},actionDown:{get:function(){return this.A!==null?this.A.V:null},set:function(t){var e=this.actionDown;e!==t&&(Pe(this),this.A.V=t,this.g("actionDown",e,t))}},actionMove:{get:function(){return this.A!==null?this.A.ga:null},set:function(t){var e=this.actionMove;e!==t&&(Pe(this),this.A.ga=t,this.g("actionMove",e,t))}},actionUp:{get:function(){return this.A!==null?this.A.Ha:null},set:function(t){var e=this.actionUp;e!==t&&(Pe(this),this.A.Ha=t,this.g("actionUp",e,t))}},actionCancel:{get:function(){return this.A!==null?this.A.F:null},set:function(t){var e=this.actionCancel;e!==t&&(Pe(this),this.A.F=t,this.g("actionCancel",e,t))}},toolTip:{get:function(){return this.A!==null?this.A.Xh:null},set:function(t){var e=this.toolTip;e!==t&&(Pe(this),this.A.Xh=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.A!==null?this.A.yh:null},set:function(t){var e=this.contextMenu;e!==t&&(Pe(this),this.A.yh=t,this.g("contextMenu",e,t))}}}),ot.prototype.trigger=ot.prototype.Fv,ot.prototype.findBindingPanel=ot.prototype.eh,ot.prototype.findTemplateBinder=ot.prototype.kz,ot.prototype.setProperties=ot.prototype.km,ot.prototype.apply=ot.prototype.apply,ot.prototype.attach=ot.prototype.Au,ot.prototype.set=ot.prototype.set,ot.prototype.isEnabledObject=ot.prototype.Gf,ot.prototype.isVisibleObject=ot.prototype.Od,ot.prototype.isContainedBy=ot.prototype.og,ot.prototype.getNearestIntersectionPoint=ot.prototype.ms,ot.prototype.getLocalPoint=ot.prototype.ls,ot.prototype.getDocumentScale=ot.prototype.Bf,ot.prototype.getDocumentAngle=ot.prototype.ii,ot.prototype.getDocumentBounds=ot.prototype.ji,ot.prototype.getDocumentPoint=ot.prototype.ja,ot.prototype.intersectsRect=ot.prototype.Tc,ot.prototype.containedInRect=ot.prototype.ah,ot.prototype.containsRect=ot.prototype.Oe,ot.prototype.containsPoint=ot.prototype.ca,ot.prototype.raiseChanged=ot.prototype.g,ot.prototype.raiseChangedEvent=ot.prototype.cb,ot.prototype.addCopyProperty=ot.prototype.Rw;var Th=null;ot.className="GraphObject",Th=new vt,Zo("Button",function(){function t(i,n){return i.diagram.ec(i.documentPoint,function(r){for(;r.panel!==null&&!r.isActionable;)r=r.panel;return r},function(r){return r===n})!==null}var e=xn(_,_.Auto,{isActionable:!0,enabledChanged:function(i,n){if(i instanceof _){var r=i.fb("ButtonBorder");r!==null&&(r.fill=n?i._buttonFillNormal:i._buttonFillDisabled)}},cursor:"pointer",_buttonFillNormal:"#F5F5F5",_buttonStrokeNormal:"#BDBDBD",_buttonFillOver:"#E0E0E0",_buttonStrokeOver:"#9E9E9E",_buttonFillPressed:"#BDBDBD",_buttonStrokePressed:"#9E9E9E",_buttonFillDisabled:"#E5E5E5"},xn(wt,{name:"ButtonBorder",figure:"RoundedRectangle",spot1:new at(0,0,2.76142374915397,2.761423749153969),spot2:new at(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,parameter2:2,fill:"#F5F5F5",stroke:"#BDBDBD"}));return e.mouseEnter=function(i,n){if(n.Gf()&&n instanceof _&&(i=n.fb("ButtonBorder"),i instanceof wt)){var r=n._buttonFillOver;n._buttonFillNormal=i.fill,i.fill=r,r=n._buttonStrokeOver,n._buttonStrokeNormal=i.stroke,i.stroke=r}},e.mouseLeave=function(i,n){n.Gf()&&n instanceof _&&(i=n.fb("ButtonBorder"),i instanceof wt&&(i.fill=n._buttonFillNormal,i.stroke=n._buttonStrokeNormal))},e.actionDown=function(i,n){if(n.Gf()&&n instanceof _&&n._buttonFillPressed!==null&&i.button===0){var r=n.fb("ButtonBorder");if(r instanceof wt){i=i.diagram;var s=i.skipsUndoManager;i.skipsUndoManager=!0;var l=n._buttonFillPressed;n._buttonFillOver=r.fill,r.fill=l,l=n._buttonStrokePressed,n._buttonStrokeOver=r.stroke,r.stroke=l,i.skipsUndoManager=s}}},e.actionUp=function(i,n){if(n.Gf()&&n instanceof _&&n._buttonFillPressed!==null&&i.button===0){var r=n.fb("ButtonBorder");if(r instanceof wt){var s=i.diagram,l=s.skipsUndoManager;s.skipsUndoManager=!0,t(i,n)?(r.fill=n._buttonFillOver,r.stroke=n._buttonStrokeOver):(r.fill=n._buttonFillNormal,r.stroke=n._buttonStrokeNormal),s.skipsUndoManager=l}}},e.actionCancel=function(i,n){if(n.Gf()&&n instanceof _&&n._buttonFillPressed!==null){var r=n.fb("ButtonBorder");if(r instanceof wt){var s=i.diagram,l=s.skipsUndoManager;s.skipsUndoManager=!0,t(i,n)?(r.fill=n._buttonFillOver,r.stroke=n._buttonStrokeOver):(r.fill=n._buttonFillNormal,r.stroke=n._buttonStrokeNormal),s.skipsUndoManager=l}}},e.actionMove=function(i,n){if(n.Gf()&&n instanceof _&&n._buttonFillPressed!==null){var r=i.diagram;if(r.firstInput.button===0&&(r.currentTool.standardMouseOver(),t(i,n)&&(i=n.fb("ButtonBorder"),i instanceof wt))){var s=r.skipsUndoManager;r.skipsUndoManager=!0;var l=n._buttonFillPressed;i.fill!==l&&(i.fill=l),l=n._buttonStrokePressed,i.stroke!==l&&(i.stroke=l),r.skipsUndoManager=s}}},e}),Zo("TreeExpanderButton",function(){var t=xn("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},xn(wt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:su},new ce("figure","isTreeExpanded",function(e,i){return i=i.panel,e?i._treeExpandedFigure:i._treeCollapsedFigure}).Yo()),{visible:!1},new ce("visible","isTreeLeaf",function(e){return!e}).Yo());return t.click=function(e,i){if(i=i.part,i instanceof jt&&(i=i.adornedPart),i instanceof b){var n=i.diagram;if(n!==null){if(n=n.commandHandler,i.isTreeExpanded){if(!n.canCollapseTree(i))return}else if(!n.canExpandTree(i))return;e.handled=!0,i.isTreeExpanded?n.collapseTree(i):n.expandTree(i)}}},t}),Zo("SubGraphExpanderButton",function(){var t=xn("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},xn(wt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:su},new ce("figure","isSubGraphExpanded",function(e,i){return i=i.panel,e?i._subGraphExpandedFigure:i._subGraphCollapsedFigure}).Yo()));return t.click=function(e,i){if(i=i.part,i instanceof jt&&(i=i.adornedPart),i instanceof yt){var n=i.diagram;if(n!==null){if(n=n.commandHandler,i.isSubGraphExpanded){if(!n.canCollapseSubGraph(i))return}else if(!n.canExpandSubGraph(i))return;e.handled=!0,i.isSubGraphExpanded?n.collapseSubGraph(i):n.expandSubGraph(i)}}},t}),Zo("ToolTip",function(){return xn(jt,_.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new P(0,3),shadowBlur:5},xn(wt,{name:"Border",figure:"RoundedRectangle",parameter1:1,parameter2:1,fill:"#F5F5F5",stroke:"#F0F0F0",spot1:new at(0,0,4,6),spot2:new at(1,1,-4,-4)}))}),Zo("ContextMenu",function(){return xn(jt,_.Vertical,{background:"#F5F5F5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new P(0,3),shadowBlur:5},new ce("background","",function(t){return t.adornedPart!==null&&t.placeholder!==null?null:"#F5F5F5"}))}),Zo("ContextMenuButton",function(){var t=xn("Button");t.stretch=Ge;var e=t.fb("ButtonBorder");return e instanceof wt&&(e.figure="Rectangle",e.strokeWidth=0,e.spot1=new at(0,0,2,3),e.spot2=new at(1,1,-2,-2)),t}),Zo("PanelExpanderButton",function(t){var e=_p(t,"COLLAPSIBLE"),i=xn("Button",{_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8",_buttonFillNormal:"rgba(0, 0, 0, 0)",_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null,_buttonFillPressed:"rgba(0, 0, 0, .4)",_buttonStrokePressed:null},xn(wt,{name:"ButtonIcon",strokeWidth:2},new ce("geometryString","visible",function(n){return n?i._buttonExpandedFigure:i._buttonCollapsedFigure}).Yo(e)));return t=i.fb("ButtonBorder"),t instanceof wt&&(t.stroke=null,t.fill="rgba(0, 0, 0, 0)"),i.click=function(n,r){var s=r.diagram;if(s!==null&&!s.isReadOnly){var l=r.eh();l===null&&(l=r.part),l!==null&&(r=l.fb(e),r!==null&&(n.handled=!0,s.Ea("Collapse/Expand Panel"),r.visible=!r.visible,s.eb("Collapse/Expand Panel")))}},i}),Zo("CheckBoxButton",function(t){var e=_p(t);return t=xn("Button",{desiredSize:new pt(14,14)},xn(wt,{name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:fe,geometryStretch:Fr,visible:!1},e!==""?new ce("visible",e).Ix():[])),t.click=function(i,n){if(n instanceof _){var r=i.diagram;if(!(r===null||r.isReadOnly||e!==""&&r.model.isReadOnly)){i.handled=!0;var s=n.fb("ButtonIcon");r.Ea("checkbox"),s.visible=!s.visible,typeof n._doClick=="function"&&n._doClick(i,n),r.eb("checkbox")}}},t}),Zo("CheckBox",function(t){t=_p(t),t=xn("CheckBoxButton",t,{name:"Button",isActionable:!1,margin:new Rt(0,1,0,0)});var e=xn(_,"Horizontal",t,{isActionable:!0,cursor:t.cursor,margin:new Rt(1),_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillPressed:t._buttonFillPressed,_buttonStrokePressed:t._buttonStrokePressed,_buttonFillDisabled:t._buttonFillDisabled,mouseEnter:t.mouseEnter,mouseLeave:t.mouseLeave,actionDown:t.actionDown,actionUp:t.actionUp,actionCancel:t.actionCancel,actionMove:t.actionMove,click:t.click,_buttonClick:t.click});return t.mouseEnter=null,t.mouseLeave=null,t.actionDown=null,t.actionUp=null,t.actionCancel=null,t.actionMove=null,t.click=null,e}),ot.None=he=new Q(ot,"None",0),ot.Default=Jn=new Q(ot,"Default",0),ot.Vertical=Qe=new Q(ot,"Vertical",4),ot.Horizontal=Ge=new Q(ot,"Horizontal",5),ot.Fill=fe=new Q(ot,"Fill",3),ot.Uniform=Fr=new Q(ot,"Uniform",1),ot.UniformToFill=cf=new Q(ot,"UniformToFill",2),ot.FlipVertical=pf=new Q(ot,"FlipVertical",1),ot.FlipHorizontal=df=new Q(ot,"FlipHorizontal",2),ot.FlipBoth=gf=new Q(ot,"FlipBoth",3),ot.make=xn,ot.getBuilders=function(){var t=new vt,e;for(e in Th)if(e!==e.toLowerCase()){var i=Th.I(e);typeof i=="function"&&t.add(e,i)}return t.freeze(),t},ot.defineBuilder=Zo,ot.build=function(t,e,i){for(var n=[],r=2;r<arguments.length;++r)n[r-2]=arguments[r];if(r=Th.I(t),typeof r=="function"&&(n=r([t].concat(n)),n instanceof ot))return e&&n.set(e),n;R('GraphObject.build invoked object builder "'+t+'", but it did not return an Object')},ot.takeBuilderArgument=_p;function mu(){this.jc=!1,this.wa="",this.tp=-1,this.ob=this.tm=this.qe=null,this.j="",this.hb=this.Ai=this.Fb=this.yh=this.Xh=this.F=this.Ha=this.ga=this.V=this.Ih=this.Td=this.Mf=this.Kh=this.Lh=this.Nh=this.Mh=this.Jh=this.xh=this.Bh=this.vh=null,this.u=ou,this.m=g0,this.eg=Jn,this.pb=this.yi=1,this.Nf=he,this.Mc=this.zi=this.nd=null,this.Lc="category"}mu.prototype.copy=function(){var t=new mu;return t.wa=this.wa,t.tp=this.tp,t.qe=this.qe,t.ob=this.ob,t.j=this.j,t.vh=this.vh,t.Bh=this.Bh,t.xh=this.xh,t.Jh=this.Jh,t.Mh=this.Mh,t.Nh=this.Nh,t.Lh=this.Lh,t.Kh=this.Kh,t.Mf=this.Mf,t.Td=this.Td,t.Ih=this.Ih,t.V=this.V,t.ga=this.ga,t.Ha=this.Ha,t.F=this.F,t.Xh=this.Xh,t.yh=this.yh,t.Fb=this.Fb,t.Ai=this.Ai,t.hb=this.hb,t.u=this.u.J(),t.m=this.m.J(),t.eg=this.eg,t.yi=this.yi,t.pb=this.pb,t.Nf=this.Nf,t.nd=this.nd,t.zi=this.zi,t.Mc=this.Mc,t.Lc=this.Lc,t};function Ts(){this.u=-1/0,this.m=0,this.F=yo,this.kr=Mi,this.j=this.V="None"}Ts.prototype.copy=function(){var t=new Ts;return t.u=this.u,t.m=this.m,t.F=this.F.J(),t.kr=this.kr,t.V=this.V,t.j=this.j,t},Ts.className="LinkElementSettings";function mf(){this.wj=this.Ui=Je,this.vj=this.Ti=this.uj=this.Si=NaN,this.Nr=this.aq=null,this.Or=this.bq=1/0}mf.prototype.copy=function(){var t=new mf;return t.Ui=this.Ui.J(),t.wj=this.wj.J(),t.Si=this.Si,t.uj=this.uj,t.Ti=this.Ti,t.vj=this.vj,t.aq=this.aq,t.Nr=this.Nr,t.bq=this.bq,t.Or=this.Or,t},mf.className="LinkSettings";function yl(){this.ia=[1,0,0,1,0,0]}yl.prototype.copy=function(){var t=new yl;return t.ia[0]=this.ia[0],t.ia[1]=this.ia[1],t.ia[2]=this.ia[2],t.ia[3]=this.ia[3],t.ia[4]=this.ia[4],t.ia[5]=this.ia[5],t},yl.prototype.translate=function(t,e){this.ia[4]+=this.ia[0]*t+this.ia[2]*e,this.ia[5]+=this.ia[1]*t+this.ia[3]*e},yl.prototype.scale=function(t,e){this.ia[0]*=t,this.ia[1]*=t,this.ia[2]*=e,this.ia[3]*=e},yl.prototype.rotate=function(t,e,i){if(360<=t?t-=360:0>t&&(t+=360),t!==0){if(this.translate(e,i),t===90){t=0;var n=1}else t===180?(t=-1,n=0):t===270?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));var r=this.ia[1]*t+this.ia[3]*n,s=this.ia[0]*-n+this.ia[2]*t,l=this.ia[1]*-n+this.ia[3]*t;this.ia[0]=this.ia[0]*t+this.ia[2]*n,this.ia[1]=r,this.ia[2]=s,this.ia[3]=l,this.translate(-e,-i)}},yl.className="STransform";function vu(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.bx=[],this.pattern=null}vu.prototype.addColorStop=function(t,e){this.bx.push({offset:t,color:e})},vu.className="SGradient";function Or(t,e,i){this.ownerDocument=t=e===void 0?Y.document:e,this.Wz="http://www.w3.org/2000/svg",t!==void 0&&(this.La=this.Qd("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.style.display="block",this.La.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.La.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")),this.cs=null,this.context=new wn(this,i)}Or.prototype.resize=function(t,e,i,n){return this.width!==t||this.height!==e?(this.width=t,this.height=e,this.style.width=i+"px",this.style.height=n+"px",this.La.setAttributeNS(null,"width",i+"px"),this.La.setAttributeNS(null,"height",n+"px"),this.La.setAttributeNS(null,"viewBox","0 0 "+i+" "+n),this.context.sw.firstElementChild.setAttributeNS(null,"width",i+"px"),this.context.sw.firstElementChild.setAttributeNS(null,"height",n+"px"),!0):!1},Or.prototype.Qd=function(t,e,i){if(t=this.ownerDocument.createElementNS(this.Wz,t),xt(e))for(var n in e)t.setAttributeNS(n==="href"?"http://www.w3.org/1999/xlink":"",n,e[n]);return i!==void 0&&(t.textContent=i),t},Or.prototype.getBoundingClientRect=function(){return this.La.getBoundingClientRect()},Or.prototype.focus=function(){this.La.focus()},Or.prototype.jx=function(){this.ownerDocument=null},z.Object.defineProperties(Or.prototype,{width:{get:function(){return this.La.width.baseVal.value},set:function(t){this.La.setAttribute("width",t+"px")}},height:{get:function(){return this.La.height.baseVal.value},set:function(t){this.La.setAttribute("height",t+"px")}},style:{get:function(){return this.La.style}}}),Or.className="SVGSurface";function wn(t,e){this.Cv=t,this.svg=t.La,this.stack=[],this.jh=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.Dl=!1,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.Rg=this.vr=this.ur=0,this.ud=this.Pd=null,this.path=[],this.Ul={},this.xt=!1,this.Ug=null,this.sj=0,this.lc=new yl,this.j=Xp(this),this.Lj=Xp(this,"gojs-diagram"),this.Zr=this.pi=null;var i=ru++,n=this.Qd("clipPath",{id:"mainClip"+i});n.appendChild(this.Qd("rect",{x:0,y:0,width:t.width,height:t.height})),this.sw=n,this.svg.appendChild(this.j),this.j.appendChild(this.Lj),this.svg.appendChild(n),this.j.setAttributeNS(null,"clip-path","url(#mainClip"+i+")"),this.Yz={},this.isTemporary=!!e,this.filter="",this.Zj=null}function e2(t,e,i,n,r,s,l){t.Lj===void 0?Gp(t,e,i,n,r,s,l):t.Lj.setAttribute("transform","matrix("+e+", "+i+", "+n+", "+r+", "+s+", "+l+")")}o=wn.prototype,o.arc=function(t,e,i,n,r,s,l,h){var a=2*Math.PI,f=a-1e-6,p=i*Math.cos(n),d=i*Math.sin(n),y=t+p,x=e+d,v=s?0:1;n=s?n-r:r-n,(1e-6<Math.abs(l-y)||1e-6<Math.abs(h-x))&&this.path.push(["L",y,+x]),0>n&&(n=n%a+a),n>f?(this.path.push(["A",i,i,0,1,v,t-p,e-d]),this.path.push(["A",i,i,0,1,v,y,x])):1e-6<n&&this.path.push(["A",i,i,0,+(n>=Math.PI),v,t+i*Math.cos(r),e+i*Math.sin(r)])},o.beginPath=function(){this.path=[],this.Ul={stroke:"none",fill:"none"}},o.Pe=function(t){this.addPath(this.path,this.lc,t||0)},o.bezierCurveTo=function(t,e,i,n,r,s){this.path.push(["C",t,e,i,n,r,s])},o.clearRect=function(){},o.clip=function(){this.Ul.clipPath=!0},o.closePath=function(){this.path.push(["z"])},o.createLinearGradient=function(t,e,i,n){var r=new vu("linear");return r.x1=t,r.y1=e,r.x2=i,r.y2=n,r},o.createPattern=function(t){var e="";t instanceof HTMLCanvasElement&&(e=t.toDataURL()),t instanceof HTMLImageElement&&(e=t.getAttribute("src"));var i=this.Yz;if(i[e])return"url(#"+i[e]+")";var n="PATTERN"+ru++,r={x:0,y:0,width:t.width,height:t.height,href:e};return t=this.Qd("pattern",{width:t.width,height:t.height,id:n,patternUnits:"userSpaceOnUse"}),t.appendChild(this.Qd(kh,r)),this.svg.appendChild(t),i[e]=n,"url(#"+n+")"},o.createRadialGradient=function(t,e,i,n,r,s){var l=new vu("radial");return l.x1=t,l.y1=e,l.r1=i,l.x2=n,l.y2=r,l.r2=s,l},o.drawImage=function(t,e,i,n,r,s,l,h,a){s="",t instanceof HTMLCanvasElement&&(s=t.toDataURL()),t instanceof HTMLImageElement&&(s=t.getAttribute("src")),l=t instanceof HTMLImageElement?t.naturalWidth:t.width;var f=t instanceof HTMLImageElement?t.naturalHeight:t.height;n===void 0&&(h=n=l,a=r=f),n=n||0,r=r||0,h=h||0,a=a||0,t={x:0,y:0,width:h||l||n,height:a||f||r,href:s},F.$(n,h)&&F.$(r,a)?s.toLowerCase().indexOf(".svg")===-1&&s.toLowerCase().indexOf("data:image/svg")===-1&&(t.preserveAspectRatio="xMidYMid slice"):t.preserveAspectRatio="none",(e!==0||i!==0||n!==l||r!==f)&&(h="CLIP"+ru++,a=this.Qd("clipPath",{id:h}),a.appendChild(this.Qd("rect",{x:e,y:i,width:n,height:r})),this.svg.appendChild(a),t["clip-path"]="url(#"+h+")"),Lh(this,kh,t,this.lc),this.addElement(kh,t)},o.fill=function(t){t&&(this.Ul["fill-rule"]="evenodd"),Fm(this,this.Ul)},o.kg=function(t,e){this.clipInsteadOfFill?this.clip():this.fill(e)},o.fillRect=function(t,e,i,n){t=[t,e,i,n],t={x:t[0],y:t[1],width:t[2],height:t[3]},Lh(this,"fill",t,this.lc),this.addElement("rect",t)},o.lx=function(t,e,i,n){t={x:t,y:e,width:i,height:n},Lh(this,"fill",t,this.lc),Fm(this,t),this.svg.prepend(this.Qd("rect",t))},o.fillText=function(t,e,i){t=[t,e,i],e=this.textAlign,e==="left"?e="start":e==="right"?e="end":e==="center"&&(e="middle"),e={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":e},Lh(this,"fill",e,this.lc),this.addElement("text",e,t[0])},o.lineTo=function(t,e){this.path.push(["L",t,e])},o.moveTo=function(t,e){this.path.push(["M",t,e])},o.quadraticCurveTo=function(t,e,i,n){this.path.push(["Q",t,e,i,n])},o.rect=function(t,e,i,n){this.path.push(["M",t,e],["L",t+i,e],["L",t+i,e+n],["L",t,e+n],["z"])},o.restore=function(){this.lc=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.lineDashOffset=t.lineDashOffset,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign,this.Zj=t.Zj},o.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign,Zj:this.Zj});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.lc.copy())},o.setTransform=function(t,e,i,n,r,s){t===1&&e===0&&i===0&&n===1&&r===0&&s===0||Gp(this,t,e,i,n,r,s)},o.scale=function(t,e){this.lc.scale(t,e)},o.translate=function(t,e){this.lc.translate(t,e)},o.transform=function(){},o.vc=function(){},o.stroke=function(){n2(this,this.Ul)},o.fk=function(){this.clipInsteadOfFill||this.stroke()},o.Qd=function(t,e,i){return this.Cv.Qd(t,e,i)},o.addElement=function(t,e,i){return t=this.Qd(t,e,i),this.ud!==null?this.ud.appendChild(t):this.ud=t,this.Pd=t};function Lh(t,e,i,n){e==="fill"?Fm(t,i):e==="stroke"&&n2(t,i),n!==null&&(t=n.ia,i.transform="matrix("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")")}function Fm(t,e){t.fillStyle instanceof vu?e.fill=Om(t,t.fillStyle):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),e.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",e["fill-opacity"]=t[4]):e.fill=t.fillStyle}function i2(t,e,i){i=i?"fill":"stroke",t.fillStyle instanceof vu?e.setAttributeNS(null,"fill",Om(t,t.fillStyle)):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),e.setAttributeNS(null,i,"rgb("+t[1]+","+t[2]+","+t[3]+")"),e.setAttributeNS(null,i+"-opacity",t[4])):e.setAttributeNS(null,i,t.fillStyle)}function n2(t,e){if(t.strokeStyle instanceof vu)e.stroke=Om(t,t.strokeStyle);else if(/^rgba\(/.test(t.strokeStyle)){var i=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle);e.stroke="rgb("+i[1]+","+i[2]+","+i[3]+")",e["stroke-opacity"]=i[4]}else e.stroke=t.strokeStyle;e["stroke-width"]=t.lineWidth,e["stroke-linecap"]=t.lineCap,e["stroke-linejoin"]=t.lineJoin,e["stroke-miterlimit"]=t.miterLimit,t.xt&&(e["stroke-dasharray"]=t.Ug.toString(),e["stroke-dashoffset"]=t.sj)}function Om(t,e){var i="GRAD"+ru++;if(e.type==="linear")var n=t.Qd("linearGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:i,gradientUnits:"userSpaceOnUse"});else if(e.type==="radial")n=t.Qd("radialGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:i});else throw Error("invalid gradient");var r=e.bx;e=r.length;for(var s=[],l=0;l<e;l++){var h=r[l],a=h.color;h={offset:h.offset,"stop-color":a},/^rgba\(/.test(a)&&(a=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a),h["stop-color"]="rgb("+a[1]+","+a[2]+","+a[3]+")",h["stop-opacity"]=a[4]),s.push(h)}for(s.sort(function(f,p){return f.offset>p.offset?1:-1}),r=0;r<e;r++)n.appendChild(t.Qd("stop",s[r]));return t.svg.appendChild(n),"url(#"+i+")"}o.addPath=function(t,e,i){for(var n=[],r=0;r<t.length;r++){var s=ee(t[r]),l=[s.shift()];if(l[0]==="A")l.push(s.shift()+","+s.shift(),s.shift(),s.shift()+","+s.shift(),s.shift()+","+s.shift());else for(;s.length;)l.push(s.shift()+","+s.shift());n.push(l.join(" "))}if(n=n.join(" "),t=this.Ul,t.clipPath)0<this.jh.length&&this.jh[this.jh.length-1].setAttributeNS(null,"clip-path",'path("'+n+'")');else if(t.d=n,Lh(this,"",t,e),this.Zr!==null)if(e=this.Zr,e.nodeName!=="g")for(var h in t)h!=="transform"&&e.setAttributeNS(null,h,t[h]);else{h=e.getElementsByTagName("path");for(var a in t)a!=="transform"&&h[i].setAttributeNS(null,a,t[a])}else this.addElement("path",t)};function Gp(t,e,i,n,r,s,l){var h=new yl;h.ia=[e,i,n,r,s,l],e={},Lh(t,"g",e,h),h=t.addElement("g",e),t.jh.push(h)}function Xp(t,e){var i={};return e&&(i.class=e),e=t.addElement("g",i),t.jh.push(e),e}o.Av=function(t,e,i){this.ur=t,this.vr=e,this.Rg=i};function Zr(t){t.Dl=!1,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0}function Mo(t){t.Dl=!0,t.shadowOffsetX=t.ur,t.shadowOffsetY=t.vr,t.shadowBlur=t.Rg}o.ds=function(t,e){this.xt=!0,this.Ug=t,this.sj=e},o.$r=function(){this.xt=!1},o.Qc=function(){},o.Vx=function(){},wn.prototype.rotate=function(t){this.lc.rotate(57.2958*t,0,0)},wn.prototype.getImageData=function(){return null},wn.prototype.measureText=function(){return null};function Kp(t,e){e=e.getAttribute("fill"),e!==null&&(e=e.split("#"),e.length!==1&&(e=t.svg.getElementById(e[1].slice(0,-1)),e!==null&&t.svg.innerHTML.match(new RegExp(e.id,"g")).length===1&&e.remove()))}wn.prototype.Cs=function(t){t.svg!==null&&t.svg.parentNode===this.Lj&&t.svg.remove()},wn.className="SVGContext",D.prototype.xs=function(t){this.nj.contains("SVG")||this.Vr("SVG",new Or(this,Y.document));var e=new Or(this,Y.document,!0);t===void 0&&(t=new We);var i=this;return DM(this,function(n,r){return n=RM(i,n,"SVG",e),n=n!==null?n.svg:null,typeof r=="function"?(r(n),null):n},t)},D.prototype.makeSvg=D.prototype.xs,D.prototype.Zu=function(t){return this.xs(t)},D.prototype.makeSVG=D.prototype.Zu;function In(t,e,i,n){this.ownerDocument=e=e===void 0?Y.document:e,this.cs=null,e=e.createElement("canvas"),e.tabIndex=0,this.La=e,this.La.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",this.context=new ml(e,i,n),e.H=t}In.prototype.resize=function(t,e,i,n){return this.width!==t||this.height!==e?(this.width=t,this.height=e,this.style.width=i+"px",this.style.height=n+"px",!0):!1},In.prototype.toDataURL=function(t,e){return this.La.toDataURL(t,e)},In.prototype.getBoundingClientRect=function(){return this.La.getBoundingClientRect()},In.prototype.focus=function(){this.La.focus()},In.prototype.jx=function(){this.ownerDocument=this.La.H=null},z.Object.defineProperties(In.prototype,{width:{get:function(){return this.La.width},set:function(t){this.La.width=t}},height:{get:function(){return this.La.height},set:function(t){this.La.height=t}},style:{get:function(){return this.La.style}}}),In.className="CanvasSurface";function ml(t,e,i){this.Z=t.getContext?t.getContext("2d",e):null,this.Z===null&&R("Browser does not support HTML Canvas Element"),this.Xs=this.Zs=this.Ys="",this.Em=!1,this.Rg=this.vr=this.ur=0,this.Dl=!1,this.Al=new Nt,this.isTemporary=!!i}o=ml.prototype,o.Vx=function(t){this.Z.imageSmoothingEnabled=t},o.arc=function(t,e,i,n,r,s){this.Z.arc(t,e,i,n,r,s)},o.beginPath=function(){this.Z.beginPath()},o.Pe=function(){},o.bezierCurveTo=function(t,e,i,n,r,s){this.Z.bezierCurveTo(t,e,i,n,r,s)},o.clearRect=function(t,e,i,n){this.vc(),this.Z.clearRect(t,e,i,n)},o.clip=function(){this.Z.clip()},o.closePath=function(){this.Z.closePath()},o.createLinearGradient=function(t,e,i,n){return this.Z.createLinearGradient(t,e,i,n)},o.createPattern=function(t,e){return this.Z.createPattern(t,e)},o.createRadialGradient=function(t,e,i,n,r,s){return this.Z.createRadialGradient(t,e,i,n,r,s)},o.drawImage=function(t,e,i,n,r,s,l,h,a){n===void 0?this.Z.drawImage(t,e,i):this.Z.drawImage(t,e,i,n,r,s,l,h,a)},o.fill=function(t){this.Z.fill(t?"evenodd":"nonzero")},o.fillRect=function(t,e,i,n){this.Z.fillRect(t,e,i,n)},o.lx=function(t,e,i,n){this.Z.fillRect(t,e,i,n)},o.fillText=function(t,e,i){this.Z.fillText(t,e,i)},o.getImageData=function(t,e,i,n){return this.Z.getImageData(t,e,i,n)},o.lineTo=function(t,e){this.Z.lineTo(t,e)},o.measureText=function(t){return this.Z.measureText(t)},o.moveTo=function(t,e){this.Z.moveTo(t,e)},o.quadraticCurveTo=function(t,e,i,n){this.Z.quadraticCurveTo(t,e,i,n)},o.rect=function(t,e,i,n){this.Z.rect(t,e,i,n)},o.restore=function(){this.Z.restore()},o.save=function(){this.vc(),this.Z.save()},ml.prototype.rotate=function(t){this.Al.rotate(57.2958*t,0,0)},o=ml.prototype,o.setTransform=function(t,e,i,n,r,s){this.Al.setTransform(t,e,i,n,r,s)},o.scale=function(t,e){this.Al.scale(t,e)},o.translate=function(t,e){this.Al.translate(t,e)},o.stroke=function(){this.Z.stroke()},o.transform=function(t,e,i,n,r,s){if(t!==1||e!==0||i!==0||n!==1||r!==0||s!==0){var l=this.Al,h=l.m11*t+l.m21*e;t=l.m12*t+l.m22*e,e=l.m11*i+l.m21*n,i=l.m12*i+l.m22*n,l.dx=l.m11*r+l.m21*s+l.dx,l.dy=l.m12*r+l.m22*s+l.dy,l.m11=h,l.m12=t,l.m21=e,l.m22=i}},o.vc=function(){var t=this.Al;this.Z.setTransform(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy)},o.kg=function(t,e){if(t instanceof Dt&&t.type===Sn){var i=t.uk;t=t.$s,t>i?(this.scale(i/t,1),this.translate((t-i)/2,0)):i>t&&(this.scale(1,t/i),this.translate(0,(i-t)/2)),this.Em?this.clip():this.fill(e),t>i?(this.translate(-(t-i)/2,0),this.scale(1/(i/t),1)):i>t&&(this.translate(0,-(i-t)/2),this.scale(1,1/(t/i)))}else this.Em?this.clip():this.fill(e)},o.fk=function(){this.Em||this.stroke()},o.Av=function(t,e,i){this.ur=t,this.vr=e,this.Rg=i},o.ds=function(t,e){var i=this.Z;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)},o.$r=function(){var t=this.Z;t.setLineDash!==void 0&&(t.setLineDash(sj),t.lineDashOffset=0)},o.Qc=function(t){t&&(this.Ys=""),this.Xs=this.Zs=""},o.Cs=function(){},z.Object.defineProperties(ml.prototype,{fillStyle:{get:function(){return this.Z.fillStyle},set:function(t){this.Xs!==t&&(this.Xs=this.Z.fillStyle=t)}},font:{get:function(){return this.Z.font},set:function(t){this.Ys!==t&&(this.Ys=this.Z.font=t)}},globalAlpha:{get:function(){return this.Z.globalAlpha},set:function(t){this.Z.globalAlpha=t}},lineCap:{get:function(){return this.Z.lineCap},set:function(t){this.Z.lineCap=t}},lineDashOffset:{get:function(){return this.Z.lineDashOffset},set:function(t){this.Z.lineDashOffset=t}},lineJoin:{get:function(){return this.Z.lineJoin},set:function(t){this.Z.lineJoin=t}},lineWidth:{get:function(){return this.Z.lineWidth},set:function(t){this.Z.lineWidth=t}},miterLimit:{get:function(){return this.Z.miterLimit},set:function(t){this.Z.miterLimit=t}},shadowBlur:{get:function(){return this.Z.shadowBlur},set:function(t){this.Z.shadowBlur=t}},shadowColor:{get:function(){return this.Z.shadowColor},set:function(t){this.Z.shadowColor=t}},shadowOffsetX:{get:function(){return this.Z.shadowOffsetX},set:function(t){this.Z.shadowOffsetX=t}},shadowOffsetY:{get:function(){return this.Z.shadowOffsetY},set:function(t){this.Z.shadowOffsetY=t}},strokeStyle:{get:function(){return this.Z.strokeStyle},set:function(t){this.Zs!==t&&(this.Zs=this.Z.strokeStyle=t)}},textAlign:{get:function(){return this.Z.textAlign},set:function(t){this.Z.textAlign=t}},imageSmoothingEnabled:{get:function(){return this.Z.imageSmoothingEnabled},set:function(t){this.Z.imageSmoothingEnabled=t}},filter:{get:function(){return this.Z.filter},set:function(t){this.Z.filter=t===""?"none":t}},clipInsteadOfFill:{get:function(){return this.Em},set:function(t){this.Em=t}}});var sj=Object.freeze([]);ml.className="CanvasSurfaceContext";function vf(){this.F=this.m=this.u=this.j=0}vf.className="ColorNumbers";function Dt(t,e){Oh||(zm(),Oh=!0),Oe(this),this._isFrozen=!1,t===void 0?(this.na=Qo,this.tk="black"):typeof t=="string"?(this.na=Qo,this.tk=t):(this.na=t,this.tk="black"),t=this.na,t===No?(this.Jd=xo,this.Hk=lu):this.Hk=t===Sn?this.Jd=Ut:this.Jd=$e,this.Ar=0,this.Rp=NaN,this.ue=this.Xq=this.te=null,this.$s=this.uk=0,e&&Object.assign(this,e)}Dt.prototype.copy=function(){var t=new Dt;return t.na=this.na,t.tk=this.tk,t.Jd=this.Jd.J(),t.Hk=this.Hk.J(),t.Ar=this.Ar,t.Rp=this.Rp,this.te!==null&&(t.te=this.te.copy()),t.Xq=this.Xq,t},o=Dt.prototype,o.freeze=function(){return this._isFrozen=!0,this.te!==null&&this.te.freeze(),this},o.ka=function(){return Object.isFrozen(this)&&R("cannot thaw constant: "+this),this._isFrozen=!1,this.te!==null&&this.te.ka(),this},o.rb=function(t){t.classType===Dt&&(this.type=t)},o.toString=function(){var t="Brush(";if(this.type===Qo)t+=this.color;else if(t=this.type===No?t+"Linear ":this.type===Sn?t+"Radial ":this.type===Ah?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,this.colorStops!==null)for(var e=this.colorStops.iterator;e.next();)t+=" "+e.key+":"+e.value;return t+")"},o.addColorStop=function(t,e){return this._isFrozen&&st(this),(typeof t!="number"||!isFinite(t)||1<t||0>t)&&dt(t,"0 <= loc <= 1",Dt,"addColorStop:loc"),this.te===null&&(this.te=new vt),this.te.add(t,e),this.na===Qo&&(this.type=No),this.ue=null,this},o.Pz=function(t,e){if(this._isFrozen&&st(this),t=t===void 0||typeof t!="number"?.2:t,e=e===void 0?Ih:e,this.type===Qo)ko(this.color),this.color=Eh(t,e);else if((this.type===No||this.type===Sn)&&this.colorStops!==null)for(var i=this.colorStops.iterator;i.next();)ko(i.value),this.addColorStop(i.key,Eh(t,e));return this};function r2(t,e,i){return e=e===void 0||typeof e!="number"?.2:e,i=i===void 0?Ih:i,ko(t),Eh(e,i)}o.Ry=function(t,e){if(this._isFrozen&&st(this),t=t===void 0||typeof t!="number"?.2:t,e=e===void 0?Ih:e,this.type===Qo)ko(this.color),this.color=Eh(-t,e);else if((this.type===No||this.type===Sn)&&this.colorStops!==null)for(var i=this.colorStops.iterator;i.next();)ko(i.value),this.addColorStop(i.key,Eh(-t,e));return this};function o2(t,e,i){return e=e===void 0||typeof e!="number"?.2:e,i=i===void 0?Ih:i,ko(t),Eh(-e,i)}function Am(t,e,i){ko(t),t=Kt.j;var n=Kt.u,r=Kt.m,s=Kt.F;return ko(e),i===void 0&&(i=.5),"rgba("+Math.round((Kt.j-t)*i+t)+", "+Math.round((Kt.u-n)*i+n)+", "+Math.round((Kt.m-r)*i+r)+", "+Math.round((Kt.F-s)*i+s)+")"}o.Cx=function(){if(this.type===Qo)return jh(this.color);if((this.type===No||this.type===Sn)&&this.colorStops!==null){var t=this.colorStops;if(this.type===Sn)return jh(t.first().value);if(t.get(.5)!==null)return jh(t.get(.5));if(t.count===2)return t=t.Fa(),jh(Am(t[0].value,t[1].value));for(var e=t.iterator,i=-1,n=-1,r=1,s=1;e.next();){var l=e.key,h=Math.abs(.5-e.key);r>s&&h<r?(i=l,r=h):s>=r&&h<s&&(n=l,s=h)}return i>n&&(s=i,i=n,n=s,s=r),r=n-i,jh(Am(t.get(i),t.get(n),1-s/r))}return!1};function jh(t){return t?t instanceof Dt?t.Cx():(ko(t),128>(299*Kt.j+587*Kt.u+114*Kt.m)/1e3):!1}function Eh(t,e){switch(e){case Ih:e=100*Dm(Kt.j);var i=100*Dm(Kt.u),n=100*Dm(Kt.m);return wi.j=.4124564*e+.3575761*i+.1804375*n,wi.u=.2126729*e+.7151522*i+.072175*n,wi.m=.0193339*e+.119192*i+.9503041*n,wi.F=Kt.F,e=Bm(wi.j/Fh[0]),i=Bm(wi.u/Fh[1]),n=Bm(wi.m/Fh[2]),Qr.j=116*i-16,Qr.u=500*(e-i),Qr.m=200*(i-n),Qr.F=wi.F,Qr.j=Math.min(100,Math.max(0,Qr.j+100*t)),t=(Qr.j+16)/116,e=t-Qr.m/200,wi.j=Fh[0]*s2(Qr.u/500+t),wi.u=Fh[1]*(Qr.j>Wp*Vm?Math.pow(t,3):Qr.j/Wp),wi.m=Fh[2]*s2(e),wi.F=Qr.F,t=-.969266*wi.j+1.8760108*wi.u+.041556*wi.m,e=.0556434*wi.j+-.2040259*wi.u+1.0572252*wi.m,Kt.j=255*Rm((3.2404542*wi.j+-1.5371385*wi.u+-.4985314*wi.m)/100),Kt.u=255*Rm(t/100),Kt.m=255*Rm(e/100),Kt.F=wi.F,Kt.j=Math.round(Kt.j),255<Kt.j?Kt.j=255:0>Kt.j&&(Kt.j=0),Kt.u=Math.round(Kt.u),255<Kt.u?Kt.u=255:0>Kt.u&&(Kt.u=0),Kt.m=Math.round(Kt.m),255<Kt.m?Kt.m=255:0>Kt.m&&(Kt.m=0),"rgba("+Kt.j+", "+Kt.u+", "+Kt.m+", "+Kt.F+")";case l2:return Im(),ln.m=Math.min(100,Math.max(0,ln.m+100*t)),"hsla("+ln.j+", "+ln.u+"%, "+ln.m+"%, "+ln.F+")";default:R("Unknown color space: "+e)}}function ko(t){Oh||(zm(),Oh=!0);var e=Um;if(e!==null){e.clearRect(0,0,1,1),e.fillStyle="#000000";var i=e.fillStyle;e.fillStyle=t,e.fillStyle!==i?(e.fillRect(0,0,1,1),t=e.getImageData(0,0,1,1).data,Kt.j=t[0],Kt.u=t[1],Kt.m=t[2],Kt.F=t[3]/255):(e.fillStyle="#FFFFFF",e.fillStyle=t,Kt.j=0,Kt.u=0,Kt.m=0,Kt.F=1)}}function Im(){var t=Kt.j/255,e=Kt.u/255,i=Kt.m/255,n=Math.max(t,e,i),r=Math.min(t,e,i),s=n-r;if(r=(n+r)/2,s===0)var l=t=0;else{switch(n){case t:l=(e-i)/s%6;break;case e:l=(i-t)/s+2;break;case i:l=(t-e)/s+4}l*=60,0>l&&(l+=360),t=s/(1-Math.abs(2*r-1))}ln.j=Math.round(l),ln.u=Math.round(100*t),ln.m=Math.round(100*r),ln.F=Kt.F}function Dm(t){return t/=255,.04045>=t?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Rm(t){return .0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function Bm(t){return t>Vm?Math.pow(t,1/3):(Wp*t+16)/116}function s2(t){var e=t*t*t;return e>Vm?e:(116*t-16)/Wp}function xu(t,e){typeof t!="string"&&(t instanceof Dt||R("Value for "+e+" must be a color string or a Brush, not "+t))}function zm(){Um=$n?new In(null,void 0,{willReadFrequently:!0}).context:null}z.Object.defineProperties(Dt.prototype,{type:{get:function(){return this.na},set:function(t){this._isFrozen&&st(this,t),this.na=t,this.start.Jc()&&(t===No?this.start=xo:t===Sn&&(this.start=Ut)),this.end.Jc()&&(t===No?this.end=lu:t===Sn&&(this.end=Ut)),this.ue=null}},color:{get:function(){return this.tk},set:function(t){this._isFrozen&&st(this,t),this.tk=t,this.ue=null}},start:{get:function(){return this.Jd},set:function(t){this._isFrozen&&st(this,t),this.Jd=t.J(),this.ue=null}},end:{get:function(){return this.Hk},set:function(t){this._isFrozen&&st(this,t),this.Hk=t.J(),this.ue=null}},startRadius:{get:function(){return this.Ar},set:function(t){this._isFrozen&&st(this,t),0>t&&dt(t,">= zero",Dt,"startRadius"),this.Ar=t,this.ue=null}},endRadius:{get:function(){return this.Rp},set:function(t){this._isFrozen&&st(this,t),0>t&&dt(t,">= zero",Dt,"endRadius"),this.Rp=t,this.ue=null}},colorStops:{get:function(){return this.te},set:function(t){this._isFrozen&&st(this,t),this.te=t,this.ue=null}},pattern:{get:function(){return this.Xq},set:function(t){this._isFrozen&&st(this,t),this.Xq=t,this.ue=null}}}),Dt.prototype.isDark=Dt.prototype.Cx,Dt.prototype.darkenBy=Dt.prototype.Ry,Dt.prototype.lightenBy=Dt.prototype.Pz,Dt.prototype.addColorStop=Dt.prototype.addColorStop;var Vm=216/24389,Wp=24389/27,Fh=[95.047,100,108.883],Um=null,Kt=new vf,ln=new vf,wi=new vf,Qr=new vf,Oh=!1;Dt.className="Brush";var Qo;Dt.Solid=Qo=new Q(Dt,"Solid",0);var No;Dt.Linear=No=new Q(Dt,"Linear",1);var Sn;Dt.Radial=Sn=new Q(Dt,"Radial",2);var Ah;Dt.Pattern=Ah=new Q(Dt,"Pattern",4);var Ih;Dt.Lab=Ih=new Q(Dt,"Lab",5);var l2;Dt.HSL=l2=new Q(Dt,"HSL",6),Dt.randomColor=function(t,e){t===void 0&&(t=128),e===void 0&&(e=Math.max(t,255));var i=Math.abs(e-t);e=Math.floor(t+Math.random()*i).toString(16);var n=Math.floor(t+Math.random()*i).toString(16);return t=Math.floor(t+Math.random()*i).toString(16),2>e.length&&(e="0"+e),2>n.length&&(n="0"+n),2>t.length&&(t="0"+t),"#"+e+n+t},Dt.isValidColor=function(t){if(t==="black")return!0;if(t==="")return!1;Oh||(zm(),Oh=!0);var e=Um;if(e===null)return!0;e.fillStyle="#000000";var i=e.fillStyle;return e.fillStyle=t,e.fillStyle!==i?!0:(e.fillStyle="#FFFFFF",i=e.fillStyle,e.fillStyle=t,e.fillStyle!==i)},Dt.lighten=function(t){return r2(t)},Dt.lightenBy=r2,Dt.darken=function(t){return o2(t)},Dt.darkenBy=o2,Dt.mix=Am,Dt.isDark=jh;function xe(){this.wa="Base"}xe.prototype.measure=function(){},xe.prototype.Sz=function(t,e,i,n,r){t.measure(e,i,n,r)},xe.prototype.arrange=function(){},xe.prototype.Hy=function(t,e,i,n,r,s){t.arrange(e,i,n,r,s)},xe.prototype.bA=function(t){t.Sj()},xe.prototype.cc=function(){},z.Object.defineProperties(xe.prototype,{name:{get:function(){return this.wa},set:function(t){this.wa=t}},classType:{get:function(){return _}}}),xe.prototype.remeasureObject=xe.prototype.bA,xe.prototype.arrangeElement=xe.prototype.Hy,xe.prototype.measureElement=xe.prototype.Sz,xe.className="PanelLayout";function $p(){this.wa="Base"}B($p,xe),$p.prototype.measure=function(t,e,i,n,r,s,l){var h=n.length;t=Po(t);for(var a=0;a<h;a++){var f=n[a];if(f.visible||f===t){var p=f.margin,d=p.right+p.left;p=p.top+p.bottom,f.measure(e,i,s,l);var y=f.measuredBounds;d=Math.max(y.width+d,0),p=Math.max(y.height+p,0),y=f.position.x;var x=f.position.y;isFinite(y)||(y=0),isFinite(x)||(x=0),f instanceof wt&&f.isGeometryPositioned&&(f=f.strokeWidth/2,y-=f,x-=f),Ve(r,y,x,d,p)}}},$p.prototype.arrange=function(t,e,i){var n=e.length,r=t.padding;for(t=i.x-r.left,i=i.y-r.top,r=0;r<n;r++){var s=e[r],l=s.measuredBounds,h=s.margin,a=s.position.x,f=s.position.y;if(a=isNaN(a)?-t:a-t,f=isNaN(f)?-i:f-i,s instanceof wt&&s.isGeometryPositioned){var p=s.strokeWidth/2;a-=p,f-=p}s.visible&&s.arrange(a+h.left,f+h.top,l.width,l.height)}};function Jp(){this.wa="Base"}B(Jp,xe),Jp.prototype.measure=function(t,e,i,n,r,s,l){var h=n.length;e=Yt(),s=Po(t);for(var a=0;a<h;a++){var f=n[a];if(f.visible||f===s){var p=dr(f,!1);if(p!==he&&p!==Ge)e.push(f);else{f.measure(1/0,i,0,l),p=f.margin,f=f.measuredBounds;var d=Math.max(f.height+p.top+p.bottom,0);r.width+=Math.max(f.width+p.right+p.left,0),r.height=Math.max(r.height,d)}}}for(n=e.length,t.desiredSize.height?i=Math.min(t.desiredSize.height,t.maxSize.height):r.height!==0&&(i=Math.min(r.height,t.maxSize.height)),t=0;t<n;t++)a=e[t],(a.visible||a===s)&&(p=a.margin,h=p.right+p.left,p=p.top+p.bottom,a.measure(1/0,i,0,l),a=a.measuredBounds,p=Math.max(a.height+p,0),r.width+=Math.max(a.width+h,0),r.height=Math.max(r.height,p));Vt(e)},Jp.prototype.arrange=function(t,e,i){for(var n=e.length,r=t.padding,s=r.top,l=t.isOpposite,h=l?i.width:r.left,a=0;a<n;a++){var f=s,p=e[a];if(p.visible){var d=p.measuredBounds,y=p.margin,x=y.top+y.bottom,v=s+r.bottom,S=d.height,N=dr(p,!1);(isNaN(p.desiredSize.height)&&N===fe||N===Qe)&&(S=Math.max(i.height-x-v,0)),x=S+x+v,v=p.alignment,v.Tb()&&(v=t.defaultAlignment),v.tb()||(v=Ut),l&&(h-=d.width+y.left+y.right),p.arrange(h+v.offsetX+y.left,f+v.offsetY+y.top+(i.height*v.y-x*v.y),d.width,S),l||(h+=d.width+y.left+y.right)}}};function Zp(){this.wa="Base"}B(Zp,xe),Zp.prototype.measure=function(t,e,i,n,r,s){var l=n.length;i=Yt();for(var h=Po(t),a=0;a<l;a++){var f=n[a];if(f.visible||f===h){var p=dr(f,!1);if(p!==he&&p!==Qe)i.push(f);else{var d=f.margin;p=d.right+d.left,d=d.top+d.bottom,f.measure(e,1/0,s,0),f=f.measuredBounds,vo(r,Math.max(r.width,Math.max(f.width+p,0)),r.height+Math.max(f.height+d,0))}}}if(n=i.length,n!==0){for(t.desiredSize.width?e=Math.min(t.desiredSize.width,t.maxSize.width):r.width!==0&&(e=Math.min(r.width,t.maxSize.width)),t=0;t<n;t++)a=i[t],(a.visible||a===h)&&(f=a.margin,l=f.right+f.left,f=f.top+f.bottom,a.measure(e,1/0,s,0),a=a.measuredBounds,f=Math.max(a.height+f,0),r.width=Math.max(r.width,Math.max(a.width+l,0)),r.height+=f);Vt(i)}},Zp.prototype.arrange=function(t,e,i){for(var n=e.length,r=t.padding,s=r.left,l=t.isOpposite,h=l?i.height:r.top,a=0;a<n;a++){var f=s,p=e[a];if(p.visible){var d=p.measuredBounds,y=p.margin,x=y.left+y.right,v=s+r.right,S=d.width,N=dr(p,!1);(isNaN(p.desiredSize.width)&&N===fe||N===Ge)&&(S=Math.max(i.width-x-v,0)),x=S+x+v,v=p.alignment,v.Tb()&&(v=t.defaultAlignment),v.tb()||(v=Ut),l&&(h-=d.height+y.bottom+y.top),p.arrange(f+v.offsetX+y.left+(i.width*v.x-x*v.x),h+v.offsetY+y.top,S,d.height),l||(h+=d.height+y.bottom+y.top)}}};function Qp(){this.wa="Base"}B(Qp,xe),Qp.prototype.measure=function(t,e,i,n,r,s,l){var h=n.length,a=t.sb(),f=a.margin,p=f.right+f.left,d=f.top+f.bottom;a.measure(e,i,s,l);var y=a.measuredBounds;s=y.width,l=y.height;var x=Math.max(s+p,0),v=Math.max(l+d,0),S=t.isClipping,N=V.allocAt(-f.left,-f.top,x,v),k=V.allocAt(0,0,s,l);Ym(a,k,!0),s=k.width,l=k.height;for(var C=!0,T=Po(t),L=0;L<h;L++){var E=n[L];y=e;var I=i;if(E!==a&&(E.visible||E===T)){f=E.margin;var Z=f.left,it=f.top;switch(x=f.right+f.left,v=f.top+f.bottom,f=dr(E,!1),f){case fe:y=s,I=l,it=Z=v=x=0;break;case Ge:y=s,Z=x=0;break;case Qe:I=l,it=v=0}E.measure(y,I,0,0),y=E.measuredBounds,x=Math.max(y.width+x,0),v=Math.max(y.height+v,0),f=E.alignment,f.Tb()&&(f=t.defaultAlignment),f.tb()||(f=Ut);var et=E.alignmentFocus;if(et.Tb()&&(et=Ut),I=null,E instanceof _&&E.Xe!==""&&(I=E.fb(E.Xe),I===E&&(I=null)),Z=k.x-Z,it=k.y-it,I!==null){for(E.arrange(0,0,y.width,y.height),y=I.actualBounds,y=P.allocAt(y.x+(et.x*y.width-et.offsetX),y.y+(et.y*y.height-et.offsetY)),I=I.panel;I!==E;)I.transform.Ga(y),I=I.panel;Z+=f.x*s+f.offsetX-y.x,it+=f.y*l+f.offsetY-y.y,P.free(y)}else Z+=f.x*s+f.offsetX-(et.x*y.width+et.offsetX),it+=f.y*l+f.offsetY-(et.y*y.height+et.offsetY);C?(C=!1,r.h(Z,it,x,v)):Ve(r,Z,it,x,v)}}switch(C?r.assign(N):S?r.Su(k.x,k.y,k.width,k.height):Ve(r,N.x,N.y,N.width,N.height),V.free(N),V.free(k),f=a.stretch,f===Jn&&(f=dr(a,!1)),f){case he:return;case fe:if(!isFinite(e)&&!isFinite(i))return;break;case Ge:if(!isFinite(e))return;break;case Qe:if(!isFinite(i))return}for(y=a.measuredBounds,s=y.width,l=y.height,x=Math.max(s+p,0),v=Math.max(l+d,0),f=a.margin,k=V.allocAt(-f.left,-f.top,x,v),Ym(a,k,!0),s=k.width,l=k.height,e=0;e<h;e++)i=n[e],i===a||!i.visible&&i!==T||(f=i.margin,x=f.right+f.left,v=f.top+f.bottom,y=i.measuredBounds,x=Math.max(y.width+x,0),v=Math.max(y.height+v,0),p=i.alignment,p.Tb()&&(p=t.defaultAlignment),p.tb()||(p=Ut),i=i.alignmentFocus,i.Tb()&&(i=Ut),C?(C=!1,r.h(p.x*s+p.offsetX-(i.x*y.width+i.offsetX)-f.left,p.y*l+p.offsetY-(i.y*y.height+i.offsetY)-f.top,x,v)):Ve(r,p.x*s+p.offsetX-(i.x*y.width+i.offsetX)-f.left,p.y*l+p.offsetY-(i.y*y.height+i.offsetY)-f.top,x,v));C?r.assign(N):S?r.Su(k.x,k.y,k.width,k.height):Ve(r,N.x,N.y,N.width,N.height),V.free(k)},Qp.prototype.arrange=function(t,e,i){var n=e.length,r=t.sb(),s=r.measuredBounds,l=s.width,h=s.height,a=t.padding;s=a.left,a=a.top;var f=s-i.x,p=a-i.y;for(r.arrange(f,p,l,h),l=V.allocAt(0,0,l,h),Ym(r,l,!1),h=0;h<n;h++){var d=e[h];if(d!==r){f=d.measuredBounds;var y=f.width,x=f.height;p=d.alignment,p.Tb()&&(p=t.defaultAlignment),p.tb()||(p=Ut);var v=d.alignmentFocus;if(v.Tb()&&(v=Ut),f=null,d instanceof _&&d.Xe!==""&&(f=d.fb(d.Xe),f===d&&(f=null)),f!==null){var S=f.actualBounds;for(v=P.allocAt(S.x+(v.x*S.width-v.offsetX),S.y+(v.y*S.height-v.offsetY)),f=f.panel;f!==d;)f.transform.Ga(v),f=f.panel;f=p.x*l.width+p.offsetX-v.x,p=p.y*l.height+p.offsetY-v.y,P.free(v)}else f=p.x*l.width+p.offsetX-(v.x*y+v.offsetX),p=p.y*l.height+p.offsetY-(v.y*x+v.offsetY);f+=l.x-i.x,p+=l.y-i.y,d.visible&&d.arrange(s+f,a+p,y,x)}}V.free(l)};function Ym(t,e,i){var n=null;if(t instanceof _&&t.Xe!==""&&(n=t.fb(t.Xe),n===t&&(n=null)),n!==null)for(i&&t.arrange(0,0,e.width,e.height),e.assign(n.actualBounds),n=n.panel;n!==t;)n.transform.kp(e),n=n.panel}function qp(){this.wa="Base"}B(qp,xe),qp.prototype.measure=function(t,e,i,n,r,s,l){var h=n.length,a=t.sb(),f=a.margin,p=e,d=i,y=f.right+f.left,x=f.top+f.bottom;a.measure(e,i,s,l),f=a.measuredBounds;var v=0,S=null;a instanceof wt&&(S=a,v=S.strokeWidth*S.scale);var N=Math.max(f.width+y,0);f=Math.max(f.height+x,0);var k=Xm(a),C=k.x*N+k.offsetX;k=k.y*f+k.offsetY;var T=Km(a),L=T.x*N+T.offsetX;for(T=T.y*f+T.offsetY,isFinite(e)&&(p=Math.max(Math.abs(C-L)-v,0)),isFinite(i)&&(d=Math.max(Math.abs(k-T)-v,0)),v=pt.alloc(),v.h(0,0),t=Po(t),T=0;T<h;T++)k=n[T],k===a||!k.visible&&k!==t||(f=k.margin,N=f.right+f.left,C=f.top+f.bottom,k.measure(p,d,0,0),f=k.measuredBounds,N=Math.max(f.width+N,0),f=Math.max(f.height+C,0),v.h(Math.max(N,v.width),Math.max(f,v.height)));if(h===1)r.width=N,r.height=f,pt.free(v);else{switch(k=Xm(a),T=Km(a),h=n=0,T.x!==k.x&&T.y!==k.y&&(n=v.width/Math.abs(T.x-k.x),h=v.height/Math.abs(T.y-k.y)),pt.free(v),v=0,S!==null&&(v=S.strokeWidth*S.scale,qm(S)===Fr&&(n=h=Math.max(n,h))),n+=Math.abs(k.offsetX)+Math.abs(T.offsetX)+v,h+=Math.abs(k.offsetY)+Math.abs(T.offsetY)+v,S=a.stretch,S===Jn&&(S=dr(a,!1)),S){case he:l=s=0;break;case fe:isFinite(e)&&(n=e),isFinite(i)&&(h=i);break;case Ge:isFinite(e)&&(n=e),l=0;break;case Qe:s=0,isFinite(i)&&(h=i)}a.Sj(),a.measure(n,h,s,l),r.width=a.measuredBounds.width+y,r.height=a.measuredBounds.height+x}},qp.prototype.arrange=function(t,e){var i=e.length,n=t.sb(),r=n.measuredBounds,s=V.alloc();s.h(0,0,1,1);var l=n.margin,h=l.left;l=l.top;var a=t.padding,f=a.left;a=a.top,n.arrange(f+h,a+l,r.width,r.height);var p=Xm(n),d=Km(n),y=p.y*r.height+p.offsetY,x=d.x*r.width+d.offsetX;for(d=d.y*r.height+d.offsetY,s.x=p.x*r.width+p.offsetX,s.y=y,Ve(s,x,d,0,0),s.x+=h+f,s.y+=l+a,r=0;r<i;r++)h=e[r],h!==n&&(f=h.measuredBounds,l=h.margin,a=Math.max(f.width+l.right+l.left,0),p=Math.max(f.height+l.top+l.bottom,0),y=h.alignment,y.Tb()&&(y=t.defaultAlignment),y.tb()||(y=Ut),a=s.width*y.x+y.offsetX-a*y.x+l.left+s.x,l=s.height*y.y+y.offsetY-p*y.y+l.top+s.y,h.visible&&(hr(s.x,s.y,s.width,s.height,a,l,f.width,f.height)?h.arrange(a,l,f.width,f.height):h.arrange(a,l,f.width,f.height,new V(s.x,s.y,s.width,s.height))));V.free(s)};function bp(){this.wa="Base",this.name="Table"}B(bp,xe),bp.prototype.measure=function(t,e,i,n,r){for(var s=n.length,l=Yt(),h=Yt(),a=0;a<s;a++){var f=n[a],p=f instanceof _?f:null;if(p!==null&&Co(p)&&f.visible){h.push(p);for(var d=p.O.s,y=d.length,x=0;x<y;x++){var v=d[x];p.type===_.TableRow?v.row=f.row:p.type===_.TableColumn&&(v.column=f.column),l.push(v)}}else l.push(f)}s=l.length,s===0&&(t.getRowDefinition(0),t.getColumnDefinition(0));for(var S=[],N=0;N<s;N++){var k=l[N];k.visible&&(vn(k,!0),dl(k,!0),S[k.row]||(S[k.row]=[]),S[k.row][k.column]||(S[k.row][k.column]=[]),S[k.row][k.column].push(k))}Vt(l);var C=Yt(),T=Yt(),L=Yt(),E={count:0},I={count:0},Z=e,it=i,et=t.rowDefs,G=t.colDefs,U=null;s=et.length;for(var gt=0;gt<s;gt++)U=et[gt],U!==void 0&&(U.actual=0);s=G.length;for(var ct=0;ct<s;ct++)U=G[ct],U!==void 0&&(U.actual=0);for(var Ft=S.length,_t=0,Te=0;Te<Ft;Te++)S[Te]&&(_t=Math.max(_t,S[Te].length));var Fe=Math.min(t.topIndex,Ft-1),ri=Math.min(t.leftIndex,_t-1),Le=0;Ft=S.length;for(var ls=Po(t),pe=0;pe<Ft;pe++)if(S[pe]){_t=S[pe].length;var xr=t.getRowDefinition(pe);xr.actual=0;for(var oi=xr.kc=0;oi<_t;oi++)if(S[pe][oi]){var us=t.getColumnDefinition(oi);C[oi]===void 0&&(us.actual=0,us.kc=0,C[oi]=!0);for(var an=S[pe][oi],zn=an.length,$i=0;$i<zn;$i++){var zi=an[$i];if(zi.visible||zi===ls){var Ys=1<zi.rowSpan||1<zi.columnSpan;Ys&&(pe<Fe||oi<ri||T.push(zi));var wr=zi.margin,na=wr.right+wr.left,Ji=wr.top+wr.bottom,si=yf(zi,xr,us,!1),oc=zi.desiredSize,Fu=!isNaN(oc.height),Dr=!isNaN(oc.width)&&Fu;if(Ys||si===he||Dr||pe<Fe||oi<ri||(E[oi]!==void 0||si!==fe&&si!==Ge||(E[oi]=-1,E.count++),I[pe]!==void 0||si!==fe&&si!==Qe||(I[pe]=-1,I.count++),L.push(zi)),zi.measure(1/0,1/0,0,0),!(pe<Fe||oi<ri)){var Vi=zi.measuredBounds,Cl=Math.max(Vi.width+na,0),Zi=Math.max(Vi.height+Ji,0);if(zi.rowSpan===1&&(si===he||si===Ge)){U=t.getRowDefinition(pe);var Hs=U.Rc();Le=Math.max(Zi-U.actual,0),Le+Hs>it&&(Le=Math.max(it-Hs,0));var Sg=U.oa===0;U.kc=U.kc+Le,U.actual=U.oa+Le,it=Math.max(it-(Le+(Sg?Hs:0)),0)}if(zi.columnSpan===1&&(si===he||si===Qe)){U=t.getColumnDefinition(oi);var sc=U.Rc();Le=Math.max(Cl-U.actual,0),Le+sc>Z&&(Le=Math.max(Z-sc,0));var g1=U.oa===0;U.kc=U.kc+Le,U.actual=U.oa+Le,Z=Math.max(Z-(Le+(g1?sc:0)),0)}Ys&&zi.Sj()}}}}}Vt(C);var so=0,jo=0;s=t.columnCount;for(var Ou=0;Ou<s;Ou++){var _s=G[Ou];_s!==void 0&&(so+=isNaN(_s.Ec)?_s.kc:_s.Ec,_s.kc!==0&&(so+=_s.Rc()))}s=t.rowCount;for(var ra=0;ra<s;ra++){var Gs=et[ra];Gs!==void 0&&(jo+=isNaN(Gs.Ec)?Gs.kc:Gs.Ec,Gs.kc!==0&&(jo+=Gs.Rc()))}Z=Math.max(e-so,0);var lo=it=Math.max(i-jo,0),hs=Z;s=L.length;for(var Ui=0;Ui<s;Ui++){var Rr=L[Ui],Mg=t.getRowDefinition(Rr.row),Eo=t.getColumnDefinition(Rr.column),oa=Rr.measuredBounds,Sr=Rr.margin,Tl=Sr.right+Sr.left,Br=Sr.top+Sr.bottom;E[Rr.column]=Eo.kc===0&&E[Rr.column]!==void 0?Math.max(oa.width+Tl,E[Rr.column]):null,I[Rr.row]=Mg.kc===0&&I[Rr.row]!==void 0?Math.max(oa.height+Br,I[Rr.row]):null}var Au=0,sa=0,nr;for(nr in I)nr!=="count"&&(Au+=I[nr]);for(nr in E)nr!=="count"&&(sa+=E[nr]);for(var Be=pt.alloc(),lc=0;lc<s;lc++){var Ti=L[lc];if(Ti.visible||Ti===ls){var de=t.getRowDefinition(Ti.row),Li=t.getColumnDefinition(Ti.column),Fo=0;isFinite(Li.width)?Fo=Li.width:(isFinite(Z)&&E[Ti.column]!==null?sa===0?Fo=Li.actual+Z:Fo=E[Ti.column]/sa*hs:E[Ti.column]!==null?Fo=Z:Fo=Li.actual||Z,Fo=Math.max(0,Fo-Li.Rc()));var as=0;switch(isFinite(de.height)?as=de.height:(isFinite(it)&&I[Ti.row]!==null?Au===0?as=de.actual+it:as=I[Ti.row]/Au*lo:I[Ti.row]!==null?as=it:as=de.actual||it,as=Math.max(0,as-de.Rc())),Be.h(Math.max(Li.minimum,Math.min(Fo,Li.maximum)),Math.max(de.minimum,Math.min(as,de.maximum))),si=yf(Ti,de,Li,!1),si){case Ge:Be.height=Math.max(Be.height,de.actual+it);break;case Qe:Be.width=Math.max(Be.width,Li.actual+Z)}var Ll=Ti.margin,y1=Ll.right+Ll.left,kg=Ll.top+Ll.bottom;Ti.Sj(),Ti.measure(Be.width,Be.height,Li.minimum,de.minimum);var la=Ti.measuredBounds,jl=Math.max(la.width+y1,0),Iu=Math.max(la.height+kg,0);isFinite(Z)&&(jl=Math.min(jl,Be.width)),isFinite(it)&&(Iu=Math.min(Iu,Be.height));var Yi=0;Yi=de.actual,de.actual=Math.max(de.actual,Iu),de.kc=Math.max(de.kc,Iu),Le=de.actual-Yi,it=Math.max(it-Le,0),I[Ti.row]===null&&(lo=Math.max(lo-Le,0)),Yi=Li.actual,Li.actual=Math.max(Li.actual,jl),Li.kc=Math.max(Li.kc,jl),Le=Li.actual-Yi,Z=Math.max(Z-Le,0),E[Ti.column]===null&&(hs=Math.max(hs-Le,0))}}Vt(L);var Oo=pt.alloc(),Mr=Yt(),Cn=Yt();if(s=T.length,s!==0){for(var Xs=0;Xs<Ft;Xs++)if(S[Xs]){_t=S[Xs].length;var ua=t.getRowDefinition(Xs);Mr[Xs]=ua.actual;for(var Ks=0;Ks<_t;Ks++)if(S[Xs][Ks]){var Ng=t.getColumnDefinition(Ks);Cn[Ks]=Ng.actual}}}for(var ha=0;ha<s;ha++){var le=T[ha];if(le.visible||le===ls){var rr=t.getRowDefinition(le.row),Vn=t.getColumnDefinition(le.column);switch(Be.h(Math.max(Vn.minimum,Math.min(e,Vn.maximum)),Math.max(rr.minimum,Math.min(i,rr.maximum))),si=yf(le,rr,Vn,!1),si){case fe:Cn[Vn.index]!==0&&(Be.width=Math.min(Be.width,Cn[Vn.index])),Mr[rr.index]!==0&&(Be.height=Math.min(Be.height,Mr[rr.index]));break;case Ge:Cn[Vn.index]!==0&&(Be.width=Math.min(Be.width,Cn[Vn.index]));break;case Qe:Mr[rr.index]!==0&&(Be.height=Math.min(Be.height,Mr[rr.index]))}isFinite(Vn.width)&&(Be.width=Vn.width),isFinite(rr.height)&&(Be.height=rr.height),Oo.h(0,0);for(var Pg=Vn.minimum,Qi=rr.minimum,fs=1;fs<le.rowSpan&&!(le.row+fs>=t.rowCount);fs++)U=t.getRowDefinition(le.row+fs),Le=0,Le=si===fe||si===Qe?Math.max(U.minimum,Mr[le.row+fs]===0?U.maximum:Math.min(Mr[le.row+fs],U.maximum)):Math.max(U.minimum,isNaN(U.Ec)?U.maximum:Math.min(U.Ec,U.maximum)),Oo.height+=Le,Qi+=U.minimum;for(var Un=1;Un<le.columnSpan&&!(le.column+Un>=t.columnCount);Un++)U=t.getColumnDefinition(le.column+Un),Le=0,Le=si===fe||si===Ge?Math.max(U.minimum,Cn[le.column+Un]===0?U.maximum:Math.min(Cn[le.column+Un],U.maximum)):Math.max(U.minimum,isNaN(U.Ec)?U.maximum:Math.min(U.Ec,U.maximum)),Oo.width+=Le,Pg+=U.minimum;Be.width+=Oo.width,Be.height+=Oo.height;var aa=le.margin,Ws=aa.right+aa.left,uc=aa.top+aa.bottom;le.measure(Be.width,Be.height,Pg,Qi);for(var fa=le.measuredBounds,zr=Math.max(fa.width+Ws,0),El=Math.max(fa.height+uc,0),$s=0,ca=0;ca<le.rowSpan&&!(le.row+ca>=t.rowCount);ca++)U=t.getRowDefinition(le.row+ca),$s+=U.total||0;if($s<El){var cs=El-$s,uo=El-$s;if(le.spanAllocation!==null)for(var ps=le.spanAllocation,Ao=0;Ao<le.rowSpan&&!(0>=cs)&&!(le.row+Ao>=t.rowCount);Ao++){U=t.getRowDefinition(le.row+Ao);var ds=U.oa||0,Fl=ps(le,U,uo);U.actual=Math.min(U.maximum,ds+Fl),U.oa!==ds&&(cs-=U.oa-ds)}for(;0<cs;){var kr=U.oa||0;if(isNaN(U.height)&&U.maximum>kr&&(U.actual=Math.min(U.maximum,kr+cs),U.oa!==kr&&(cs-=U.oa-kr)),U.index===0)break;U=t.getRowDefinition(U.index-1)}}for(var Du=0,gs=0;gs<le.columnSpan&&!(le.column+gs>=t.columnCount);gs++)U=t.getColumnDefinition(le.column+gs),Du+=U.total||0;if(Du<zr){var Ru=zr-Du,m1=zr-Du;if(le.spanAllocation!==null)for(var Io=le.spanAllocation,Ol=0;Ol<le.columnSpan&&!(0>=Ru)&&!(le.column+Ol>=t.columnCount);Ol++){U=t.getColumnDefinition(le.column+Ol);var hc=U.oa||0,v1=Io(le,U,m1);U.actual=Math.min(U.maximum,hc+v1),U.oa!==hc&&(Ru-=U.oa-hc)}for(;0<Ru;){var Cg=U.oa||0;if(isNaN(U.width)&&U.maximum>Cg&&(U.actual=Math.min(U.maximum,Cg+Ru),U.oa!==Cg&&(Ru-=U.oa-Cg)),U.index===0)break;U=t.getColumnDefinition(U.index-1)}}}}Vt(T),pt.free(Oo),pt.free(Be),Mr!==void 0&&Vt(Mr),Cn!==void 0&&Vt(Cn);var Bu=0,zu=0,Tg=t.desiredSize,wN=t.maxSize;si=dr(t,!0);var ac=jo=so=0,fc=0;s=t.columnCount;for(var Lg=0;Lg<s;Lg++)G[Lg]!==void 0&&(U=t.getColumnDefinition(Lg),isFinite(U.width)?(ac+=U.width,ac+=U.Rc()):ud(U)===Mf?(ac+=U.oa,ac+=U.Rc()):U.oa!==0&&(so+=U.oa,so+=U.Rc()));isFinite(Tg.width)?Bu=Math.min(Tg.width,wN.width):Bu=si!==he&&isFinite(e)?e:so,Bu=Math.max(Bu,t.minSize.width),Bu=Math.max(Bu-ac,0);for(var Yj=so===0?1:Math.max(Bu/so,1),jg=0;jg<s;jg++)G[jg]!==void 0&&(U=t.getColumnDefinition(jg),isFinite(U.width)||ud(U)===Mf||(U.actual=U.oa*Yj),U.position=r.width,U.oa!==0&&(r.width+=U.oa,r.width+=U.Rc()));s=t.rowCount;for(var Eg=0;Eg<s;Eg++)et[Eg]!==void 0&&(U=t.getRowDefinition(Eg),isFinite(U.height)?(fc+=U.height,fc+=U.Rc()):ud(U)===Mf?(fc+=U.oa,fc+=U.Rc()):U.oa!==0&&(jo+=U.oa,jo+=U.Rc()));isFinite(Tg.height)?zu=Math.min(Tg.height,wN.height):zu=si!==he&&isFinite(i)?i:jo,zu=Math.max(zu,t.minSize.height),zu=Math.max(zu-fc,0);for(var Hj=jo===0?1:Math.max(zu/jo,1),Fg=0;Fg<s;Fg++)et[Fg]!==void 0&&(U=t.getRowDefinition(Fg),isFinite(U.height)||ud(U)===Mf||(U.actual=U.oa*Hj),U.position=r.height,U.oa!==0&&(r.height+=U.oa,r.height+=U.Rc()));s=h.length;for(var x1=0;x1<s;x1++){var cc=h[x1],w1=0,S1=0;cc.type===_.TableRow?(w1=r.width,U=t.getRowDefinition(cc.row),S1=U.actual):(U=t.getColumnDefinition(cc.column),w1=U.actual,S1=r.height),cc.measuredBounds.h(0,0,w1,S1),vn(cc,!1)}Vt(h),t.inRowsCols=S},bp.prototype.arrange=function(t,e,i){var n=e.length,r=t.padding,s=r.left;r=r.top;var l=t.inRowsCols;if(l!==null){for(var h,a,f=l.length,p=0,d=0;d<f;d++)l[d]&&(p=Math.max(p,l[d].length));a=t.rowDefs,h=t.colDefs;var y=d=0,x=Math.min(t.topIndex,f-1);if(0<a.length){for(;x!==f&&(a[x]===void 0||a[x].oa===0);)x++;x=Math.max(Math.min(x,f-1),0),d=-a[x].position}var v=Math.min(t.leftIndex,p-1);if(0<h.length){for(;v!==p&&(h[v]===void 0||h[v].oa===0);)v++;v=Math.max(Math.min(v,p-1),0),y=-h[v].position}for(var S=0,N=0;S!==f&&a[S]===void 0;)S++;for(;N!==f&&h[N]===void 0;)N++;p=t.part,t.getRowDefinition(S),t.getColumnDefinition(N);for(var k=0;k<e.length;k++){var C=e[k];if(C instanceof _&&C.visible&&Co(C)){if(C.type===_.TableRow){h=t.getRowDefinition(C.row);var T=t.getColumnDefinition(N)}else h=t.getRowDefinition(S),T=t.getColumnDefinition(C.column);a=h.position+d+r,h.oa!==0&&(a+=h.Fo(Math.max(S,x))),h=T.position+y+s,T.oa!==0&&(h+=T.Fo(Math.max(N,v))),T=C.measuredBounds,C.Qk(),C.actualBounds.ka();var L=C.actualBounds,E=V.allocAt(L.x,L.y,L.width,L.height);L.x=C.type===_.TableRow?s:h,L.y=C.type===_.TableColumn?r:a,L.width=T.width,L.height=T.height,C.actualBounds.freeze(),dl(C,!1),y0(E,L)||p===null||(p.kh(),C.Mn(p)),V.free(E)}}for(k=pt.alloc(),C=0;C<f;C++)if(l[C]){for(p=l[C].length,T=t.getRowDefinition(C),a=T.position+d+r,T.oa!==0&&(a+=T.Fo(Math.max(S,x))),L=0;L<p;L++)if(l[C][L]){E=t.getColumnDefinition(L),h=E.position+y+s,E.oa!==0&&(h+=E.Fo(Math.max(N,v)));for(var I=l[C][L],Z=I.length,it=0;it<Z;it++){var et=I[it],G=et.measuredBounds;k.h(0,0);for(var U=1;U<et.rowSpan&&!(C+U>=t.rowCount);U++){var gt=t.getRowDefinition(C+U);gt.oa!==0&&(k.height+=gt.total)}for(U=1;U<et.columnSpan&&!(L+U>=t.columnCount);U++)gt=t.getColumnDefinition(L+U),gt.oa!==0&&(k.width+=gt.total);var ct=E.oa+k.width,Ft=T.oa+k.height;U=h,gt=a;var _t=ct,Te=Ft,Fe=h,ri=a,Le=ct,ls=Ft;h+ct>i.width&&(Le=Math.max(i.width-h,0)),a+Ft>i.height&&(ls=Math.max(i.height-a,0));var pe=et.alignment;if(pe.Tb()){pe=t.defaultAlignment,pe.tb()||(pe=Ut);var xr=pe.x,oi=pe.y,us=pe.offsetX;pe=pe.offsetY;var an=E.alignment,zn=T.alignment;an.tb()&&(xr=an.x,us=an.offsetX),zn.tb()&&(oi=zn.y,pe=zn.offsetY)}else xr=pe.x,oi=pe.y,us=pe.offsetX,pe=pe.offsetY;(isNaN(xr)||isNaN(oi))&&(oi=xr=.5,pe=us=0),an=G.width,zn=G.height;var $i=et.margin,zi=$i.left+$i.right,Ys=$i.top+$i.bottom,wr=yf(et,T,E,!1);!isNaN(et.desiredSize.width)||wr!==fe&&wr!==Ge||(an=Math.max(ct-zi,0)),!isNaN(et.desiredSize.height)||wr!==fe&&wr!==Qe||(zn=Math.max(Ft-Ys,0)),ct=et.maxSize,Ft=et.minSize,an=Math.min(ct.width,an),zn=Math.min(ct.height,zn),an=Math.max(Ft.width,an),zn=Math.max(Ft.height,zn),ct=zn+Ys,U+=_t*xr-(an+zi)*xr+us+$i.left,gt+=Te*oi-ct*oi+pe+$i.top,et.visible&&(hr(Fe,ri,Le,ls,U,gt,G.width,G.height)?et.arrange(U,gt,an,zn):et.arrange(U,gt,an,zn,new V(Fe,ri,Le,ls)))}}}for(pt.free(k),t=0;t<n;t++)i=e[t],s=i instanceof _?i:null,s!==null&&Co(s)&&(s=i.actualBounds,i.naturalBounds.ka(),i.naturalBounds.h(0,0,s.width,s.height),i.naturalBounds.freeze())}};function td(){this.wa="Base"}B(td,xe),td.prototype.measure=function(){},td.prototype.arrange=function(){};function ed(){this.wa="Base"}B(ed,xe),ed.prototype.measure=function(){},ed.prototype.arrange=function(){};function id(){this.wa="Base"}B(id,xe),id.prototype.measure=function(t,e,i,n,r,s,l){1<n.length&&R("Viewbox Panel cannot contain more than one GraphObject."),n=n[0],n.Aa=1,n.Sj(),n.measure(1/0,1/0,s,l);var h=n.measuredBounds,a=n.margin,f=a.right+a.left;if(a=a.top+a.bottom,isFinite(e)||isFinite(i)){var p=n.scale,d=h.width;h=h.height;var y=Math.max(e-f,0),x=Math.max(i-a,0),v=1;t.viewboxStretch===Fr?d!==0&&h!==0&&(v=Math.min(y/d,x/h)):d!==0&&h!==0&&(v=Math.max(y/d,x/h)),v===0&&(v=1e-4),n.Aa*=v,p!==n.scale&&(vn(n,!0),n.measure(1/0,1/0,s,l))}h=n.measuredBounds,r.width=isFinite(e)?e:Math.max(h.width+f,0),r.height=isFinite(i)?i:Math.max(h.height+a,0)},id.prototype.arrange=function(t,e,i){e=e[0];var n=e.measuredBounds,r=e.margin,s=Math.max(n.width+(r.right+r.left),0);r=Math.max(n.height+(r.top+r.bottom),0);var l=e.alignment;l.Tb()&&(l=t.defaultAlignment),l.tb()||(l=Ut),e.arrange(i.width*l.x-s*l.x+l.offsetX,i.height*l.y-r*l.y+l.offsetY,n.width,n.height)};function xf(){this.wa="Base"}B(xf,xe),xf.prototype.measure=function(){},xf.prototype.arrange=function(){},xf.prototype.cc=function(t,e,i){i=t.Bf()*i.scale,0>=i&&(i=1);var n=t.gridCellSize,r=n.width;n=n.height;var s=t.naturalBounds,l=t.actualBounds,h=s.width,a=s.height,f=Math.ceil(h/r),p=Math.ceil(a/n),d=t.gridOrigin,y=d.x;d=d.y,e.save(),e.beginPath(),e.rect(0,0,h,a),e.clip(),e.Pe();for(var x=[],v=t.O.s,S=v.length,N=0;N<S;N++){var k=v[N],C=[];if(x.push(C),k.visible){var T=k.interval;if(!(0>T)){k=_m(k.figure);for(var L=0;L<S;L++)if(L!==N){var E=v[L];E.visible&&_m(E.figure)===k&&(E=E.interval,E>T&&C.push(E))}}}}for(v=t.O.s,S=v.length,N=0;N<S;N++){var I=v[N];if(I.visible&&(C=I.interval||1,k=Math.abs(C),!(2>r*k*i))){if(T=I.segmentIndex,(!isFinite(T)||isNaN(T))&&(T=0),0>T&&(T=k-Math.min(-T,k)),T=Math.round(T%k),k=I.opacity,L=1,k!==1){if(k===0)continue;L=e.globalAlpha,e.globalAlpha=L*k}E=x[N];var Z=!1,it=I.strokeDashArray;if(it!==null&&(Z=!0,e.ds(it,I.strokeDashOffset)),I.figure==="LineV"&&I.stroke!==null&&0<I.strokeWidth){for(e.lineWidth=I.strokeWidth,sn(t,e,I.stroke,!1,!1,s,l),e.beginPath(),it=I=Math.floor((y-r)/r);it<=I+f;it++){var et=it*r+y;0<=et&&et<=h&&nd(it,C,T,E)&&(e.moveTo(et,0),e.lineTo(et,a))}e.stroke(),e.Pe()}else if(I.figure==="LineH"&&I.stroke!==null&&0<I.strokeWidth){for(e.lineWidth=I.strokeWidth,sn(t,e,I.stroke,!1,!1,s,l),e.beginPath(),it=I=Math.floor((d-n)/n);it<=I+p;it++)et=it*n+d,0<=et&&et<=a&&nd(it,C,T,E)&&(e.moveTo(0,et),e.lineTo(h,et));e.stroke(),e.Pe()}else if(I.figure==="BarV"&&I.fill!==null)for(sn(t,e,I.fill,!0,!1,s,l),I=I.width,isNaN(I)&&(I=r),et=it=Math.floor((y-r)/r);et<=it+f;et++){var G=et*r+y;0<=G+I&&G<=h&&nd(et,C,T,E)&&e.fillRect(G,0,I,a)}else if(I.figure==="BarH"&&I.fill!==null)for(sn(t,e,I.fill,!0,!1,s,l),I=I.height,isNaN(I)&&(I=n),et=it=Math.floor((d-n)/n);et<=it+p;et++)G=et*n+d,0<=G+I&&G<=a&&nd(et,C,T,E)&&e.fillRect(0,G,h,I);Z&&e.$r(),k!==1&&(e.globalAlpha=L)}}e.restore(),e.Qc(!1)};function nd(t,e,i,n){if(0>e)return t%e===i;if(t%e!==i)return!1;e=n.length;for(var r=0;r<e;r++)if(t%n[r]===i)return!1;return!0}function rd(){this.wa="Base"}B(rd,xe),rd.prototype.measure=function(t,e,i,n,r){var s=n.length;if(t instanceof jt||t instanceof X){var l=null,h=null;if(t instanceof X&&(l=t),t instanceof jt&&(h=t,l=h.adornedPart,t.j===null&&(t.j=[])),l instanceof X){var a=l;if(s===0)vo(t.naturalBounds,0,0),t.measuredBounds.h(0,0,0,0);else{var f=t instanceof jt?null:l.path;e=l.routeBounds,i=t.gg,i.h(0,0,e.width,e.height);var p=a.points,d=l.pointsCount;h!==null?h.Ql(!1):l!==null&&l.Ql(!1),h=e.width;var y=e.height,x=t.j;if(x.length=0,f!==null){u2(t,h,y,f);var v=f.measuredBounds;i.Zc(v),x.push(v)}v=Nt.alloc();for(var S=P.alloc(),N=P.alloc(),k=0;k<s;k++){var C=n[k];if(C!==f)if(C.isPanelMain&&C instanceof wt){u2(t,h,y,C);var T=C.measuredBounds;i.Zc(T),x.push(T)}else if(2>d)C.measure(1/0,1/0,0,0),T=C.measuredBounds,i.Zc(T),x.push(T);else{var L=C.segmentIndex,E=C.segmentFraction,I=C.alignmentFocus;I.Jc()&&(I=Ut);var Z=C.segmentOrientation,it=C.segmentOffset;if(isNaN(L)){var et=a.ta;T=Yt(),et.Ou(E,T);var G=P.allocAt(T[0],T[1]);if(G.add(a.i(0)),et.type===W.j?G.offset(-et.startX,-et.startY):(et=et.figures.first(),et!==null&&G.offset(-et.startX,-et.startY)),et=T[2],Z!==Mi){var U=a.computeAngle(C,Z,et);C.Ib=U}U=G.x-e.x;var gt=G.y-e.y;P.free(G),Vt(T)}else if(L<-d||L>=d)T=P.alloc(),a.sg(),a.computeMidPoint(T),et=a.midAngle,Z!==Mi&&(U=a.computeAngle(C,Z,et),C.Ib=U),U=T.x-e.x,gt=T.y-e.y,P.free(T);else{if(U=0,0<=L?(gt=p.L(L),T=L<d-1?p.L(L+1):gt):(U=d+L,gt=p.L(U),T=0<U?p.L(U-1):gt),gt.Xa(T)){0<=L?(et=0<L?p.L(L-1):gt,U=L<d-2?p.L(L+2):T):(et=U<d-1?p.L(U+1):gt,U=1<U?p.L(U-2):T),G=et.zf(gt);var ct=T.zf(U);et=G>ct+10?0<=L?et.ab(gt):gt.ab(et):ct>G+10?0<=L?T.ab(U):U.ab(T):0<=L?et.ab(U):U.ab(et)}else et=0<=L?gt.ab(T):T.ab(gt);Z!==Mi&&(U=a.computeAngle(C,Z,et),C.Ib=U),U=gt.x+(T.x-gt.x)*E-e.x,gt=gt.y+(T.y-gt.y)*E-e.y}C.measure(1/0,1/0,0,0),T=C.measuredBounds,G=C.naturalBounds;var Ft=0;C instanceof wt&&(Ft=C.strokeWidth),ct=G.width+Ft;var _t=G.height+Ft;v.reset(),v.translate(-T.x,-T.y),v.scale(C.scale,C.scale),v.rotate(Z===Mi?C.angle:et,ct/2,_t/2),Z!==Of&&Z!==If||v.rotate(90,ct/2,_t/2),Z!==Af&&Z!==Df||v.rotate(-90,ct/2,_t/2),Z===Ad&&(45<et&&135>et||225<et&&315>et)&&v.rotate(-et,ct/2,_t/2),G=new V(0,0,ct,_t),S.ui(G,I),v.Ga(S),I=-S.x+Ft/2*C.scale,C=-S.y+Ft/2*C.scale,N.assign(it),Ft=isNaN(it.x);var Te=isNaN(it.y);if(Ft||Te){ct=ct/2+3,_t=_t/2+3;var Fe=45<=et&&135>=et,ri=225<=et&&315>=et;Z===Mi&&(Fe||ri)?(N.x=Te?ct:it.y,N.y=Ft?_t:it.x,Fe?0<=L||isNaN(L)&&.5>E||!Ft||(N.y=-_t):ri&&((0<=L||isNaN(L)&&.5>E)&&Ft&&(N.y=-_t),Te&&(N.x=-ct))):(Ft&&(N.x=0<=L||isNaN(L)&&.5>E?ct:-ct),Te&&(N.y=-_t),N.rotate(et))}else N.rotate(et);U+=N.x,gt+=N.y,G.set(T),G.h(U+I,gt+C,T.width,T.height),x.push(G),i.Zc(G)}}if(l!==null)for(n=l.labelNodes;n.next();)n.value.measure(1/0,1/0);t.gg=i,t.position.h(e.x+i.x,e.y+i.y),vo(r,i.width||0,i.height||0),Nt.free(v),P.free(S),P.free(N)}}}},rd.prototype.arrange=function(t,e){var i=e.length;if(t instanceof jt||t instanceof X){var n=t,r=null;t instanceof jt&&(r=t,n=r.adornedPart);var s=t instanceof jt?null:n.path,l=t.j;if(l.length!==0){var h=0;if(s!==null&&h<l.length){var a=l[h];h++,s.arrange(a.x-t.gg.x,a.y-t.gg.y,a.width,a.height)}for(a=0;a<i;a++){var f=e[a];if(f!==s&&h<l.length){var p=l[h];h++,f.arrange(p.x-t.gg.x,p.y-t.gg.y,p.width,p.height)}}}if(e=n.points,i=e.count,2<=i&&t instanceof X)for(s=t.labelNodes;s.next();){var d=t;l=s.value,h=l.segmentIndex,a=l.segmentFraction;var y=l.alignmentFocus;if(f=l.segmentOrientation,p=l.segmentOffset,isNaN(h)){var x=d.ta,v=Yt();x.Ou(a,v);var S=P.allocAt(v[0],v[1]);S.add(d.i(0)),x.type===W.j||(x=x.figures.first()),S.offset(-x.startX,-x.startY),x=v[2],f!==Mi&&(d=d.computeAngle(l,f,x),l.angle=d),d=S.x;var N=S.y;P.free(S),Vt(v)}else if(h<-i||h>=i)v=P.alloc(),x=d,N=v,x.sg(),x.computeMidPoint(N),x=d.midAngle,f!==Mi&&(d=d.computeAngle(l,f,x),l.angle=d),d=v.x,N=v.y,P.free(v);else{if(S=0,0<=h?(v=e.s[h],N=h<i-1?e.s[h+1]:v):(S=i+h,v=e.s[S],N=0<S?e.s[S-1]:v),v.Xa(N)){0<=h?(x=0<h?e.s[h-1]:v,S=h<i-2?e.s[h+2]:N):(x=S<i-1?e.s[S+1]:v,S=1<S?e.s[S-2]:N);var k=x.zf(v),C=N.zf(S);x=k>C+10?0<=h?x.ab(v):v.ab(x):C>k+10?0<=h?N.ab(S):S.ab(N):0<=h?x.ab(S):S.ab(x)}else x=0<=h?v.ab(N):N.ab(v);f!==Mi&&(d=d.computeAngle(l,f,x),l.angle=d),d=v.x+(N.x-v.x)*a,N=v.y+(N.y-v.y)*a}if(y.ts())l.location=new P(d,N);else{y.Jc()&&(y=Ut),v=Nt.alloc(),v.reset(),v.scale(l.scale,l.scale),v.rotate(l.angle,0,0);var T=l.naturalBounds;S=V.allocAt(0,0,T.width,T.height),k=P.alloc(),k.ui(S,y),v.Ga(k),y=-k.x,C=-k.y;var L=T.width,E=T.height;T=P.alloc(),T.assign(p);var I=isNaN(p.x),Z=isNaN(p.y);if(I||Z){L=L/2+3,E=E/2+3;var it=45<=x&&135>=x,et=225<=x&&315>=x;f===Mi&&(it||et)?(T.x=Z?L:p.y,T.y=I?E:p.x,it?0<=h||isNaN(h)&&.5>a||!I||(T.y=-E):et&&((0<=h||isNaN(h)&&.5>a)&&I&&(T.y=-E),Z&&(T.x=-L))):(I&&(T.x=0<=h||isNaN(h)&&.5>a?L:-L),Z&&(T.y=-E),T.rotate(x))}else T.rotate(x);d+=T.x,N+=T.y,v.kp(S),y+=S.x,C+=S.y,h=P.allocAt(d+y,N+C),l.move(h),P.free(h),P.free(T),P.free(k),V.free(S),Nt.free(v)}}r!==null?r.Ql(!1):n.Ql(!1),n=z2(t),t.location.h(t.position.x+n.x,t.position.y+n.y),P.free(n)}};function u2(t,e,i,n){if(Jo(n)!==!1){var r=n.strokeWidth;r===0&&t instanceof jt&&t.type===_.Link&&t.adornedObject instanceof wt&&(r=t.adornedObject.strokeWidth),r*=n.Aa,t instanceof X&&t.ta!==null?(t=t.geometry.bounds,n.De(t.x-r/2,t.y-r/2,t.width+r,t.height+r)):t instanceof jt&&t.adornedPart.ta!==null?(t=t.adornedPart.ta.bounds,n.De(t.x-r/2,t.y-r/2,t.width+r,t.height+r)):n.De(-(r/2),-(r/2),e+r,i+r),r=n.desiredSize,r.w()||n.ta===null?n.ac.h(0,0,r.width,r.height):n.ac.assign(n.ta.bounds),vn(n,!1)}}function wf(){this.wa="Base"}B(wf,xe),wf.prototype.measure=function(t,e,i,n,r,s,l){var h=t.sb();t.graduatedBounds=[];var a=h.margin,f=a.right+a.left,p=a.top+a.bottom;h.measure(e,i,s,l);var d=h.measuredBounds,y=new V(-a.left,-a.top,Math.max(d.width+f,0),Math.max(d.height+p,0));t.graduatedBounds.push(y),r.assign(y);for(var x=h.geometry,v=h.strokeWidth,S=x.flattenedSegments,N=x.flattenedLengths,k=x.flattenedTotalLength,C=S.length,T=0,L=0,E=Yt(),I=0;I<C;I++){var Z=S[I],it=[];L=T=0;for(var et=Z.length,G=0;G<et;G+=2){var U=Z[G],gt=Z[G+1];if(G!==0){var ct=180*Math.atan2(gt-L,U-T)/Math.PI;0>ct&&(ct+=360),it.push(ct)}T=U,L=gt}E.push(it)}if(t.graduatedIntervals===null){for(var Ft=[],_t=t.O.s,Te=_t.length,Fe=0;Fe<Te;Fe++){var ri=_t[Fe],Le=[];if(Ft.push(Le),ri.visible){var ls=ri.interval;if(!(0>ls)){for(var pe=0;pe<Te;pe++)if(pe!==Fe){var xr=_t[pe];if(xr.visible&&ri.constructor===xr.constructor){var oi=xr.interval;oi>ls&&Le.push(oi)}}}}}t.graduatedIntervals=Ft}var us=t.graduatedIntervals,an=t.O.s,zn=an.length,$i=0,zi=0,Ys=k;t.graduatedMarks=[];for(var wr,na=0;na<zn;na++){var Ji=an[na];if(wr=[],Ji.visible&&Ji!==h){var si=Math.abs(Ji.interval),oc=t.graduatedTickUnit;if(!(2>oc*si*k/t.graduatedRange&&Ji.graduatedSkip===null)){var Fu=N[0][0],Dr=0,Vi=0;zi=k*Ji.graduatedStart-1e-4,Ys=k*Ji.graduatedEnd+1e-4;var Cl=oc*si,Zi=t.graduatedTickBase;if(Zi<t.graduatedMin){var Hs=(t.graduatedMin-Zi)/Cl;Hs=Hs%1===0?Hs:Math.floor(Hs+1),Zi+=Hs*Cl}else Zi>t.graduatedMin+Cl&&(Zi-=Math.floor((Zi-t.graduatedMin)/Cl)*Cl);for(var Sg=us[na],sc=Zi,g1=1e-6*t.graduatedMax,so=1;Zi<=t.graduatedMax+g1;so++){t:{for(var jo=Sg.length,Ou=0;Ou<jo;Ou++){var _s=(Zi-t.graduatedTickBase)%(Sg[Ou]*t.graduatedTickUnit),ra=1e-6*t.graduatedTickUnit;if(_s<ra&&_s>-ra){var Gs=!1;break t}}Gs=!0}if(Gs&&(Zi>t.graduatedMax&&(Zi=t.graduatedMax),Ji.graduatedSkip===null||Ji instanceof Gt&&!Ji.graduatedSkip(Zi,Ji)||Ji instanceof wt&&!Ji.graduatedSkip(Zi,Ji))&&($i=(Zi-t.graduatedMin)*k/t.graduatedRange,$i>k&&($i=k),zi<=$i&&$i<=Ys)){for(var lo=E[Dr][Vi],hs=N[Dr][Vi];Dr<N.length;){for(;$i>Fu&&Vi<N[Dr].length-1;)Vi++,lo=E[Dr][Vi],hs=N[Dr][Vi],Fu+=hs;if($i<=Fu)break;Dr++,Vi=0,lo=E[Dr][Vi],hs=N[Dr][Vi],Fu+=hs}var Ui=S[Dr],Rr=Ui[2*Vi],Mg=Ui[2*Vi+1],Eo=($i-(Fu-hs))/hs,oa=new P(Rr+(Ui[2*Vi+2]-Rr)*Eo+v/2-x.bounds.x,Mg+(Ui[2*Vi+3]-Mg)*Eo+v/2-x.bounds.y);oa.scale(h.scale,h.scale);t:{var Sr=lo,Tl=E[Dr];if(!(.5005>Eo&&.4995<Eo)){var Br=Sr;if(.5>Eo?0<Vi?Br=Tl[Vi-1]:F.$(Ui[0],Ui[Ui.length-2])&&F.$(Ui[1],Ui[Ui.length-1])&&(Br=Tl[Tl.length-1]):.5<Eo&&(Vi+1<Tl.length?Br=Tl[Vi+1]:F.$(Ui[0],Ui[Ui.length-2])&&F.$(Ui[1],Ui[Ui.length-1])&&(Br=Tl[0])),Sr!==Br){var Au=Math.abs(Sr-Br);if(180<Au&&(Sr<Br?Sr+=360:Br+=360,Au=Math.abs(Sr-Br)),5e-4>Eo||.9995<Eo){lo=(Sr+Br)/2%360;break t}if(10>Au){var sa=1-Math.abs(.5-Eo);lo=(Sr*sa+Br*(1-sa))%360;break t}}}lo=Sr}if(Ji instanceof Gt){var nr="";Ji.graduatedFunction!==null?(nr=Ji.graduatedFunction(Zi,Ji),nr=nr!=null?nr.toString():""):nr=(+Zi.toFixed(2)).toString(),nr!==""&&wr.push({Wl:oa,angle:lo,text:nr})}else wr.push({Wl:oa,angle:lo})}Zi=sc+so*Cl}}}t.graduatedMarks.push(wr)}Vt(E);var Be=t.graduatedMarks;if(Be!==null)for(var lc=n.length,Ti=0;Ti<lc;Ti++){var de=n[Ti],Li=Be[Ti];if(de.visible&&de!==h&&Li.length!==0){if(de instanceof wt){var Fo=t,as=r,Ll=de.alignmentFocus;Ll.Jc()&&(Ll=xo);var y1=de.angle;de.Ib=0,de.measure(1/0,1/0,0,0),de.Ib=y1;var kg=de.measuredBounds,la=kg.width,jl=kg.height,Iu=V.allocAt(0,0,la,jl),Yi=P.alloc();Yi.ui(Iu,Ll),V.free(Iu);for(var Oo=-Yi.x,Mr=-Yi.y,Cn=new V,Xs=Li.length,ua=0;ua<Xs;ua++)for(var Ks=Li[ua],Ng=Ks.Wl.x,ha=Ks.Wl.y,le=Ks.angle,rr=0;4>rr;rr++){switch(rr){case 0:Yi.h(Oo,Mr);break;case 1:Yi.h(Oo+la,Mr);break;case 2:Yi.h(Oo,Mr+jl);break;case 3:Yi.h(Oo+la,Mr+jl)}Yi.rotate(le+de.angle),Yi.offset(Ng,ha),ua===0&&rr===0?Cn.h(Yi.x,Yi.y,0,0):Cn.Ve(Yi),Yi.offset(-Ng,-ha),Yi.rotate(-le-de.angle)}P.free(Yi),Fo.graduatedBounds!==null&&Fo.graduatedBounds.push(Cn),Ve(as,Cn.x,Cn.y,Cn.width,Cn.height)}else if(de instanceof Gt){var Vn=t,Pg=r;Vn.temporaryTextBlock===null&&(Vn.temporaryTextBlock=new Gt);var Qi=Vn.temporaryTextBlock;N2(Qi,de);var fs=de.alignmentFocus;fs.Jc()&&(fs=xo);for(var Un=de.segmentOrientation,aa=de.segmentOffset,Ws=new V,uc=0,fa=0,zr=0,El=0,$s=0,ca=Li.length,cs=0;cs<ca;cs++){var uo=Li[cs];uc=uo.Wl.x,fa=uo.Wl.y,zr=uo.angle,$s=El=de.angle,Un!==Mi&&($s=Un===Ff||Un===Od?zr+de.angle:zr,El=X.computeAngle(Un,$s)),Qi.Ib=El,Qi.text=uo.text||"",Qi.measure(1/0,1/0,0,0);var ps=Qi.measuredBounds,Ao=Qi.naturalBounds,ds=Ao.width,Fl=Ao.height,kr=Nt.alloc();kr.reset(),kr.translate(-ps.x,-ps.y),kr.scale(Qi.scale,Qi.scale),kr.rotate($s,ds/2,Fl/2),Un!==Of&&Un!==If||kr.rotate(90,ds/2,Fl/2),Un!==Af&&Un!==Df||kr.rotate(-90,ds/2,Fl/2),Un===Ad&&(45<zr&&135>zr||225<zr&&315>zr)&&kr.rotate(-zr,ds/2,Fl/2);var Du=V.allocAt(0,0,ds,Fl),gs=P.alloc();gs.ui(Du,fs),kr.Ga(gs);var Ru=-gs.x,m1=-gs.y,Io=P.alloc();Io.assign(aa),isNaN(Io.x)&&(Io.x=ds/2+3),isNaN(Io.y)&&(Io.y=-(Fl/2+3)),Io.rotate(zr),uc+=Io.x+Ru,fa+=Io.y+m1;var Ol=new V(uc,fa,ps.width,ps.height),hc=new V(ps.x,ps.y,ps.width,ps.height),v1=new V(Ao.x,Ao.y,Ao.width,Ao.height);uo.Mz=El,uo.lineCount=Qi.lineCount,uo.lines=[Qi.Cb,Qi.Fh,Qi.af,Qi.Ie,Qi.Nc,Qi.Xb,Qi.we],uo.actualBounds=Ol,uo.measuredBounds=hc,uo.naturalBounds=v1,cs===0?Ws.assign(Ol):Ws.Zc(Ol),P.free(Io),P.free(gs),V.free(Du),Nt.free(kr)}Vn.graduatedBounds!==null&&Vn.graduatedBounds.push(Ws),Ve(Pg,Ws.x,Ws.y,Ws.width,Ws.height)}vn(de,!1)}}},wf.prototype.arrange=function(t,e,i){if(t.graduatedBounds!==null){var n=t.sb(),r=t.graduatedMarks;if(r!==null){var s=t.graduatedBounds,l=0,h=s[l];l++,n!==null&&n.arrange(h.x-i.x,h.y-i.y,h.width,h.height);for(var a=e.length,f=0;f<a;f++){var p=e[f];h=r[f],p.visible&&p!==n&&h.length!==0&&(h=s[l],l++,p.arrange(h.x-i.x,h.y-i.y,h.width,h.height))}t.graduatedBounds=null}}},wf.prototype.cc=function(t,e,i){var n=i.Xi;i.Xi=!0;var r=t.naturalBounds,s=r.width,l=r.height;r=e instanceof wn,e.save(),e.beginPath(),e.rect(-1,-1,s+1,l+1),e.clip(),e.Pe(),s=t.sb(),s.cc(e,i),l=t.Bf()*i.scale,0>=l&&(l=1);for(var h=s.actualBounds,a=t.O.s,f=t.graduatedMarks,p=a.length,d=0;d<p;d++){var y=a[d],x=f[d],v=x.length;if(y.visible&&y!==s&&x.length!==0){if(y instanceof wt){if(!(2>t.graduatedTickUnit*y.interval*s.geometry.flattenedTotalLength/t.graduatedRange*l&&y.graduatedSkip===null)){var S=y.measuredBounds,N=y.strokeWidth*y.scale,k=y.alignmentFocus;k.Jc()&&(k=xo);for(var C=0;C<v;C++){var T=x[C].Wl,L=x[C].angle,E=k,I=y.Ab;I.reset(),I.translate(T.x+h.x,T.y+h.y),I.rotate(L+y.angle,0,0),I.translate(-S.width*E.x+E.offsetX+N/2,-S.height*E.y+E.offsetY+N/2),I.scale(y.scale,y.scale),Ch(y,!1),y.sh.set(y.Ab),y.Gk=y.scale,Cs(y,!1),y.cc(e,i),r&&(t.svg.appendChild(y.svg),y.svg=null),y.Ab.reset()}}}else if(y instanceof Gt)for(t.temporaryTextBlock===null&&(t.temporaryTextBlock=new Gt),S=t.temporaryTextBlock,N2(S,y),N=0;N<v;N++)k=x[N],k.actualBounds&&k.measuredBounds&&k.naturalBounds&&(S.bc=k.text||"",S.Ib=k.Mz||0,S.Dc=k.lineCount||0,C=k.lines,C!==void 0&&(S.Cb=C[0],S.Fh=C[1],S.af=C[2],S.Ie=C[3],S.Nc=C[4],S.Xb=C[5],S.we=C[6]),k.naturalBounds&&(S.ac=k.naturalBounds),k.actualBounds&&(C=k.actualBounds,S.arrange(C.x,C.y,C.width,C.height)),C=k.actualBounds,S.arrange(C.x,C.y,C.width,C.height),T=k.measuredBounds,k=k.naturalBounds,L=S.Ab,L.reset(),L.translate(C.x+h.x,C.y+h.y),L.translate(-T.x,-T.y),S.ko(L,k.x,k.y,k.width,k.height),Ch(S,!1),S.sh.set(S.Ab),S.Gk=S.scale,Cs(S,!1),S.Jg=y.part,S.Je=y.panel,S.cc(e,i),S.Je=null,S.Jg=null,r&&(t.svg.appendChild(S.svg),S.svg=null))}}i.Xi=n,e.restore(),e.Qc(!0)};function _(t,e){if(ot.call(this),this.na=null,t===void 0)this.na=_.Position;else if(typeof t=="string"){var i=Qn.I(t);i!==null&&(this.na=i)}else t instanceof xe?this.na=t:t&&(this.na=_.Position,e=t);this.na===null&&R("Panel type not specified or PanelLayout not loaded: "+t),this.o=this.o|4194304|(this.na===_.Grid?1048576:0),this.O=new tt,this.yb=ih,this.Qm=Je,this.Sf=Jn,this.Wg=null,this.Xe="",this.gg=new V(NaN,NaN,NaN,NaN),this.T=this.F=null,this.uo=Fr,this.fn=pS,this.gn=yo,this.ub=this.ra=null,this.wn=NaN,this.ce=this.Eh=null,e&&Object.assign(this,e)}B(_,ot),_.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.na=this.na,t.yb=this.yb.J(),t.Qm=this.Qm.J(),t.Sf=this.Sf,t.Xe=this.Xe,t.gg.assign(this.gg),this.T!==null&&(t.T=this.T.copy(t)),t.uo=this.uo,t.fn=this.fn.J(),t.gn=this.gn.J(),this.ra!==null&&(t.ra=this.ra.copy()),t.ub=this.ub,t.wn=this.wn,t.Eh=this.Eh},_.prototype.yf=function(t){ot.prototype.yf.call(this,t),t.O=this.O;for(var e=t.O.s,i=e.length,n=0;n<i;n++)e[n].Je=t;t.Wg=null},_.prototype.copy=function(){var t=ot.prototype.copy.call(this);if(t!==null){for(var e=this.O.s,i=e.length,n=0;n<i;n++){var r=e[n].copy();r.ti(t),r.Jg=null;var s=t.O,l=s.count;if(s.Eb(l,r),s=t.part,s!==null){s.Oh=null,r.portId!==null&&s instanceof b&&(s.Qe=!0);var h=t.diagram;h!==null&&h.undoManager.isUndoingRedoing||s.cb(Ne,"elements",t,null,r,null,l)}}return t}return null},o=_.prototype,o.toString=function(){return"Panel("+this.type.name+")#"+Ei(this)},o.Mn=function(t){ot.prototype.Mn.call(this,t);for(var e=this.O.s,i=e.length,n=0;n<i;n++)e[n].Mn(t)},o.dh=function(t,e){if(this.na===_.Grid)t.vc(),this.na.cc(this,t,e);else if(this.na===_.Graduated)t.vc(),this.na.cc(this,t,e);else{if(this.na===_.Table)if(t.vc(),t instanceof wn){var i=t.ud;t.ud=Xp(t,"gojs-ts"),Hm(this,t),t.jh.pop(),t.ud=i}else Hm(this,t);(i=this.isClipping&&this.na===_.Spot)&&t.save();for(var n=this.sb(),r=this.O.s,s=r.length,l=0;l<s;l++){var h=r[l];i&&h===n&&(t.clipInsteadOfFill=!0),h.cc(t,e),i&&h===n&&(t.clipInsteadOfFill=!1)}i&&(t.restore(),t.Qc(!0))}};function Hm(t,e){e.lineCap="butt";var i=0<t.rowCount?t.rowDefs:null,n=0<t.columnCount?t.colDefs:null;i!==null&&od(t,e,!0,i,!0),n!==null&&od(t,e,!1,n,!0),i!==null&&h2(t,e,!0,i),n!==null&&h2(t,e,!1,n),i!==null&&od(t,e,!0,i,!1),n!==null&&od(t,e,!1,n,!1)}function h2(t,e,i,n){for(var r=n.length,s=t.actualBounds,l=t.naturalBounds,h=!0,a=0;a<r;a++){var f=n[a];if(f!==void 0&&f.actual!==0)if(h)h=!1;else{if(i){if(f.position>l.height)continue}else if(f.position>l.width)continue;var p=f.separatorStrokeWidth;isNaN(p)&&(p=i?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth);var d=f.separatorStroke;if(d===null&&(d=i?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),p!==0&&d!==null){sn(t,e,d,!1,!1,l,s),d=!1;var y=f.separatorDashArray;y===null&&(y=i?t.defaultRowSeparatorDashArray:t.defaultColumnSeparatorDashArray),y!==null&&(d=!0,e.ds(y,0)),e.beginPath(),y=f.position+p,i?y>l.height&&(p-=y-l.height):y>l.width&&(p-=y-l.width),f=f.position+p/2,e.lineWidth=p,p=t.yb,i?(f+=p.top,y=l.width-p.right,e.moveTo(p.left,f),e.lineTo(y,f)):(f+=p.left,y=l.height-p.bottom,e.moveTo(f,p.top),e.lineTo(f,y)),e.stroke(),e.Pe(),d&&e.$r()}}}}function od(t,e,i,n,r){for(var s=n.length,l=t.actualBounds,h=t.naturalBounds,a=a2(t,!0),f=a2(t,!1),p=0;p<s;p++){var d=n[p];if(d!==void 0&&d.background!==null&&d.coversSeparators!==r&&d.actual!==0){var y=i?l.height:l.width;if(!(d.position>y)){var x=d.Rc(),v=d.separatorStrokeWidth;isNaN(v)&&(v=i?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth);var S=d.separatorStroke;S===null&&(S=i?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),(S===null||d.index===(i?a:f))&&(v=0),x-=v,v=d.position+v,x+=d.actual,v+x>y&&(x=y-v),0>=x||(y=t.yb,sn(t,e,d.background,!0,!1,h,l),i?e.fillRect(y.left,v+y.top,l.width-(y.left+y.right),x):e.fillRect(v+y.left,y.top,x,l.height-(y.top+y.bottom)))}}}}function a2(t,e){for(var i=e?t.rowCount:t.columnCount,n=0;n<i;n++){var r=e?t.rowDefs[n]:t.colDefs[n];if(r!==void 0)return r.index}return 0}function _m(t){return t==="LineV"||t==="BarV"}o.jv=function(){for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].jv();this.pf=!0},o.gk=function(t,e,i){if(!ot.prototype.gk.call(this,t,e,i))return!1;if(this.type===_.Table)i=this.svg.getElementsByClassName("gojs-ts"),i=i.length!==0?i[0]:null,i!==null&&(i.innerHTML=""),t.ud=i,Hm(this,t),t.ud=null;else if(this.na===_.Grid||this.na===_.Graduated)return this.svg.innerHTML="",this.svg.remove(),!1;i=this.O.s;for(var n=i.length,r=0;r<n;r++)i[r].cc(t,e);return!0},o.jk=function(){return!0},o.Vo=function(t,e,i,n){if(!this.isClipping)if(this.le()&&t.Zj!==null){t=t.Zj,e=this.O.s;for(var r=0,s=0,l=0;l<e.length;l++){var h=e[l].actualBounds;r=l===0?h.x:Math.min(h.x,r),s=l===0?h.y:Math.min(h.y,s)}n.setAttributeNS(null,"clip-path","path('M "+(t.x-i.x-r)+","+(t.y-i.y-s)+" l "+t.width+" 0 l 0 "+t.height+" l -"+t.width+" 0 z')")}else ot.prototype.Vo.call(this,t,e,i,n)},o.Qj=function(t,e,i,n,r){var s=this.pe(),l=this.transform,h=1/(l.m11*l.m22-l.m12*l.m21),a=l.m22*h,f=-l.m12*h,p=-l.m21*h,d=l.m11*h,y=h*(l.m21*l.dy-l.m22*l.dx),x=h*(l.m12*l.dx-l.m11*l.dy);if(this.areaBackground!==null)return l=this.actualBounds,F.Df(l.left,l.top,l.right,l.bottom,t,e,i,n,r);if(this.background!==null)return s=t*a+e*p+y,h=t*f+e*d+x,t=i*a+n*p+y,a=i*f+n*d+x,r.h(0,0),i=this.naturalBounds,s=F.Df(0,0,i.width,i.height,s,h,t,a,r),r.transform(l),s;s||(a=1,p=f=0,d=1,x=y=0),h=t*a+e*p+y,t=t*f+e*d+x,a=i*a+n*p+y,i=i*f+n*d+x,r.h(a,i),n=(a-h)*(a-h)+(i-t)*(i-t),f=!1,d=this.O.s,x=d.length,p=P.alloc(),y=null,e=1/0;var v=null,S=this.isClipping&&this.na===_.Spot;S&&(v=P.alloc(),y=this.sb(),(f=y.Qj(h,t,a,i,v))&&(e=(h-v.x)*(h-v.x)+(t-v.y)*(t-v.y)));for(var N=0;N<x;N++){var k=d[N];k.visible&&k!==y&&k.Qj(h,t,a,i,p)&&(f=!0,k=(h-p.x)*(h-p.x)+(t-p.y)*(t-p.y),k<n&&(n=k,r.set(p)))}return S&&(e>n&&r.set(v),P.free(v)),P.free(p),s&&r.transform(l),f},o.Ej=function(){for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].Ej();ot.prototype.Ej.call(this)},o.v=function(t){if(!Jo(this)){ot.prototype.v.call(this,t),t=null,(this.na===_.Auto||this.na===_.Link)&&(t=this.sb());for(var e=this.O.s,i=e.length,n=0;n<i;n++){var r=e[n];if((r===t||r.isPanelMain)&&r.v(!0),!r.desiredSize.w()){var s=dr(r,!1);(r instanceof Si||r instanceof _||r instanceof Gt||s!==he)&&r.v(!0)}}}},o.Sj=function(){if(!Jo(this)){vn(this,!0),dl(this,!0);for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].Sj()}},o.Qk=function(){if(!(this.o&2048)){Ch(this,!0),Cs(this,!0);for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].Uu()}},o.Uu=function(){Cs(this,!0);for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].Uu()},o.Sl=function(t,e,i,n){var r=this.gg;r.h(0,0,0,0);var s=this.desiredSize,l=this.minSize;i===void 0&&(i=l.width,n=l.height),i=Math.max(i,l.width),n=Math.max(n,l.height);var h=this.maxSize;isNaN(s.width)||(t=Math.min(s.width,h.width)),isNaN(s.height)||(e=Math.min(s.height,h.height)),t=Math.max(i,t),e=Math.max(n,e);var a=this.yb;t=Math.max(t-a.left-a.right,0),e=Math.max(e-a.top-a.bottom,0);var f=this.O.s;f.length!==0&&this.na.measure(this,t,e,f,r,i,n),t=r.width+a.left+a.right,a=r.height+a.top+a.bottom,isFinite(s.width)&&(t=s.width),isFinite(s.height)&&(a=s.height),t=Math.min(h.width,t),a=Math.min(h.height,a),t=Math.max(l.width,t),a=Math.max(l.height,a),t=Math.max(i,t),a=Math.max(n,a),vo(r,t,a),vo(this.naturalBounds,t,a),this.De(0,0,t,a)},o.sb=function(){if(this.Wg===null){var t=this.O.s,e=t.length;if(e===0)return null;for(var i=0;i<e;i++){var n=t[i];if(n.isPanelMain===!0)return this.Wg=n}this.Wg=t[0]}return this.Wg};function Po(t){return t.part!==null?t.part.locationObject:null}o.$g=function(t,e,i,n){var r=this.O.s;if(this.actualBounds.h(t,e,i,n),r.length!==0){if(!this.desiredSize.w()){t=dr(this,!0);var s=this.measuredBounds;e=s.width,s=s.height;var l=this.Gg,h=l.left+l.right;switch(l=l.top+l.bottom,e===i&&s===n&&(t=he),t){case he:(e>i||s>n)&&(this.v(),this.measure(e>i?i:e,s>n?n:s,0,0));break;case fe:this.v(!0),this.measure(i+h,n+l,0,0);break;case Ge:this.v(!0),this.measure(i+h,s+l,0,0);break;case Qe:this.v(!0),this.measure(e+h,n+l,0,0)}}this.na.arrange(this,r,this.gg)}},o.bh=function(t){var e=this.naturalBounds,i=Po(this);if(hr(0,0,e.width,e.height,t.x,t.y)){e=this.O.s;for(var n=e.length,r=P.allocAt(0,0);n--;){var s=e[n];if((s.visible||s===i)&&(yi(r.set(t),s.transform),s.ca(r)))return P.free(r),!0}return P.free(r),!(this.Oa===null&&this.areaBackground===null)}return!1},o.es=function(t){if(this.bindingId===t)return this;for(var e=this.O.s,i=e.length,n=0;n<i;n++){var r=e[n].es(t);if(r!==null)return r}return null},o.nm=function(t,e){if(e(this,t),t instanceof _){t=t.O.s;for(var i=t.length,n=0;n<i;n++)this.nm(t[n],e)}};function vl(t,e){f2(t,t,e)}function f2(t,e,i){i(e),e=e.O.s;for(var n=e.length,r=0;r<n;r++){var s=e[r];s instanceof _&&f2(t,s,i)}}function lj(t,e){c2(t,t,e)}function c2(t,e,i){if(i(e),e instanceof _){e=e.O.s;for(var n=e.length,r=0;r<n;r++)c2(t,e[r],i)}}o.Il=function(t){return p2(this,this,t)};function p2(t,e,i){if(i(e))return e;if(e instanceof _){e=e.O.s;for(var n=e.length,r=0;r<n;r++){var s=p2(t,e[r],i);if(s!==null)return s}}return null}o.fb=function(t){if(this.name===t)return this;var e=this.O.s,i=e.length;this.Eh===null&&this.itemTemplateMap===null||(i=Sf(this));for(var n=0;n<i;n++){var r=e[n];if(r instanceof _){var s=r.fb(t);if(s!==null)return s}if(r.name===t)return r}return null};function d2(t){t=t.O.s;for(var e=t.length,i=0,n=0;n<e;n++){var r=t[n];r instanceof _?i=Math.max(i,d2(r)):r instanceof wt&&(i=Math.max(i,r.fg/2*r.strokeMiterLimit*r.Bf()))}return i}o.pe=function(){return!(this.type===_.TableRow||this.type===_.TableColumn)};function Co(t){return t.type===_.TableRow||t.type===_.TableColumn}o.ec=function(t,e,i){if(this.pickable===!1||(e===void 0&&(e=null),i===void 0&&(i=null),Zn(this)))return null;var n=this.naturalBounds,r=1/this.Bf(),s=this.pe(),l=s?t:yi(P.allocAt(t.x,t.y),this.transform),h=this.diagram,a=10,f=5;if(h!==null&&(a=h.Ll("extraTouchArea"),f=a/2),hr(-(f*r),-(f*r),n.width+a*r,n.height+a*r,l.x,l.y)){if(!this.isAtomic){r=this.O.s;var p=r.length;if(h=P.alloc(),f=(a=this.isClipping&&this.na===_.Spot)?this.sb():null,a&&(f.pe()?yi(h.set(t),f.transform):h.set(t),!f.ca(h)))return P.free(h),s||P.free(l),null;for(var d=Po(this);p--;){var y=r[p];if((y.visible||y===d)&&(y.pe()?yi(h.set(t),y.transform):h.set(t),!a||y!==f)){var x=null;if(y instanceof _?x=y.ec(h,e,i):y.pickable===!0&&y.ca(h)&&(x=y),x!==null&&(e!==null&&(x=e(x)),x!==null&&(i===null||i(x))))return P.free(h),s||P.free(l),x}}P.free(h)}return this.background===null&&this.areaBackground===null?(s||P.free(l),null):(t=hr(0,0,n.width,n.height,l.x,l.y)?this:null,s||P.free(l),t)}return s||P.free(l),null},o.gi=function(t,e,i,n){if(this.pickable===!1)return!1;e===void 0&&(e=null),i===void 0&&(i=null);var r=this.naturalBounds,s=this.pe(),l=s?t:yi(P.allocAt(t.x,t.y),this.transform);if(r=hr(0,0,r.width,r.height,l.x,l.y),Co(this)||r){if(!this.isAtomic){for(var h=this.O.s,a=h.length,f=P.alloc(),p=Po(this);a--;){var d=h[a];if(d.visible||d===p){d.pe()?yi(f.set(t),d.transform):f.set(t);var y=d;d=d instanceof _?d:null,(d!==null?d.gi(f,e,i,n):y.ca(f))&&y.pickable!==!1&&(e!==null&&(y=e(y)),y===null||i!==null&&!i(y)||n.add(y))}}P.free(f)}return s||P.free(l),r&&(this.background!==null||this.areaBackground!==null)}return s||P.free(l),!1},o.Af=function(t,e,i,n,r,s){if(this.pickable===!1)return!1;e===void 0&&(e=null),i===void 0&&(i=null);var l=s;if(s===void 0&&(l=Nt.alloc(),l.reset()),l.multiply(this.transform),this.ah(t,l))return Gm(this,e,i,r),s===void 0&&Nt.free(l),!0;if(this.Tc(t,l)){if(!this.isAtomic)for(var h=Po(this),a=this.O.s,f=a.length;f--;){var p=a[f];if(p.visible||p===h){var d=p.actualBounds,y=this.naturalBounds;d.x>y.width||d.y>y.height||0>d.x+d.width||0>d.y+d.height||(d=p,p=p instanceof _?p:null,y=Nt.alloc(),y.set(l),(p!==null?p.Af(t,e,i,n,r,y):ZM(d,t,n,y))&&(e!==null&&(d=e(d)),d===null||i!==null&&!i(d)||r.add(d)),Nt.free(y))}}return s===void 0&&Nt.free(l),n}return s===void 0&&Nt.free(l),!1};function Gm(t,e,i,n){for(var r=t.O.s,s=r.length;s--;){var l=r[s];if(l.visible){var h=l.actualBounds,a=t.naturalBounds;h.x>a.width||h.y>a.height||0>h.x+h.width||0>h.y+h.height||(l instanceof _&&Gm(l,e,i,n),e!==null&&(l=e(l)),l===null||i!==null&&!i(l)||n.add(l))}}}o.lg=function(t,e,i,n,r,s){if(this.pickable===!1)return!1;i===void 0&&(i=null),n===void 0&&(n=null);var l=this.naturalBounds,h=this.pe(),a=h?t:yi(P.allocAt(t.x,t.y),this.transform),f=h?e:yi(P.allocAt(e.x,e.y),this.transform),p=a.zf(f),d=0<a.x&&a.x<l.width&&0<a.y&&a.y<l.height||mi(a.x,a.y,0,0,0,l.height)<=p||mi(a.x,a.y,0,l.height,l.width,l.height)<=p||mi(a.x,a.y,l.width,l.height,l.width,0)<=p||mi(a.x,a.y,l.width,0,0,0)<=p;if(l=a.vd(0,0)<=p&&a.vd(0,l.height)<=p&&a.vd(l.width,0)<=p&&a.vd(l.width,l.height)<=p,h||(P.free(a),P.free(f)),d){if(!this.isAtomic){a=P.alloc(),f=P.alloc(),p=Po(this);for(var y=this.O.s,x=y.length;x--;){var v=y[x];if(v.visible||v===p){var S=v.actualBounds,N=this.naturalBounds;(!h||!(S.x>N.width||S.y>N.height||0>S.x+S.width||0>S.y+S.height))&&(v.pe()?(S=v.transform,yi(a.set(t),S),yi(f.set(e),S)):(a.set(t),f.set(e)),S=v,v=v instanceof _?v:null,(v!==null?v.lg(a,f,i,n,r,s):S.px(a,f,r))&&(i!==null&&(S=i(S)),S===null||n!==null&&!n(S)||s.add(S)))}}P.free(a),P.free(f)}return r?d:l}return!1};function Xm(t){var e=null;return t instanceof wt&&(e=t.spot1,e===Je&&(e=null),t=t.geometry,t!==null&&e===null&&(e=t.spot1)),e===null&&(e=ei),e}function Km(t){var e=null;return t instanceof wt&&(e=t.spot2,e===Je&&(e=null),t=t.geometry,t!==null&&e===null&&(e=t.spot2)),e===null&&(e=Xr),e}o.add=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];for(i=0;i<e.length;i++)this.Eb(this.O.count,e[i]);return this},o.L=function(t){return this.O.L(t)},o.Eb=function(t,e){e instanceof lt&&R("Cannot add a Part to a Panel: "+e+"; use a Panel instead"),(this===e||this.og(e))&&(this===e&&R("Cannot make a Panel contain itself: "+this.toString()),R("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+e.toString()));var i=e.panel;if(i!==null&&i!==this&&R("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+e.toString()+", already contained by "+i.toString()+", cannot be shared by this Panel: "+this.toString()),this.na!==_.Grid||e instanceof wt||R("Can only add Shapes to a Grid Panel, not: "+e),this.na!==_.Graduated||e instanceof wt||e instanceof Gt||R("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+e),e.ti(this),e.Jg=null,this.itemArray!==null){var n=e.data;n!==null&&typeof n=="object"&&(this.ce===null&&(this.ce=new vt),this.ce.add(n,e))}var r=this.O;if(n=-1,i===this){for(var s=-1,l=this.O.s,h=l.length,a=0;a<h;a++)if(l[a]===e){s=a;break}if(s!==-1){if(s===t||s+1>=r.count&&t>=r.count)return;r.nb(s),n=s}else R("element "+e.toString()+" has panel "+i.toString()+" but is not contained by it.")}(0>t||t>r.count)&&(t=r.count),r.Eb(t,e),(t===0||e.isPanelMain)&&(this.Wg=null),Jo(this)||this.v(),e.v(!1),e.portId!==null?this.Qe=!0:e instanceof _&&e.Qe===!0&&(this.Qe=!0),this.graduatedIntervals=null,this.Gf()||ld(this,e,!1),i=this.part,i!==null&&(i.Oh=null,i.Yf=NaN,this.Qe&&i instanceof b&&(i.Qe=!0),i.Qe&&i instanceof b&&(i.tc=null),r=this.diagram,r!==null&&r.undoManager.isUndoingRedoing||(n!==-1&&i.cb(je,"elements",this,e,null,n,null),i.cb(Ne,"elements",this,null,e,null,t)))};function Wm(t,e){t.o=e?t.o|16777216:t.o&-16777217}o.remove=function(t){for(var e=this.O.s,i=e.length,n=-1,r=0;r<i;r++)if(e[r]===t){n=r;break}n!==-1&&this.mc(n,!0)},o.nb=function(t){0<=t&&this.mc(t,!0)},o.mc=function(t,e){var i=this.O,n=i.L(t);if(n.Jg=null,n.ti(null),this.ce!==null){var r=n.data;typeof r=="object"&&this.ce.remove(r)}i.nb(t),vn(this,!1),this.v(),this.Wg===n&&(this.Wg=null),this.graduatedIntervals=null;var s=this.part;s!==null&&(s.Oh=null,s.Yf=NaN,s.Sb(),s instanceof b&&(n instanceof _?n.nm(n,function(l,h){mv(s,h,e)}):mv(s,n,e)),i=this.diagram,i!==null&&i.undoManager.isUndoingRedoing||s.cb(je,"elements",this,n,null,t,null))},_.prototype.getRowDefinition=function(t){0>t&&dt(t,">= 0",_,"getRowDefinition:idx"),t=Math.round(t);var e=this.rowDefs;if(e[t]===void 0){var i=new Ce;i.ti(this),i.isRow=!0,i.index=t,e[t]=i,this.cb(Ne,"rowdefs",this,null,i,null,t)}return e[t]},_.prototype.hA=function(t){if(0>t&&dt(t,">= 0",_,"removeRowDefinition:idx"),this.rowCount!==0){t=Math.round(t);var e=this.rowDefs,i=e[t];if(i){e[t]=void 0;for(var n=e.length-1;0<=n&&e[n--]===void 0;)e.length--;this.cb(je,"rowdefs",this,i,null,t,null),this.v()}}};function g2(t,e,i){var n=t.rowDefs;if(!(0>e)){if(n[e]=i instanceof Ce?i:void 0,!i)for(e=n.length-1;0<=e&&n[e--]===void 0;)n.length--;t.v()}}_.prototype.getColumnDefinition=function(t){0>t&&dt(t,">= 0",_,"getColumnDefinition:idx"),t=Math.round(t);var e=this.colDefs;if(e[t]===void 0){var i=new Ce;i.ti(this),i.isRow=!1,i.index=t,e[t]=i,this.cb(Ne,"coldefs",this,null,i,null,t)}return e[t]},_.prototype.cA=function(t){if(0>t&&dt(t,">= 0",_,"removeColumnDefinition:idx"),this.columnCount!==0){t=Math.round(t);var e=this.colDefs,i=e[t];if(i){e[t]=void 0;for(var n=e.length-1;0<=n&&e[n--]===void 0;)e.length--;this.cb(je,"coldefs",this,i,null,t,null),this.v()}}};function y2(t,e,i){var n=t.colDefs;if(!(0>e)){if(n[e]=i instanceof Ce?i:void 0,!i)for(e=n.length-1;0<=e&&n[e--]===void 0;)n.length--;t.v()}}_.prototype.addRowColumnDefinition=function(t){var e=null;return t.isRow?e=this.getRowDefinition(t.index):t.isRow||(e=this.getColumnDefinition(t.index)),e&&S2(e,t),this},o=_.prototype,o.iz=function(t){if(0>t||this.type!==_.Table||this.rowCount===0)return-1;for(var e=0,i=this.rowDefs,n=i.length,r=this.topIndex;r<n;r++){var s=i[r];if(s!==void 0&&(e+=s.total,t<e))break}return r},o.az=function(t){if(0>t||this.type!==_.Table||this.columnCount===0)return-1;for(var e=0,i=this.colDefs,n=i.length,r=this.leftIndex;r<n;r++){var s=i[r];if(s!==void 0&&(e+=s.total,t<e))break}return r},o.Az=function(t,e){if(e===void 0&&(e=new P(NaN,NaN)),this.type!==_.Graduated)return e.h(NaN,NaN),e;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);var i=this.sb();return i.geometry.Nu((t-this.graduatedMin)/this.graduatedRange,e),i.transform.Ga(e)},o.Bz=function(t){if(this.type!==_.Graduated)return NaN;var e=this.sb();return e.transform.Md(t),e.geometry.ux(t)*this.graduatedRange+this.graduatedMin};function m2(t){return t=t.allBindings,t!==null&&t._isFrozen}function Dn(t){var e=t.allBindings;if(e===null)t.data!==null&&R("Template cannot have .data be non-null: "+t),t.allBindings=e=new tt;else if(e._isFrozen)return;var i=new tt;Wm(t,!1),t.nm(t,function(f,p){p.ph();var d=p.localBindings;if(d!==null)for(jm(p,!1),d=d.iterator;d.next();){var y=d.value;y.mode===_f&&jm(p,!0);var x=y.sourceName;x!==null&&(x==="/"&&Wm(f,!0),x=Ok(y,f,p),x!==null&&(i.add(x),x.srcBindings===null&&(x.srcBindings=new tt),x.srcBindings.add(y))),e.add(y)}if(p instanceof _&&p.type===_.Table){if(0<p.rowCount){for(f=p.rowDefs,d=f.length,y=0;y<d;y++)if(x=f[y],x!==void 0&&x.Yd!==null)for(var v=x.Yd.iterator;v.next();){var S=v.value;S.td=x,S.qo=2,S.sl=x.index,e.add(S)}}if(0<p.columnCount){for(p=p.colDefs,f=p.length,d=0;d<f;d++)if(y=p[d],y!==void 0&&y.Yd!==null)for(x=y.Yd.iterator;x.next();)v=x.value,v.td=y,v.qo=1,v.sl=y.index,e.add(v)}}});for(var n=i.iterator;n.next();){var r=n.value;if(r.srcBindings!==null){jm(r,!0);for(var s=r.srcBindings.iterator;s.next();){var l=s.value;r.localBindings===null&&(r.localBindings=new tt),r.localBindings.add(l)}}r.srcBindings=null}for(n=e.iterator;n.next();)if(r=n.value,s=r.td,s!==null){r.td=null;var h=r.targetProperty,a=h.indexOf(".");0<a&&s instanceof _&&(l=h.substring(0,a),h=h.substr(a+1),a=s.fb(l),a!==null?(s=a,r.targetProperty=h):Lt('Warning: unable to find GraphObject named "'+l+'" for Binding: '+r.toString())),s instanceof Ce?(l=Ei(s.panel),r.xi=l===void 0?-1:l,s.panel.bindingId=r.xi):s instanceof ot?(l=Ei(s),r.xi=l===void 0?-1:l,s.bindingId=r.xi):R("Unknown type of binding target: "+s)}e.freeze(),t instanceof lt&&t.Uc()&&t.Va()}o.Py=function(t){t===void 0&&(t=!1);var e=this.copy();return lj(e,function(i){i instanceof _&&(i.allBindings=null,i.ub=null);var n=i.localBindings;n!==null&&(i.localBindings=null,n.each(function(r){i.bind(r.copy())})),n=i.animationTriggers,n!==null&&(i.animationTriggers=null,n.each(function(r){i.Fv(r.value.copy())}))}),t&&Dn(e),e},o.Ma=function(t){var e=this.allBindings;if(e!==null)for(t===void 0&&(t=""),e=e.iterator;e.next();){var i=e.value,n=i.sourceProperty;if((t===""||n===""||n===t)&&(n=i.targetProperty,i.converter!==null||n!=="")){n=this.data;var r=i.sourceName;if(r!==null){if(r==="")n=this;else if(r==="/")n=this;else if(r===".")n=this;else if(r==="..")n=this;else if(n=this.fb(r),n===null)continue}else if(i.isToModel)if(n=this.diagram,n!==null)n=n.model.modelData;else continue;var s=this,l=i.xi;if(l!==-1){if(s=this.es(l),s===null)continue}else i.td!==null&&(s=i.td);if(r==="/"?n=s.part:r==="."?n=s:r===".."&&(n=s.panel),r=i.qo,r!==0){if(!(s instanceof _))continue;r===1?s=s.getColumnDefinition(i.sl):r===2&&(s=s.getRowDefinition(i.sl))}s!==void 0&&i.Iv(s,n)}}},o.ox=function(t){return t==null||this.ce===null?null:this.ce.I(t)};function uj(t,e){t=t.O.s;for(var i=t.length,n=e.length,r=0,s=null;r<i&&(s=t[r],!(s instanceof _&&s.data!==null));)r++,s=t[r];if(i-r!==n)return!0;if(s===null)return 0<n;for(var l=0;r<i&&l<n;){if(s=t[r],!(s instanceof _)||s.data!==e[l])return!0;r++,l++}return!1}function Sf(t){if(t.type===_.Spot||t.type===_.Auto)return Math.min(t.O.length,1);if(t.type===_.Link){t=t.O;for(var e=t.length,i=0;i<e;i++){var n=t.L(i);if(!(n instanceof wt&&n.isPanelMain))break}return i}return t.type===_.Table&&0<t.O.length&&(t=t.O.L(0),t.isPanelMain&&t instanceof _&&Co(t))?1:0}o.kv=function(){for(var t=Sf(this);this.O.length>t;)this.mc(this.O.length-1,!1);v2(this,this.itemArray)};function v2(t,e){var i=Sf(t);if(e===null||e.length===0)for(;t.O.length>i;)t.mc(t.O.length-1,!1);else if(t.O.length<=i){i=e.length;for(var n=0;n<i;n++)sd(t,e[n],n,!0)}else{n=i;for(var r=0;r<e.length;r++,n++){var s=e[r],l=n<t.O.length?t.O.L(n):null;if(l instanceof _){if(l.data!==s){var h=Jm(t,l.data),a=Jm(t,s),f=a!==h;f||(h=Zm(t,h),f=Zm(t,a)!==h),f?(t.mc(n,!1),sd(t,s,r,!1)):l.data=s}}else sd(t,s,r,!1)}for(;n<t.O.length;)t.mc(n,!1);t.Wg=null,$m(t,i,0),Jo(t)||t.v(),t.graduatedIntervals=null,t.Gf()||ld(t,t,!1),e=t.part,e!==null&&(e.Oh=null,e.Yf=NaN,t.Qe&&e instanceof b&&(e.Qe=!0),e.Qe&&e instanceof b&&(e.tc=null))}}function sd(t,e,i,n){if(!(e==null||0>i)){var r=Jm(t,e);if(r=Zm(t,r),r!==null){if(Dn(r),r=r.copy(),r.o&16777216){var s=t.eh();s!==null&&Wm(s,!0)}typeof e=="object"&&(t.ce===null&&(t.ce=new vt),t.ce.add(e,r)),s=i+Sf(t),t.Eb(s,r),n&&(r.ub=e,$m(t,s,i),r.ub=null),r.data=e}}}function $m(t,e,i){for(t=t.O;e<t.length;){var n=t.L(e);if(n instanceof _){var r=e,s=i;n.type===_.TableRow?n.row=r:n.type===_.TableColumn&&(n.column=r),n.itemIndex=s}e++,i++}}function Jm(t,e){if(e===null)return"";if(t=t.itemCategoryProperty,typeof t=="function")t=t(e);else if(typeof t=="string"&&typeof e=="object"){if(t==="")return"";t=ae(e,t)}else return"";if(t===void 0)return"";if(typeof t=="string")return t;R("Panel.getCategoryForItemData found a non-string category for "+e+": "+t)}function Zm(t,e){var i=t.itemTemplateMap,n=null;return i!==null&&(n=i.I(e)),n===null&&(i!==null&&(n=i.I("")),n===null&&(x2||(x2=!0,Lt('No item template Panel found for category "'+e+'" on '+t),Lt("  Using default item template."),t=new _,e=new Gt,e.bind(new ce("text","",Gi)),t.add(e),w2=t),n=w2)),n}function ld(t,e,i){var n=e.enabledChanged;if(n!==null&&n(e,i),e instanceof _){e=e.O.s,n=e.length;for(var r=0;r<n;r++){var s=e[r];i&&s instanceof _&&!s.isEnabled||ld(t,s,i)}}}function Ar(t,e){e.name=t,Qn.add(t,e)}z.Object.defineProperties(_.prototype,{type:{get:function(){return this.na},set:function(t){var e=this.na;e!==t&&(this.na=t,this.isAtomic=this.na===_.Grid,this.v(),this.g("type",e,t))}},elements:{get:function(){return this.O.iterator}},naturalBounds:{get:function(){return this.ac}},padding:{get:function(){return this.yb},set:function(t){typeof t=="number"?(0>t&&dt(t,">= 0",_,"padding"),t=new Rt(t)):(0>t.left&&dt(t.left,">= 0",_,"padding:value.left"),0>t.right&&dt(t.right,">= 0",_,"padding:value.right"),0>t.top&&dt(t.top,">= 0",_,"padding:value.top"),0>t.bottom&&dt(t.bottom,">= 0",_,"padding:value.bottom"));var e=this.yb;e.C(t)||(this.yb=t=t.J(),this.v(),this.g("padding",e,t))}},defaultAlignment:{get:function(){return this.Qm},set:function(t){var e=this.Qm;e.C(t)||(this.Qm=t=t.J(),this.v(),this.g("defaultAlignment",e,t))}},defaultStretch:{get:function(){return this.Sf},set:function(t){var e=this.Sf;e!==t&&(this.Sf=t,this.v(),this.g("defaultStretch",e,t))}},defaultSeparatorPadding:{get:function(){return this.T!==null?this.T.Lp:ih},set:function(t){typeof t=="number"&&(t=new Rt(t));var e=this.defaultSeparatorPadding;e.C(t)||(t=t.J(),this.T===null&&(this.T=new Mn),this.T.Lp=t,this.v(),this.g("defaultSeparatorPadding",e,t))}},defaultRowSeparatorStroke:{get:function(){return this.T!==null?this.T.ga:null},set:function(t){var e=this.defaultRowSeparatorStroke;e!==t&&(t===null||typeof t=="string"||t instanceof Dt)&&(t instanceof Dt&&t.freeze(),this.T===null&&(this.T=new Mn),this.T.ga=t,this.N(),this.g("defaultRowSeparatorStroke",e,t))}},defaultRowSeparatorStrokeWidth:{get:function(){return this.T!==null?this.T.Ha:1},set:function(t){var e=this.defaultRowSeparatorStrokeWidth;e!==t&&isFinite(t)&&0<=t&&(this.T===null&&(this.T=new Mn),this.T.Ha=t,this.v(),this.g("defaultRowSeparatorStrokeWidth",e,t))}},defaultRowSeparatorDashArray:{get:function(){return this.T!==null?this.T.V:null},set:function(t){var e=this.defaultRowSeparatorDashArray;if(e!==t){if(t!==null){for(var i=t.length,n=0,r=0;r<i;r++){var s=t[r];typeof s=="number"&&0<=s&&isFinite(s)||R("defaultRowSeparatorDashArray value "+s+" at index "+r+" must be a positive number or zero."),n+=s}if(n===0){if(e===null)return;t=null}}this.T===null&&(this.T=new Mn),this.T.V=t,this.N(),this.g("defaultRowSeparatorDashArray",e,t)}}},defaultColumnSeparatorStroke:{get:function(){return this.T!==null?this.T.u:null},set:function(t){var e=this.defaultColumnSeparatorStroke;e!==t&&(t===null||typeof t=="string"||t instanceof Dt)&&(t instanceof Dt&&t.freeze(),this.T===null&&(this.T=new Mn),this.T.u=t,this.N(),this.g("defaultColumnSeparatorStroke",e,t))}},defaultColumnSeparatorStrokeWidth:{get:function(){return this.T!==null?this.T.F:1},set:function(t){var e=this.defaultColumnSeparatorStrokeWidth;e!==t&&isFinite(t)&&0<=t&&(this.T===null&&(this.T=new Mn),this.T.F=t,this.v(),this.g("defaultColumnSeparatorStrokeWidth",e,t))}},defaultColumnSeparatorDashArray:{get:function(){return this.T!==null?this.T.m:null},set:function(t){var e=this.defaultColumnSeparatorDashArray;if(e!==t){if(t!==null){for(var i=t.length,n=0,r=0;r<i;r++){var s=t[r];typeof s=="number"&&0<=s&&isFinite(s)||R("defaultColumnSeparatorDashArray value "+s+" at index "+r+" must be a positive number or zero."),n+=s}if(n===0){if(e===null)return;t=null}}this.T===null&&(this.T=new Mn),this.T.m=t,this.N(),this.g("defaultColumnSeparatorDashArray",e,t)}}},inRowsCols:{get:function(){return this.T!==null?this.T.ob:null},set:function(t){this.T===null&&(this.T=new Mn),this.T.ob=t}},viewboxStretch:{get:function(){return this.uo},set:function(t){var e=this.uo;e!==t&&(this.uo=t,this.v(),this.g("viewboxStretch",e,t))}},gridCellSize:{get:function(){return this.fn},set:function(t){var e=this.fn;if(!e.C(t)){t.w()&&t.width!==0&&t.height!==0||R("Invalid Panel.gridCellSize: "+t),this.fn=t.J();var i=this.diagram;i!==null&&this===i.grid&&Wo(i),this.N(),this.g("gridCellSize",e,t)}}},gridOrigin:{get:function(){return this.gn},set:function(t){var e=this.gn;if(!e.C(t)){t.w()||R("Invalid Panel.gridOrigin: "+t),this.gn=t.J();var i=this.diagram;i!==null&&this===i.grid&&Wo(i),this.N(),this.g("gridOrigin",e,t)}}},graduatedMin:{get:function(){return this.ra!==null?this.ra.fq:0},set:function(t){var e=this.graduatedMin;e!==t&&(this.ra===null&&(this.ra=new To),this.ra.fq=t,this.v(),this.g("graduatedMin",e,t),yu(this)&&(t=this.part,t!==null&&pl(this,t,"graduatedRange")))}},graduatedMax:{get:function(){return this.ra!==null?this.ra.F:100},set:function(t){var e=this.graduatedMax;e!==t&&(this.ra===null&&(this.ra=new To),this.ra.F=t,this.v(),this.g("graduatedMax",e,t),yu(this)&&(t=this.part,t!==null&&pl(this,t,"graduatedRange")))}},graduatedRange:{get:function(){return this.graduatedMax-this.graduatedMin}},graduatedTickUnit:{get:function(){return this.ra!==null?this.ra.ga:10},set:function(t){var e=this.graduatedTickUnit;e!==t&&0<t&&(this.ra===null&&(this.ra=new To),this.ra.ga=t,this.v(),this.g("graduatedTickUnit",e,t))}},graduatedTickBase:{get:function(){return this.ra!==null?this.ra.V:0},set:function(t){var e=this.graduatedTickBase;e!==t&&(this.ra===null&&(this.ra=new To),this.ra.V=t,this.v(),this.g("graduatedTickBase",e,t))}},graduatedMarks:{get:function(){return this.ra!==null?this.ra.u:null},set:function(t){this.ra!==null?this.ra.u=t:t!==null&&(this.ra=new To,this.ra.u=t)}},graduatedBounds:{get:function(){return this.ra!==null?this.ra.j:null},set:function(t){this.ra!==null?this.ra.j=t:t!==null&&(this.ra=new To,this.ra.j=t)}},graduatedIntervals:{get:function(){return this.ra!==null?this.ra.m:null},set:function(t){this.ra!==null?this.ra.m=t:t!==null&&(this.ra=new To,this.ra.m=t)}},temporaryTextBlock:{get:function(){return this.ra!==null?this.ra.Wh:null},set:function(t){this.ra!==null?this.ra.Wh=t:t!==null&&(this.ra=new To,this.ra.Wh=t)}},panelLayoutState:{get:function(){return this.F},set:function(t){this.F=t}},Qe:{get:function(){return(this.o&8388608)!==0},set:function(t){(this.o&8388608)!==0!==t&&(this.o^=8388608)}},rowDefs:{get:function(){return this.T===null&&(this.T=new Mn),this.T.Mc}},rowCount:{get:function(){return this.T===null?0:this.rowDefs.length}},colDefs:{get:function(){return this.T===null&&(this.T=new Mn),this.T.Lc}},columnCount:{get:function(){return this.T===null?0:this.colDefs.length}},rowSizing:{get:function(){return this.T!==null?this.T.pb:hd},set:function(t){var e=this.rowSizing;e!==t&&(this.T===null&&(this.T=new Mn),this.T.pb=t,this.v(),this.g("rowSizing",e,t))}},columnSizing:{get:function(){return this.T!==null?this.T.j:hd},set:function(t){var e=this.columnSizing;e!==t&&(this.T===null&&(this.T=new Mn),this.T.j=t,this.v(),this.g("columnSizing",e,t))}},topIndex:{get:function(){return this.T!==null?this.T.Fb:0},set:function(t){var e=this.topIndex;e!==t&&((!isFinite(t)||0>t)&&R("Panel.topIndex must be greater than zero and a real number, not: "+t),this.T===null&&(this.T=new Mn),this.T.Fb=t,this.v(),this.g("topIndex",e,t))}},leftIndex:{get:function(){return this.T!==null?this.T.hb:0},set:function(t){var e=this.leftIndex;e!==t&&((!isFinite(t)||0>t)&&R("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.T===null&&(this.T=new Mn),this.T.hb=t,this.v(),this.g("leftIndex",e,t))}},data:{get:function(){return this.ub},set:function(t){var e=this.ub;if(e!==t){var i=this instanceof lt&&!(this instanceof jt);Dn(this),this.ub=t;var n=this.diagram;n!==null&&(i?(i=n.partManager,this instanceof X?(e!==null&&i.Ze.remove(e),t!==null&&i.Ze.add(t,this)):this instanceof lt&&(e!==null&&i.$e.remove(e),t!==null&&i.$e.add(t,this))):(i=this.panel,i!==null&&i.ce!==null&&(e!==null&&i.ce.remove(e),t!==null&&i.ce.add(t,this)))),this.g("data",e,t),n!==null&&n.undoManager.isUndoingRedoing||t!==null&&this.Ma()}}},itemIndex:{get:function(){return this.wn},set:function(t){var e=this.wn;e!==t&&(this.wn=t,this.g("itemIndex",e,t))}},allBindings:{get:function(){return this.A!==null?this.A.ob:null},set:function(t){this.localBindings!==t&&(this.A===null&&(this.A=new mu),this.A.ob=t)}},itemArray:{get:function(){return this.Eh},set:function(t){var e=this.Eh;if(e!==t||t!==null&&uj(this,t)){var i=this.diagram;e!==t&&(i!==null&&e!==null&&Bv(i.partManager,this,i),this.Eh=t,i!==null&&t!==null&&Rv(i.partManager,this)),this.g("itemArray",e,t),i!==null&&i.undoManager.isUndoingRedoing||v2(this,t)}}},itemTemplate:{get:function(){return this.itemTemplateMap===null?null:this.itemTemplateMap.I("")},set:function(t){if(this.itemTemplateMap===null){if(t===null)return;this.itemTemplateMap=new vt}var e=this.itemTemplateMap.I("");e!==t&&((t instanceof lt||t.isPanelMain)&&R("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.itemTemplateMap.add("",t),this.g("itemTemplate",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.kv())}},itemTemplateMap:{get:function(){return this.A!==null?this.A.Mc:null},set:function(t){var e=this.itemTemplateMap;if(e!==t){for(var i=t.iterator;i.next(););Pe(this),this.A.Mc=t,this.g("itemTemplateMap",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.kv()}}},itemCategoryProperty:{get:function(){return this.A!==null?this.A.Lc:"category"},set:function(t){var e=this.itemCategoryProperty;e!==t&&(Pe(this),this.A.Lc=t,this.g("itemCategoryProperty",e,t))}},isAtomic:{get:function(){return(this.o&1048576)!==0},set:function(t){var e=(this.o&1048576)!==0;e!==t&&(this.o^=1048576,this.g("isAtomic",e,t))}},isClipping:{get:function(){return(this.o&2097152)!==0},set:function(t){var e=(this.o&2097152)!==0;e!==t&&(this.o^=2097152,this instanceof yt&&(this.ib=null),this.v(),this.g("isClipping",e,t))}},isOpposite:{get:function(){return(this.o&33554432)!==0},set:function(t){var e=(this.o&33554432)!==0;e!==t&&(this.o^=33554432,this.v(),this.g("isOpposite",e,t))}},isEnabled:{get:function(){return(this.o&4194304)!==0},set:function(t){var e=(this.o&4194304)!==0;if(e!==t){var i=this.panel===null||this.panel.Gf();this.o^=4194304,this.g("isEnabled",e,t),e=this.diagram,e!==null&&e.undoManager.isUndoingRedoing||i&&ld(this,this,t)}}},alignmentFocusName:{get:function(){return this.Xe},set:function(t){var e=this.Xe;e!==t&&(this.Xe=t,this.v(),this.g("alignmentFocusName",e,t))}}}),z.Object.defineProperties(_,{Position:{get:function(){return Qn.I("Position")}},Horizontal:{get:function(){return Qn.I("Horizontal")}},Vertical:{get:function(){return Qn.I("Vertical")}},Spot:{get:function(){return Qn.I("Spot")}},Auto:{get:function(){return Qn.I("Auto")}},Table:{get:function(){return Qn.I("Table")}},Viewbox:{get:function(){return Qn.I("Viewbox")}},TableRow:{get:function(){return Qn.I("TableRow")}},TableColumn:{get:function(){return Qn.I("TableColumn")}},Link:{get:function(){return Qn.I("Link")}},Grid:{get:function(){return Qn.I("Grid")}},Graduated:{get:function(){return Qn.I("Graduated")}}}),_.prototype.rebuildItemElements=_.prototype.kv,_.prototype.findItemPanelForData=_.prototype.ox,_.prototype.updateTargetBindings=_.prototype.Ma,_.prototype.copyTemplate=_.prototype.Py,_.prototype.graduatedValueForPoint=_.prototype.Bz,_.prototype.graduatedPointForValue=_.prototype.Az,_.prototype.findColumnForLocalX=_.prototype.az,_.prototype.findRowForLocalY=_.prototype.iz,_.prototype.removeColumnDefinition=_.prototype.cA,_.prototype.removeRowDefinition=_.prototype.hA,_.prototype.removeAt=_.prototype.nb,_.prototype.remove=_.prototype.remove,_.prototype.insertAt=_.prototype.Eb,_.prototype.elt=_.prototype.L,_.prototype.add=_.prototype.add,_.prototype.findObject=_.prototype.fb,_.prototype.findInVisualTree=_.prototype.Il,_.prototype.walkVisualTreeFrom=_.prototype.nm,_.prototype.findMainElement=_.prototype.sb;var x2=!1,w2=null,Qn=new vt;_.className="Panel",_.definePanelLayout=Ar,Ar("Position",new $p),Ar("Vertical",new Zp),Ar("Auto",new qp),Ar("Link",new rd);function To(){this.fq=0,this.F=100,this.ga=10,this.V=0,this.Wh=this.m=this.j=this.u=null}To.prototype.copy=function(){var t=new To;return t.fq=this.fq,t.F=this.F,t.ga=this.ga,t.V=this.V,t.u=this.u,t.j=this.j,t.m=this.m,t.Wh=this.Wh,t},To.className="GradPanelSettings";function Mn(){this.Mc=[],this.Lc=[],this.j=this.pb=hd,this.hb=this.Fb=0,this.Lp=ih,this.Ha=1,this.V=this.ga=null,this.F=1,this.ob=this.m=this.u=null}Mn.prototype.copy=function(t){for(var e=new Mn,i=this.Mc,n=i.length,r=e.Mc,s=0;s<n;s++)if(i[s]!==void 0){var l=i[s].copy();l.ti(t),r[s]=l}for(i=this.Lc,n=i.length,r=e.Lc,s=0;s<n;s++)i[s]!==void 0&&(l=i[s].copy(),l.ti(t),r[s]=l);return e.pb=this.pb,e.j=this.j,e.Fb=this.Fb,e.hb=this.hb,e.Lp=this.Lp.J(),e.Ha=this.Ha,e.ga=this.ga,e.V=this.V,e.F=this.F,e.u=this.u,e.m=this.m,e.ob=this.ob,e},Mn.className="TablePanelSettings";function Ce(t){Oe(this),this.Je=null,this.oq=!0,this.Za=0,this.Ec=NaN,this.hj=0,this.fj=1/0,this.Hb=Je,this.pa=this.kc=this.oa=0,this.Yd=null,this.lo=Qm,this.eg=Jn,this.io=this.ag=null,this.jo=NaN,this.Oa=this.rj=null,this.Mm=!1,t&&(Object.assign(this,t),t.column!==void 0?(this.isRow=!1,this.index=t.column):t.row!==void 0&&(this.isRow=!0,this.index=t.row))}Ce.prototype.copy=function(){var t=new Ce;return t.oq=this.oq,t.Za=this.Za,t.Ec=this.Ec,t.hj=this.hj,t.fj=this.fj,t.Hb=this.Hb,t.oa=this.oa,t.kc=this.kc,t.pa=this.pa,t.eg=this.eg,t.lo=this.lo,this.ag===null?t.ag=null:t.ag=this.ag.J(),t.io=this.io,t.jo=this.jo,t.rj=null,this.rj!==null&&(t.separatorDashArray=ee(this.separatorDashArray)),t.Oa=this.Oa,t.Mm=this.Mm,t.Yd=this.Yd,t};function S2(t,e){e.isRow?t.height=e.height:t.width=e.width,t.minimum=e.minimum,t.maximum=e.maximum,t.alignment=e.alignment,t.stretch=e.stretch,t.sizing=e.sizing,t.ag=e.separatorPadding===null?null:e.separatorPadding.J(),t.separatorStroke=e.separatorStroke,t.separatorStrokeWidth=e.separatorStrokeWidth,t.rj=null,e.separatorDashArray&&(t.rj=ee(e.separatorDashArray)),t.background=e.background,t.coversSeparators=e.coversSeparators,t.Yd=e.Yd}o=Ce.prototype,o.rb=function(t){t.classType===Ce&&(this.sizing=t)},o.toString=function(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+Ei(this)},o.ti=function(t){this.Je=t},o.Fo=function(t){var e=0,i=this.Je;if(this.index!==t&&(t=this.separatorStroke,t===null&&i!==null&&(t=this.isRow?i.defaultRowSeparatorStroke:i.defaultColumnSeparatorStroke),t!==null&&(e=this.separatorStrokeWidth,isNaN(e)&&(i!==null?e=this.isRow?i.defaultRowSeparatorStrokeWidth:i.defaultColumnSeparatorStrokeWidth:e=0))),t=this.ag,t===null)if(i!==null)t=i.defaultSeparatorPadding;else return e;return e+(this.isRow?t.top:t.left)},o.Rc=function(){var t=0,e=this.Je,i=0,n=this.isRow;if(e!==null&&e.type===_.Table)for(var r=n?e.rowDefs.length:e.colDefs.length,s=0;s<r;s++){var l=n?e.rowDefs[s]:e.colDefs[s];if(l!==void 0&&l.oa!==0){i=l.index;break}}if(this.index!==i&&(i=this.separatorStroke,i===null&&e!==null&&(i=n?e.defaultRowSeparatorStroke:e.defaultColumnSeparatorStroke),i!==null&&(t=this.separatorStrokeWidth,isNaN(t)&&(e!==null?t=n?e.defaultRowSeparatorStrokeWidth:e.defaultColumnSeparatorStrokeWidth:t=0))),n=this.ag,n===null)if(e!==null)n=e.defaultSeparatorPadding;else return t;return t+(this.isRow?n.top+n.bottom:n.left+n.right)},o.Lb=function(t,e,i){var n=this.Je;if(n!==null&&(n.cb(Qt,t,this,e,i,void 0,void 0),this.Yd!==null&&(e=n.diagram,e!==null&&!e.skipsModelSourceBindings&&(n=n.eh(),n!==null&&(e=n.data,e!==null)))))for(i=this.Yd.iterator;i.next();)i.value.np(this,e,t,n)};function ud(t){if(t.sizing===Qm){var e=t.Je;return t.isRow?e.rowSizing:e.columnSizing}return t.sizing}o.bind=function(t,e,i,n){var r=null;return typeof t=="string"?r=new ce(t,e,i,n):r=t,r.td=this,t=this.panel,t!==null&&(e=t.eh(),e!==null&&m2(e)&&R("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+r+" on "+t)),this.Yd===null&&(this.Yd=new tt),this.Yd.add(r),this},z.Object.defineProperties(Ce.prototype,{panel:{get:function(){return this.Je}},isRow:{get:function(){return this.oq},set:function(t){this.oq=t}},index:{get:function(){return this.Za},set:function(t){this.Za=t}},height:{get:function(){return this.Ec},set:function(t){var e=this.Ec;e!==t&&(0>t&&dt(t,">= 0",Ce,"height"),this.Ec=t,this.actual=this.oa,this.panel!==null&&this.panel.v(),this.Lb("height",e,t))}},width:{get:function(){return this.Ec},set:function(t){var e=this.Ec;e!==t&&(0>t&&dt(t,">= 0",Ce,"width"),this.Ec=t,this.actual=this.oa,this.panel!==null&&this.panel.v(),this.Lb("width",e,t))}},minimum:{get:function(){return this.hj},set:function(t){var e=this.hj;e!==t&&((0>t||!isFinite(t))&&dt(t,">= 0",Ce,"minimum"),this.hj=t,this.actual=this.oa,this.panel!==null&&this.panel.v(),this.Lb("minimum",e,t))}},maximum:{get:function(){return this.fj},set:function(t){var e=this.fj;e!==t&&(0>t&&dt(t,">= 0",Ce,"maximum"),this.fj=t,this.actual=this.oa,this.panel!==null&&this.panel.v(),this.Lb("maximum",e,t))}},alignment:{get:function(){return this.Hb},set:function(t){var e=this.Hb;e.C(t)||(this.Hb=t.J(),this.panel!==null&&this.panel.v(),this.Lb("alignment",e,t))}},stretch:{get:function(){return this.eg},set:function(t){var e=this.eg;e!==t&&(this.eg=t,this.panel!==null&&this.panel.v(),this.Lb("stretch",e,t))}},separatorPadding:{get:function(){return this.ag},set:function(t){typeof t=="number"&&(t=new Rt(t));var e=this.ag;t!==null&&e!==null&&e.C(t)||(t!==null&&(t=t.J()),this.ag=t,this.panel!==null&&this.panel.v(),this.Lb("separatorPadding",e,t))}},separatorStroke:{get:function(){return this.io},set:function(t){var e=this.io;e!==t&&(t!==null&&xu(t,"RowColumnDefinition.separatorStroke"),t instanceof Dt&&t.freeze(),this.io=t,this.panel!==null&&this.panel.v(),this.Lb("separatorStroke",e,t))}},separatorStrokeWidth:{get:function(){return this.jo},set:function(t){var e=this.jo;e!==t&&(this.jo=t,this.panel!==null&&this.panel.v(),this.Lb("separatorStrokeWidth",e,t))}},separatorDashArray:{get:function(){return this.rj},set:function(t){var e=this.rj;if(e!==t){if(t!==null){for(var i=t.length,n=0,r=0;r<i;r++){var s=t[r];typeof s=="number"&&0<=s&&isFinite(s)||R("separatorDashArray value "+s+" at index "+r+" must be a positive number or zero."),n+=s}if(n===0){if(e===null)return;t=null}}this.rj=t,this.panel!==null&&this.panel.N(),this.Lb("separatorDashArray",e,t)}}},background:{get:function(){return this.Oa},set:function(t){var e=this.Oa;e!==t&&(t!==null&&xu(t,"RowColumnDefinition.background"),t instanceof Dt&&t.freeze(),this.Oa=t,this.panel!==null&&this.panel.N(),this.Lb("background",e,t))}},coversSeparators:{get:function(){return this.Mm},set:function(t){var e=this.Mm;e!==t&&(this.Mm=t,this.panel!==null&&this.panel.N(),this.Lb("coversSeparators",e,t))}},sizing:{get:function(){return this.lo},set:function(t){var e=this.lo;e!==t&&(this.lo=t,this.panel!==null&&this.panel.v(),this.Lb("sizing",e,t))}},actual:{get:function(){return this.oa},set:function(t){this.oa=isNaN(this.Ec)?Math.max(Math.min(this.fj,t),this.hj):Math.max(Math.min(this.fj,this.Ec),this.hj)}},measured:{get:function(){return this.kc},set:function(t){this.kc=t}},total:{get:function(){return this.oa+this.Rc()}},position:{get:function(){return this.pa},set:function(t){this.pa=t}}}),Ce.prototype.computeEffectiveSpacing=Ce.prototype.Rc,Ce.prototype.computeEffectiveSpacingTop=Ce.prototype.Fo;var Qm=new Q(Ce,"Default",0),Mf=new Q(Ce,"None",1),hd=new Q(Ce,"ProportionalExtra",2);Ce.className="RowColumnDefinition",Ce.Default=Qm,Ce.None=Mf,Ce.ProportionalExtra=hd;function wt(t,e){ot.call(this),this.Kd=this.ta=null,this.Ym="None",this.uc=this.Ri="black",this.fg=1,this.Na=this.Ug=null,this.Sn=this.Rn=NaN,this.fa=null,typeof t=="string"?this.figure=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}B(wt,ot),wt.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.ta=this.ta,t.Kd=this.Kd,t.Ym=this.Ym,t.Ri=this.Ri,t.uc=this.uc,t.fg=this.fg,this.Ug!==null&&(t.Ug=ee(this.Ug)),this.Na!==null&&(t.Na=this.Na.jc?this.Na:this.Na.copy()),t.Rn=this.Rn,t.Sn=this.Sn,this.fa!==null&&(t.fa=this.fa.copy())};function xl(t){t.Na===null?t.Na=new tv:t.Na.jc&&(t.Na=t.Na.copy())}o=wt.prototype,o.ph=function(){ot.prototype.ph.call(this),this.Na!==null&&(this.Na.jc=!0)},o.rb=function(t){t===he||t===Fr||t===cf||t===Jn?this.geometryStretch=t:ot.prototype.rb.call(this,t)},o.toString=function(){return"Shape("+(this.figure!=="None"?this.figure:this.toArrow!=="None"?this.toArrow:this.fromArrow)+")#"+Ei(this)};function Dh(t,e,i,n){var r=i.length;if(!(4>r)){var s=n.measuredBounds,l=Math.max(1,s.width);s=s.height;for(var h=i[0],a=i[1],f,p,d,y,x,v,S=0,N=Yt(),k=2;k<r;k+=2)f=i[k],p=i[k+1],d=f-h,h=p-a,d===0&&(d=.001),y=h/d,x=Math.atan2(h,d),v=Math.sqrt(d*d+h*h),N.push([d,x,y,v]),S+=v,h=f,a=p;h=i[0],a=i[1],d=n.measuredBounds.width,n instanceof wt&&(d-=n.strokeWidth),1>d&&(d=1),r=i=d,f=l/2,p=f!==0,k=0,v=N[k],d=v[0],x=v[1],y=v[2],v=v[3];for(var C=0;.1<=S;){if(C===0&&(p?(r=i,r-=f,S-=f,p=!1):r=i,r===0&&(r=1)),r>S){Vt(N);return}r>v?(C=r-v,r=v):C=0;var T=Math.sqrt(r*r/(1+y*y));if(0>d&&(T=-T),h+=T,a+=y*T,t.translate(h,a),t.rotate(x),t.translate(-(l/2),-(s/2)),C===0&&n.dh(t,e),t.translate(l/2,s/2),t.rotate(-x),t.translate(-h,-a),S-=r,v-=r,C!==0){if(k++,k===N.length){Vt(N);return}v=N[k],d=v[0],x=v[1],y=v[2],v=v[3],r=C}}Vt(N)}}o.dh=function(t,e){var i=this.uc,n=this.Ri;if(i!==null||n!==null){var r=this.ta;if(r!==null){t.vc();var s=this.actualBounds,l=this.naturalBounds;n!==null&&sn(this,t,n,!0,!1,l,s);var h=this.part,a=this.fg;if(i===null||a!==0||h===null||!this.isPanelMain&&h.sb()!==this||(a=h.type===_.Link&&h instanceof jt&&h.category==="Selection"&&h.adornedObject instanceof wt&&h.adornedPart.sb()===h.adornedObject?h.adornedObject.strokeWidth:0),a===0&&(i=null),i!==null&&a!==0&&(sn(this,t,i,!1,!1,l,s),t.lineWidth=a,t.lineJoin=this.strokeJoin,t.lineCap=this.strokeCap,t.miterLimit=this.strokeMiterLimit),s=!1,h&&e.Ef("drawShadows")&&(s=h.isShadowed),t.Dl===!1&&(s=!1),h=!0,i===null||n!==null&&n!=="transparent"||(h=!1),l=!1,a=this.strokeDashArray,a!==null&&(l=!0,t.ds(a,this.strokeDashOffset)),r.type===W.j)t.beginPath(),t.moveTo(r.startX,r.startY),t.lineTo(r.endX,r.endY),i!==null&&t.fk(),t.Pe();else if(r.type===W.u){var f=r.startX;a=r.startY;var p=r.endX,d=r.endY;r=Math.min(f,p);var y=Math.min(a,d);f=Math.abs(p-f),a=Math.abs(d-a),t.beginPath(),t.rect(r,y,f,a),n!==null&&t.kg(n),i!==null&&(h&&s&&Zr(t),t.fk(),h&&s&&Mo(t)),t.Pe()}else if(r.type===W.F)f=r.startX,a=r.startY,p=r.endX,d=r.endY,r=Math.abs(p-f)/2,y=Math.abs(d-a)/2,f=Math.min(f,p)+r,a=Math.min(a,d)+y,t.beginPath(),t.moveTo(f,a-y),t.bezierCurveTo(f+F.tg*r,a-y,f+r,a-F.tg*y,f+r,a),t.bezierCurveTo(f+r,a+F.tg*y,f+F.tg*r,a+y,f,a+y),t.bezierCurveTo(f-F.tg*r,a+y,f-r,a+F.tg*y,f-r,a),t.bezierCurveTo(f-r,a-F.tg*y,f-F.tg*r,a-y,f,a-y),t.closePath(),n!==null&&t.kg(n),i!==null&&(h&&s&&Zr(t),t.fk(),h&&s&&Mo(t)),t.Pe();else if(r.type===W.m)for(r=r.figures,a=r.length,y=0;y<a;y++){f=r.s[y],t.beginPath(),t.moveTo(f.startX,f.startY),p=f.segments.s,d=p.length;for(var x=null,v=0;v<d;v++){var S=p[v];switch(S.type){case Wn:t.moveTo(S.endX,S.endY);break;case te:t.lineTo(S.endX,S.endY);break;case dn:t.bezierCurveTo(S.point1X,S.point1Y,S.point2X,S.point2Y,S.endX,S.endY);break;case Er:t.quadraticCurveTo(S.point1X,S.point1Y,S.endX,S.endY);break;case me:if(S.radiusX===S.radiusY){var N=Math.PI/180;t.arc(S.point1X,S.point1Y,S.radiusX,S.startAngle*N,(S.startAngle+S.sweepAngle)*N,0>S.sweepAngle,x!==null?x.endX:f.startX,x!==null?x.endY:f.startY)}else if(x=wo(S,f),N=x.length,N===0)t.lineTo(S.centerX,S.centerY);else for(var k=0;k<N;k++){var C=x[k];k===0&&t.lineTo(C[0],C[1]),t.bezierCurveTo(C[2],C[3],C[4],C[5],C[6],C[7])}break;case ar:if(k=N=0,x!==null&&x.type===me){if(x=wo(x,f),C=x.length,C===0){t.lineTo(S.endX,S.endY);break}x=x[C-1]||null,x!==null&&(N=x[6],k=x[7])}else N=x!==null?x.endX:f.startX,k=x!==null?x.endY:f.startY;if(x=ul(S,f,N,k),N=x.length,N===0){t.lineTo(S.endX,S.endY);break}for(k=0;k<N;k++)C=x[k],t.bezierCurveTo(C[2],C[3],C[4],C[5],C[6],C[7]);break;default:R("Segment not of valid type: "+S.type)}S.isClosed&&t.closePath(),x=S}p=f.isFilled,s?f.isShadowed?(p===!0&&n!=="transparent"&&n!==null&&t.kg(n,f.isEvenOdd),i!==null&&(p&&h&&Zr(t),t.fk(),p&&h&&Mo(t))):(Zr(t),p&&n!=="transparent"&&n!==null&&t.kg(n,f.isEvenOdd),i!==null&&t.fk(),Mo(t)):(p&&n!==null&&t.kg(n,f.isEvenOdd),i!==null&&t.fk()),t.Pe(y)}if(l&&t.$r(),this.pathPattern!==null){if(i=this.pathPattern,i.measure(1/0,1/0),n=i.measuredBounds,i.arrange(0,0,n.width,n.height),s=this.geometry,t.save(),t.beginPath(),n=Yt(),s.type===W.j)n.push(s.startX),n.push(s.startY),n.push(s.endX),n.push(s.endY),Dh(t,e,n,i);else if(s.type===W.m)for(s=s.figures.iterator;s.next();){for(h=s.value,n.length=0,n.push(h.startX),n.push(h.startY),l=h.startX,r=h.startY,a=l,y=r,f=h.segments.s,p=f.length,d=0;d<p;d++){switch(v=f[d],v.type){case Wn:Dh(t,e,n,i),n.length=0,n.push(v.endX),n.push(v.endY),l=v.endX,r=v.endY,a=l,y=r;break;case te:n.push(v.endX),n.push(v.endY),l=v.endX,r=v.endY;break;case dn:F.Ne(l,r,v.point1X,v.point1Y,v.point2X,v.point2Y,v.endX,v.endY,.5,n),l=v.endX,r=v.endY;break;case Er:F.Zo(l,r,v.point1X,v.point1Y,v.endX,v.endY,.5,n),l=v.endX,r=v.endY;break;case me:if(S=wo(v,h),x=S.length,x===0){n.push(v.centerX),n.push(v.centerY),l=v.centerX,r=v.centerY;break}for(N=0;N<x;N++)k=S[N],F.Ne(l,r,k[2],k[3],k[4],k[5],k[6],k[7],.5,n),l=k[6],r=k[7];break;case ar:if(S=ul(v,h,l,r),x=S.length,x===0){n.push(v.endX),n.push(v.endY),l=v.endX,r=v.endY;break}for(N=0;N<x;N++)k=S[N],F.Ne(l,r,k[2],k[3],k[4],k[5],k[6],k[7],.5,n),l=k[6],r=k[7];break;default:R("Segment not of valid type: "+v.type)}v.isClosed&&(n.push(a),n.push(y),Dh(t,e,n,i))}Dh(t,e,n,i)}else if(s.type===W.u)n.push(s.startX),n.push(s.startY),n.push(s.endX),n.push(s.startY),n.push(s.endX),n.push(s.endY),n.push(s.startX),n.push(s.endY),n.push(s.startX),n.push(s.startY),Dh(t,e,n,i);else if(s.type===W.F){if(r=new De,r.startX=s.endX,r.startY=(s.startY+s.endY)/2,l=new At(me),l.startAngle=0,l.sweepAngle=360,l.centerX=(s.startX+s.endX)/2,l.centerY=(s.startY+s.endY)/2,l.radiusX=Math.abs(s.startX-s.endX)/2,l.radiusY=Math.abs(s.startY-s.endY)/2,r.add(l),s=wo(l,r),h=s.length,h===0)n.push(l.centerX),n.push(l.centerY);else for(l=r.startX,r=r.startY,a=0;a<h;a++)y=s[a],F.Ne(l,r,y[2],y[3],y[4],y[5],y[6],y[7],.5,n),l=y[6],r=y[7];Dh(t,e,n,i)}Vt(n),t.restore(),t.Qc(!1)}}}},o.gk=function(t,e,i){return!ot.prototype.gk.call(this,t,e,i)||this.uc===null&&this.Ri===null||this.ta===null||this.pathPattern!==null?!1:(t.Zr=this.svg,this.dh(t,e),t.Zr=null,!0)},o.jk=function(t){return this.geometry!==null&&1<this.geometry.figures.length||this.pathPattern!==null?!0:ot.prototype.jk.call(this,t)},o.zv=function(t,e){if(t.nodeName!=="g")t.setAttributeNS(null,"filter",e);else{t=t.getElementsByTagName("path");for(var i=0;i<t.length;i++)t[i].setAttributeNS(null,"filter",e)}},o.ja=function(t,e){if(e===void 0&&(e=new P),t instanceof at){t.Jc()&&R("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var i=this.naturalBounds,n=this.strokeWidth;e.h(t.x*(i.width+n)-n/2+i.x+t.offsetX,t.y*(i.height+n)-n/2+i.y+t.offsetY)}else e.set(t);return this.ke.Ga(e),e},o.ji=function(t){t===void 0&&(t=new V);var e=this.naturalBounds,i=this.ke;e=V.allocAt(e.x,e.y,e.width,e.height);var n=this.strokeWidth;return e.yc(n/2,n/2),n=P.allocAt(e.x,e.y).transform(i),t.h(n.x,n.y,0,0),n.h(e.right,e.y).transform(i),Ve(t,n.x,n.y,0,0),n.h(e.right,e.bottom).transform(i),Ve(t,n.x,n.y,0,0),n.h(e.x,e.bottom).transform(i),Ve(t,n.x,n.y,0,0),V.free(e),P.free(n),t},o.bh=function(t,e){var i=this.geometry;if(i===null||this.fill===null&&this.stroke===null)return!1;var n=i.bounds,r=this.strokeWidth/2;i.type!==W.j||e||(r+=2);var s=V.alloc();if(s.assign(n),s.yc(r+2,r+2),!s.ca(t))return V.free(s),!1;if(n=r+1e-4,i.type===W.j)return this.stroke===null||(n=(i.endX-i.startX)*(t.x-i.startX)+(i.endY-i.startY)*(t.y-i.startY),0>(i.startX-i.endX)*(t.x-i.endX)+(i.startY-i.endY)*(t.y-i.endY)||0>n)?!1:(V.free(s),F.Ub(i.startX,i.startY,i.endX,i.endY,r,t.x,t.y));if(i.type===W.u){e=i.startX;var l=i.startY,h=i.endX;if(i=i.endY,s.x=Math.min(e,h),s.y=Math.min(l,i),s.width=Math.abs(h-e),s.height=Math.abs(i-l),this.fill===null){if(s.yc(-n,-n),s.ca(t))return V.free(s),!1;s.yc(n,n)}return this.stroke!==null&&s.yc(r,r),t=s.ca(t),V.free(s),t}if(i.type===W.F){l=i.startX,r=i.startY,h=i.endX;var a=i.endY;if(i=Math.min(l,h),e=Math.min(r,a),l=Math.abs(h-l)/2,r=Math.abs(a-r)/2,i=t.x-(i+l),e=t.y-(e+r),this.fill===null){if(l-=n,r-=n,0>=l||0>=r||1>=i*i/(l*l)+e*e/(r*r))return V.free(s),!1;l+=n,r+=n}return this.stroke!==null&&(l+=n,r+=n),V.free(s),0>=l||0>=r?!1:1>=i*i/(l*l)+e*e/(r*r)}if(i.type===W.m)return V.free(s),this.fill===null?IS(i,t.x,t.y,r):A0(i,t,r,1<this.strokeWidth,e);R("Unknown Geometry type: "+i.type)},o.Sl=function(t,e,i,n){var r=this.desiredSize,s=this.fg;if(t=Math.max(t,0),e=Math.max(e,0),this.Kd!==null)var l=this.geometry.bounds;else{var h=this.figure,a=bm[h];if(a===void 0){var f=F.We[h];typeof f=="string"&&(f=F.We[f]),typeof f=="function"?(a=f(null,100,100),bm[h]=a):R("Unsupported Figure: "+h)}l=a.bounds}h=l.width,a=l.height,f=l.width;var p=l.height;switch(dr(this,!0)){case he:n=i=0;break;case fe:f=Math.max(t-s,0),p=Math.max(e-s,0);break;case Ge:f=Math.max(t-s,0),n=0;break;case Qe:i=0,p=Math.max(e-s,0)}isFinite(r.width)&&(f=r.width),isFinite(r.height)&&(p=r.height),l=this.maxSize;var d=this.minSize;switch(i=Math.max(i-s,d.width),n=Math.max(n-s,d.height),f=Math.min(l.width,f),p=Math.min(l.height,p),f=isFinite(f)?Math.max(i,f):Math.max(h,i),p=isFinite(p)?Math.max(n,p):Math.max(a,n),i=qm(this),i){case he:break;case fe:h=f,a=p;break;case Fr:i=Math.min(f/h,p/a),isFinite(i)||(i=1),h*=i,a*=i;break;default:R(i+" is not a valid geometryStretch.")}this.Kd!==null?(h===0&&(h=.001),a===0&&(a=.001),i=this.Kd!==null?this.Kd:this.ta,l=i.bounds,n=h/l.width,l=a/l.height,isFinite(n)||(n=1),isFinite(l)||(l=1),this.ta=n===1&&l===1?i:i.copy().scale(n,l)):this.ta!==null&&F.$(this.ta.Ok,t-s)&&F.$(this.ta.Nk,e-s)||(this.ta=wt.makeGeometry(this,h,a)),l=this.ta.bounds,t===1/0||e===1/0?this.De(l.x-s/2,l.y-s/2,t===0&&h===0?0:l.width+s,e===0&&a===0?0:l.height+s):this.De(-(s/2),-(s/2),f+s,p+s),r.w()?this.ac.h(0,0,r.width,r.height):this.ac.assign(l)};function qm(t){var e=t.geometryStretch;return t.Kd!==null?e===Jn?fe:e:e===Jn?bm[t.figure].defaultStretch:e}o.$g=function(t,e,i,n){Tm(this,t,e,i,n)},o.ms=function(t,e,i){return this.Qj(t.x,t.y,e.x,e.y,i)},o.Qj=function(t,e,i,n,r){var s=this.transform,l=1/(s.m11*s.m22-s.m12*s.m21),h=s.m22*l,a=-s.m12*l,f=-s.m21*l,p=s.m11*l,d=l*(s.m21*s.dy-s.m22*s.dx),y=l*(s.m12*s.dx-s.m11*s.dy);s=t*h+e*f+d,l=t*a+e*p+y,h=i*h+n*f+d,a=i*a+n*p+y,d=this.fg/2,f=this.ta,f===null&&(this.measure(1/0,1/0),f=this.ta);var x=f.bounds;if(p=!1,f.type===W.j)if(1.5>=this.strokeWidth)p=F.Se(f.startX,f.startY,f.endX,f.endY,s,l,h,a,r);else{if(f.startX===f.endX?(n=d,p=0):(e=(f.endY-f.startY)/(f.endX-f.startX),p=d/Math.sqrt(1+e*e),n=p*e),e=Yt(),t=new P,F.Se(f.startX+n,f.startY+p,f.endX+n,f.endY+p,s,l,h,a,t)&&e.push(t),t=new P,F.Se(f.startX-n,f.startY-p,f.endX-n,f.endY-p,s,l,h,a,t)&&e.push(t),t=new P,F.Se(f.startX+n,f.startY+p,f.startX-n,f.startY-p,s,l,h,a,t)&&e.push(t),t=new P,F.Se(f.endX+n,f.endY+p,f.endX-n,f.endY-p,s,l,h,a,t)&&e.push(t),h=e.length,h===0)return Vt(e),!1;for(p=!0,a=1/0,n=0;n<h;n++)t=e[n],i=(t.x-s)*(t.x-s)+(t.y-l)*(t.y-l),i<a&&(a=i,r.x=t.x,r.y=t.y);Vt(e)}else if(f.type===W.u)p=F.Df(x.x-d,x.y-d,x.x+x.width+d,x.y+x.height+d,s,l,h,a,r);else if(f.type===W.F){e=V.allocAt(x.x,x.y,x.width,x.height).yc(d,d);t:if(e.width===0)p=F.Se(e.x,e.y,e.x,e.y+e.height,s,l,h,a,r);else if(e.height===0)p=F.Se(e.x,e.y,e.x+e.width,e.y,s,l,h,a,r);else{if(t=e.width/2,f=e.height/2,n=e.x+t,p=e.y+f,i=9999,s!==h&&(i=(l-a)/(s-h)),9999>Math.abs(i)){if(a=l-p-i*(s-n),0>t*t*i*i+f*f-a*a){r.x=NaN,r.y=NaN,p=!1;break t}d=Math.sqrt(t*t*i*i+f*f-a*a),h=(-(t*t*i*a)+t*f*d)/(f*f+t*t*i*i)+n,t=(-(t*t*i*a)-t*f*d)/(f*f+t*t*i*i)+n,f=i*(h-n)+a+p,a=i*(t-n)+a+p,Math.abs((s-h)*(s-h))+Math.abs((l-f)*(l-f))<Math.abs((s-t)*(s-t))+Math.abs((l-a)*(l-a))?(r.x=h,r.y=f):(r.x=t,r.y=a)}else{if(h=f*f,a=s-n,h-=h/(t*t)*a*a,0>h){r.x=NaN,r.y=NaN,p=!1;break t}a=Math.sqrt(h),h=p+a,a=p-a,Math.abs(h-l)<Math.abs(a-l)?(r.x=s,r.y=h):(r.x=s,r.y=a)}p=!0}V.free(e)}else if(f.type===W.m){y=P.alloc();var v=h-s,S=a-l,N=v*v+S*S,k=s,C=l;if(0<N&&x.contains(k,C)&&(y.x=k,y.y=C,this.ca(y)))for(v!==0&&.5>Math.abs(v)?(S*=.5/v,v=.5):S!==0&&.5>Math.abs(S)&&(v*=.5/S,S=.5),k-=v,C-=S;x.contains(k,C);)k-=v,C-=S;for(r.x=h,r.y=a,S=0;S<f.figures.count;S++){var T=f.figures.s[S],L=T.isFilled?k:s,E=T.isFilled?C:l,I=T.segments;x=T.startX,v=T.startY;for(var Z=x,it=v,et=0;et<I.count;et++){var G=I.s[et],U=G.type,gt=G.endX,ct=G.endY,Ft=!1;switch(U){case Wn:Z=gt,it=ct;break;case te:Ft=fd(x,v,gt,ct,L,E,h,a,y);break;case dn:Ft=F.Bo(x,v,G.point1X,G.point1Y,G.point2X,G.point2Y,gt,ct,L,E,h,a,.6,y);break;case Er:Ft=F.Bo(x,v,x+2/3*(G.point1X-x),v+2/3*(G.point1Y-v),gt+2/3*(G.point1X-gt),ct+2/3*(G.point1Y-ct),gt,ct,L,E,h,a,.6,y);break;case me:case ar:U=G.type===me?wo(G,T):ul(G,T,x,v);var _t=U.length;if(_t===0){Ft=fd(x,v,G.type===me?G.centerX:G.endX,G.type===me?G.centerY:G.endY,L,E,h,a,y);break}for(ct=null,gt=0;gt<_t;gt++){if(ct=U[gt],gt===0&&fd(x,v,ct[0],ct[1],L,E,h,a,y)){var Te=ad(L,E,y,N,r);Te<N&&(N=Te,p=!0)}F.Bo(ct[0],ct[1],ct[2],ct[3],ct[4],ct[5],ct[6],ct[7],L,E,h,a,.6,y)&&(Te=ad(L,E,y,N,r),Te<N&&(N=Te,p=!0))}gt=ct[6],ct=ct[7];break;default:R("Unknown Segment type: "+U)}x=gt,v=ct,Ft&&(Ft=ad(L,E,y,N,r),Ft<N&&(N=Ft,p=!0)),G.isClosed&&(gt=Z,ct=it,fd(x,v,gt,ct,L,E,h,a,y)&&(G=ad(L,E,y,N,r),G<N&&(N=G,p=!0)))}}s=i-t,l=n-e,h=Math.sqrt(s*s+l*l),h!==0&&(s/=h,l/=h),r.x-=s*d,r.y-=l*d,P.free(y)}else R("Unknown Geometry type: "+f.type);return p?(this.transform.Ga(r),!0):!1};function ad(t,e,i,n,r){return t=i.x-t,e=i.y-e,e=t*t+e*e,e<n?(r.x=i.x,r.y=i.y,e):n}function fd(t,e,i,n,r,s,l,h,a){if(F.$(t,i)&&F.$(e,n)||F.$(r,l)&&F.$(s,h))return!1;var f=!1,p=(r-l)*(e-n)-(s-h)*(t-i);return p===0?!1:(a.x=((r*h-s*l)*(t-i)-(r-l)*(t*n-e*i))/p,a.y=((r*h-s*l)*(e-n)-(s-h)*(t*n-e*i))/p,(t>i?t-i:i-t)<(e>n?e-n:n-e)?(t=e<n?e:n,e=e<n?n:e,(a.y>t||F.$(a.y,t))&&(a.y<e||F.$(a.y,e))&&(f=!0)):(e=t<i?t:i,t=t<i?i:t,(a.x>e||F.$(a.x,e))&&(a.x<t||F.$(a.x,t))&&(f=!0)),f)}o.ah=function(t,e){if(e===void 0)return t.Oe(this.actualBounds);var i=this.ta;i===null&&(this.measure(1/0,1/0),i=this.ta),i=i.bounds;var n=this.strokeWidth/2,r=!1,s=P.alloc();return s.h(i.x-n,i.y-n),t.ca(e.Ga(s))&&(s.h(i.x-n,i.bottom+n),t.ca(e.Ga(s))&&(s.h(i.right+n,i.bottom+n),t.ca(e.Ga(s))&&(s.h(i.right+n,i.y-n),t.ca(e.Ga(s))&&(r=!0)))),P.free(s),r},o.Tc=function(t,e){if(this.ah(t,e)||e===void 0&&(e=this.transform,t.Oe(this.actualBounds)))return!0;var i=Nt.alloc();i.set(e),i.Ol();var n=t.left,r=t.right,s=t.top;t=t.bottom;var l=P.alloc();if(l.h(n,s),i.Ga(l),this.bh(l,!0)||(l.h(r,s),i.Ga(l),this.bh(l,!0))||(l.h(n,t),i.Ga(l),this.bh(l,!0))||(l.h(r,t),i.Ga(l),this.bh(l,!0)))return P.free(l),!0;var h=P.alloc(),a=P.alloc();return i.set(e),i.$u(this.transform),i.Ol(),h.x=r,h.y=s,h.transform(i),l.x=n,l.y=s,l.transform(i),e=!1,wl(this,l,h,a)?e=!0:(l.x=r,l.y=t,l.transform(i),wl(this,l,h,a)?e=!0:(h.x=n,h.y=t,h.transform(i),wl(this,l,h,a)?e=!0:(l.x=n,l.y=s,l.transform(i),wl(this,l,h,a)&&(e=!0)))),P.free(l),Nt.free(i),P.free(h),P.free(a),e};function wl(t,e,i,n){if(!t.ms(e,i,n))return!1;t=e.x,e=e.y;var r=i.x,s=i.y;return i=n.x,n=n.y,t===r?(e<s?(t=e,e=s):t=s,n>=t&&n<=e):(t<r?(n=t,t=r):n=r,i>=n&&i<=t)}o.px=function(t,e,i){function n(N,k){for(var C=N.length,T=0;T<C;T+=2)if(k.vd(N[T],N[T+1])>r)return!0;return!1}if(i&&this.fill!==null&&this.bh(t,!0))return!0;var r=t.zf(e),s=r;if(1.5<this.strokeWidth&&(r=this.strokeWidth/2+Math.sqrt(r),r*=r),e=this.ta,e===null&&(this.measure(1/0,1/0),e=this.ta,e===null))return!1;if(!i){var l=e.bounds,h=l.x,a=l.y,f=l.x+l.width;if(l=l.y+l.height,mo(t.x,t.y,h,a)<=r&&mo(t.x,t.y,f,a)<=r&&mo(t.x,t.y,h,l)<=r&&mo(t.x,t.y,f,l)<=r)return!0}if(h=e.startX,a=e.startY,f=e.endX,l=e.endY,e.type===W.j){if(i=(h-f)*(t.x-f)+(a-l)*(t.y-l),mi(t.x,t.y,h,a,f,l)<=(0<=(f-h)*(t.x-h)+(l-a)*(t.y-a)&&0<=i?r:s))return!0}else{if(e.type===W.u)return e=!1,i&&(e=mi(t.x,t.y,h,a,h,l)<=r||mi(t.x,t.y,h,a,f,a)<=r||mi(t.x,t.y,f,a,f,l)<=r||mi(t.x,t.y,h,l,f,l)<=r),e;if(e.type===W.F){e=t.x-(h+f)/2,s=t.y-(a+l)/2;var p=Math.abs(f-h)/2,d=Math.abs(l-a)/2;if(p===0||d===0)return mi(t.x,t.y,h,a,f,l)<=r;if(i){if(t=F.Vy(p,d,e,s),t*t<=r)return!0}else return!(mo(e,s,-p,0)>=r||mo(e,s,0,-d)>=r||mo(e,s,0,d)>=r||mo(e,s,p,0)>=r)}else if(e.type===W.m){if(f=e.bounds,s=f.x,h=f.y,a=f.x+f.width,f=f.y+f.height,t.x>a&&t.x<s&&t.y>f&&t.y<h&&mi(t.x,t.y,s,h,s,f)>r&&mi(t.x,t.y,s,h,a,h)>r&&mi(t.x,t.y,a,f,s,f)>r&&mi(t.x,t.y,a,f,a,h)>r)return!1;if(s=Math.sqrt(r),i){if(this.fill===null?IS(e,t.x,t.y,s):A0(e,t,s,!0,!1))return!0}else{for(i=e.figures,e=0;e<i.count;e++){if(s=i.s[e],l=s.startX,p=s.startY,t.vd(l,p)>r)return!1;for(h=s.segments.s,a=h.length,f=0;f<a;f++)switch(d=h[f],d.type){case Wn:case te:if(l=d.endX,p=d.endY,t.vd(l,p)>r)return!1;break;case dn:var y=Yt();if(F.Ne(l,p,d.point1X,d.point1Y,d.point2X,d.point2Y,d.endX,d.endY,.8,y),l=n(y,t),Vt(y),l||(l=d.endX,p=d.endY,t.vd(l,p)>r))return!1;break;case Er:if(y=Yt(),F.Zo(l,p,d.point1X,d.point1Y,d.endX,d.endY,.8,y),l=n(y,t),Vt(y),l||(l=d.endX,p=d.endY,t.vd(l,p)>r))return!1;break;case me:case ar:y=d.type===me?wo(d,s):ul(d,s,l,p);var x=y.length;if(x===0){if(l=d.type===me?d.centerX:d.endX,p=d.type===me?d.centerY:d.endY,t.vd(l,p)>r)return!1;break}d=null;for(var v=Yt(),S=0;S<x;S++)if(d=y[S],v.length=0,F.Ne(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.8,v),n(v,t))return Vt(v),!1;Vt(v),d!==null&&(l=d[6],p=d[7]);break;default:R("Unknown Segment type: "+d.type)}}return!0}}}return!1},o.nc=function(){this.ta=null},o.eq=function(){return this.fg};function M2(t){var e=t.diagram;e!==null&&e.undoManager.isUndoingRedoing||(t.segmentOrientation=Ff,t.toArrow!=="None"?(t.segmentIndex=-1,t.alignmentFocus=Xi):t.fromArrow!=="None"&&(t.segmentIndex=0,t.alignmentFocus=new at(1-Xi.x,Xi.y)))}wt.makeGeometry=function(t,e,i){if(t.toArrow!=="None")var n=qr[t.toArrow];else t.fromArrow!=="None"?n=qr[t.fromArrow]:(n=F.We[t.figure],typeof n=="string"&&(n=F.We[n]),n===void 0&&R("Unknown Shape.figure: "+t.figure),n=n(t,e,i),n.Ok=e,n.Nk=i);if(n===null){var r=F.We.Rectangle;typeof r=="function"&&(n=r(t,e,i))}return n};function k2(t){var e=qr[t];if(e===void 0){var i=t.toLowerCase();if(i==="none")return"None";if(e=qr[i],e===void 0){var n=null,r;for(r in F.rm)if(r.toLowerCase()===i){n=r;break}if(n!==null)return t=W.parse(F.rm[n],!1),qr[n]=t,i!==n&&(qr[i]=n),n}}return typeof e=="string"?e:e instanceof W?t:null}z.Object.defineProperties(wt.prototype,{geometry:{get:function(){return this.ta!==null?this.ta:this.Kd},set:function(t){var e=this.ta,i=this.Kd;if(e!==t){t!==null?this.Kd=this.ta=t.freeze():this.Kd=this.ta=null;var n=this.part;n!==null&&(n.Yf=NaN),this.v(),this.g("geometry",e||i,t),yu(this)&&(t=this.part,t!==null&&pl(this,t,"geometryString"))}}},geometryString:{get:function(){return this.geometry===null?"":this.geometry.toString()},set:function(t){t=W.parse(t);var e=t.normalize();this.geometry=t,this.position=t=P.allocAt(-e.x,-e.y),P.free(t)}},isGeometryPositioned:{get:function(){return(this.o&1048576)!==0},set:function(t){var e=(this.o&1048576)!==0;e!==t&&(this.o^=1048576,this.v(),this.g("isGeometryPositioned",e,t))}},fill:{get:function(){return this.Ri},set:function(t){var e=this.Ri;e!==t&&(t!==null&&xu(t,"Shape.fill"),t instanceof Dt&&t.freeze(),this.Ri=t,this.N(),this.g("fill",e,t))}},stroke:{get:function(){return this.uc},set:function(t){var e=this.uc;e!==t&&(t!==null&&xu(t,"Shape.stroke"),t instanceof Dt&&t.freeze(),this.uc=t,this.N(),this.g("stroke",e,t))}},strokeWidth:{get:function(){return this.fg},set:function(t){var e=this.fg;if(e!==t)if(0<=t){this.fg=t,this.v();var i=this.part;i!==null&&(i.Yf=NaN),this.g("strokeWidth",e,t)}else dt(t,"value >= 0",wt,"strokeWidth:value")}},strokeCap:{get:function(){return this.Na!==null?this.Na.Br:"butt"},set:function(t){var e=this.strokeCap;e!==t&&(typeof t!="string"||t!=="butt"&&t!=="round"&&t!=="square"?dt(t,'"butt", "round", or "square"',wt,"strokeCap"):(xl(this),this.Na.Br=t,this.N(),this.g("strokeCap",e,t)))}},strokeJoin:{get:function(){return this.Na!==null?this.Na.Cr:"miter"},set:function(t){var e=this.strokeJoin;e!==t&&(typeof t!="string"||t!=="miter"&&t!=="bevel"&&t!=="round"?dt(t,'"miter", "bevel", or "round"',wt,"strokeJoin"):(xl(this),this.Na.Cr=t,this.N(),this.g("strokeJoin",e,t)))}},strokeMiterLimit:{get:function(){return this.Na!==null?this.Na.Dr:10},set:function(t){var e=this.strokeMiterLimit;if(e!==t&&1<=t){xl(this),this.Na.Dr=t,this.N();var i=this.part;i!==null&&(i.Yf=NaN),this.g("strokeMiterLimit",e,t)}}},strokeDashArray:{get:function(){return this.Ug},set:function(t){var e=this.Ug;if(e!==t){if(t!==null){for(var i=t.length,n=0,r=0;r<i;r++){var s=t[r];0<=s&&isFinite(s)||R("strokeDashArray:value "+s+" at index "+r+" must be a positive number or zero."),n+=s}if(n===0){if(e===null)return;t=null}}this.Ug=t,this.N(),this.g("strokeDashArray",e,t)}}},strokeDashOffset:{get:function(){return this.Na!==null?this.Na.sj:0},set:function(t){var e=this.strokeDashOffset;e!==t&&0<=t&&(xl(this),this.Na.sj=t,this.N(),this.g("strokeDashOffset",e,t))}},figure:{get:function(){return this.Ym},set:function(t){var e=this.Ym;if(e!==t){var i=F.We[t];typeof i=="function"?i=t:(i=F.We[t.toLowerCase()])||R("Unknown Shape.figure: "+t),e!==i&&(t=this.part,t!==null&&(t.Yf=NaN),this.Ym=i,this.Kd=null,this.nc(),this.v(),this.g("figure",e,i))}}},toArrow:{get:function(){return this.Ua!==null?this.Ua.V:"None"},set:function(t){var e=this.toArrow;if(t===!0?t="Standard":t===!1&&(t=""),e!==t){var i=k2(t);i===null?R("Unknown Shape.toArrow: "+t):e!==i&&(this.Ua===null&&(this.Ua=new Ts),this.Ua.V=i,this.Kd=null,this.nc(),this.v(),M2(this),this.g("toArrow",e,i))}}},fromArrow:{get:function(){return this.Ua!==null?this.Ua.j:"None"},set:function(t){var e=this.fromArrow;if(t===!0?t="Standard":t===!1&&(t=""),e!==t){var i=k2(t);i===null?R("Unknown Shape.fromArrow: "+t):e!==i&&(this.Ua===null&&(this.Ua=new Ts),this.Ua.j=i,this.Kd=null,this.nc(),this.v(),M2(this),this.g("fromArrow",e,i))}}},spot1:{get:function(){return this.Na!==null?this.Na.cg:Je},set:function(t){var e=this.spot1;e.C(t)||(t=t.J(),xl(this),this.Na.cg=t,this.v(),this.g("spot1",e,t))}},spot2:{get:function(){return this.Na!==null?this.Na.dg:Je},set:function(t){var e=this.spot2;e.C(t)||(t=t.J(),xl(this),this.Na.dg=t,this.v(),this.g("spot2",e,t))}},parameter1:{get:function(){return this.Rn},set:function(t){var e=this.Rn;e!==t&&(this.Rn=t,this.nc(),this.v(),this.g("parameter1",e,t))}},parameter2:{get:function(){return this.Sn},set:function(t){var e=this.Sn;e!==t&&(this.Sn=t,this.nc(),this.v(),this.g("parameter2",e,t))}},naturalBounds:{get:function(){return this.ac}},pathPattern:{get:function(){return this.Na!==null?this.Na.Wq:null},set:function(t){var e=this.pathPattern;e!==t&&(xl(this),this.Na.Wq=t,this.N(),this.g("pathPattern",e,t))}},geometryStretch:{get:function(){return this.Na!==null?this.Na.cq:Jn},set:function(t){var e=this.geometryStretch;e!==t&&(xl(this),this.Na.cq=t,this.v(),this.g("geometryStretch",e,t))}},interval:{get:function(){return this.fa!==null?this.fa.Pk:1},set:function(t){var e=this.interval;if(t=Math.round(t),e!==t&&t!==0&&isFinite(t)){this.fa===null&&(this.fa=new br),this.fa.Pk=t;var i=this.diagram;i!==null&&this.panel===i.grid&&Wo(i),this.v(),i=this.panel,i!==null&&(i.graduatedIntervals=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.fa!==null?this.fa.u:0},set:function(t){var e=this.graduatedStart;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new br),this.fa.u=t,this.v(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.fa!==null?this.fa.j:1},set:function(t){var e=this.graduatedEnd;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new br),this.fa.j=t,this.v(),this.g("graduatedEnd",e,t))}},graduatedSkip:{get:function(){return this.fa!==null?this.fa.m:null},set:function(t){var e=this.graduatedSkip;e!==t&&(this.fa===null&&(this.fa=new br),this.fa.m=t,this.v(),this.g("graduatedSkip",e,t))}}}),wt.prototype.intersectsRect=wt.prototype.Tc,wt.prototype.containedInRect=wt.prototype.ah,wt.prototype.getNearestIntersectionPoint=wt.prototype.ms,wt.prototype.getDocumentBounds=wt.prototype.ji,wt.prototype.getDocumentPoint=wt.prototype.ja;var qr=new We,bm=new We;wt.className="Shape",wt.getFigureGenerators=function(){var t=new vt,e;for(e in F.We)e!==e.toLowerCase()&&t.add(e,F.We[e]);return t.freeze(),t},wt.defineFigureGenerator=function(t,e){var i=t.toLowerCase(),n=F.We;n[t]=e,n[i]=t},wt.getArrowheadGeometries=function(){var t=new vt;for(n in F.rm)if(qr[n]===void 0){var e=W.parse(F.rm[n],!1);qr[n]=e,e=n.toLowerCase(),e!==n&&(qr[e]=n)}for(var i in qr)if(i!==i.toLowerCase()){var n=qr[i];n instanceof W&&t.add(i,n)}return t.freeze(),t},wt.defineArrowheadGeometry=function(t,e){var i=null;typeof e=="string"?i=W.parse(e,!1):i=e,e=t.toLowerCase(),e!=="none"&&t!==e||R("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);var n=qr;n[t]=i,n[e]=t};function tv(){this.jc=!1,this.Br="butt",this.Cr="miter",this.Dr=10,this.sj=0,this.Wq=null,this.cq=Jn,this.dg=this.cg=Je}tv.prototype.copy=function(){var t=new tv;return t.Br=this.Br,t.Cr=this.Cr,t.Dr=this.Dr,t.sj=this.sj,t.Wq=this.Wq,t.cq=this.cq,t.cg=this.cg.J(),t.dg=this.dg.J(),t};function Gt(t,e){return ot.call(this),yd||(Fi=$n?new In(null).context:null,yd=!0),this.o|=2097152,this.bc="",this.uc="black",this.xe="13px sans-serif",this.Fq=this.Cb=this.Dc=0,this.da=this.fa=this.Dm=this.Jt=this.Kt=null,this.Fh=0,this.af=null,this.Ie=0,this.we=this.Xb=this.Nc=null,typeof t=="string"?this.text=t:t&&Object.assign(this,t),e&&Object.assign(this,e),this}B(Gt,ot),Gt.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.bc=this.bc,t.uc=this.uc,t.xe=this.xe,t.Dc=this.Dc,t.Cb=this.Cb,t.Fq=this.Fq,t.Kt=this.Kt,t.Jt=this.Jt,t.Dm=this.Dm,this.fa!==null&&(t.fa=this.fa.copy()),this.da!==null&&(t.da=this.da.jc?this.da:this.da.copy()),t.Fh=this.Fh,t.af=this.af,t.Ie=this.Ie,t.Nc=this.Nc,t.Xb=this.Xb,t.we=this.we};function Ir(t){t.da===null?t.da=new lv:t.da.jc&&(t.da=t.da.copy())}o=Gt.prototype,o.ph=function(){ot.prototype.ph.call(this),this.da!==null&&(this.da.jc=!0)};function N2(t,e){t.o=e.o|6144,t.qb=e.opacity,t.Oa=e.background,t.areaBackground=e.areaBackground,t.bd=e.desiredSize.J(),t.minSize=e.minSize.J(),t.maxSize=e.maxSize.J(),e.Jb!==null?t.Jb=e.Jb.copy():t.Jb=null,t.Aa=e.scale,t.Ib=e.angle,t.stretch=e.stretch,t.Gg=e.margin.J(),t.Hb=e.alignment.J(),t.nk=e.alignmentFocus.J(),t.segmentFraction=e.segmentFraction,t.segmentOffset=e.segmentOffset.J(),t.segmentOrientation=e.segmentOrientation,e.ib!==null&&(t.ib=e.ib.copy()),t.shadowVisible=e.shadowVisible,t.bc=e.bc,t.uc=e.uc,t.xe=e.xe,t.fa!==null&&(t.fa=e.fa.copy()),e.da!==null&&(t.da=e.da.jc?e.da:e.da.copy()),t.Fh=e.Fh}o.rb=function(t){t.classType===Gt?this.wrap=t:ot.prototype.rb.call(this,t)},o.toString=function(){return 22<this.bc.length?'TextBlock("'+this.bc.substring(0,20)+'"...)':'TextBlock("'+this.bc+'")'},o.v=function(){ot.prototype.v.call(this),this.Jt=this.Kt=null},o.dh=function(t,e){if(this.uc!==null&&this.bc.length!==0&&this.xe!==null){var i=this.naturalBounds,n=this.actualBounds,r=i.width,s=i.height,l=Nf(this),h=t.textAlign=this.textAlign,a=e.qn;h==="start"?h=a?"right":"left":h==="end"&&(h=a?"left":"right"),a=this.isUnderline;var f=this.isStrikethrough;sn(this,t,this.uc,!0,!1,i,n),(a||f)&&sn(this,t,this.uc,!1,!1,i,n),n=0,i=!1;var p=this.ke,d=p.dx-(l*p.m21+p.dx);p=p.dy-(l*p.m22+p.dy);var y=e.scale;switch(8>(d*d+p*p)*y*y&&(i=!0),e.jb!==t&&(i=!1),e.jb instanceof wn&&(i=!1),e.Ef("textGreeking")===!1&&(i=!1),e=this.spacingAbove,d=this.spacingBelow,this.flip){case df:t.translate(r,0),t.scale(-1,1);break;case pf:t.translate(0,s),t.scale(1,-1);break;case gf:t.translate(r,s),t.scale(-1,-1)}if(t.vc(),p=this.Dc,y=(e+l+d)*p,s>y&&(n=this.verticalAlignment,n=n.y*s-n.y*y+n.offsetY),p===1&&this.we!==null)d=this.Cb,d>r&&(d=r),this.Mj(this.we,t,0,n+e,r,l,d,i,h,a,f);else if(this.Nc!==null&&this.Xb!==null)for(y=0;y<p;y++){var x=this.Nc[y];x>r&&(x=r),n+=e,this.Mj(this.Xb[y],t,0,n,r,l,x,i,h,a,f),n+=l+d}switch(this.flip){case df:t.scale(-1,1),t.translate(-r,0);break;case pf:t.scale(1,-1),t.translate(0,-s);break;case gf:t.scale(-1,-1),t.translate(-r,-s)}}},o.Mj=function(t,e,i,n,r,s,l,h,a,f,p){var d=0;if(h)a==="left"?d=0:a==="right"?d=r-l:a==="center"&&(d=(r-l)/2),e.fillRect(i+d,n+.25*s,l,1);else{if(a==="left"?d=0:a==="right"?d=r:a==="center"&&(d=r/2),r=cd!==null?cd(this,s):.75*s,e.fillText(t,i+d,n+r),t=s/20|0,t===0&&(t=1),a==="right"?d-=l:a==="center"&&(d-=l/2),f){h=pd!==null?pd(this,s):.8*s,a=i+d,f=n+h,r=i+d+l,h=n+h;var y=t;e.beginPath(),e.lineWidth=y,e.moveTo(a,f),e.lineTo(r,h),e.stroke(),e.Pe(),e instanceof wn&&e.Pd.classList.add("gojs-td")}p&&(p=n+s-s/2.2|0,t%2!==0&&(p+=.5),n=i+d,s=p,i=i+d+l,l=p,d=t,e.beginPath(),e.lineWidth=d,e.moveTo(n,s),e.lineTo(i,l),e.stroke(),e.Pe(),e instanceof wn&&e.Pd.classList.add("gojs-td"))}},o.gk=function(t,e,i){if(!ot.prototype.gk.call(this,t,e,i))return!1;if(sn(this,t,this.uc,!0,!1,this.naturalBounds,this.actualBounds),i){if(this.svg.getElementsByTagName("text").length===0)return!0;for(e=this.svg.getElementsByClassName("gojs-td"),i=0;i<e.length;i++)i2(t,e[i],!1)}else e=this.svg,e.innerHTML=this.text,i2(t,e,!0);return!0},o.jk=function(t){return 1<this.lineCount||this.isUnderline||this.isStrikethrough?!0:ot.prototype.jk.call(this,t)},o.zv=function(t,e){if(t.nodeName!=="g")t.setAttributeNS(null,"filter",e);else{t=t.getElementsByTagName("text");for(var i=0;i<t.length;i++)t[i].setAttributeNS(null,"filter",e)}},o.Sl=function(t,e,i,n){var r=this.Dc;this.Fh=t;var s=this.xe;Fi!==null&&F2!==s&&(F2=Fi.font=s),this.Cb=this.Ie=0,this.we=this.Xb=this.Nc=this.af=null;var l;if(isNaN(this.desiredSize.width)){if(s=this.bc.replace(/\r\n/g,`
`).replace(/\r/g,`
`),s.length===0)s=0;else if(this.isMultiline){for(var h=l=0,a=!1;!a;){var f=s.indexOf(`
`,h);f===-1&&(f=s.length,a=!0),h=s.substr(h,f-h),this.formatting===Pf&&(h=h.trim()),l=Math.max(l,qn(h)),h=f+1}s=l}else l=s.indexOf(`
`,0),0<=l&&(s=s.substr(0,l)),s=qn(s);s=Math.min(s,t/this.scale),s=Math.max(8,s)}else s=this.desiredSize.width;if(this.panel!==null&&(s=Math.min(s,this.panel.maxSize.width)),l=C2(this,s),isNaN(this.desiredSize.height)?l=Math.min(l,e/this.scale):l=this.desiredSize.height,a=l,this.Cb!==0&&this.Nc!==null&&this.Xb!==null&&this.overflow===dd&&(e=this.xe,e=this.overflow===dd?P2(e):0,f=this.spacingAbove+this.spacingBelow,f=Math.max(0,Nf(this)+f),a=Math.min(this.maxLines-1,Math.max(Math.floor(a/f+.01)-1,0)),!(a+1>=this.Xb.length))){for(f=this.Xb[a],e=Math.max(1,t-e);qn(f)>e&&1<f.length;)f=f.substr(0,f.length-1);f+=Cf,e=qn(f),this.Xb[a]=f,this.Xb=this.Xb.slice(0,a+1),this.Nc[a]=e,this.Nc=this.Nc.slice(0,a+1),this.Ie=this.Xb.length,this.Cb=Math.max(this.Cb,e),this.Dc=this.Ie,this.Dc===1&&(this.we=this.Xb[0])}(this.wrap===T2||isNaN(this.desiredSize.width))&&(s=isNaN(t)?this.Cb:Math.min(t,this.Cb),isNaN(this.desiredSize.width)&&(s=Math.max(8,s))),s=Math.max(i,s),l=Math.max(n,l),vo(this.ac,s,l),this.De(0,0,s,l),this.svg!==null&&r!==this.Dc&&(this.pf=!0)},o.$g=function(t,e,i,n){Tm(this,t,e,i,n)};function kf(t,e,i){t.we===null?(t.we=e,t.Cb=i):((t.Xb===null||t.Nc===null)&&(t.Xb=[],t.Nc=[],t.Xb.push(t.we),t.Nc.push(t.Cb)),t.Xb.push(e),t.Nc.push(i))}function ev(t,e,i,n){var r=t.formatting===Pf;r&&(e=e.trim());var s=0,l=t.xe,h=t.spacingAbove+t.spacingBelow;h=Math.max(0,Nf(t)+h);var a=t.overflow===dd?P2(l):0;if(t.Dc>=t.maxLines)n!==null&&n.h(0,h);else if(l=e,t.wrap===iv){t.Ie=1;var f=qn(e);if(a===0||f<=i)t.Cb=Math.max(t.Cb,f),kf(t,e,t.Cb),n!==null&&n.h(f,h);else{for(s=Rh(t,l),l=l.substr(s.length),e=Rh(t,l),f=qn(s+e);0<e.length&&f<=i;)s+=e,l=l.substr(e.length),e=Rh(t,l),f=s+e,r&&(f=f.trim()),f=qn(f);for(r&&(e=e.trim()),s+=e,i=Math.max(1,i-a);qn(s)>i&&1<s.length;)s=s.substr(0,s.length-1);s+=Cf;var p=qn(s);t.Cb=p,kf(t,s,p),n!==null&&n.h(p,h)}}else{for(a=0,l.length===0&&(a=1,kf(t,l,0));0<l.length;){for(e=Rh(t,l),l=l.substr(e.length);qn(e)>i;){var d=1;for(f=qn(e.substr(0,d)),p=0;f<=i;)d++,p=f,f=qn(e.substr(0,d));if(d===1){var y=f;s=Math.max(s,f)}else y=p,s=Math.max(s,p);if(d--,1>d&&(d=1),kf(t,e.substr(0,d),y),a++,e=e.substr(d),t.Dc+a>t.maxLines)break}for(p=Rh(t,l),f=qn(e+p);0<p.length&&f<=i;)e+=p,l=l.substr(p.length),p=Rh(t,l),f=e+p,r&&(f=f.trim()),f=qn(f);if(r&&(e=e.trim()),e!==""&&(e[e.length-1]==="­"&&(e=e.substring(0,e.length-1)+"‐"),p.length===0?(d=f,s=Math.max(s,f)):(d=p=qn(e),s=Math.max(s,p)),kf(t,e,d),a++,t.Dc+a>t.maxLines))break}t.Ie=Math.min(t.maxLines,a),t.Cb=Math.max(t.Cb,s),n!==null&&n.h(t.Cb,h*t.Ie)}}function Rh(t,e){if(t.wrap===L2)return e.substr(0,1);for(var i=e.length,n=0,r=hj;n<i&&!r.test(e.charAt(n));)n++;for(t.formatting===j2&&(i=Math.min(i,n+1));n<i&&r.test(e.charAt(n));)n++;return n>=e.length?e:e.substr(0,n)}function qn(t){return Fi===null?8*t.length:Fi.measureText(t).width}function Nf(t){if(t.af!==null)return t.af;var e=t.xe;if(Fi===null){var i=16;return t.af=i}return ov[e]!==void 0&&5e3>E2?i=ov[e]:(i=1.3*Fi.measureText("M").width,ov[e]=i,E2++),t.af=i}function P2(t){if(Fi===null)return 6;if(gd[t]!==void 0&&5e3>sv)var e=gd[t];else e=Fi.measureText(Cf).width,gd[t]=e,sv++;return e}function C2(t,e){var i=t.bc.replace(/\r\n/g,`
`).replace(/\r/g,`
`),n=t.spacingAbove+t.spacingBelow;if(n=Math.max(0,Nf(t)+n),i.length===0)return t.Cb=0,t.Dc=1,n;if(!t.isMultiline){var r=i.indexOf(`
`,0);0<=r&&(i=i.substr(0,r))}r=0;for(var s=t.Dc=0,l,h=!1;!h;){if(l=i.indexOf(`
`,s),l===-1&&(l=i.length,h=!0),s<=l){if(s=i.substr(s,l-s),t.wrap!==iv){t.Ie=0;var a=pt.alloc();ev(t,s,e,a),r+=a.height,pt.free(a),t.Dc+=t.Ie}else ev(t,s,e,null),r+=n,t.Dc++;t.Dc===t.maxLines&&(h=!0)}s=l+1}return t.Fq=r}z.Object.defineProperties(Gt.prototype,{font:{get:function(){return this.xe},set:function(t){var e=this.xe;e!==t&&(this.xe=t,this.af=null,this.v(),this.g("font",e,t))}},text:{get:function(){return this.bc},set:function(t){var e=this.bc;t!=null?t=t.toString():t="",e!==t&&(this.bc=t,this.v(),this.g("text",e,t),this.pf=!0)}},textAlign:{get:function(){return this.da!==null?this.da.Ir:"start"},set:function(t){var e=this.textAlign;e===t||t!=="start"&&t!=="end"&&t!=="left"&&t!=="right"&&t!=="center"||(Ir(this),this.da.Ir=t,this.N(),this.g("textAlign",e,t))}},flip:{get:function(){return this.da!==null?this.da.Vf:he},set:function(t){var e=this.flip;e!==t&&(Ir(this),this.da.Vf=t,this.N(),this.g("flip",e,t))}},verticalAlignment:{get:function(){return this.da!==null?this.da.Sr:mp},set:function(t){var e=this.verticalAlignment;e.C(t)||(t=t.J(),Ir(this),this.da.Sr=t,Ph(this),this.g("verticalAlignment",e,t))}},naturalBounds:{get:function(){if(!this.ac.w()){var t=pt.alloc();ev(this,this.bc,999999,t);var e=t.width;pt.free(t),t=C2(this,e);var i=this.desiredSize;isNaN(i.width)||(e=i.width),isNaN(i.height)||(t=i.height),vo(this.ac,e,t)}return this.ac}},isMultiline:{get:function(){return(this.o&2097152)!==0},set:function(t){var e=(this.o&2097152)!==0;e!==t&&(this.o^=2097152,this.v(),this.g("isMultiline",e,t))}},isUnderline:{get:function(){return(this.o&4194304)!==0},set:function(t){var e=(this.o&4194304)!==0;e!==t&&(this.o^=4194304,this.pf=!0,this.N(),this.g("isUnderline",e,t))}},isStrikethrough:{get:function(){return(this.o&8388608)!==0},set:function(t){var e=(this.o&8388608)!==0;e!==t&&(this.o^=8388608,this.pf=!0,this.N(),this.g("isStrikethrough",e,t))}},wrap:{get:function(){return this.da!==null?this.da.Ur:nv},set:function(t){var e=this.wrap;e!==t&&(Ir(this),this.da.Ur=t,this.v(),this.g("wrap",e,t))}},overflow:{get:function(){return this.da!==null?this.da.Uq:rv},set:function(t){var e=this.overflow;e!==t&&(Ir(this),this.da.Uq=t,this.v(),this.g("overflow",e,t))}},stroke:{get:function(){return this.uc},set:function(t){var e=this.uc;e!==t&&(t!==null&&xu(t,"TextBlock.stroke"),t instanceof Dt&&t.freeze(),this.uc=t,this.N(),this.g("stroke",e,t))}},lineCount:{get:function(){return this.Dc}},lineHeight:{get:function(){return Nf(this)}},editable:{get:function(){return(this.o&1048576)!==0},set:function(t){var e=(this.o&1048576)!==0;e!==t&&(this.o^=1048576,this.g("editable",e,t))}},textEditor:{get:function(){return this.da!==null?this.da.Kr:null},set:function(t){var e=this.textEditor;e!==t&&(Ir(this),this.da.Kr=t,this.g("textEditor",e,t))}},errorFunction:{get:function(){return this.da!==null?this.da.Ad:null},set:function(t){var e=this.errorFunction;e!==t&&(Ir(this),this.da.Ad=t,this.g("errorFunction",e,t))}},interval:{get:function(){return this.fa!==null?this.fa.Pk:1},set:function(t){var e=this.interval;if(t=Math.round(t),e!==t&&t!==0&&isFinite(t)){this.fa===null&&(this.fa=new br),this.fa.Pk=t,this.v();var i=this.panel;i!==null&&(i.graduatedIntervals=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.fa!==null?this.fa.u:0},set:function(t){var e=this.graduatedStart;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new br),this.fa.u=t,this.v(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.fa!==null?this.fa.j:1},set:function(t){var e=this.graduatedEnd;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new br),this.fa.j=t,this.v(),this.g("graduatedEnd",e,t))}},graduatedFunction:{get:function(){return this.fa!==null?this.fa.F:null},set:function(t){var e=this.graduatedFunction;e!==t&&(this.fa===null&&(this.fa=new br),this.fa.F=t,this.v(),this.g("graduatedFunction",e,t))}},graduatedSkip:{get:function(){return this.fa!==null?this.fa.m:null},set:function(t){var e=this.graduatedSkip;e!==t&&(this.fa===null&&(this.fa=new br),this.fa.m=t,this.v(),this.g("graduatedSkip",e,t))}},textValidation:{get:function(){return this.da!==null?this.da.tj:null},set:function(t){var e=this.textValidation;e!==t&&(Ir(this),this.da.tj=t,this.g("textValidation",e,t))}},textEdited:{get:function(){return this.da!==null?this.da.Jr:null},set:function(t){var e=this.textEdited;e!==t&&(Ir(this),this.da.Jr=t,this.g("textEdited",e,t))}},spacingAbove:{get:function(){return this.da!==null?this.da.xr:0},set:function(t){var e=this.spacingAbove;e!==t&&(Ir(this),this.da.xr=t,this.v(),this.g("spacingAbove",e,t))}},spacingBelow:{get:function(){return this.da!==null?this.da.yr:0},set:function(t){var e=this.spacingBelow;e!==t&&(Ir(this),this.da.yr=t,this.v(),this.g("spacingBelow",e,t))}},formatting:{get:function(){return this.da!==null?this.da.$p:Pf},set:function(t){var e=this.formatting;e!==t&&(Ir(this),this.da.$p=t,this.v(),this.g("formatting",e,t))}},maxLines:{get:function(){return this.da!==null?this.da.Dq:1/0},set:function(t){var e=this.maxLines;e!==t&&(t=Math.floor(t),0>=t&&dt(t,"> 0",Gt,"maxLines"),Ir(this),this.da.Dq=t,this.v(),this.g("maxLines",e,t))}},metrics:{get:function(){return{arrSize:this.Nc!==null?this.Nc:[this.Cb],arrText:this.Xb!==null?this.Xb:[this.we],maxLineWidth:this.Cb,fontHeight:this.af}}},choices:{get:function(){return this.Dm},set:function(t){var e=this.Dm;e!==t&&(this.Dm=t,this.g("choices",e,t))}}});var cd=null,pd=null,iv=new Q(Gt,"None",0),T2=new Q(Gt,"WrapFit",1),nv=new Q(Gt,"WrapDesiredSize",2),L2=new Q(Gt,"WrapBreakAll",3),rv=new Q(Gt,"OverflowClip",0),dd=new Q(Gt,"OverflowEllipsis",1),Pf=new Q(Gt,"FormatTrim",0),j2=new Q(Gt,"FormatNone",0),hj=/[ \u200b\u00ad]/,ov=new We,E2=0,gd=new We,sv=0,Cf="...",F2="",Fi=null,yd=!1;Gt.className="TextBlock";function lv(){this.jc=!1,this.Ad=null,this.Vf=he,this.$p=Pf,this.Dq=1/0,this.Uq=rv,this.yr=this.xr=0,this.Ir="start",this.tj=this.Kr=this.Jr=null,this.Sr=mp,this.Ur=nv}lv.prototype.copy=function(){var t=new lv;return t.Ad=this.Ad,t.Vf=this.Vf,t.$p=this.$p,t.Dq=this.Dq,t.Uq=this.Uq,t.xr=this.xr,t.yr=this.yr,t.Ir=this.Ir,t.Jr=this.Jr,t.Kr=this.Kr,t.tj=this.tj,t.Sr=this.Sr,t.Ur=this.Ur,t},Gt.getEllipsis=function(){return Cf},Gt.setEllipsis=function(t){Cf=t,gd=new We,sv=0},Gt.getBaseline=function(){return cd},Gt.setBaseline=function(t){cd=t},Gt.getUnderline=function(){return pd},Gt.setUnderline=function(t){pd=t},Gt.isValidFont=function(t){if(yd||(Fi=$n?new In(null).context:null,yd=!0),Fi===null)return!0;var e=Fi.font;if(t===e||t==="10px sans-serif")return!0;Fi.font="10px sans-serif",Fi.font=t;var i=Fi.font;if(i!=="10px sans-serif")return Fi.font=e,!0;Fi.font="19px serif";var n=Fi.font;return Fi.font=t,i=Fi.font,Fi.font=e,i!==n},Gt.FormatNone=j2,Gt.FormatTrim=Pf,Gt.None=iv,Gt.OverflowClip=rv,Gt.OverflowEllipsis=dd,Gt.WrapBreakAll=L2,Gt.WrapDesiredSize=nv,Gt.WrapFit=T2;function br(){this.Pk=1,this.u=0,this.j=1,this.m=this.F=null}br.prototype.copy=function(){var t=new br;return t.Pk=this.Pk,t.u=this.u,t.j=this.j,t.F=this.F,t.m=this.m,t},br.className="GradElementSettings";function Ri(t,e){ot.call(this),this.Bg=null,this.no="",this.Tg=MS,this.Jk=fe,this.Vg=this.Ad=null,this.Ik=Ut,this.Vf=he,this.rl=null,this.nn=!1,this.bn=!0,this.Xk=!1,this.nl=null,typeof t=="string"?this.source=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}var Bh;B(Ri,ot),Ri.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.no=this.no,t.element=this.Bg,t.Tg=this.Tg.J(),t.Jk=this.Jk,t.Vf=this.Vf,t.Ad=this.Ad,t.Vg=this.Vg,t.Ik=this.Ik.J(),t.bn=this.bn,t.nl=this.nl},Ri.prototype.rb=function(t){t===he||t===Fr||t===cf?this.imageStretch=t:ot.prototype.rb.call(this,t)},Ri.prototype.toString=function(){return"Picture("+this.source+")#"+Ei(this)};function zh(t){t===void 0&&(t=""),t!==""?Bh[t]&&(delete Bh[t],md--):(Bh=new We,md=0)}function O2(t,e){e.py||(e.zq=function(i){e.mq=!0,e.hn=!1;var n=e.yg.copy();if(n!=null){for(n=n.iterator;n.next();){var r=n.value;r.N();var s=e.getAttribute("src")||"",l=r.Kg.I(s);if(l!==null)for(var h=l.length,a=0;a<h;a++)s=l[a],r.Un.add(s),s.pf=!0,r.Wb(),e.en&&(e.bu===void 0&&(e.bu=i),s.Vg!==null&&s.Vg(s,i))}e.yg.clear()}t.desiredSize.w()||(vn(t,!1),t.v())},e.Sp=function(i){e.hn=i;var n=e.yg.copy();if(n!=null){for(n=n.iterator;n.next();){var r=n.value,s=e.getAttribute("src")||"",l=r.Kg.I(s);if(l!==null){r=l.length,s=Yt();for(var h=0;h<r;h++)s.push(l[h]);if(e.en)for(h=0;h<r;h++)l=s[h],l.Ad!==null&&l.Ad(l,i);Vt(s)}}e.yg.clear()}},e.addEventListener("load",e.zq),e.addEventListener("error",e.Sp),e.py=!0)}Ri.prototype.aA=function(){if(this.source!==""){zh(this.source);var t=this.source;this.source="",this.source=t}},Ri.prototype.redraw=function(){this.N()},Ri.prototype.dh=function(t,e){var i=this.Bg;if(i!==null){var n=i.getAttribute("src");if(!(i instanceof HTMLImageElement&&(n===null||n==="")||i.hn instanceof Event&&t instanceof ml)){var r=t instanceof wn;n=this.naturalBounds;var s=0,l=0,h=this.nn,a=h?+i.width:i.naturalWidth;if(h=h?+i.height:i.naturalHeight,a===void 0&&i.videoWidth&&(a=i.videoWidth),h===void 0&&i.videoHeight&&(h=i.videoHeight),a=a||n.width,h=h||n.height,a!==0&&h!==0){var f=a,p=h;this.sourceRect.w()&&(s=this.Tg.x,l=this.Tg.y,a=this.Tg.width,h=this.Tg.height);var d=a,y=h,x=this.Jk,v=this.Ik;switch(x){case he:if(this.sourceRect.w())break;d>=n.width&&(s=s+v.offsetX+(d*v.x-n.width*v.x)),y>=n.height&&(l=l+v.offsetY+(y*v.y-n.height*v.y)),a=Math.min(n.width,d),h=Math.min(n.height,y);break;case fe:d=n.width,y=n.height;break;case Fr:case cf:x===Fr?(x=Math.min(n.height/y,n.width/d),d*=x,y*=x):x===cf&&(x=Math.max(n.height/y,n.width/d),d*=x,y*=x,d>=n.width&&(s=(s+v.offsetX+(d*v.x-n.width*v.x)/d)*a),y>=n.height&&(l=(l+v.offsetY+(y*v.y-n.height*v.y)/y)*h),a*=1/(d/n.width),h*=1/(y/n.height),d=n.width,y=n.height)}x=this.Bf()*e.scale;var S=d*x*y*x,N=a*h/S,k=i.__goCache;x=null;var C=aj;if(!r){if(i.mq&&k!==void 0&&4<S&&N>C*C)for(k.di===null&&(I2(k,4,f,p,i),I2(k,16,f,p,i)),r=k.di,f=r.length,p=0;p<f&&r[p].ratio*r[p].ratio<N;p++)x=r[p];if(!e.Um){if(this.rl===null)if(this.Bg===null)this.rl=!1;else{r=new In(null).context;try{r.drawImage(this.Bg,0,0)}catch{this.bn=!1}try{r.getImageData(0,0,1,1).data[3]&&(this.rl=!1),this.rl=!1}catch{this.rl=!0}}if(this.rl)return}}switch(r=d<n.width?v.offsetX+(n.width*v.x-d*v.x):0,v=y<n.height?v.offsetY+(n.height*v.y-y*v.y):0,this.flip){case df:t.translate(Math.min(n.width,d),0),t.scale(-1,1);break;case pf:t.translate(0,Math.min(n.height,y)),t.scale(1,-1);break;case gf:t.translate(Math.min(n.width,d),Math.min(n.height,y)),t.scale(-1,-1)}if(t.vc(),e.Ef("pictureRatioOptimization")&&!e.Xi&&k!==void 0&&x!==null&&x.ratio!==1){t.save(),e=x.ratio;try{t.drawImage(x.source,s/e,l/e,Math.min(x.source.width,a/e),Math.min(x.source.height,h/e),r,v,Math.min(n.width,d),Math.min(n.height,y))}catch{this.bn=!1}t.restore()}else try{t.drawImage(i,s,l,a,h,r,v,Math.min(n.width,d),Math.min(n.height,y))}catch{this.bn=!1}switch(this.flip){case df:t.scale(-1,1),t.translate(-Math.min(n.width,d),0);break;case pf:t.scale(1,-1),t.translate(0,-Math.min(n.height,y));break;case gf:t.scale(-1,-1),t.translate(-Math.min(n.width,d),-Math.min(n.height,y))}}}}},Ri.prototype.Sl=function(t,e,i,n){var r=this.desiredSize,s=dr(this,!0),l=this.Bg,h=this.nn,a=0,f=0;(h||!this.Xk&&l&&l.complete)&&(this.Xk=!0),l===null?(isFinite(r.width)||(t=0),isFinite(r.height)||(e=0)):(a=h?+l.width:l.naturalWidth,f=h?+l.height:l.naturalHeight),isFinite(r.width)||s===fe||s===Ge?(isFinite(t)||(this.sourceRect.w()?t=this.sourceRect.width:l!==null&&(t=a)),i=0):l!==null&&this.Xk!==!1&&(t=this.sourceRect.w()?this.sourceRect.width:a),isFinite(r.height)||s===fe||s===Qe?(isFinite(e)||(this.sourceRect.w()?e=this.sourceRect.height:l!==null&&(e=f)),n=0):l!==null&&this.Xk!==!1&&(e=this.sourceRect.w()?this.sourceRect.height:f),isFinite(r.width)&&(t=r.width),isFinite(r.height)&&(e=r.height),r=this.maxSize,s=this.minSize,i=Math.max(i||0,s.width),n=Math.max(n||0,s.height),t=Math.min(r.width,t),e=Math.min(r.height,e),t=Math.max(i,t),e=Math.max(n,e),l===null||l.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),vo(this.ac,t,e),this.De(0,0,t,e)},Ri.prototype.$g=function(t,e,i,n){Tm(this,t,e,i,n)},z.Object.defineProperties(Ri.prototype,{element:{get:function(){return this.Bg},set:function(t){var e=this.Bg;if(e!==t){this.nn=t instanceof HTMLCanvasElement;var i=t instanceof HTMLImageElement;t===null||i||t instanceof HTMLVideoElement||this.nn||R("Picture.element must be an instance of Image, Canvas, or Video, not: "+t);var n=this.diagram;n!==null&&dm(n,this),this.Bg=t,t!==null&&i&&t.yg===void 0&&(t.yg=new q),n!==null&&i&&pm(n,this),t!==null&&(this.nn||t.complete===!0?(t.en&&(t.hn instanceof Event&&this.Ad!==null?this.Ad(this,t.hn):t.mq===!0&&!t.hn&&this.Vg!==null&&t.bu&&this.Vg(this,t.bu)),t.mq=!0,this.desiredSize.w()||(vn(this,!1),this.v())):i&&O2(this,t)),this.g("element",e,t),this.N()}}},source:{get:function(){return this.no},set:function(t){var e=this.no;if(e!==t){this.no=t;var i=Bh;if($n){var n=null;if(i[t]!==void 0)n=i[t];else if(t!==""){30<md&&(zh(),i=Bh),n=J("img"),n.en=!0,O2(this,n);var r=this.nl;r!==null&&(n.crossOrigin=r(this)),n.src=t,i[t]=n,md++}this.element=n,n!==null&&n.__goCache===void 0&&(n.__goCache=new A2),this.v(),this.N()}this.g("source",e,t)}}},sourceCrossOrigin:{get:function(){return this.nl},set:function(t){if(this.nl!==t&&(this.nl=t,this.element!==null)){var e=this.element.getAttribute("src");t===null&&typeof e=="string"?this.element.crossOrigin=null:t!==null&&(this.element.crossOrigin=t(this)),this.element.src=e}}},sourceRect:{get:function(){return this.Tg},set:function(t){var e=this.Tg;e.C(t)||(this.Tg=t=t.J(),this.N(),this.g("sourceRect",e,t))}},imageStretch:{get:function(){return this.Jk},set:function(t){var e=this.Jk;e!==t&&(this.Jk=t,this.N(),this.g("imageStretch",e,t))}},flip:{get:function(){return this.Vf},set:function(t){var e=this.Vf;e!==t&&(this.Vf=t,this.N(),this.g("flip",e,t))}},imageAlignment:{get:function(){return this.Ik},set:function(t){var e=this.Ik;e.C(t)||(this.Ik=t=t.J(),this.N(),this.g("imageAlignment",e,t))}},errorFunction:{get:function(){return this.Ad},set:function(t){var e=this.Ad;e!==t&&(this.Ad=t,this.g("errorFunction",e,t))}},successFunction:{get:function(){return this.Vg},set:function(t){var e=this.Vg;e!==t&&(this.Vg=t,this.g("successFunction",e,t))}},naturalBounds:{get:function(){return this.ac}}}),Ri.prototype.redraw=Ri.prototype.redraw,Ri.prototype.reloadSource=Ri.prototype.aA;var md=0,aj=4;Ri.className="Picture",Bh=new We,Ri.clearCache=zh;function A2(){this.di=null}function I2(t,e,i,n,r){t.di===null&&(t.di=[]);var s=new In(null),l=s.context,h=1/e;s.width=i/e,s.height=n/e,s.width!==0&&s.height!==0&&(e=new D2(s.La,e),i=1,0<t.di.length&&(i=t.di[t.di.length-1],r=i.source,i=i.ratio),l.setTransform(h*i,0,0,h*i,0,0),l.vc(),l.drawImage(r,0,0),t.di.push(e))}A2.className="PictureCacheArray";function D2(t,e){this.source=t,this.ratio=e}D2.className="PictureCacheInstance";function Vh(){this.js=new W,this.ic=null}Vh.prototype.reset=function(t){t!==null?(t.ka(),this.js=t,t.figures.clear()):this.js=new W,this.ic=null};function Uh(t,e,i,n,r,s){t.ic=new De,t.ic.startX=e,t.ic.startY=i,t.ic.isFilled=n,t.ic.isEvenOdd=s||!1,t.js.figures.add(t.ic),r!==void 0&&(t.ic.isShadowed=r)}function fj(t){var e=t.ic.segments.length;0<e&&t.ic.segments.L(e-1).close()}Vh.prototype.moveTo=function(t,e,i){i===void 0&&(i=!1);var n=new At(Wn);n.endX=t,n.endY=e,i&&n.close(),this.ic.segments.add(n)},Vh.prototype.lineTo=function(t,e,i){i===void 0&&(i=!1);var n=new At(te);n.endX=t,n.endY=e,i&&n.close(),this.ic.segments.add(n)};function qo(t,e,i,n,r,s,l){var h;h===void 0&&(h=!1);var a=new At(dn);a.point1X=e,a.point1Y=i,a.point2X=n,a.point2Y=r,a.endX=s,a.endY=l,h&&a.close(),t.ic.segments.add(a)}function vd(t,e,i,n,r){var s;s===void 0&&(s=!1);var l=new At(Er);l.point1X=e,l.point1Y=i,l.endX=n,l.endY=r,s&&l.close(),t.ic.segments.add(l)}Vh.prototype.arcTo=function(t,e,i,n,r,s,l){s===void 0&&(s=0),l===void 0&&(l=!1);var h=new At(me);h.startAngle=t,h.sweepAngle=e,h.centerX=i,h.centerY=n,h.radiusX=r,h.radiusY=s!==0?s:r,l&&h.close(),this.ic.segments.add(h)};function cj(t,e,i,n,r,s,l,h){var a;a===void 0&&(a=!1),e=new At(ar,l,h,e,i,n,r,s),a&&e.close(),t.ic.segments.add(e)}function R2(t){var e=xd;return e!==null?(xd=null,e.reset(t),e):(e=new Vh,e.reset(t),e)}var xd=null;Vh.className="StreamGeometryContext";function qe(t,e){var i=t.toLowerCase(),n=F.We;n[t]=e,n[i]=t}qe("Rectangle",function(t,e,i){t="r"+e+","+i;var n=F.Kf[t];return n!==void 0||(n=new W(W.u),n.endX=e,n.endY=i,F.Lf<F.sm&&(F.Kf[t]=n,F.Lf++)),n}),qe("Square",function(t,e,i){t="s"+e+","+i;var n=F.Kf[t];return n!==void 0||(n=new W(W.u),n.endX=e,n.endY=i,n.defaultStretch=Fr,F.Lf<F.sm&&(F.Kf[t]=n,F.Lf++)),n}),qe("RoundedRectangle",function(t,e,i){t=t?t.parameter1:NaN,(isNaN(t)||0>t)&&(t=5),t=Math.min(t,e/3),t=Math.min(t,i/3);var n="rr"+e+","+i+","+t,r=F.Kf[n];if(r!==void 0)return r;var s=t*F.tg;return r=new W().add(new De(t,0,!0).add(new At(te,e-t,0)).add(new At(dn,e,t,e-s,0,e,s)).add(new At(te,e,i-t)).add(new At(dn,e-t,i,e,i-s,e-s,i)).add(new At(te,t,i)).add(new At(dn,0,i-t,s,i,0,i-s)).add(new At(te,0,t)).add(new At(dn,t,0,0,s,s,0).close())),1<s&&(r.spot1=new at(0,0,s,s),r.spot2=new at(1,1,-s,-s)),F.Lf<F.sm&&(F.Kf[n]=r,F.Lf++),r}),qe("Border","RoundedRectangle"),qe("Ellipse",function(t,e,i){t="e"+e+","+i;var n=F.Kf[t];return n!==void 0||(n=new W(W.F),n.endX=e,n.endY=i,n.spot1=E0,n.spot2=F0,F.Lf<F.sm&&(F.Kf[t]=n,F.Lf++)),n}),qe("Circle",function(t,e,i){t="c"+e+","+i;var n=F.Kf[t];return n!==void 0||(n=new W(W.F),n.endX=e,n.endY=i,n.spot1=E0,n.spot2=F0,n.defaultStretch=Fr,F.Lf<F.sm&&(F.Kf[t]=n,F.Lf++)),n}),qe("TriangleRight",function(t,e,i){return new W().add(new De(0,0).add(new At(te,e,.5*i)).add(new At(te,0,i).close())).mm(0,.25,.5,.75)}),qe("TriangleDown",function(t,e,i){return new W().add(new De(0,0).add(new At(te,e,0)).add(new At(te,.5*e,i).close())).mm(.25,0,.75,.5)}),qe("TriangleLeft",function(t,e,i){return new W().add(new De(e,i).add(new At(te,0,.5*i)).add(new At(te,e,0).close())).mm(.5,.25,1,.75)}),qe("TriangleUp",function(t,e,i){return new W().add(new De(e,i).add(new At(te,0,i)).add(new At(te,.5*e,0).close())).mm(.25,.5,.75,1)}),qe("Triangle","TriangleUp"),qe("Diamond",function(t,e,i){return new W().add(new De(.5*e,0).add(new At(te,0,.5*i)).add(new At(te,.5*e,i)).add(new At(te,e,.5*i).close())).mm(.25,.25,.75,.75)}),qe("LineH",function(t,e,i){return t=new W(W.j),t.startX=0,t.startY=i/2,t.endX=e,t.endY=i/2,t}),qe("LineV",function(t,e,i){return t=new W(W.j),t.startX=e/2,t.startY=0,t.endX=e/2,t.endY=i,t}),qe("None","Rectangle"),qe("BarH","Rectangle"),qe("BarV","Rectangle"),qe("MinusLine","LineH"),qe("PlusLine",function(t,e,i){return new W().add(new De(0,i/2,!1).add(new At(te,e,i/2)).add(new At(Wn,e/2,0)).add(new At(te,e/2,i)))}),qe("XLine",function(t,e,i){return new W().add(new De(0,i,!1).add(new At(te,e,0)).add(new At(Wn,0,0)).add(new At(te,e,i)))}),qe("LineRight",function(t,e,i){return new W().add(new De(.25*e,0,!1).add(new At(te,.75*e,.5*i)).add(new At(te,.25*e,i)))}),qe("LineDown",function(t,e,i){return new W().add(new De(0,.25*i,!1).add(new At(te,.5*e,.75*i)).add(new At(te,e,.25*i)))}),qe("LineLeft",function(t,e,i){return new W().add(new De(.75*e,0,!1).add(new At(te,.25*e,.5*i)).add(new At(te,.75*e,i)))}),qe("LineUp",function(t,e,i){return new W().add(new De(0,.75*i,!1).add(new At(te,.5*e,.25*i)).add(new At(te,e,.75*i)))}),F.rm={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};function uv(){this.jc=!1,this.mr=this.Fp=this.tq=null,this.pr="",this.$q=this.iq=this.nr=null,this.br="",this.ar=dp,this.cr=null,this.dr="",this.fr=Je,this.Aq="",this.Bq=ei,this.Jq=h0,this.Eq=a0,this.Pp=null,this.wq=127,this.tr=f0,this.sr="gray",this.Rg=4}uv.prototype.copy=function(){var t=new uv;return t.tq=this.tq,t.Fp=this.Fp,t.mr=this.mr,t.pr=this.pr,t.nr=this.nr,t.iq=this.iq,t.$q=this.$q,t.br=this.br,t.ar=this.ar.J(),t.cr=this.cr,t.dr=this.dr,t.fr=this.fr.J(),t.Aq=this.Aq,t.Bq=this.Bq.J(),t.Jq=this.Jq.J(),t.Eq=this.Eq.J(),t.Pp=this.Pp,t.wq=this.wq,t.tr=this.tr.J(),t.sr=this.sr,t.Rg=this.Rg,t};function lt(t,e){t===void 0||t instanceof xe||typeof t=="string"?_.call(this,t):(_.call(this),t&&(e=t)),this.G=2408959,this.Rf="",this.P=null,this.Fg="",this.Of=this.Qg=null,this.bc="",this.wh=this.aj=null,this.ge=new P(NaN,NaN).freeze(),this.kf=null,this.xo=NaN,this.rw=-1,this.oy=new V,this.Oh=null,this.Yf=NaN,e&&Object.assign(this,e)}B(lt,_),lt.prototype.cloneProtected=function(t){_.prototype.cloneProtected.call(this,t),t.G=this.G&-4097|49152,t.Rf=this.Rf,this.P!==null&&(t.P=this.P.jc?this.P:this.P.copy()),t.Fg=this.Fg,t.Of=null,t.bc=this.bc,t.ge.assign(this.ge),t.xo=this.xo},o=lt.prototype,o.yf=function(t){_.prototype.yf.call(this,t),t.kh(),t.Qg=null,t.kf=null,t.Oh=null},o.toString=function(){var t=Ms(this.constructor)+"#"+Ei(this);return this.data!==null&&(t+="("+Gi(this.data)+")"),t};function Oi(t){t.P===null?t.P=new uv:t.P.jc&&(t.P=t.P.copy())}o.ph=function(){_.prototype.ph.call(this),this.P!==null&&(this.P.jc=!0)},o.dk=function(t,e,i,n,r,s,l){var h=this.diagram;h!==null&&(t===Ne&&e==="elements"?r instanceof _?vl(r,function(a){Rv(h.partManager,a),LM(h,a)}):pm(h,r):t===je&&e==="elements"&&(r instanceof _?vl(r,function(a){Bv(h.partManager,a,h)}):dm(h,r)),h.cb(t,e,i,n,r,s,l))},o.Ma=function(t){if(_.prototype.Ma.call(this,t),this.data!==null){for(var e=this.O.s,i=e.length,n=0;n<i;n++){var r=e[n];r instanceof _&&vl(r,function(s){s.data!==null&&s.Ma()})}for(e=this.adornments;e.next();)e.value.Ma(t)}},lt.prototype.updateRelationshipsFromData=function(){var t;this.data!==null&&((t=this.diagram)===null||t===void 0||t.partManager.updateRelationshipsFromData(this))},lt.prototype.Nj=function(t){var e=this.Of;return e===null?null:e.I(t)},lt.prototype.Yg=function(t,e){if(e!==null){var i=null,n=this.Of;if(n!==null&&(i=n.I(t)),i!==e){if(i!==null){var r=i.diagram;r!==null&&r.remove(i)}n===null&&(this.Of=n=new vt),e.Rf!==t&&(e.category=t),n.add(t,e),t=this.diagram,t!==null&&(t.add(e),t=e.adornedObject,t!==null&&(t=t.eh(),t!==null&&(e.data=t.data)))}}},lt.prototype.Hf=function(t){var e=this.Of;if(e!==null){var i=e.I(t);if(i!==null){var n=i.diagram;n!==null&&n.remove(i)}e.remove(t),e.count===0&&(this.Of=null)}},lt.prototype.Cj=function(){var t=this.Of;if(t!==null){var e=Yt();for(t=t.iterator;t.next();)e.push(t.key);t=e.length;for(var i=0;i<t;i++)this.Hf(e[i]);Vt(e)}},lt.prototype.updateAdornments=function(){var t=this.diagram;if(t!==null){for(var e=this.adornments;e.next();){var i=e.value;i.v(),i.placeholder&&i.placeholder.v()}t:{if(this.isSelected&&this.selectionAdorned&&(e=this.selectionObject,e!==null&&this.actualBounds.w()&&this.isVisible()&&e.Od()&&e.actualBounds.w())){if(i=this.Nj("Selection"),i===null){if(i=this.selectionAdornmentTemplate,i===null&&(i=this.lh()?t.linkSelectionAdornmentTemplate:this instanceof yt?t.groupSelectionAdornmentTemplate:t.nodeSelectionAdornmentTemplate),!(i instanceof jt))break t;Dn(i),i=i.copy(),i!==null&&(this.lh()&&this.selectionObject===this.path&&(i.type=_.Link),i.adornedObject=e)}if(i!==null){i.type===_.Link&&i.v(),this.Yg("Selection",i);break t}}this.Hf("Selection")}for(pj(this,t),e=this.adornments;e.next();)e.value.Ma()}},lt.prototype.Sb=function(){var t=this.diagram;t!==null&&(t.rd=!0,!(this.G&16384)&&(this.G|=16384))};function hv(t){t.G&16384&&(t.updateAdornments(),t.G&=-16385)}function pj(t,e){e.toolManager.mouseDownTools.each(function(i){i.isEnabled&&i.updateAdornments(t)}),e.toolManager.updateAdornments(t)}function av(t,e){t.aj=e,t.svg!==null&&t.svg.remove()}function wd(t){if(Ls(t)===!1){cv(t,!0),t.Qk();var e=t.diagram;e!==null&&(e.Ae.add(t),e.Wb())}}function B2(t){if(t.G|=2097152,Ls(t)!==!1){var e=t.position,i=t.location;i.w()&&e.w()||U2(t,e,i),i=t.Gb;var n=V.alloc().assign(i);i.ka(),i.x=e.x,i.y=e.y,i.freeze(),t.Tl(n,i),V.free(n),cv(t,!1)}}lt.prototype.De=function(t,e,i,n){var r=this.rc;r.h(t,e,i,n),this.Jb===null&&(this.Jb=new Nt);var s=this.Jb;s.reset(),this.ko(s,t,e,i,n),this.Jb=s,s.rs()||s.kp(r)},lt.prototype.ko=function(t,e,i,n,r){if(this.Aa!==1&&t.scale(this.Aa),this.Ib!==0){var s=Ut;this.locationSpot.tb()&&(s=this.locationSpot);var l=P.alloc();if(this.locationObject!==this)for(e=this.locationObject,i=e.naturalBounds,l.vi(i.x,i.y,i.width,i.height,s),e.Jb!==null&&e.Jb.Ga(l),l.offset(-e.measuredBounds.x,-e.measuredBounds.y),s=e.panel;s!==null&&s!==this;)s.Jb!==null&&s.Jb.Ga(l),l.offset(-s.measuredBounds.x,-s.measuredBounds.y),s=s.panel;else l.vi(e,i,n,r,s);t.rotate(this.Ib,l.x,l.y),P.free(l)}},lt.prototype.move=function(t,e){e===!0?this.location=t:this.position=t},lt.prototype.moveTo=function(t,e,i){t=P.allocAt(t,e),this.move(t,i),P.free(t)},lt.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;if(t!==null){if(!t.visible)return!1;if(t=t.diagram,t!==null&&t.animationManager.dv(this))return!0}return t=this.containingGroup,!!(t===null||t.isSubGraphExpanded&&t.isVisible())},lt.prototype.Vb=function(t){var e=this.diagram;t?(this.D(4),this.Sb(),e!==null&&e.Ae.add(this)):(this.D(8),this.Cj()),this.kh(),e!==null&&(e.Ya(),e.N())},lt.prototype.fb=function(t){if(this.name===t)return this;var e=this.Oh;if(e===null&&(this.Oh=e=new vt),e.I(t)!==null)return e.I(t);var i=_.prototype.fb.call(this,t);return i!==null?(e.set(t,i),i):(e.set(t,null),null)};function bo(t,e,i,n){n===void 0&&(n=new P),i=i.Jc()?Ut:i;var r=e.naturalBounds;if(n.h(r.width*i.x+i.offsetX,r.height*i.y+i.offsetY),e===null||e===t)return n;for(e.transform.Ga(n),e=e.panel;e!==null&&e!==t;)e.transform.Ga(n),e=e.panel;return t.Jb!==null&&t.Jb.Ga(n),n.offset(-t.rc.x,-t.rc.y),n}lt.prototype.ji=function(t){return t===void 0&&(t=new V),t.assign(this.actualBounds)},lt.prototype.Va=function(){this.measure(1/0,1/0),this.arrange()};function z2(t){var e=P.alloc(),i=t.locationObject,n=i.naturalBounds,r=i instanceof wt?i.strokeWidth:0;if(e.vi(0,0,n.width+r,n.height+r,t.locationSpot),i!==t)for(e.offset(-r/2,-r/2),i.transform.Ga(e),i=i.panel;i!==null&&i!==t;)i.transform.Ga(e),i=i.panel;return t.Jb!==null&&t.Jb.Ga(e),e.offset(-t.rc.x,-t.rc.y),e}function Sl(t,e){var i=t.oy;isNaN(t.Yf)&&(t.Yf=d2(t));var n=t.Yf,r=2*n;if(!t.isShadowed)return i.h(e.x-1-n,e.y-1-n,e.width+2+r,e.height+2+r),i;n=e.x,r=e.y;var s=e.width;e=e.height;var l=t.shadowBlur;return t=t.shadowOffset,s+=l,e+=l,n-=l/2,r-=l/2,0<t.x?s+=t.x:(n+=t.x,s-=t.x),0<t.y?e+=t.y:(r+=t.y,e-=t.y),i.h(n-1,r-1,s+2,e+2),i}lt.prototype.arrange=function(){if(Zn(this)===!1)B2(this);else{dl(this,!1);var t=this.Gb,e=V.alloc();e.assign(t);var i=js(this);this.$g(0,0,this.rc.width,this.rc.height);var n=this.position;U2(this,n,this.location),t.ka(),t.x=n.x,t.y=n.y,t.freeze(),this.Tl(e,t),e.C(t)?this.yd(i):!this.Uc()||F.B(e.width,t.width)&&F.B(e.height,t.height)||0<=this.rw&&this.D(16),V.free(e),cv(this,!1)}},o=lt.prototype,o.Tl=function(t,e){var i=this.diagram;if(i!==null){var n=!1;if(i.Wi===!1&&t.w()){var r=V.alloc();r.assign(i.documentBounds),r.Bv(i.padding),t.x>r.x&&t.y>r.y&&t.right<r.right&&t.bottom<r.bottom&&e.x>r.x&&e.y>r.y&&e.right<r.right&&e.bottom<r.bottom&&(n=!0),V.free(r)}!(this.G&65536)&&t.C(e)||_2(this,n,i),i.N(),!t.w()&&!e.w()||y0(t,e)||(this instanceof b&&!i.undoManager.isUndoingRedoing&&this.xd(),this.kh())}},o.vv=function(t,e,i){if(this.lh()||!t.w())return!1;var n=this.diagram;return n!==null&&V2(this,n,t,e,i),this.pa=t,this.G&=-2097153,!this.ge.w()||n!==null&&!n.animationManager.isTicking&&n.undoManager.isUndoingRedoing||(n=this.ge,this.ge=new P(n.x+(t.x-e),n.y+(t.y-i)),this.g("location",n,this.ge.copy())),Ls(this)===!1&&Zn(this)===!1&&(wd(this),B2(this)),!0};function V2(t,e,i,n,r){e===null||t instanceof jt||(e=e.animationManager,e.zb&&nM(e,t,new P(n,r),i))}o.jm=function(t,e,i){var n=this.ge,r=this.pa;if(i){if(n.x===t&&n.y===e)return;Ls(this)||Zn(this)?r.h(NaN,NaN):r.h(r.x+t-n.x,r.y+e-n.y),n.h(t,e)}else{if(r.x===t&&r.y===e)return;n.h(n.x+t-r.x,n.y+e-r.y),r.h(t,e)}wd(this)},o.wv=function(){this.G&=-2097153,wd(this)};function U2(t,e,i){var n=z2(t),r=t.diagram,s=i.w(),l=e.w();s&&l?t.G&2097152?Y2(t,e,i,r,n):H2(t,e,i,r,n):s?Y2(t,e,i,r,n):l&&H2(t,e,i,r,n),t.G|=2097152,P.free(n),t.Qk()}function Y2(t,e,i,n,r){var s=e.x,l=e.y;e.h(i.x-r.x,i.y-r.y),n!==null&&(i=n.animationManager,(n=i.defaultAnimation.isAnimating)||!i.zb||t instanceof jt||nM(i,t,new P(s,l),e),n||e.x===s&&e.y===l||t.g("position",new P(s,l),e.copy()))}function H2(t,e,i,n,r){var s=i.copy();i.h(e.x+r.x,e.y+r.y),i.C(s)||n===null||t.g("location",s,i.copy())}function _2(t,e,i){pv(t,!1),t instanceof b&&wm(i,t),t.layer.isTemporary||e||i.Ya(),e=t.Gb;var n=i.viewportBounds;n.w()?js(t)?(wS(e,n)||t.yd(!1),t.updateAdornments()):t.isVisible()&&e.Tc(n)?(t.yd(!0),t.updateAdornments()):t.Sb():i.rd=!0}o.oi=function(){return!0},o.Uc=function(){return!0},o.lh=function(){return!1},o.le=function(){return!0};function fv(t,e,i,n){e.constructor===t.constructor||K2||(K2=!0,Lt('Should not change the class of the Part when changing category from "'+i+'" to "'+n+'"'),Lt("  Old class: "+Ms(t.constructor)+", new class: "+Ms(e.constructor)+", part: "+t.toString())),t.Cj();var r=t.data;i=t.layerName;var s=t.isSelected,l=t.isHighlighted,h=!0,a=!0,f=!1;t instanceof b&&(h=t.isTreeLeaf,a=t.isTreeExpanded,f=t.wasTreeExpanded),e.yf(t),e.cloneProtected(t),t.Rf=n,t.svg!==null&&(t.svg.remove(),t.svg=null,t.pf=!0),t.v(),t.N(),e=t.diagram,n=!0,e!==null&&(n=e.skipsUndoManager,e.skipsUndoManager=!0),t.ub=r,t.G=s?t.G|4096:t.G&-4097,t.G=l?t.G|524288:t.G&-524289,t instanceof b&&(t.U=h?t.U|4:t.U&-5,t.U=a?t.U|1:t.U&-2,t.U=f?t.U|2:t.U&-3),r!==null&&t.Ma(),r=t.layerName,r!==i&&(t.Fg=i,t.layerName=r),e!==null&&(e.skipsUndoManager=n),t.Uc()&&t.D(64)}lt.prototype.canCopy=function(){if(!this.copyable)return!1;var t=this.layer;return t===null?!0:t.allowCopy?(t=t.diagram,t===null?!0:!!t.allowCopy):!1},lt.prototype.canDelete=function(){if(!this.deletable)return!1;var t=this.layer;return t===null?!0:t.allowDelete?(t=t.diagram,t===null?!0:!!t.allowDelete):!1},lt.prototype.canEdit=function(){if(!this.textEditable)return!1;var t=this.layer;return t===null?!0:t.allowTextEdit?(t=t.diagram,t===null?!0:!!t.allowTextEdit):!1},lt.prototype.canGroup=function(){if(!this.groupable)return!1;var t=this.layer;return t===null?!0:t.allowGroup?(t=t.diagram,t===null?!0:!!t.allowGroup):!1},lt.prototype.canMove=function(){if(!this.movable)return!1;var t=this.layer;return t===null?!0:t.allowMove?(t=t.diagram,t===null?!0:!!t.allowMove):!1},lt.prototype.canReshape=function(){if(!this.reshapable)return!1;var t=this.layer;return t===null?!0:t.allowReshape?(t=t.diagram,t===null?!0:!!t.allowReshape):!1},lt.prototype.canResize=function(){if(!this.resizable)return!1;var t=this.layer;return t===null?!0:t.allowResize?(t=t.diagram,t===null?!0:!!t.allowResize):!1},lt.prototype.canRotate=function(){if(!this.rotatable)return!1;var t=this.layer;return t===null?!0:t.allowRotate?(t=t.diagram,t===null?!0:!!t.allowRotate):!1},lt.prototype.canSelect=function(){if(!this.selectable)return!1;var t=this.layer;return t===null?!0:t.allowSelect?(t=t.diagram,t===null?!0:!!t.allowSelect):!1};function Ls(t){return(t.G&32768)!==0}function cv(t,e){t.G=e?t.G|32768:t.G&-32769}function pv(t,e){t.G=e?t.G|65536:t.G&-65537}function js(t){return(t.G&131072)!==0}o=lt.prototype,o.yd=function(t){this.G=t?this.G|131072:this.G&-131073};function Sd(t,e){t.G=e?t.G|1048576:t.G&-1048577}o.kh=function(){var t=this.containingGroup;t!==null&&(t.v(),t.placeholder!==null&&t.placeholder.v(),t.xd())},o.N=function(){var t=this.diagram;t!==null&&!Zn(this)&&!Ls(this)&&this.isVisible()&&this.Gb.w()&&t.N(Sl(this,this.Gb))},o.v=function(){_.prototype.v.call(this);var t=this.diagram;t!==null&&(t.Ae.add(this),this instanceof b&&this.labeledLink!==null&&Ph(this.labeledLink),t.Wb(!0))},o.Qo=function(t){t||(t=this.wh,t!==null&&xv(t,this))},o.Ro=function(t){t||(t=this.wh,t!==null&&wv(t,this))},o.Jj=function(){var t=this.data;if(t!==null){var e=this.diagram;e!==null&&(e=e.model,e!==null&&e.$l(t))}},o.jz=function(){return dv(this,this)};function dv(t,e){var i=e.containingGroup;return i!==null?1+dv(t,i):e instanceof b&&(e=e.labeledLink,e!==null)?dv(t,e):0}o.nz=function(){return G2(this,this)};function G2(t,e){var i=e.containingGroup;return i!==null||e instanceof b&&(i=e.labeledLink,i!==null)?G2(t,i):e}o.Nd=function(t){return t instanceof yt?gv(this,this,t):!1};function gv(t,e,i){if(e===i||i===null)return!1;var n=e.containingGroup;return n===null||n!==i&&!gv(t,n,i)?e instanceof b&&(e=e.labeledLink,e!==null)?gv(t,e,i):!1:!0}o.mx=function(t){if(t===null)return null;if(this===t)return this.containingGroup;for(var e=this;e!==null;){if(e instanceof yt&&Sd(e,!0),e instanceof b){var i=e.labeledLink;i!==null&&(e=i)}e=e.containingGroup}for(i=null,e=t;e!==null;){if(e.G&1048576){i=e;break}e instanceof b&&(t=e.labeledLink,t!==null&&(e=t)),e=e.containingGroup}for(e=this;e!==null;)e instanceof yt&&Sd(e,!1),e instanceof b&&(t=e.labeledLink,t!==null&&(e=t)),e=e.containingGroup;return i},lt.prototype.canLayout=function(){if(!this.isLayoutPositioned||!this.isVisible())return!1;var t=this.layer;return!(t!==null&&t.isTemporary||this instanceof b&&this.isLinkLabel)},lt.prototype.D=function(t){if(t===void 0&&(t=16777215),this.isLayoutPositioned&&t&this.layoutConditions){var e=this.layer;e!==null&&e.isTemporary||this instanceof b&&this.isLinkLabel?e=!1:(e=this.diagram,e=!(e!==null&&e.undoManager.isUndoingRedoing))}else e=!1;if(e)if(e=this.wh,e!==null){var i=e.layout;i!==null?i.D():e.D(t)}else t=this.diagram,t!==null&&(t=t.layout,t!==null&&t.D())};function X2(t){return t.isVisible()?(t=t.layer,!(t!==null&&t.isTemporary)):!1}function Es(t,e,i,n,r,s){if(s===void 0&&(s=null),!(t.contains(e)||s!==null&&!s(e)||e instanceof jt)){if(t.add(e),e instanceof b){if(i&&e instanceof yt)for(var l=e.memberParts;l.next();)Es(t,l.value,i,n,r,s);if(r!==!1)for(l=e.linksConnected;l.next();){var h=l.value;if(!t.contains(h)){var a=h.fromNode,f=h.toNode;a=a===null||t.contains(a),f=f===null||t.contains(f),(r?a&&f:a||f)&&Es(t,h,i,n,r,s)}}if(1<n)for(e=e.Mu();e.next();)Es(t,e.value,i,n-1,r,s)}else if(e instanceof X)for(e=e.labelNodes;e.next();)Es(t,e.value,i,n,r,s)}}z.Object.defineProperties(lt.prototype,{key:{get:function(){var t=this.diagram;if(t!==null)return t.model.va(this.data)}},adornments:{get:function(){return this.Of===null?Kn:this.Of.iteratorValues}},layer:{get:function(){return this.aj}},diagram:{get:function(){var t=this.aj;return t==null?null:t.diagram}},layerName:{get:function(){return this.Fg},set:function(t){var e=this.Fg;if(e!==t){var i=this.diagram;if((i===null||i.Oj(t)!==null&&!i.partManager.addsToTemporaryLayer)&&(this.Fg=t,i!==null&&i.Ya(),this.g("layerName",e,t),e=this.layer,e!==null&&e.name!==t&&(i=e.diagram,i!==null&&(t=i.Oj(t),t!==null&&t!==e)))){var n=e.mc(-1,this,!0);if(0<=n&&i.cb(je,"parts",e,this,null,n,!0),n=t.li(99999999,this,!0),e.visible!==t.visible&&this.Vb(t.visible),0<=n&&i.cb(Ne,"parts",t,null,this,!0,n),n=this.layerChanged,n!==null){var r=i.aa;i.aa=!0,n(this,e,t),i.aa=r}}}}},layerChanged:{get:function(){return this.P!==null?this.P.tq:null},set:function(t){var e=this.layerChanged;e!==t&&(Oi(this),this.P.tq=t,this.g("layerChanged",e,t))}},zOrder:{get:function(){return this.xo},set:function(t){var e=this.xo;if(e!==t){this.xo=t;var i=this.layer;i!==null&&Ep(i,-1,this),this.g("zOrder",e,t),t=this.diagram,t!==null&&t.N()}}},locationObject:{get:function(){if(this.kf===null){var t=this.locationObjectName;t!==""?(t=this.fb(t),t!==null?this.kf=t:this.kf=this):this instanceof jt?this.type!==_.Link&&this.placeholder!==null?this.kf=this.placeholder:this.kf=this:this.kf=this}return this.kf.visible?this.kf:this}},minLocation:{get:function(){return this.P!==null?this.P.Jq:h0},set:function(t){var e=this.minLocation;e.C(t)||(t=t.J(),Oi(this),this.P.Jq=t,this.g("minLocation",e,t))}},maxLocation:{get:function(){return this.P!==null?this.P.Eq:a0},set:function(t){var e=this.maxLocation;e.C(t)||(t=t.J(),Oi(this),this.P.Eq=t,this.g("maxLocation",e,t))}},locationObjectName:{get:function(){return this.P!==null?this.P.Aq:""},set:function(t){var e=this.locationObjectName;e!==t&&(Oi(this),this.P.Aq=t,this.kf=null,this.v(),this.g("locationObjectName",e,t))}},locationSpot:{get:function(){return this.P!==null?this.P.Bq:ei},set:function(t){var e=this.locationSpot;e.C(t)||(t=t.J(),Oi(this),this.P.Bq=t,this.v(),this.g("locationSpot",e,t))}},location:{get:function(){return this.ge},set:function(t){var e=t.x,i=t.y,n=this.ge;if(!(n.x===e||isNaN(n.x)&&isNaN(e))||!(n.y===i||isNaN(n.y)&&isNaN(i))){if(t=t.copy(),e=t,this.lh())e=!1;else{if(this.ge=e,this.G|=2097152,Zn(this)===!1&&(wd(this),i=this.pa,i.w())){var r=this.diagram;if(r===null||r.animationManager.isTicking||!r.undoManager.isUndoingRedoing){var s=i.copy();i.h(i.x+(e.x-n.x),i.y+(e.y-n.y)),V2(this,r,i,s.x,s.y),this.g("position",s,i.copy())}}e=!0}e&&this.g("location",n,t.copy())}}},category:{get:function(){return this.Rf},set:function(t){var e=this.Rf;if(e!==t){this.svg!==null&&(this.svg.remove(),this.pf=!0);var i=this.diagram,n=this.data,r=null;if(i!==null&&n!==null&&!(this instanceof jt)){var s=i.model.undoManager;s.isEnabled&&!s.isUndoingRedoing&&(r=this.clone(),r.O.addAll(this.O))}this.Rf=t,this.g("category",e,t),i===null||n===null||this instanceof jt?this instanceof jt&&(r=this.adornedPart,r!==null&&(t=r.Of,t!==null&&t.remove(e),r.Yg(this.category,this))):(s=i.model,s.undoManager.isUndoingRedoing||(this.lh()?(i.partManager.setLinkCategoryForData(n,t),i=i.partManager.findLinkTemplateForCategory(t),i!==null&&(Dn(i),i=i.copy(),i!==null&&fv(this,i,e,t))):(s!==null&&s.gm(n,t),i=mk(i.partManager,n,t),i!==null&&(Dn(i),i=i.copy(),i===null||i instanceof X||(n=this.location.copy(),fv(this,i,e,t),this.location.w()||(this.location=n)))),r!==null&&(e=this.clone(),e.O.addAll(this.O),this.g("self",r,e))))}}},self:{get:function(){return this},set:function(t){fv(this,t,this.category,t.category)}},copyable:{get:function(){return(this.G&1)!==0},set:function(t){var e=(this.G&1)!==0;e!==t&&(this.G^=1,this.g("copyable",e,t))}},deletable:{get:function(){return(this.G&2)!==0},set:function(t){var e=(this.G&2)!==0;e!==t&&(this.G^=2,this.g("deletable",e,t))}},textEditable:{get:function(){return(this.G&4)!==0},set:function(t){var e=(this.G&4)!==0;e!==t&&(this.G^=4,this.g("textEditable",e,t),this.Sb())}},groupable:{get:function(){return(this.G&8)!==0},set:function(t){var e=(this.G&8)!==0;e!==t&&(this.G^=8,this.g("groupable",e,t))}},movable:{get:function(){return(this.G&16)!==0},set:function(t){var e=(this.G&16)!==0;e!==t&&(this.G^=16,this.g("movable",e,t))}},selectionAdorned:{get:function(){return(this.G&32)!==0},set:function(t){var e=(this.G&32)!==0;e!==t&&(this.G^=32,this.g("selectionAdorned",e,t),this.Sb())}},isInDocumentBounds:{get:function(){return(this.G&64)!==0},set:function(t){var e=(this.G&64)!==0;if(e!==t){this.G^=64;var i=this.diagram;i!==null&&i.Ya(),this.g("isInDocumentBounds",e,t)}}},isLayoutPositioned:{get:function(){return(this.G&128)!==0},set:function(t){var e=(this.G&128)!==0;e!==t&&(this.G^=128,this.g("isLayoutPositioned",e,t),this.D(t?4:8))}},selectable:{get:function(){return(this.G&256)!==0},set:function(t){var e=(this.G&256)!==0;e!==t&&(this.G^=256,this.g("selectable",e,t),this.Sb())}},reshapable:{get:function(){return(this.G&512)!==0},set:function(t){var e=(this.G&512)!==0;e!==t&&(this.G^=512,this.g("reshapable",e,t),this.Sb())}},resizable:{get:function(){return(this.G&1024)!==0},set:function(t){var e=(this.G&1024)!==0;e!==t&&(this.G^=1024,this.g("resizable",e,t),this.Sb())}},rotatable:{get:function(){return(this.G&2048)!==0},set:function(t){var e=(this.G&2048)!==0;e!==t&&(this.G^=2048,this.g("rotatable",e,t),this.Sb())}},isSelected:{get:function(){return(this.G&4096)!==0},set:function(t){var e=(this.G&4096)!==0;if(e!==t){var i=this.diagram;if(!t||this.canSelect()&&!(i!==null&&i.selection.count>=i.maxSelectionCount)){this.G^=4096;var n=!1;if(i!==null){n=i.skipsUndoManager,i.skipsUndoManager=!0;var r=i.selection;r.ka(),t?r.add(this):r.remove(this),r.freeze()}this.g("isSelected",e,t),this.Sb(),t=this.selectionChanged,t!==null&&t(this),i!==null&&(i.Wb(),i.skipsUndoManager=n)}}}},isHighlighted:{get:function(){return(this.G&524288)!==0},set:function(t){var e=(this.G&524288)!==0;if(e!==t){this.G^=524288;var i=this.diagram;i!==null&&(i=i.highlighteds,i.ka(),t?i.add(this):i.remove(this),i.freeze()),this.g("isHighlighted",e,t),this.N(),t=this.highlightedChanged,t!==null&&t(this)}}},isShadowed:{get:function(){return(this.G&8192)!==0},set:function(t){var e=(this.G&8192)!==0;e!==t&&(this.G^=8192,this.g("isShadowed",e,t),this.N())}},isAnimated:{get:function(){return(this.G&262144)!==0},set:function(t){var e=(this.G&262144)!==0;e!==t&&(this.G^=262144,this.g("isAnimated",e,t))}},highlightedChanged:{get:function(){return this.P!==null?this.P.iq:null},set:function(t){var e=this.highlightedChanged;e!==t&&(Oi(this),this.P.iq=t,this.g("highlightedChanged",e,t))}},selectionObjectName:{get:function(){return this.P!==null?this.P.pr:""},set:function(t){var e=this.selectionObjectName;e!==t&&(Oi(this),this.P.pr=t,this.Qg=null,this.g("selectionObjectName",e,t))}},selectionAdornmentTemplate:{get:function(){return this.P!==null?this.P.mr:null},set:function(t){var e=this.selectionAdornmentTemplate;e!==t&&(Oi(this),this.P.mr=t,this.g("selectionAdornmentTemplate",e,t))}},selectionObject:{get:function(){if(this.Qg===null){var t=this.selectionObjectName;t!==null&&t!==""?(t=this.fb(t),t!==null?this.Qg=t:this.Qg=this):this instanceof X?(t=this.path,t!==null?this.Qg=t:this.Qg=this):this.Qg=this}return this.Qg}},selectionChanged:{get:function(){return this.P!==null?this.P.nr:null},set:function(t){var e=this.selectionChanged;e!==t&&(Oi(this),this.P.nr=t,this.g("selectionChanged",e,t))}},resizeAdornmentTemplate:{get:function(){return this.P!==null?this.P.$q:null},set:function(t){var e=this.resizeAdornmentTemplate;e!==t&&(Oi(this),this.P.$q=t,this.g("resizeAdornmentTemplate",e,t))}},resizeObjectName:{get:function(){return this.P!==null?this.P.br:""},set:function(t){var e=this.resizeObjectName;e!==t&&(Oi(this),this.P.br=t,this.g("resizeObjectName",e,t))}},resizeObject:{get:function(){var t=this.resizeObjectName;return t!==""&&(t=this.fb(t),t!==null)?t:this}},resizeCellSize:{get:function(){return this.P!==null?this.P.ar:dp},set:function(t){var e=this.resizeCellSize;e.C(t)||(t=t.J(),Oi(this),this.P.ar=t,this.g("resizeCellSize",e,t))}},rotateAdornmentTemplate:{get:function(){return this.P!==null?this.P.cr:null},set:function(t){var e=this.rotateAdornmentTemplate;e!==t&&(Oi(this),this.P.cr=t,this.g("rotateAdornmentTemplate",e,t))}},rotateObjectName:{get:function(){return this.P!==null?this.P.dr:""},set:function(t){var e=this.rotateObjectName;e!==t&&(Oi(this),this.P.dr=t,this.g("rotateObjectName",e,t))}},rotateObject:{get:function(){var t=this.rotateObjectName;return t!==""&&(t=this.fb(t),t!==null)?t:this}},rotationSpot:{get:function(){return this.P!==null?this.P.fr:Je},set:function(t){var e=this.rotationSpot;e.C(t)||(t=t.J(),Oi(this),this.P.fr=t,this.g("rotationSpot",e,t))}},text:{get:function(){return this.bc},set:function(t){var e=this.bc;e!==t&&(this.bc=t,this.g("text",e,t))}},containingGroup:{get:function(){return this.wh},set:function(t){if(this.Uc()){var e=this.wh;if(e!==t){t===null||this!==t&&!t.Nd(this)||(this===t&&R("Cannot make a Group a member of itself: "+this.toString()),R("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.D(2);var i=this.diagram;if(e!==null?wv(e,this):this instanceof yt&&i!==null&&i.Yh.remove(this),this.wh=t,t!==null?xv(t,this):this instanceof yt&&i!==null&&i.Yh.add(this),this.D(1),i!==null&&i.aa){var n=this.data,r=i.model;if(n!==null&&r.Uj()){var s=r.va(t!==null?t.data:null);r.hp(n,s)}}if(n=this.containingGroupChanged,n!==null&&(r=!0,i!==null&&(r=i.aa,i.aa=!0),n(this,e,t),i!==null&&(i.aa=r)),this instanceof yt){for(i=new q,Es(i,this,!0,0,!0),i=i.iterator;i.next();)if(n=i.value,n instanceof b)for(n=n.linksConnected;n.next();)Yh(n.value)}if(this instanceof b){for(i=this.linksConnected;i.next();)Yh(i.value);i=this.labeledLink,i!==null&&Yh(i)}this.g("containingGroup",e,t),t!==null&&(e=t.layer,e!==null&&Ep(e,-1,t))}}else R("cannot set the Part.containingGroup of a Link or Adornment")}},containingGroupChanged:{get:function(){return this.P!==null?this.P.Fp:null},set:function(t){var e=this.containingGroupChanged;e!==t&&(Oi(this),this.P.Fp=t,this.g("containingGroupChanged",e,t))}},isTopLevel:{get:function(){return!(this.containingGroup!==null||this instanceof b&&this.labeledLink!==null)}},layoutConditions:{get:function(){return this.P!==null?this.P.wq:127},set:function(t){var e=this.layoutConditions;e!==t&&(Oi(this),this.P.wq=t,this.g("layoutConditions",e,t))}},dragComputation:{get:function(){return this.P!==null?this.P.Pp:null},set:function(t){var e=this.dragComputation;e!==t&&(Oi(this),this.P.Pp=t,this.g("dragComputation",e,t))}},shadowOffset:{get:function(){return this.P!==null?this.P.tr:f0},set:function(t){var e=this.shadowOffset;e.C(t)||(t=t.J(),Oi(this),this.P.tr=t,this.N(),this.g("shadowOffset",e,t))}},shadowColor:{get:function(){return this.P!==null?this.P.sr:"gray"},set:function(t){var e=this.shadowColor;e!==t&&(Oi(this),this.P.sr=t,this.N(),this.g("shadowColor",e,t))}},shadowBlur:{get:function(){return this.P!==null?this.P.Rg:4},set:function(t){var e=this.shadowBlur;e!==t&&(Oi(this),this.P.Rg=t,this.N(),this.g("shadowBlur",e,t))}}}),lt.prototype.invalidateLayout=lt.prototype.D,lt.prototype.findCommonContainingGroup=lt.prototype.mx,lt.prototype.isMemberOf=lt.prototype.Nd,lt.prototype.findTopLevelPart=lt.prototype.nz,lt.prototype.findSubGraphLevel=lt.prototype.jz,lt.prototype.ensureBounds=lt.prototype.Va,lt.prototype.getDocumentBounds=lt.prototype.ji,lt.prototype.findObject=lt.prototype.fb,lt.prototype.moveTo=lt.prototype.moveTo,lt.prototype.invalidateAdornments=lt.prototype.Sb,lt.prototype.clearAdornments=lt.prototype.Cj,lt.prototype.removeAdornment=lt.prototype.Hf,lt.prototype.addAdornment=lt.prototype.Yg,lt.prototype.findAdornment=lt.prototype.Nj,lt.prototype.updateTargetBindings=lt.prototype.Ma;var K2=!1;lt.className="Part",lt.LayoutNone=0,lt.LayoutAdded=1,lt.LayoutRemoved=2,lt.LayoutShown=4,lt.LayoutHidden=8,lt.LayoutNodeSized=16,lt.LayoutGroupLayout=32,lt.LayoutNodeReplaced=64,lt.LayoutStandard=127,lt.LayoutAll=16777215;function jt(t,e){t===void 0||t instanceof xe||typeof t=="string"?lt.call(this,t):(lt.call(this),t&&(e=t)),this.G&=-257,this.Fg="Adornment",this.re=null,this.ww=0,this.Qw=!1,this.j=this.$a=null,e&&Object.assign(this,e)}B(jt,lt),jt.prototype.toString=function(){var t=this.adornedPart;return"Adornment("+this.category+")"+(t!==null?t.toString():"")},jt.prototype.updateRelationshipsFromData=function(){},jt.prototype.Ql=function(t){var e=this.adornedObject,i=e==null?void 0:e.part;if(i instanceof X&&e instanceof wt){e=i.path,i.Ql(t),t=e.geometry,i=this.O.s,e=i.length;for(var n=0;n<e;n++){var r=i[n];r.isPanelMain&&r instanceof wt&&(r.ta=t)}}},jt.prototype.oi=function(){var t=this.re;return t===null?!0:(t=t.part,t===null||!Zn(t))},jt.prototype.Uc=function(){return!1},jt.prototype.dk=function(t,e,i,n,r,s,l){if(t===Ne&&e==="elements"){if(r instanceof Si)this.$a===null&&(this.$a=r);else if(r instanceof _){var h=r.Il(function(a){return a instanceof Si});h instanceof Si&&this.$a===null&&(this.$a=h)}}else t===je&&e==="elements"&&this.$a!==null&&(n===this.$a?this.$a=null:n instanceof _&&this.$a.og(n)&&(this.$a=null));lt.prototype.dk.call(this,t,e,i,n,r,s,l)},jt.prototype.updateAdornments=function(){},jt.prototype.Jj=function(){},z.Object.defineProperties(jt.prototype,{placeholder:{get:function(){return this.$a}},adornedObject:{get:function(){return this.re},set:function(t){var e=this.adornedPart,i=null;t!==null&&(i=t.part),e===null||t!==null&&e===i||e.Hf(this.category),this.re=t,i!==null&&i.Yg(this.category,this)}},adornedPart:{get:function(){var t=this.re;return t!==null?t.part:null}},containingGroup:{get:function(){return null}}}),jt.className="Adornment";function yv(){this.jc=!1,this.Pr=this.ej=this.yq=this.xq=null,this.sp=v0,this.Zq=Nd,this.Er=this.gj=this.Hq=this.Gq=null}yv.prototype.copy=function(){var t=new yv;return t.xq=this.xq,t.yq=this.yq,t.ej=this.ej,t.Pr=this.Pr,t.sp=this.sp.J(),t.Zq=this.Zq,t.Gq=this.Gq,t.Hq=this.Hq,t.gj=this.gj,t.Er=this.Er,t};function b(t,e){t===void 0||t instanceof xe||typeof t=="string"?lt.call(this,t):(lt.call(this),t&&(e=t)),this.U=13,this.ya=null,this.kb=new tt,this.tc=this.Ye=this.Uk=null,this.$h=!1,e&&Object.assign(this,e)}B(b,lt),b.prototype.cloneProtected=function(t){lt.prototype.cloneProtected.call(this,t),t.U=this.U,this.ya!==null&&(t.ya=this.ya.jc?this.ya:this.ya.copy())},o=b.prototype,o.yf=function(t){lt.prototype.yf.call(this,t),t.xd(),t.Ye=this.Ye,t.tc=null};function ts(t){t.ya===null?t.ya=new yv:t.ya.jc&&(t.ya=t.ya.copy())}o.ph=function(){lt.prototype.ph.call(this),this.ya!==null&&(this.ya.jc=!0)};function W2(t,e){e!==null&&(t.Ye===null&&(t.Ye=new q),t.Ye.add(e))}function $2(t,e,i,n){if(e===null||t.Ye===null)return null;for(var r=t.Ye.iterator;r.next();){var s=r.value;if(s.ys===t&&s.av===e&&s.Nx===i&&s.Ox===n||s.ys===e&&s.av===t&&s.Nx===n&&s.Ox===i)return s}return null}o.Gz=function(t,e,i){e==null&&(e=""),i==null&&(i=""),t=$2(this,t,e,i),t!==null&&t.Nl()},o.dk=function(t,e,i,n,r,s,l){t===Ne&&e==="elements"?this.tc=null:t===je&&e==="elements"&&(this.tc=null),lt.prototype.dk.call(this,t,e,i,n,r,s,l)},o.xd=function(t){for(var e=this.linksConnected;e.next();){var i=e.value;t!==void 0&&t.contains(i)||(Ki(i.fromPort),Ki(i.toPort),i.bb())}};function J2(t,e){for(t=t.linksConnected;t.next();){var i=t.value;(i.fromPort===e||i.toPort===e)&&(Ki(i.fromPort),Ki(i.toPort),i.bb())}}function Ki(t){if(t!==null){var e=t.Wn;e!==null&&e.Nl(),t=t.part,e=t.containingGroup,e===null||t.isVisible()||Ki(e.port)}}o.oi=function(){return!0},b.prototype.getAvoidableRect=function(t){return t.set(this.actualBounds),t.zo(this.avoidableMargin),t},b.prototype.findVisibleNode=function(){for(var t=this;t!==null&&!t.isVisible();)t=t.containingGroup;return t},b.prototype.isVisible=function(){if(!lt.prototype.isVisible.call(this))return!1;var t=!0,e=pu,i=this.diagram;if(i!==null&&(t=i.isTreePathToChildren,e=i.treeCollapsePolicy),e===pu){if(t=this.mg(),t!==null&&!t.isTreeExpanded)return!1}else if(e===km){if(t=t?this.Ju():this.Ku(),0<t.count&&t.all(function(n){return!n.isTreeExpanded}))return!1}else if(e===Nm&&(t=t?this.Ju():this.Ku(),0<t.count&&t.any(function(n){return!n.isTreeExpanded})))return!1;return t=this.labeledLink,t!==null?t.isVisible():!0},b.prototype.Vb=function(t){lt.prototype.Vb.call(this,t);for(var e=this.linksConnected;e.next();){var i=e.value;if(t&&this.containingGroup!==null){var n=i.Oo(this);n===null||n.Nd(this.containingGroup)||i.bb()}i.Vb(t)}},b.prototype.nx=function(){var t=new q,e=new q;return Z2(this,this,t,e),e.iterator};function Z2(t,e,i,n){if(e!==null&&!i.has(e)){i.add(e);var r=!0,s=t.diagram;s!==null&&(r=s.isTreePathToChildren),e.linksConnected.each(function(l){l.isTreeLink?(r?l.fromNode===e:l.toNode===e)&&Z2(t,r?l.toNode:l.fromNode,i,n):n.add(l)})}}b.prototype.findLinksConnected=function(t){if(t===void 0&&(t=null),t===null)return this.kb.iterator;var e=new Ie(this.kb),i=this;return e.predicate=function(n){return n.fromNode===i&&n.fromPortId===t||n.toNode===i&&n.toPortId===t},e},o=b.prototype,o.Jo=function(t){t===void 0&&(t=null);var e=new Ie(this.kb),i=this;return e.predicate=function(n){return n.fromNode!==i?!1:t===null?!0:n.fromPortId===t},e},o.Ld=function(t){t===void 0&&(t=null);var e=new Ie(this.kb),i=this;return e.predicate=function(n){return n.toNode!==i?!1:t===null?!0:n.toPortId===t},e},o.Iu=function(t){t===void 0&&(t=null);for(var e=null,i=null,n=this.kb.iterator;n.next();){var r=n.value;r.fromNode===this?(t===null||r.fromPortId===t)&&(r=r.toNode,e!==null?e.add(r):i!==null&&i!==r?(e=new q,e.add(i),e.add(r)):i=r):r.toNode!==this||t!==null&&r.toPortId!==t||(r=r.fromNode,e!==null?e.add(r):i!==null&&i!==r?(e=new q,e.add(i),e.add(r)):i=r)}return e!==null?e.iterator:i!==null?new ze(i):Kn},o.Ku=function(t){t===void 0&&(t=null);for(var e=null,i=null,n=this.kb.iterator;n.next();){var r=n.value;r.fromNode!==this||t!==null&&r.fromPortId!==t||(r=r.toNode,e!==null?e.add(r):i!==null&&i!==r?(e=new q,e.add(i),e.add(r)):i=r)}return e!==null?e.iterator:i!==null?new ze(i):Kn},o.Ju=function(t){t===void 0&&(t=null);for(var e=null,i=null,n=this.kb.iterator;n.next();){var r=n.value;r.toNode!==this||t!==null&&r.toPortId!==t||(r=r.fromNode,e!==null?e.add(r):i!==null&&i!==r?(e=new q,e.add(i),e.add(r)):i=r)}return e!==null?e.iterator:i!==null?new ze(i):Kn},o.ez=function(t,e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=new Ie(this.kb),r=this;return n.predicate=function(s){return!((s.fromNode!==r||s.toNode!==t||e!==null&&s.fromPortId!==e||i!==null&&s.toPortId!==i)&&(s.fromNode!==t||s.toNode!==r||i!==null&&s.fromPortId!==i||e!==null&&s.toPortId!==e))},n},o.fz=function(t,e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=new Ie(this.kb),r=this;return n.predicate=function(s){return!(s.fromNode!==r||s.toNode!==t||e!==null&&s.fromPortId!==e||i!==null&&s.toPortId!==i)},n};function Md(t,e,i){Ki(i);var n=t.kb.contains(e);if(n||t.kb.add(e),!n||e.fromNode===e.toNode){var r=t.linkConnected;if(r!==null){var s=!0,l=t.diagram;l!==null&&(s=l.aa,l.aa=!0),r(t,e,i),l!==null&&(l.aa=s)}}!n&&e.isTreeLink&&(i=e.fromNode,e=e.toNode,i!==null&&e!==null&&i!==e&&(n=!0,t=t.diagram,t!==null&&(n=t.isTreePathToChildren),r=n?e:i,s=n?i:e,r.$h||(r.$h=s),!s.isTreeLeaf||t!==null&&t.undoManager.isUndoingRedoing||(n?i===s&&(s.isTreeLeaf=!1):e===s&&(s.isTreeLeaf=!1))))}function kd(t,e,i){Ki(i);var n=t.kb.remove(e),r=null;if(n||e.toNode===e.fromNode){var s=t.linkDisconnected;if(r=t.diagram,s!==null){var l=!0;r!==null&&(l=r.aa,r.aa=!0),s(t,e,i),r!==null&&(r.aa=l)}}n&&e.isTreeLink&&(i=!0,r!==null&&(i=r.isTreePathToChildren),t=i?e.toNode:e.fromNode,e=i?e.fromNode:e.toNode,t!==null&&(t.$h=!1),e===null||e.isTreeLeaf||(e.kb.count===0?(e.$h=null,r!==null&&r.undoManager.isUndoingRedoing||(e.isTreeLeaf=!0)):Tf(e)))}function Tf(t){if(t.$h=!1,t.kb.count!==0){var e=!0,i=t.diagram;if(i===null||!i.undoManager.isUndoingRedoing){for(i!==null&&(e=i.isTreePathToChildren),i=t.kb.iterator;i.next();){var n=i.value;if(n.isTreeLink){if(e){if(n.fromNode===t){t.isTreeLeaf=!1;return}}else if(n.toNode===t){t.isTreeLeaf=!1;return}}}t.isTreeLeaf=!0}}}b.prototype.updateRelationshipsFromData=function(){var t=this.diagram;t!==null&&t.partManager.updateRelationshipsFromData(this)},o=b.prototype,o.Qo=function(t){lt.prototype.Qo.call(this,t),t||(Tf(this),t=this.Uk,t!==null&&ok(t,this))},o.Ro=function(t){lt.prototype.Ro.call(this,t),t||(t=this.Uk,t!==null&&t.sd!==null&&(t.sd.remove(this),t.v()))},o.Jj=function(){if(0<this.kb.count){var t=this.diagram;if(t!==null)for(var e=t.commandHandler!==null?t.commandHandler.deletesConnectedLinks:!0,i=this.kb.copy().iterator;i.next();){var n=i.value;e?t.remove(n):(n.fromNode===this&&(n.fromNode=null),n.toNode===this&&(n.toNode=null))}}this.labeledLink=null,lt.prototype.Jj.call(this)},o.hs=function(t){if(this.tc===null){if(t===""&&this.Qe===!1)return this;Q2(this)}var e=this.tc.I(t);return e!==null||t!==""&&(e=this.tc.I(""),e!==null)?e:this};function Q2(t){t.tc===null?t.tc=new vt:t.tc.clear(),t.nm(t,function(e,i){q2(e,i)}),t.tc.count===0&&t.tc.add("",t)}function q2(t,e){var i=e.portId;i!==null&&t.tc!==null&&t.tc.add(i,e)}function mv(t,e,i){var n=e.portId;if(n!==null&&(t.tc!==null&&t.tc.remove(n),e=t.diagram,e!==null&&i)){for(i=null,t=t.findLinksConnected(n);t.next();)n=t.value,i===null&&(i=Yt()),i.push(n);if(i!==null){for(t=0;t<i.length;t++)e.remove(i[t]);Vt(i)}}}o.Iz=function(t){if(t===null||t===this)return!1;var e=!0,i=this.diagram;if(i!==null&&(e=i.isTreePathToChildren),i=this,e)for(;i!==t;){e=null;for(var n=i.kb.iterator;n.next();){var r=n.value;if(r.isTreeLink&&(e=r.fromNode,e!==i&&e!==this))break}if(e===this||e===null||e===i)return!1;i=e}else for(;i!==t;){for(e=null,n=i.kb.iterator;n.next()&&(r=n.value,!r.isTreeLink||(e=r.toNode,e===i||e===this)););if(e===this||e===null||e===i)return!1;i=e}return!0},o.rz=function(){var t=!0,e=this.diagram;if(e!==null&&(t=e.isTreePathToChildren),e=this,t)for(;;){t=null;for(var i=e.kb.iterator;i.next();){var n=i.value;if(n.isTreeLink&&(t=n.fromNode,t!==e&&t!==this))break}if(t===this)return this;if(t===null||t===e)return e;e=t}else for(;;){for(t=null,i=e.kb.iterator;i.next()&&(n=i.value,!n.isTreeLink||(t=n.toNode,t===e||t===this)););if(t===this)return this;if(t===null||t===e)return e;e=t}},o.bz=function(t){if(t===null)return null;if(this===t)return this;for(var e=this;e!==null;)Sd(e,!0),e=e.mg();var i=null;for(e=t;e!==null;){if(e.G&1048576){i=e;break}e=e.mg()}for(e=this;e!==null;)Sd(e,!1),e=e.mg();return i},o.gh=function(){var t=!0,e=this.diagram;if(e!==null&&(t=e.isTreePathToChildren),e=this.kb.iterator,t){for(;e.next();)if(t=e.value,t.isTreeLink&&t.fromNode!==this)return t}else for(;e.next();)if(t=e.value,t.isTreeLink&&t.toNode!==this)return t;return null},o.mg=function(){var t=this.$h;if(t===null)return null;if(t instanceof b)return t;t=this.diagram,t=t!==null?t.isTreePathToChildren:!0;for(var e=this.kb.iterator;e.next();){var i=e.value;if(i.isTreeLink&&(i=t?i.fromNode:i.toNode,i!==this))return this.$h=i}return this.$h=null},o.pz=function(){function t(i,n){n.add(i);var r=i.gh();r!==null&&(n.add(r),i=i.mg(),i!==null&&t(i,n))}var e=new q;return t(this,e),e},o.oz=function(){return b2(this,this)};function b2(t,e){return e=e.mg(),e===null?0:1+b2(t,e)}o.Lo=function(){var t=!0,e=this.diagram;e!==null&&(t=e.isTreePathToChildren),e=new Ie(this.kb);var i=this;return e.predicate=t?function(n){return!!(n.isTreeLink&&n.fromNode===i)}:function(n){return!!(n.isTreeLink&&n.toNode===i)},e},o.Mu=function(){var t=!0,e=this.diagram;e!==null&&(t=e.isTreePathToChildren);var i=e=null,n=this.kb.iterator;if(t)for(;n.next();)t=n.value,t.isTreeLink&&t.fromNode===this&&(t=t.toNode,e!==null?e.add(t):i!==null&&i!==t?(e=new tt,e.add(i),e.add(t)):i=t);else for(;n.next();)t=n.value,t.isTreeLink&&t.toNode===this&&(t=t.fromNode,e!==null?e.add(t):i!==null&&i!==t?(e=new tt,e.add(i),e.add(t)):i=t);return e!==null?e.iterator:i!==null?new ze(i):Kn},o.qz=function(t){t===void 0&&(t=1/0);var e=new q;return Es(e,this,!1,t,!0),e},b.prototype.collapseTree=function(t){t===void 0&&(t=1),1>t&&(t=1);var e=this.diagram;if(e!==null&&!e.Re){e.Re=!0;var i=new q;i.add(this),tk(this,i,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===pu),e.Re=!1}};function tk(t,e,i,n,r,s,l){if(1<n)for(var h=i?t.Jo():t.Ld();h.next();){var a=h.value;a.isTreeLink&&(a=a.Oo(t),a===null||a===t||e.contains(a)||(e.add(a),tk(a,e,i,n-1,r,s,l)))}else ek(t,e,i,r,s,l)}function ek(t,e,i,n,r,s){for(var l=r===t?!0:t.isTreeExpanded,h=i?t.Jo():t.Ld();h.next();){var a=h.value;if(a.isTreeLink&&(a=a.Oo(t),a!==null&&a!==t)){var f=e.contains(a);f||e.add(a),l&&(s&&n.yj(a,r),a.kh(),a.Vb(!1)),a.isTreeExpanded&&(a.wasTreeExpanded=a.isTreeExpanded,f||ek(a,e,i,n,r,s))}}t.isTreeExpanded=!1}b.prototype.expandTree=function(t){t===void 0&&(t=2),2>t&&(t=2);var e=this.diagram;if(e!==null&&!e.Re){e.Re=!0;var i=new q;i.add(this),ik(this,i,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===pu),e.Re=!1}};function ik(t,e,i,n,r,s,l){for(var h=s===t?!1:t.isTreeExpanded,a=i?t.Jo():t.Ld();a.next();){var f=a.value;f.isTreeLink&&(h||f.$c||f.bb(),f=f.Oo(t),f!==null&&f!==t&&!e.contains(f)&&(e.add(f),h||(f.Vb(!0),f.kh(),l&&r.Aj(f,s)),2<n||f.wasTreeExpanded))&&(f.wasTreeExpanded=!1,ik(f,e,i,n-1,r,s,l))}t.isTreeExpanded=!0}z.Object.defineProperties(b.prototype,{portSpreading:{get:function(){return this.ya!==null?this.ya.Zq:Nd},set:function(t){var e=this.portSpreading;e!==t&&(ts(this),this.ya.Zq=t,this.g("portSpreading",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.xd())}},avoidable:{get:function(){return(this.U&8)!==0},set:function(t){var e=(this.U&8)!==0;if(e!==t){this.U^=8;var i=this.diagram;i!==null&&wm(i,this),this.g("avoidable",e,t)}}},avoidableMargin:{get:function(){return this.ya!==null?this.ya.sp:v0},set:function(t){typeof t=="number"&&(t=new Rt(t));var e=this.avoidableMargin;if(!e.C(t)){t=t.J(),ts(this),this.ya.sp=t;var i=this.diagram;i!==null&&wm(i,this),this.g("avoidableMargin",e,t)}}},linksConnected:{get:function(){return this.kb.iterator}},linkConnected:{get:function(){return this.ya!==null?this.ya.xq:null},set:function(t){var e=this.linkConnected;e!==t&&(ts(this),this.ya.xq=t,this.g("linkConnected",e,t))}},linkDisconnected:{get:function(){return this.ya!==null?this.ya.yq:null},set:function(t){var e=this.linkDisconnected;e!==t&&(ts(this),this.ya.yq=t,this.g("linkDisconnected",e,t))}},linkValidation:{get:function(){return this.ya!==null?this.ya.ej:null},set:function(t){var e=this.linkValidation;e!==t&&(ts(this),this.ya.ej=t,this.g("linkValidation",e,t))}},isLinkLabel:{get:function(){return this.Uk!==null}},labeledLink:{get:function(){return this.Uk},set:function(t){var e=this.Uk;if(e!==t){var i=this.diagram,n=this.data;if(e!==null){if(e.sd!==null&&(e.sd.remove(this),e.v()),i!==null&&n!==null&&!i.undoManager.isUndoingRedoing){var r=e.data,s=i.model;if(r!==null&&s.ni()){var l=s.va(n);l!==void 0&&s.Px(r,l)}}this.containingGroup=null}this.Uk=t,t!==null&&(ok(t,this),i===null||n===null||i.undoManager.isUndoingRedoing||(r=t.data,i=i.model,r!==null&&i.ni()&&(n=i.va(n),n!==void 0&&i.yu(r,n))),this.containingGroup=t.containingGroup),Ph(this),this.g("labeledLink",e,t)}}},port:{get:function(){return this.hs("")}},ports:{get:function(){return this.tc===null&&Q2(this),this.tc.iteratorValues}},isTreeExpanded:{get:function(){return(this.U&1)!==0},set:function(t){var e=(this.U&1)!==0;if(e!==t){this.U^=1;var i=this.diagram;if(this.g("isTreeExpanded",e,t),e=this.treeExpandedChanged,e!==null){var n=!0;i!==null&&(n=i.aa,i.aa=!0),e(this),i!==null&&(i.aa=n)}i!==null&&i.undoManager.isUndoingRedoing?this.Vb(t):t?this.expandTree():this.collapseTree()}}},wasTreeExpanded:{get:function(){return(this.U&2)!==0},set:function(t){var e=(this.U&2)!==0;e!==t&&(this.U^=2,this.g("wasTreeExpanded",e,t))}},treeExpandedChanged:{get:function(){return this.ya!==null?this.ya.Pr:null},set:function(t){var e=this.treeExpandedChanged;e!==t&&(ts(this),this.ya.Pr=t,this.g("treeExpandedChanged",e,t))}},isTreeLeaf:{get:function(){return(this.U&4)!==0},set:function(t){var e=(this.U&4)!==0;e!==t&&(this.U^=4,this.g("isTreeLeaf",e,t))}}}),b.prototype.expandTree=b.prototype.expandTree,b.prototype.collapseTree=b.prototype.collapseTree,b.prototype.findTreeParts=b.prototype.qz,b.prototype.findTreeChildrenNodes=b.prototype.Mu,b.prototype.findTreeChildrenLinks=b.prototype.Lo,b.prototype.findTreeLevel=b.prototype.oz,b.prototype.findTreeParentChain=b.prototype.pz,b.prototype.findTreeParentNode=b.prototype.mg,b.prototype.findTreeParentLink=b.prototype.gh,b.prototype.findCommonTreeParent=b.prototype.bz,b.prototype.findTreeRoot=b.prototype.rz,b.prototype.isInTreeOf=b.prototype.Iz,b.prototype.findPort=b.prototype.hs,b.prototype.findLinksTo=b.prototype.fz,b.prototype.findLinksBetween=b.prototype.ez,b.prototype.findNodesInto=b.prototype.Ju,b.prototype.findNodesOutOf=b.prototype.Ku,b.prototype.findNodesConnected=b.prototype.Iu,b.prototype.findLinksInto=b.prototype.Ld,b.prototype.findLinksOutOf=b.prototype.Jo,b.prototype.findExternalTreeLinksConnected=b.prototype.nx,b.prototype.invalidateConnectedLinks=b.prototype.xd,b.prototype.invalidateLinkBundle=b.prototype.Gz;var dj=new Q(b,"SpreadingNone",10),Nd=new Q(b,"SpreadingEvenly",11),vv=new Q(b,"SpreadingPacked",12);b.className="Node",b.SpreadingNone=dj,b.SpreadingEvenly=Nd,b.SpreadingPacked=vv;function yt(t,e){t===void 0||t instanceof xe||typeof t=="string"?b.call(this,t):(b.call(this),t&&(e=t)),this.U|=4608,this.Dn=new q,this.$a=null,this.Oc=new Jt,this.Oc.group=this,this.cl=new q,this.ib=this.Up=null,e&&Object.assign(this,e)}B(yt,b),yt.prototype.cloneProtected=function(t){b.prototype.cloneProtected.call(this,t),this.U=this.U&-32769;var e=t.Il(function(i){return i instanceof Si});e instanceof Si?t.$a=e:t.$a=null,this.Oc!==null?(t.Oc=this.Oc.copy(),t.Oc.group=t):(t.Oc!==null&&(t.Oc.group=null),t.Oc=null),this.ib!==null&&(t.ib=this.ib.copy())},o=yt.prototype,o.yf=function(t){b.prototype.yf.call(this,t);var e=t.Pj();for(t=t.memberParts;t.next();){var i=t.value;if(i.v(),i.D(8),i.Cj(),i instanceof b)i.xd(e);else if(i instanceof X)for(i=i.labelNodes;i.next();)i.value.xd(e)}},o.dk=function(t,e,i,n,r,s,l){if(t===Ne&&e==="elements"){if(r instanceof Si)this.$a===null?this.$a=r:this.$a!==r&&R("Cannot insert a second Placeholder into the visual tree of a Group.");else if(r instanceof _){var h=r.Il(function(a){return a instanceof Si});h instanceof Si&&(this.$a===null?this.$a=h:this.$a!==h&&R("Cannot insert a second Placeholder into the visual tree of a Group."))}}else t===je&&e==="elements"&&this.$a!==null&&(n===this.$a?this.$a=null:n instanceof _&&this.$a.og(n)&&(this.$a=null));b.prototype.dk.call(this,t,e,i,n,r,s,l)},o.Tl=function(t,e){b.prototype.Tl.call(this,t,e),this.isClipping&&this.type!==_.Spot&&this.isSubGraphExpanded&&(t=this.resizeObject,t instanceof _&&(t=t.sb()),this.ib===null&&(this.ib=new V),t.ji(this.ib),t instanceof wt&&this.ib.yc(-t.strokeWidth,-t.strokeWidth))},o.$g=function(t,e,i,n){this.kf=this.$a,b.prototype.$g.call(this,t,e,i,n)},o.Va=function(){var t=this;t.isSubGraphExpanded&&this.memberParts.each(function(e){!t.computesBoundsIncludingLinks&&e instanceof X||e.Va()}),b.prototype.Va.call(this)},o.oi=function(){if(!b.prototype.oi.call(this))return!1;for(var t=this.memberParts;t.next();){var e=t.value;if(e instanceof b){if(e.isVisible()&&Zn(e))return!1}else if(e instanceof X&&e.isVisible()&&Zn(e)&&e.fromNode!==this&&e.toNode!==this)return!1}return!0};function xv(t,e){if(t.Dn.add(e)){e instanceof yt&&t.cl.add(e);var i=t.memberAdded;if(i!==null){var n=!0,r=t.diagram;r!==null&&(n=r.aa,r.aa=!0),i(t,e),r!==null&&(r.aa=n)}t.isVisible()&&t.isSubGraphExpanded||e.Vb(!1)}e instanceof X&&!t.computesBoundsIncludingLinks||(e=t.$a,e===null&&(e=t),e.v())}function wv(t,e){if(t.Dn.remove(e)){e instanceof yt&&t.cl.remove(e);var i=t.memberRemoved;if(i!==null){var n=!0,r=t.diagram;r!==null&&(n=r.aa,r.aa=!0),i(t,e),r!==null&&(r.aa=n)}t.isVisible()&&t.isSubGraphExpanded||e.Vb(!0)}e instanceof X&&!t.computesBoundsIncludingLinks||(e=t.$a,e===null&&(e=t),e.v())}o.Jj=function(){if(0<this.Dn.count){var t=this.diagram;if(t!==null)for(var e=this.Dn.copy().iterator;e.next();)t.remove(e.value)}b.prototype.Jj.call(this)},yt.prototype.canAddMembers=function(t){var e=this.diagram;if(e===null)return!1;for(e=e.commandHandler,t=Cm(t).iterator;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},yt.prototype.addMembers=function(t,e){var i=this.diagram;if(i===null)return!1;i=i.commandHandler;var n=!0;for(t=Cm(t).iterator;t.next();){var r=t.value;!e||i.isValidMember(this,r)?r.containingGroup=this:n=!1}return n},yt.prototype.canUngroup=function(){if(!this.ungroupable)return!1;var t=this.layer;return t===null||!t.allowUngroup?!1:(t=t.diagram,!!(t===null||t.allowUngroup))},o=yt.prototype,o.xd=function(t){var e=(this.U&65536)!==0;if(b.prototype.xd.call(this,t),!e)for(!(this.U&65536)&&(this.U=this.U^65536),e=this.Hu();e.next();){var i=e.value;if(t===void 0||!t.contains(i)){var n=i.fromNode;n!==null&&n!==this&&n.Nd(this)&&!n.isVisible()?(Ki(i.fromPort),Ki(i.toPort),i.bb()):(n=i.toNode,n!==null&&n!==this&&n.Nd(this)&&!n.isVisible()&&(Ki(i.fromPort),Ki(i.toPort),i.bb()))}}},o.Hu=function(){var t=this.diagram!==null&&this.diagram.Lw;if(t&&this.Up!==null)return this.Up.iterator;var e=this.Pj();e.add(this);for(var i=new q,n=e.iterator;n.next();){var r=n.value;if(r instanceof b)for(r=r.linksConnected;r.next();){var s=r.value;e.contains(s)||i.add(s)}}return t&&(this.Up=i),i.iterator},o.dz=function(){var t=this.Pj();t.add(this);for(var e=new q,i=t.iterator;i.next();){var n=i.value;if(n instanceof b)for(n=n.linksConnected;n.next();){var r=n.value,s=r.fromNode;s===null||t.contains(s)&&s!==this||e.add(s),r=r.toNode,r===null||t.contains(r)&&r!==this||e.add(r)}}return e.iterator},o.cz=function(){function t(i,n){i!==null&&(n.add(i),t(i.containingGroup,n))}var e=new q;return t(this,e),e},o.Pj=function(){var t=new q;return Es(t,this,!0,0,!0),t.remove(this),t},o.Vb=function(t){b.prototype.Vb.call(this,t);for(var e=this.memberParts;e.next();)e.value.Vb(t)},yt.prototype.collapseSubGraph=function(){var t=this.diagram;if(t!==null&&!t.Re){t.Re=!0;var e=this.Pj();nk(this,e,t,this),t.Re=!1}};function nk(t,e,i,n){for(var r=t.memberParts;r.next();){var s=r.value;if(s.Vb(!1),s instanceof yt&&s.isSubGraphExpanded&&(s.wasSubGraphExpanded=s.isSubGraphExpanded,nk(s,e,i,n)),s instanceof b)s.xd(e),i.yj(s,n);else if(s instanceof X)for(s=s.labelNodes;s.next();)s.value.xd(e)}t.isSubGraphExpanded=!1}yt.prototype.expandSubGraph=function(){var t=this.diagram;if(t!==null&&!t.Re){t.Re=!0;var e=this.Pj();rk(this,e,t,this),t.Re=!1}};function rk(t,e,i,n){for(var r=t.memberParts;r.next();){var s=r.value;if(s.Vb(!0),s instanceof yt&&s.wasSubGraphExpanded&&(s.wasSubGraphExpanded=!1,rk(s,e,i,n)),s instanceof b)s.xd(e),i.Aj(s,n);else if(s instanceof X)for(s=s.labelNodes;s.next();)s.value.xd(e)}t.isSubGraphExpanded=!0}yt.prototype.move=function(t,e){e===void 0&&(e=!1);var i=e?this.location:this.position,n=i.x;i=i.y;var r=t.x,s=t.y;if(!(n===r||isNaN(n)&&isNaN(r))||!(i===s||isNaN(i)&&isNaN(s))){for(n=r-(isNaN(n)?0:n),i=s-(isNaN(i)?0:i),s=P.alloc(),b.prototype.move.call(this,t,e),t=new q,e=this.Pj().iterator;e.next();)r=e.value,r instanceof X&&(r.suspendsRouting&&t.add(r),r.$c||r.fromNode!==this&&r.toNode!==this)&&(r.suspendsRouting=!0);for(e.reset();e.next();)if(r=e.value,!(r.lh()||r instanceof b&&r.isLinkLabel)){var l=r.position,h=r.location;l.w()?(s.x=l.x+n,s.y=l.y+i,r.position=s):h.w()&&(s.x=h.x+n,s.y=h.y+i,r.location=s)}for(e.reset();e.next();)r=e.value,r instanceof X&&(r.suspendsRouting=t.contains(r),r.$c||r.fromNode!==this&&r.toNode!==this)&&(l=r.position,s.x=l.x+n,s.y=l.y+i,s.w()?r.move(s):r.bb(),Mv(r)&&r.bb());P.free(s)}},z.Object.defineProperties(yt.prototype,{placeholder:{get:function(){return this.$a}},computesBoundsAfterDrag:{get:function(){return(this.U&2048)!==0},set:function(t){var e=(this.U&2048)!==0;e!==t&&(this.U^=2048,this.g("computesBoundsAfterDrag",e,t))}},computesBoundsIncludingLinks:{get:function(){return(this.U&4096)!==0},set:function(t){var e=(this.U&4096)!==0;e!==t&&(this.U^=4096,this.g("computesBoundsIncludingLinks",e,t))}},computesBoundsIncludingLocation:{get:function(){return(this.U&8192)!==0},set:function(t){var e=(this.U&8192)!==0;e!==t&&(this.U^=8192,this.g("computesBoundsIncludingLocation",e,t))}},handlesDragDropForMembers:{get:function(){return(this.U&16384)!==0},set:function(t){var e=(this.U&16384)!==0;e!==t&&(this.U^=16384,this.g("handlesDragDropForMembers",e,t))}},memberParts:{get:function(){return this.Dn.iterator}},layout:{get:function(){return this.Oc},set:function(t){var e=this.Oc;if(e!==t){t!==null&&t.diagram!==null&&t.diagram.layout===t&&R("A layout cannot be both the Diagram.layout and a Group.layout: "+t),e!==null&&(e.diagram=null,e.group=null),this.Oc=t;var i=this.diagram;t!==null&&(t.diagram=i,t.group=this),i!==null&&(i.th=!0),this.g("layout",e,t),i!==null&&i.Wb()}}},memberAdded:{get:function(){return this.ya!==null?this.ya.Gq:null},set:function(t){var e=this.memberAdded;e!==t&&(ts(this),this.ya.Gq=t,this.g("memberAdded",e,t))}},memberRemoved:{get:function(){return this.ya!==null?this.ya.Hq:null},set:function(t){var e=this.memberRemoved;e!==t&&(ts(this),this.ya.Hq=t,this.g("memberRemoved",e,t))}},memberValidation:{get:function(){return this.ya!==null?this.ya.gj:null},set:function(t){var e=this.memberValidation;e!==t&&(ts(this),this.ya.gj=t,this.g("memberValidation",e,t))}},ungroupable:{get:function(){return(this.U&256)!==0},set:function(t){var e=(this.U&256)!==0;e!==t&&(this.U^=256,this.g("ungroupable",e,t))}},isSubGraphExpanded:{get:function(){return(this.U&512)!==0},set:function(t){var e=(this.U&512)!==0;if(e!==t){this.U^=512;var i=this.diagram;if(this.g("isSubGraphExpanded",e,t),e=this.subGraphExpandedChanged,e!==null){var n=!0;i!==null&&(n=i.aa,i.aa=!0),e(this),i!==null&&(i.aa=n)}i!==null&&i.undoManager.isUndoingRedoing?(this.$a!==null&&this.$a.v(),this.memberParts.each(function(r){r.updateAdornments()})):t?this.expandSubGraph():this.collapseSubGraph()}}},wasSubGraphExpanded:{get:function(){return(this.U&1024)!==0},set:function(t){var e=(this.U&1024)!==0;e!==t&&(this.U^=1024,this.g("wasSubGraphExpanded",e,t))}},subGraphExpandedChanged:{get:function(){return this.ya!==null?this.ya.Er:null},set:function(t){var e=this.subGraphExpandedChanged;e!==t&&(ts(this),this.ya.Er=t,this.g("subGraphExpandedChanged",e,t))}},nh:{get:function(){return(this.U&32768)!==0},set:function(t){(this.U&32768)!==0!==t&&(this.U^=32768)}}}),yt.prototype.expandSubGraph=yt.prototype.expandSubGraph,yt.prototype.collapseSubGraph=yt.prototype.collapseSubGraph,yt.prototype.findSubGraphParts=yt.prototype.Pj,yt.prototype.findContainingGroupChain=yt.prototype.cz,yt.prototype.findExternalNodesConnected=yt.prototype.dz,yt.prototype.findExternalLinksConnected=yt.prototype.Hu,yt.prototype.ensureBounds=yt.prototype.Va,yt.className="Group";function Si(t){ot.call(this),this.yb=ih,this.ho=new V(NaN,NaN,NaN,NaN),t&&Object.assign(this,t)}B(Si,ot),Si.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.yb=this.yb.J(),t.ho=this.ho.copy()},Si.prototype.bh=function(t){if(this.background===null&&this.areaBackground===null)return!1;var e=this.naturalBounds;return hr(0,0,e.width,e.height,t.x,t.y)},Si.prototype.Sl=function(){var t=this.part;if(t!==null&&(t instanceof yt||t instanceof jt)||R("Placeholder is not inside a Group or Adornment."),t instanceof yt){var e=this.computeBorder(this.ho),i=this.minSize,n=this.ac;for(vo(n,(isFinite(i.width)?Math.max(i.width,e.width):e.width)||0,(isFinite(i.height)?Math.max(i.height,e.height):e.height)||0),this.De(0,0,n.width,n.height),n=t.memberParts,i=!1;n.next();)if(n.value.isVisible()){i=!0;break}n=t.diagram,!i||n===null||n.animationManager.Vu(t)||isNaN(e.x)||isNaN(e.y)||(i=P.alloc(),i.ui(e,t.locationSpot),i.C(t.location)||(t.location=i),P.free(i))}else{e=this.ac,i=this.yb,n=i.left+i.right;var r=i.top+i.bottom,s=t.adornedObject;t.angle=s.ii();var l=0;s instanceof wt&&(l=s.strokeWidth);var h=s.Bf(),a=s.naturalBounds,f=(a.width+l)*h;l=(a.height+l)*h,t.type!==_.Link&&(h=s.ja(t.category==="Selection"?ei:t.locationSpot,P.alloc()),t.location=h,P.free(h)),isNaN(f)||isNaN(l)?(t=s.ja(ei,P.alloc()),f=V.allocAt(t.x,t.y,0,0),f.Ve(s.ja(Xr,t)),f.Ve(s.ja(nh,t)),f.Ve(s.ja(rh,t)),vo(e,f.width+n||0,f.height+r||0),this.De(-i.left,-i.top,e.width,e.height),P.free(t),V.free(f)):(vo(e,f+n||0,l+r||0),this.De(-i.left,-i.top,e.width,e.height))}},Si.prototype.$g=function(t,e,i,n){this.actualBounds.h(t,e,i,n)},Si.prototype.computeBorder=function(t){var e=this.part,i=e.diagram;if(i!==null&&e instanceof yt&&!e.layer.isTemporary&&e.computesBoundsAfterDrag&&this.ho.w()){var n=i.toolManager.findTool("Dragging");if(n===i.currentTool&&(i=n.computeBorder(e,this.ho,t),i!==null))return i}i=V.alloc(),n=this.computeMemberBounds(i);var r=this.yb;return e instanceof yt&&!e.isSubGraphExpanded?t.h(n.x-r.left,n.y-r.top,0,0):t.h(n.x-r.left,n.y-r.top,Math.max(n.width+r.left+r.right,0),Math.max(n.height+r.top+r.bottom,0)),V.free(i),e instanceof yt&&e.computesBoundsIncludingLocation&&e.location.w()&&t.Ve(e.location),t},Si.prototype.computeMemberBounds=function(t){if(!(this.part instanceof yt))return t.h(0,0,0,0),t;for(var e=this.part,i=1/0,n=1/0,r=-1/0,s=-1/0,l=e.memberParts;l.next();){var h=l.value;if(h.isVisible()){if(h instanceof X&&(!e.computesBoundsIncludingLinks||Jo(h)||h.fromNode===e||h.toNode===e))continue;h=h.actualBounds,h.left<i&&(i=h.left),h.top<n&&(n=h.top),h.right>r&&(r=h.right),h.bottom>s&&(s=h.bottom)}}return isFinite(i)&&isFinite(n)?t.h(i,n,r-i,s-n):(e=e.location,t.h(e.x,e.y,0,0)),t},z.Object.defineProperties(Si.prototype,{padding:{get:function(){return this.yb},set:function(t){typeof t=="number"&&(t=new Rt(t));var e=this.yb;e.C(t)||(this.yb=t=t.J(),this.g("padding",e,t),this.v())}}}),Si.className="Placeholder";function X(t){lt.call(this,_.Link),this.Qa=8,this.bf=null,this.cf="",this.sf=this.dn=null,this.tf="",this.ro=null,this.lk=Mi,this.Lm=0,this.Nm=Mi,this.Om=NaN,this.oj=Pv,this.mo=.5,this.sd=null,this.Kb=new tt().freeze(),this.Pg=this.Ig=null,this.il=new V,this.ta=new W,this.u=this.m=this.Qf=this.Uf=null,this.pu=new P,this.Xp=this.Iw=this.Hw=null,this.qt=NaN,this.ba=null,this.j=[],t&&Object.assign(this,t)}B(X,lt),X.prototype.cloneProtected=function(t){lt.prototype.cloneProtected.call(this,t),t.Qa=this.Qa&-113,t.cf=this.cf,t.dn=this.dn,t.tf=this.tf,t.ro=this.ro,t.lk=this.lk,t.Lm=this.Lm,t.Nm=this.Nm,t.Om=this.Om,t.oj=this.oj,t.mo=this.mo,this.ba!==null&&(t.ba=this.ba.copy())},o=X.prototype,o.yf=function(t){lt.prototype.yf.call(this,t),this.cf=t.cf,this.tf=t.tf,t.Ig=null,t.bb(),t.Qf=this.Qf;var e=t.fromPort;e!==null&&Ki(e),t=t.toPort,t!==null&&Ki(t)},o.rb=function(t){t.classType===X?(t.value&2)===2?this.routing=t:t===un||t===is||t===_h?this.curve=t:t===Ef||t===Ed||t===Fd?this.adjusting=t:t!==Pv&&t!==Mi&&R("Unknown Link enum value for a Link property: "+t):lt.prototype.rb.call(this,t)},o.Sc=function(){this.ba===null&&(this.ba=new mf)},o.oi=function(){var t=this.fromNode;if(t!==null){var e=t.findVisibleNode();if(e!==null&&(t=e),Zn(t)||Ls(t))return!1}return t=this.toNode,!(t!==null&&(e=t.findVisibleNode(),e!==null&&(t=e),Zn(t)||Ls(t)))},o.vv=function(){return!1},o.wv=function(){},o.Uc=function(){return!1},X.prototype.computeAngle=function(t,e,i){return X.computeAngle(e,i)},X.computeAngle=function(t,e){switch(t){default:case Mi:t=0;break;case Ff:t=e;break;case Of:t=e+90;break;case Af:t=e-90;break;case Cv:t=e+180;break;case Od:t=F.Xo(e),90<t&&270>t&&(t-=180);break;case If:t=F.Xo(e+90),90<t&&270>t&&(t-=180);break;case Df:t=F.Xo(e-90),90<t&&270>t&&(t-=180);break;case Ad:if(t=F.Xo(e),45<t&&135>t||225<t&&315>t)return 0;90<t&&270>t&&(t-=180)}return F.Xo(t)};function Yh(t){var e=t.fromNode,i=t.toNode,n=null;if(e!==null?n=i!==null?e.mx(i):e.containingGroup:i!==null?n=i.containingGroup:n=null,e=n,i=t.wh,i!==e){i!==null&&wv(i,t),t.wh=e,e!==null&&xv(e,t);var r=t.containingGroupChanged;if(r!==null){var s=!0,l=t.diagram;l!==null&&(s=l.aa,l.aa=!0),r(t,i,e),l!==null&&(l.aa=s)}!t.$c||t.Hw!==i&&t.Iw!==i||t.bb()}if(t.isLabeledLink)for(t=t.labelNodes;t.next();)t.value.containingGroup=n}o=X.prototype,o.kh=function(){var t=this.containingGroup;t!==null&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&lt.prototype.kh.call(this)},o.Oo=function(t){var e=this.fromNode;return t===e?this.toNode:e},o.xz=function(t){var e=this.fromPort;return t===e?this.toPort:e};function ok(t,e){t.sd===null&&(t.sd=new q),t.sd.add(e),t.v()}o.Qo=function(t){if(lt.prototype.Qo.call(this,t),Ml(this)&&this.So(this.actualBounds),!t){t=this.bf;var e=null;t!==null&&(e=this.fromPort,Md(t,this,e));var i=this.sf;if(i!==null){var n=this.toPort;i===t&&n===e||Md(i,this,n)}Lf(this)}},o.Ro=function(t){if(lt.prototype.Ro.call(this,t),Ml(this)&&this.So(this.actualBounds),!t){t=this.bf;var e=null;t!==null&&(e=this.fromPort,kd(t,this,e));var i=this.sf;if(i!==null){var n=this.toPort;i===t&&n===e||kd(i,this,n)}jf(this)}},o.Jj=function(){if(this.$c=!0,this.sd!==null){var t=this.diagram;if(t!==null)for(var e=this.sd.copy().iterator;e.next();)t.remove(e.value)}this.data!==null&&(t=this.diagram,t!==null&&t.partManager.removeDataForLink(this))},X.prototype.updateRelationshipsFromData=function(){if(this.data!==null){var t=this.diagram;t!==null&&t.partManager.updateRelationshipsFromData(this)}},X.prototype.move=function(t,e){var i=e?this.location:this.position,n=i.x;isNaN(n)&&(n=0);var r=i.y;for(isNaN(r)&&(r=0),n=t.x-n,r=t.y-r,e===!0?lt.prototype.move.call(this,t,!1):(t=P.allocAt(i.x+n,i.y+r),lt.prototype.move.call(this,t,!1),P.free(t)),es(this,n,r),t=this.labelNodes;t.next();)e=t.value,i=e.position,e.moveTo(i.x+n,i.y+r)},X.prototype.canRelinkFrom=function(){if(!this.relinkableFrom)return!1;var t=this.layer;return t===null?!0:t.allowRelink?(t=t.diagram,!!(t===null||t.allowRelink)):!1},X.prototype.canRelinkTo=function(){if(!this.relinkableTo)return!1;var t=this.layer;return t===null?!0:t.allowRelink?(t=t.diagram,!!(t===null||t.allowRelink)):!1},X.prototype.computeMidPoint=function(t){var e=this.pointsCount;if(e===0)return t.assign(cp),t;if(e===1)return t.assign(this.i(0)),t;if(e===2){var i=this.i(0),n=this.i(1);return t.h((i.x+n.x)/2,(i.y+n.y)/2),t}if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===un))return this.ta.Nu(.5,t),t.add(this.i(0)),i=this.ta.figures.first(),t.offset(-i.startX,-i.startY),t;if(this.computeCurve()===un){if(e===3){i=this.i(0),n=this.i(1);var r=this.i(2);return F.Yw(i.x,i.y,n.x,n.y,n.x,n.y,r.x,r.y,t),t}if(n=(e-1)/3|0,i=3*(n/2|0),n%2===1){n=this.i(i),r=this.i(i+1);var s=this.i(i+2);i=this.i(i+3),F.Yw(n.x,n.y,r.x,r.y,s.x,s.y,i.x,i.y,t)}else t.assign(this.i(i));return t}var l=this.flattenedLengths;for(i=this.flattenedTotalLength,r=s=n=0;n<i/2&&s<e&&(r=l[s],!(n+r>i/2));)n+=r,s++;return e=this.i(s),s=this.i(s+1),1>Math.abs(e.x-s.x)?e.y>s.y?t.h(e.x,e.y-(i/2-n)):t.h(e.x,e.y+(i/2-n)):1>Math.abs(e.y-s.y)?e.x>s.x?t.h(e.x-(i/2-n),e.y):t.h(e.x+(i/2-n),e.y):(i=(i/2-n)/r,t.h(e.x+i*(s.x-e.x),e.y+i*(s.y-e.y))),t},X.prototype.computeMidAngle=function(){var t=this.pointsCount;if(2>t)return NaN;if(t===2)return this.i(0).ab(this.i(1));if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===un))return this.ta.tx(.5);if(this.computeCurve()===un&&4<=t){var e=(t-1)/3|0,i=3*(e/2|0);if(e%2===1){i=Math.floor(i),t=this.i(i),e=this.i(i+1);var n=this.i(i+2);return i=this.i(i+3),F.Iy(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)}if(0<i&&i+1<t)return this.i(i-1).ab(this.i(i+1))}e=this.flattenedLengths,n=this.flattenedTotalLength;var r=0;i=0;for(var s;r<n/2&&i<t&&(s=e[i],!(r+s>n/2));)r+=s,i++;if(e=this.i(i),n=this.i(i+1),1>Math.abs(e.x-n.x)&&1>Math.abs(e.y-n.y)){if(0<i&&i+2<t)return this.i(i-1).ab(this.i(i+2))}else{if(1>Math.abs(e.x-n.x))return e.y>n.y?270:90;if(1>Math.abs(e.y-n.y))return e.x>n.x?180:0}return e.ab(n)},o=X.prototype,o.i=function(t){return this.Kb.s[t]},o.Yc=function(t,e){this.Kb.Xc(t,e)},o.M=function(t,e,i){this.Kb.Xc(t,new P(e,i))},o.Fz=function(t,e){this.Kb.Eb(t,e)},o.l=function(t,e,i){this.Kb.Eb(t,new P(e,i))},o.je=function(t){this.Kb.add(t)},o.wf=function(t,e){this.Kb.add(new P(t,e))},o.nv=function(t){this.Kb.nb(t)},o.Dj=function(){this.Kb.clear()};function es(t,e,i){if(e!==0||i!==0)if(t.pointsCount===0)t.defaultFromPoint&&t.defaultFromPoint.offset(e,i),t.defaultToPoint&&t.defaultToPoint.offset(e,i);else{for(var n=t.$c,r=new tt,s=t.Kb.iterator;s.next();){var l=s.value;r.add(new P(l.x+e,l.y+i).freeze())}r.freeze(),s=t.Kb,t.Kb=r,l=t.diagram,isNaN(e)||isNaN(i)||l!==null&&l.animationManager.zb?t.v():(t.ge.h(t.ge.x+e,t.ge.y+i),t.pa.h(t.pa.x+e,t.pa.y+i),Ph(t)),n?Pd(t):(t.defaultFromPoint&&(t.defaultFromPoint=t.i(0)),t.defaultToPoint&&(t.defaultToPoint=t.i(t.pointsCount-1))),l!==null&&l.animationManager.zb&&Q0(l.animationManager,t,r),t.g("points",s,r)}}o.qh=function(){this.Ig===null&&(this.Ig=this.Kb,this.Kb=this.Kb.copy())},o.xf=function(){if(this.Ig!==null){for(var t=this.Ig,e=this.Kb,i=1/0,n=1/0,r=t.s,s=r.length,l=0;l<s;l++){var h=r[l];i=Math.min(h.x,i),n=Math.min(h.y,n)}h=l=1/0;for(var a=e.s,f=a.length,p=0;p<f;p++){var d=a[p];l=Math.min(d.x,l),h=Math.min(d.y,h),d.freeze()}if(e.freeze(),f===s){for(s=0;s<f;s++)if(p=r[s],d=a[s],p.x-i!==d.x-l||p.y-n!==d.y-h){this.nc();break}}else this.nc();this.Ig=null,i=this.diagram,i!==null&&i.animationManager.zb&&Q0(i.animationManager,this,e),Pd(this),this.g("points",t,e)}},o.pv=function(){this.Ig!==null&&(this.Kb=this.Ig,this.Ig=null)};function Pd(t){t.Kb.count===0?t.$c=!1:(t.$c=!0,t.Xp=null,t.qt=NaN,t.defaultFromPoint=t.i(0),t.defaultToPoint=t.i(t.pointsCount-1),jd(t,!1))}o.bb=function(){if(!this.suspendsRouting){var t=this.diagram;if(t){if(t.vs.contains(this)||t.undoManager.isUndoingRedoing||(t=t.animationManager,t.isTicking&&!t.isAnimating))return;this.Pg===null||t.isTicking||(this.Pg=null)}t=this.path,t!==null&&(this.$c=!1,this.v(),t.v())}},o.sg=function(){if(!this.$c&&!this.computingPoints){var t=!0;try{this.computingPoints=!0,this.qh(),t=this.computePoints()}catch{this.computingPoints=!1,this.pv()}finally{this.computingPoints=!1,t?this.xf():this.pv()}}},X.prototype.computePoints=function(){if(this.diagram===null)return!1;var t=this.fromNode,e=null;if(t===null?(Mu||(Mu=new b,Mu.desiredSize=ou,Mu.Va()),this.defaultFromPoint&&(Mu.location=this.defaultFromPoint,Mu.Va(),e=t=Mu)):e=this.fromPort,e!==null&&!t.isVisible()){var i=t.findVisibleNode();i!==null&&i!==t?(t=i,e=i.port):t=i}if(this.Hw=t,t===null||!t.location.w())return!1;for(;!(e===null||e.actualBounds.w()&&e.Od());)e=e.panel;if(e===null)return!1;var n=this.toNode,r=null;if(n===null?(ku||(ku=new b,ku.desiredSize=ou,ku.Va()),this.defaultToPoint&&(ku.location=this.defaultToPoint,ku.Va(),r=n=ku)):r=this.toPort,r===null||n.isVisible()||(i=n.findVisibleNode(),i!==null&&i!==n?(n=i,r=i.port):n=i),this.Iw=n,n===null||!n.location.w())return!1;for(;!(r===null||r.actualBounds.w()&&r.Od());)r=r.panel;if(r===null)return!1;var s=this.pointsCount,l=this.computeSpot(!0,e);i=this.computeSpot(!1,r);var h=Hh(l),a=Hh(i),f=e===r&&e!==null,p=this.isOrthogonal,d=this.curve===un;this.Uf=f&&!p?d=!0:!1;var y=this.computeAdjusting()===Mi||f;if(!p&&!f&&h&&a){if(h=!1,!y&&3<=s&&(y=this.getLinkPoint(t,e,l,!0,!1,n,r),a=this.getLinkPoint(n,r,i,!1,!1,t,e),h=this.adjustPoints(0,y,s-1,a))&&(y=this.getLinkPoint(t,e,l,!0,!1,n,r),a=this.getLinkPoint(n,r,i,!1,!1,t,e),this.adjustPoints(0,y,s-1,a)),!h)if(this.Dj(),d){s=this.getLinkPoint(t,e,l,!0,!1,n,r),y=this.getLinkPoint(n,r,i,!1,!1,t,e),h=y.x-s.x,a=y.y-s.y,f=this.computeCurviness(),d=p=0;var x=s.x+h/3,v=s.y+a/3,S=x,N=v;F.B(a,0)?N=0<h?N-f:N+f:(p=-h/a,d=Math.sqrt(f*f/(p*p+1)),0>f&&(d=-d),S=(0>a?-1:1)*d+x,N=p*(S-x)+v),x=s.x+2*h/3,v=s.y+2*a/3;var k=x,C=v;F.B(a,0)?C=0<h?C-f:C+f:(k=(0>a?-1:1)*d+x,C=p*(k-x)+v),this.Dj(),this.je(s),this.wf(S,N),this.wf(k,C),this.je(y),this.Yc(0,this.getLinkPoint(t,e,l,!0,!1,n,r)),this.Yc(3,this.getLinkPoint(n,r,i,!1,!1,t,e))}else s=n,y=r,n=this.getLinkPoint(t,e,l,!0,!1,s,y),r=this.getLinkPoint(s,y,i,!1,!1,t,e),this.hasCurviness()?(y=r.x-n.x,i=r.y-n.y,l=this.computeCurviness(),t=n.x+y/2,e=n.y+i/2,s=t,h=e,F.B(i,0)?h=0<y?h-l:h+l:(y=-y/i,s=Math.sqrt(l*l/(y*y+1)),0>l&&(s=-s),s=(0>i?-1:1)*s+t,h=y*(s-t)+e),this.je(n),this.wf(s,h),this.je(r)):(this.je(n),this.je(r),h=V.alloc(),e.ji(h),a=h.ca(r),y.ji(h),f=h.ca(n),(a||f)&&(l=e.ja(Td(l),new P),this.Yc(0,this.getLinkPointFromPoint(t,e,l,r,!0,l)),i=y.ja(Td(i),new P),this.Yc(1,this.getLinkPointFromPoint(s,y,i,n,!1,i))),V.free(h))}else{d=this.isAvoiding,y&&(p&&d||f)&&this.Dj();var T=f?this.computeCurviness():0;d=this.getLinkPoint(t,e,l,!0,p,n,r),x=S=v=0,(p||!h||f)&&(N=this.computeEndSegmentLength(t,e,l,!0),x=this.getLinkDirection(t,e,d,l,!0,p,n,r),f&&(h||l.C(i)||!p&&l.x+i.x===1&&l.y+i.y===1)&&(x-=p?90:30,0>T&&(x-=180)),0>x?x+=360:360<=x&&(x-=360),f&&(N+=Math.abs(T)*(p?1:2)),x===0?v=N:x===90?S=N:x===180?v=-N:x===270?S=-N:(v=N*Math.cos(x*Math.PI/180),S=N*Math.sin(x*Math.PI/180)),l.Jc()&&f&&(N=e.ja(Ut,P.alloc()),k=P.allocAt(N.x+1e3*v,N.y+1e3*S),this.getLinkPointFromPoint(t,e,N,k,!0,d),P.free(N),P.free(k))),N=this.getLinkPoint(n,r,i,!1,p,t,e);var L=C=k=0;if(p||!a||f){var E=this.computeEndSegmentLength(n,r,i,!1);L=this.getLinkDirection(n,r,N,i,!1,p,t,e),f&&(a||l.C(i)||!p&&l.x+i.x===1&&l.y+i.y===1)&&(L+=p?0:30,0>T&&(L+=180)),0>L?L+=360:360<=L&&(L-=360),f&&(E+=Math.abs(T)*(p?1:2)),L===0?k=E:L===90?C=E:L===180?k=-E:L===270?C=-E:(k=E*Math.cos(L*Math.PI/180),C=E*Math.sin(L*Math.PI/180)),i.Jc()&&f&&(i=r.ja(Ut,P.alloc()),l=P.allocAt(i.x+1e3*k,i.y+1e3*C),this.getLinkPointFromPoint(n,r,i,l,!1,N),P.free(i),P.free(l))}i=d,(p||!h||f)&&(i=new P(d.x+v,d.y+S)),l=N,(p||!a||f)&&(l=new P(N.x+k,N.y+C)),!y&&!p&&h&&3<s&&this.adjustPoints(0,d,s-2,l)?this.Yc(s-1,N):!y&&!p&&a&&3<s&&this.adjustPoints(1,i,s-1,N)?this.Yc(0,d):!y&&(p?6<=s:4<s)&&this.adjustPoints(1,i,s-2,l)?(this.Yc(0,d),this.Yc(s-1,N)):(this.Dj(),this.je(d),(p||!h||f)&&this.je(i),p&&this.addOrthoPoints(i,x,l,L,t,n),(p||!a||f)&&this.je(l),this.je(N))}return!0};function Sv(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x>=t.x?e.x=t.x+9e9:e.x=t.x-9e9,e.y=t.y):(e.y>=t.y?e.y=t.y+9e9:e.y=t.y-9e9,e.x=t.x),e}X.prototype.getLinkPointFromPoint=function(t,e,i,n,r,s){if(s===void 0&&(s=new P),t===null||e===null)return s.assign(i),s;if(t.isVisible()||(r=t.findVisibleNode(),r!==null&&r!==t&&(e=r.port)),t=null,r=e.panel,r===null||r.pe()||(r=r.panel),r===null){r=n.x,n=n.y;var l=i.x;i=i.y}else{t=r.ke,r=1/(t.m11*t.m22-t.m12*t.m21),l=t.m22*r;var h=-t.m12*r,a=-t.m21*r,f=t.m11*r,p=r*(t.m21*t.dy-t.m22*t.dx),d=r*(t.m12*t.dx-t.m11*t.dy);r=n.x*l+n.y*a+p,n=n.x*h+n.y*f+d,l=i.x*l+i.y*a+p,i=i.x*h+i.y*f+d}return e.Qj(r,n,l,i,s),t!==null&&s.transform(t),s};function Cd(t,e){var i=e.Wn;return i===null&&(i=new Nu,i.port=e,i.node=e.part,e.Wn=i),pk(i,t)}X.prototype.getLinkPoint=function(t,e,i,n,r,s,l,h){if(h===void 0&&(h=new P),i.tb()&&!Hh(i))return e.ja(i,h),h;if(i.Vc()){var a=Cd(this,e);if(a!==null){if(h.assign(a.Uo),r&&this.routing===lk){var f=Cd(this,l);if(f!==null&&a.Cl<f.Cl){a=P.alloc(),f=P.alloc();var p=new V(e.ja(ei,a),e.ja(Xr,f)),d=this.computeSpot(!n,l);t=this.getLinkPoint(s,l,d,!n,r,t,e,f),(i.Ff(sh)||i.Ff(lh))&&t.y>=p.y&&t.y<=p.y+p.height?h.y=t.y:(i.Ff(oh)||i.Ff(uh))&&t.x>=p.x&&t.x<=p.x+p.width&&(h.x=t.x),P.free(a),P.free(f)}}return h}}return i=e.ja(Td(i),P.alloc()),this.pointsCount>(r?6:2)?(l=n?this.i(1):this.i(this.pointsCount-2),r&&(l=Sv(i,l.copy()))):(a=this.computeSpot(!n,l),s=P.alloc(),l=l.ja(Td(a),s),r&&(l=Sv(i,l)),P.free(s)),this.getLinkPointFromPoint(t,e,i,l,n,h),P.free(i),h},X.prototype.getLinkDirection=function(t,e,i,n,r,s,l,h){t:if(n.tb())var a=n.x>n.y?n.x>1-n.y?0:n.x<1-n.y?270:315:n.x<n.y?n.x>1-n.y?90:n.x<1-n.y?180:135:.5>n.x?225:.5<n.x?45:0;else{if(n.Vc()&&(a=Cd(this,e),a!==null))switch(a.Kc){case 1:a=270;break t;case 2:a=180;break t;default:case 4:a=0;break t;case 8:a=90;break t}a=e.ja(Ut,P.alloc()),this.pointsCount>(s?6:2)?(h=r?this.i(1):this.i(this.pointsCount-2),h=s?Sv(a,h.copy()):i):(i=P.alloc(),h=h.ja(Ut,i),P.free(i)),i=Math.abs(h.x-a.x)>Math.abs(h.y-a.y)?h.x>=a.x?0:180:h.y>=a.y?90:270,P.free(a),a=i}return n.Jc()&&l.Nd(t)&&(a+=180,360<=a&&(a-=360)),Hh(n)||(t=e.ii(),t===0)||(45<=t&&135>t?a+=90:135<=t&&225>t?a+=180:225<=t&&315>t&&(a+=270),360<=a&&(a-=360)),a},X.prototype.computeEndSegmentLength=function(t,e,i,n){return e!==null&&i.Vc()&&(t=Cd(this,e),t!==null)?t.Fu:(t=n?this.fromEndSegmentLength:this.toEndSegmentLength,e!==null&&isNaN(t)&&(t=n?e.fromEndSegmentLength:e.toEndSegmentLength),isNaN(t)&&(t=10),t)},X.prototype.computeSpot=function(t,e){return e===void 0&&(e=null),t?(t=e||this.fromPort,t===null?t=Ut:(e=this.fromSpot,e.Tb()&&(e=t.fromSpot),t=e===Je?$e:e)):(t=e||this.toPort,t===null?t=Ut:(e=this.toSpot,e.Tb()&&(e=t.toSpot),t=e===Je?$e:e)),t};function Hh(t){return t===$e||t.x===.5&&t.y===.5}function Td(t){return t.x===.5&&t.y===.5?t:Ut}X.prototype.computeOtherPoint=function(t,e){return this.computeAdjusting()!==Mi&&4<this.pointsCount?this.computeMidPoint(new P):(t=e.Wn,t=t!==null?pk(t,this):null,t!==null?t.Uo:e.ja(Ut))},X.prototype.computeShortLength=function(t){if(t){if(t=this.fromShortLength,isNaN(t)){var e=this.fromPort;e!==null&&(t=e.fromShortLength)}return isNaN(t)?0:t}return t=this.toShortLength,isNaN(t)&&(e=this.toPort,e!==null&&(t=e.toShortLength)),isNaN(t)?0:t},X.prototype.Af=function(t,e,i,n,r,s){if(this.pickable===!1)return!1;e===void 0&&(e=null),i===void 0&&(i=null);var l=s;if(s===void 0&&(l=Nt.alloc(),l.reset()),l.multiply(this.transform),this.ah(t,l))return Gm(this,e,i,r),s===void 0&&Nt.free(l),!0;if(this.Tc(t,l)){var h=!1;if(!this.isAtomic)for(var a=this.O.s,f=a.length;f--;){var p=a[f];if(p.visible||p===this.locationObject){var d=p.actualBounds,y=this.naturalBounds;if(!(d.x>y.width||d.y>y.height||0>d.x+d.width||0>d.y+d.height)){if(d=Nt.alloc(),d.set(l),p instanceof _)h=p.Af(t,e,i,n,r,d);else if(this.path===p){if(p instanceof wt)if(h=t,y=n,p.pickable===!1)h=!1;else if(d.multiply(p.transform),y)t:{var x=h,v=d;if(p.ah(x,v))h=!0;else{if(v===void 0&&(v=p.transform,x.Oe(p.actualBounds))){h=!0;break t}h=x.left,y=x.right;var S=x.top;x=x.bottom;var N=P.alloc(),k=P.alloc(),C=P.alloc(),T=Nt.alloc();T.set(v),T.$u(p.transform),T.Ol(),k.x=y,k.y=S,k.transform(T),N.x=h,N.y=S,N.transform(T),v=!1,wl(p,N,k,C)?v=!0:(N.x=y,N.y=x,N.transform(T),wl(p,N,k,C)?v=!0:(k.x=h,k.y=x,k.transform(T),wl(p,N,k,C)?v=!0:(N.x=h,N.y=S,N.transform(T),wl(p,N,k,C)&&(v=!0)))),Nt.free(T),P.free(N),P.free(k),P.free(C),h=v}}else h=p.ah(h,d)}else h=ZM(p,t,n,d);h&&(y=p,e!==null&&(y=e(p)),y&&(i===null||i(y))&&r.add(y)),Nt.free(d)}}}return s===void 0&&Nt.free(l),h||this.background!==null||this.areaBackground!==null}return s===void 0&&Nt.free(l),!1},X.prototype.computeCurve=function(){if(this.Uf===null){var t=this.fromPort,e=this.isOrthogonal;this.Uf=t!==null&&t===this.toPort&&!e}return this.Uf?un:this.curve},X.prototype.computeCorner=function(){if(this.curve===un)return 0;var t=this.corner;return(isNaN(t)||0>t)&&(t=10),t},X.prototype.findMidLabel=function(){for(var t=this.path,e=this.O.s,i=e.length,n=0;n<i;n++){var r=e[n];if(r!==t&&!r.isPanelMain&&(r.segmentIndex===-1/0||isNaN(r.segmentIndex)))return r}for(t=this.labelNodes;t.next();)if(e=t.value,e.segmentIndex===-1/0||isNaN(e.segmentIndex))return e;return null},X.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t=hk;t=Math.max(t,this.computeThickness());var e=this.fromPort,i=this.toPort;if(e!==null&&i!==null){var n=this.findMidLabel();if(n!==null){var r=n.naturalBounds,s=n.margin,l=isNaN(r.width)?30:r.width*n.scale+s.left+s.right;r=isNaN(r.height)?14:r.height*n.scale+s.top+s.bottom,n=n.segmentOrientation,n===Ff||n===Od||n===Cv?t=Math.max(t,r):n===Af||n===Df||n===Of||n===If?t=Math.max(t,l):(e=e.ja(Ut).ab(i.ja(Ut))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(e)*l)+Math.abs(Math.cos(e)*r)+1)),this.curve===un&&(t*=1.333)}}return t},X.prototype.arrangeBundledLinks=function(t,e){if(e)for(e=0;e<t.length;e++){var i=t[e];i.computeAdjusting()===Mi&&i.bb()}},X.prototype.computeCurviness=function(){var t=this.curviness;if(isNaN(t)){t=uk;var e=this.Qf;if(e!==null){for(var i=Yt(),n=0,r=e.links,s=0;s<r.length;s++){var l=r[s].computeSpacing();i.push(l),n+=l}for(n=-n/2,s=0;s<r.length;s++){if(r[s]===this){t=n+i[s]/2;break}n+=i[s]}e.ys===this.fromNode&&(t=-t),Vt(i)}}return t},X.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return t!==null?Math.max(t.strokeWidth,1):1},X.prototype.hasCurviness=function(){return!isNaN(this.curviness)||this.Qf!==null},X.prototype.adjustPoints=function(t,e,i,n){var r=this.computeAdjusting();if(this.isOrthogonal){if(r===Ed)return!1;r===Fd&&(r=Ef)}switch(r){case Ed:var s=this.i(t),l=this.i(i);if(!s.Xa(e)||!l.Xa(n)){r=s.x,s=s.y;var h=l.x-r,a=l.y-s,f=Math.sqrt(h*h+a*a);if(!F.$(f,0)){if(F.$(h,0))var p=0>a?-Math.PI/2:Math.PI/2;else p=Math.atan(a/Math.abs(h)),0>h&&(p=Math.PI-p);l=e.x;var d=e.y;h=n.x-l;var y=n.y-d;for(a=Math.sqrt(h*h+y*y),F.$(h,0)?y=0>y?-Math.PI/2:Math.PI/2:(y=Math.atan(y/Math.abs(h)),0>h&&(y=Math.PI-y)),f=a/f,p=y-p,this.Yc(t,e),t+=1;t<i;t++)e=this.i(t),h=e.x-r,a=e.y-s,e=Math.sqrt(h*h+a*a),F.$(e,0)||(F.$(h,0)?a=0>a?-Math.PI/2:Math.PI/2:(a=Math.atan(a/Math.abs(h)),0>h&&(a=Math.PI-a)),h=a+p,e*=f,this.M(t,l+e*Math.cos(h),d+e*Math.sin(h)));this.Yc(i,n)}}return!0;case Fd:if(s=this.i(t),d=this.i(i),!s.Xa(e)||!d.Xa(n)){r=s.x,s=s.y,l=d.x,d=d.y,f=(l-r)*(l-r)+(d-s)*(d-s),h=e.x,p=e.y,a=n.x,y=n.y;var x=1;if(a-h!==0){var v=(y-p)/(a-h);x=Math.sqrt(1+1/(v*v))}else v=9e9;for(this.Yc(t,e),t+=1;t<i;t++){e=this.i(t);var S=e.x,N=e.y,k=.5;f!==0&&(k=((r-S)*(r-l)+(s-N)*(s-d))/f);var C=r+k*(l-r),T=s+k*(d-s);e=Math.sqrt((S-C)*(S-C)+(N-T)*(N-T)),N<v*(S-C)+T&&(e=-e),0<v&&(e=-e),S=h+k*(a-h),k=p+k*(y-p),v!==0?(e=S+e/x,this.M(t,e,k-(e-S)/v)):this.M(t,S,k+e)}this.Yc(i,n)}return!0;case Ef:t:{if(this.isOrthogonal&&(r=this.i(t),s=this.i(t+1),l=this.i(t+2),h=s.x,p=s.y,d=h,f=p,F.B(r.y,s.y)?F.B(s.x,l.x)?p=e.y:F.B(s.y,l.y)&&(h=e.x):F.B(r.x,s.x)&&(F.B(s.y,l.y)?h=e.x:F.B(s.x,l.x)&&(p=e.y)),this.M(t+1,h,p),r=this.i(i),s=this.i(i-1),l=this.i(i-2),h=s.x,p=s.y,a=h,y=p,F.B(r.y,s.y)?F.B(s.x,l.x)?p=n.y:F.B(s.y,l.y)&&(h=n.x):F.B(r.x,s.x)&&(F.B(s.y,l.y)?h=n.x:F.B(s.x,l.x)&&(p=n.y)),this.M(i-1,h,p),Mv(this))){this.M(t+1,d,f),this.M(i-1,a,y),i=!1;break t}this.Yc(t,e),this.Yc(i,n),i=!0}return i;default:return!1}},X.prototype.addOrthoPoints=function(t,e,i,n,r,s){0>e?e+=360:360<=e&&(e-=360),0>n?n+=360:360<=n&&(n-=360);var l=n;e=315<=e||45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270,n=315<=n||45>n?0:45<=n&&135>n?90:135<=n&&225>n?180:270;var h=r.actualBounds.copy(),a=s.actualBounds.copy();if(h.w()&&a.w()){h.yc(Rf,Rf),a.yc(Rf,Rf),h.Ve(t),a.Ve(i);var f=P.alloc(),p=P.alloc();e===0?i.x>t.x||n===270&&i.y<t.y&&a.right>t.x||n===90&&i.y>t.y&&a.right>t.x?(f.h(i.x,t.y),p.h(i.x,(t.y+i.y)/2),n===180?(f.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1),p.x=f.x,p.y=i.y):n===270&&i.y<t.y||n===90&&i.y>t.y?(f.x=t.x<a.left?this.computeMidOrthoPosition(t.x,t.y,a.left,i.y,!1):t.x<a.right&&(n===270&&t.y<a.top||n===90&&t.y>a.bottom)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):a.right,p.x=f.x,p.y=i.y):n===0&&t.x<a.left&&t.y>a.top&&t.y<a.bottom&&(f.x=t.x,f.y=t.y<i.y?Math.min(i.y,a.top):Math.max(i.y,a.bottom),p.y=f.y)):(f.h(t.x,i.y),p.h((t.x+i.x)/2,i.y),(n===180||n===90&&i.y<h.top||n===270&&i.y>h.bottom)&&(n===180&&(a.ca(t)||h.ca(i))?f.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):i.y<t.y&&(n===180||n===90)?f.y=this.computeMidOrthoPosition(t.x,h.top,i.x,Math.max(i.y,a.bottom),!0):i.y>t.y&&(n===180||n===270)&&(f.y=this.computeMidOrthoPosition(t.x,h.bottom,i.x,Math.min(i.y,a.top),!0)),p.x=i.x,p.y=f.y),f.y>h.top&&f.y<h.bottom&&(i.x>=h.left&&i.x<=t.x||t.x<=a.right&&t.x>=i.x?(n===90||n===270)&&(f.h(Math.max((t.x+i.x)/2,t.x),t.y),p.h(f.x,i.y)):(f.y=n===270||(n===0||n===180)&&i.y<t.y?Math.min(i.y,n===0?h.top:Math.min(h.top,a.top)):Math.max(i.y,n===0?h.bottom:Math.max(h.bottom,a.bottom)),p.x=i.x,p.y=f.y))):e===180?i.x<t.x||n===270&&i.y<t.y&&a.left<t.x||n===90&&i.y>t.y&&a.left<t.x?(f.h(i.x,t.y),p.h(i.x,(t.y+i.y)/2),n===0?(f.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1),p.x=f.x,p.y=i.y):n===270&&i.y<t.y||n===90&&i.y>t.y?(f.x=t.x>a.right?this.computeMidOrthoPosition(t.x,t.y,a.right,i.y,!1):t.x>a.left&&(n===270&&t.y<a.top||n===90&&t.y>a.bottom)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):a.left,p.x=f.x,p.y=i.y):n===180&&t.x>a.right&&t.y>a.top&&t.y<a.bottom&&(f.x=t.x,f.y=t.y<i.y?Math.min(i.y,a.top):Math.max(i.y,a.bottom),p.y=f.y)):(f.h(t.x,i.y),p.h((t.x+i.x)/2,i.y),(n===0||n===90&&i.y<h.top||n===270&&i.y>h.bottom)&&(n===0&&(a.ca(t)||h.ca(i))?f.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):i.y<t.y&&(n===0||n===90)?f.y=this.computeMidOrthoPosition(t.x,h.top,i.x,Math.max(i.y,a.bottom),!0):i.y>t.y&&(n===0||n===270)&&(f.y=this.computeMidOrthoPosition(t.x,h.bottom,i.x,Math.min(i.y,a.top),!0)),p.x=i.x,p.y=f.y),f.y>h.top&&f.y<h.bottom&&(i.x<=h.right&&i.x>=t.x||t.x>=a.left&&t.x<=i.x?(n===90||n===270)&&(f.h(Math.min((t.x+i.x)/2,t.x),t.y),p.h(f.x,i.y)):(f.y=n===270||(n===0||n===180)&&i.y<t.y?Math.min(i.y,n===180?h.top:Math.min(h.top,a.top)):Math.max(i.y,n===180?h.bottom:Math.max(h.bottom,a.bottom)),p.x=i.x,p.y=f.y))):e===90?i.y>t.y||n===180&&i.x<t.x&&a.bottom>t.y||n===0&&i.x>t.x&&a.bottom>t.y?(f.h(t.x,i.y),p.h((t.x+i.x)/2,i.y),n===270?(f.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0),p.x=i.x,p.y=f.y):n===180&&i.x<t.x||n===0&&i.x>t.x?(f.y=t.y<a.top?this.computeMidOrthoPosition(t.x,t.y,i.x,a.top,!0):t.y<a.bottom&&(n===180&&t.x<a.left||n===0&&t.x>a.right)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):a.bottom,p.x=i.x,p.y=f.y):n===90&&t.y<a.top&&t.x>a.left&&t.x<a.right&&(f.x=t.x<i.x?Math.min(i.x,a.left):Math.max(i.x,a.right),f.y=t.y,p.x=f.x)):(f.h(i.x,t.y),p.h(i.x,(t.y+i.y)/2),(n===270||n===0&&i.x<h.left||n===180&&i.x>h.right)&&(n===270&&(a.ca(t)||h.ca(i))?f.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):i.x<t.x&&(n===270||n===0)?f.x=this.computeMidOrthoPosition(h.left,t.y,Math.max(i.x,a.right),i.y,!1):i.x>t.x&&(n===270||n===180)&&(f.x=this.computeMidOrthoPosition(h.right,t.y,Math.min(i.x,a.left),i.y,!1)),p.x=f.x,p.y=i.y),f.x>h.left&&f.x<h.right&&(i.y>=h.top&&i.y<=t.y||t.y<=a.bottom&&t.y>=i.y?(n===0||n===180)&&(f.h(t.x,Math.max((t.y+i.y)/2,t.y)),p.h(i.x,f.y)):(f.x=n===180||(n===90||n===270)&&i.x<t.x?Math.min(i.x,n===90?h.left:Math.min(h.left,a.left)):Math.max(i.x,n===90?h.right:Math.max(h.right,a.right)),p.x=f.x,p.y=i.y))):i.y<t.y||n===180&&i.x<t.x&&a.top<t.y||n===0&&i.x>t.x&&a.top<t.y?(f.h(t.x,i.y),p.h((t.x+i.x)/2,i.y),n===90?(f.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0),p.x=i.x,p.y=f.y):n===180&&i.x<t.x||n===0&&i.x>=t.x?(f.y=t.y>a.bottom?this.computeMidOrthoPosition(t.x,t.y,i.x,a.bottom,!0):t.y>a.top&&(n===180&&t.x<a.left||n===0&&t.x>a.right)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):a.top,p.x=i.x,p.y=f.y):n===270&&t.y>a.bottom&&t.x>a.left&&t.x<a.right&&(f.x=t.x<i.x?Math.min(i.x,a.left):Math.max(i.x,a.right),f.y=t.y,p.x=f.x)):(f.h(i.x,t.y),p.h(i.x,(t.y+i.y)/2),(n===90||n===0&&i.x<h.left||n===180&&i.x>h.right)&&(n===90&&(a.ca(t)||h.ca(i))?f.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):i.x<t.x&&(n===90||n===0)?f.x=this.computeMidOrthoPosition(h.left,t.y,Math.max(i.x,a.right),i.y,!1):i.x>t.x&&(n===90||n===180)&&(f.x=this.computeMidOrthoPosition(h.right,t.y,Math.min(i.x,a.left),i.y,!1)),p.x=f.x,p.y=i.y),f.x>h.left&&f.x<h.right&&(i.y<=h.bottom&&i.y>=t.y||t.y>=a.top&&t.y<=i.y?(n===0||n===180)&&(f.h(t.x,Math.min((t.y+i.y)/2,t.y)),p.h(i.x,f.y)):(f.x=n===180||(n===90||n===270)&&i.x<t.x?Math.min(i.x,n===270?h.left:Math.min(h.left,a.left)):Math.max(i.x,n===270?h.right:Math.max(h.right,a.right)),p.x=f.x,p.y=i.y)));var d=i;if(this.isAvoiding){var y=this.diagram;if(y===null||r===s||this.layer.isTemporary||!OM(y)||h.ca(d)&&!s.Nd(r)||a.ca(t)&&!r.Nd(s))e=!1;else{var x=vm(y,!0,this.containingGroup,null);if(this.segmentIndex!==17&&x.Vj(Math.min(t.x,f.x),Math.min(t.y,f.y),Math.abs(t.x-f.x),Math.abs(t.y-f.y))&&x.Vj(Math.min(f.x,p.x),Math.min(f.y,p.y),Math.abs(f.x-p.x),Math.abs(f.y-p.y))&&x.Vj(Math.min(p.x,d.x),Math.min(p.y,d.y),Math.abs(p.x-d.x),Math.abs(p.y-d.y)))e=!1;else{r=t,s=d;var v=i=null;if(y.isVirtualized){y=x.bounds.copy(),y.yc(-x.Eo,-x.Do);var S=P.alloc();Gh(x,t.x,t.y)||(F.Df(y.x,y.y,y.x+y.width,y.y+y.height,t.x,t.y,f.x,f.y,S)?(i=t=S.copy(),e=S.ab(f)):F.Df(y.x,y.y,y.x+y.width,y.y+y.height,f.x,f.y,p.x,p.y,S)?(i=t=S.copy(),e=S.ab(p)):F.Df(y.x,y.y,y.x+y.width,y.y+y.height,p.x,p.y,d.x,d.y,S)&&(i=t=S.copy(),e=S.ab(d))),Gh(x,d.x,d.y)||(F.Df(y.x,y.y,y.x+y.width,y.y+y.height,d.x,d.y,p.x,p.y,S)?(v=d=S.copy(),n=p.ab(S)):F.Df(y.x,y.y,y.x+y.width,y.y+y.height,p.x,p.y,f.x,f.y,S)?(v=d=S.copy(),n=f.ab(S)):F.Df(y.x,y.y,y.x+y.width,y.y+y.height,f.x,f.y,t.x,t.y,S)&&(v=d=S.copy(),n=t.ab(S))),P.free(S)}h=h.copy().Zc(a),h.yc(x.Eo*x.Js,x.Do*x.Js),fk(x,t,e,d,n,h,!0),a=to(x,d.x,d.y),!x.abort&&a>=Xh&&(ak(x),h.yc(x.Eo*x.Fx,x.Do*x.Gx),fk(x,t,e,d,n,h,!1),a=to(x,d.x,d.y)),!x.abort&&a<Xh&&to(x,d.x,d.y)!==ns?(kv(this,x,d.x,d.y,n,!0,l),h=this.i(2),4>this.pointsCount?(e===0||e===180?(h.x=t.x,h.y=d.y):(h.x=d.x,h.y=t.y),this.M(2,h.x,h.y),this.l(3,h.x,h.y)):(l=this.i(3),e===0||e===180?F.B(h.x,l.x)?(h=e===0?Math.max(h.x,t.x):Math.min(h.x,t.x),this.M(2,h,t.y),this.M(3,h,l.y)):F.B(h.y,l.y)?(Math.abs(t.y-h.y)<=x.Do/2&&(this.M(2,h.x,t.y),this.M(3,l.x,t.y)),this.l(2,h.x,t.y)):this.M(2,t.x,h.y):(e===90||e===270)&&(F.B(h.y,l.y)?(h=e===90?Math.max(h.y,t.y):Math.min(h.y,t.y),this.M(2,t.x,h),this.M(3,l.x,h)):F.B(h.x,l.x)?(Math.abs(t.x-h.x)<=x.Eo/2&&(this.M(2,t.x,h.y),this.M(3,t.x,l.y)),this.l(2,t.x,h.y)):this.M(2,h.x,t.y))),i!==null&&(t=this.i(1),l=this.i(2),t.x!==l.x&&t.y!==l.y?e===0||e===180?this.l(2,t.x,l.y):this.l(2,l.x,t.y):e===0||e===180?this.l(2,r.x,i.y):this.l(2,i.x,r.y)),v!==null&&(n===0||n===180?this.wf(s.x,v.y):this.wf(v.x,s.y)),e=!0):e=!1}}}else e=!1;e||(this.je(f.copy()),this.je(p.copy())),P.free(f),P.free(p)}},X.prototype.computeMidOrthoPosition=function(t,e,i,n,r){var s=0;return!this.hasCurviness()||this.computeSpot(!0,this.fromPort).Vc()||this.computeSpot(!1,this.toPort).Vc()||(s=this.computeCurviness()),r?(e+n)/2+s:(t+i)/2+s};function Mv(t){if(t.diagram===null||!t.isAvoiding||!OM(t.diagram))return!1;var e=t.points.s,i=e.length;if(4>i)return!1;t=vm(t.diagram,!0,t.containingGroup,null);for(var n=1;n<i-2;n++){var r=e[n],s=e[n+1];if(!t.Vj(Math.min(r.x,s.x),Math.min(r.y,s.y),Math.abs(r.x-s.x),Math.abs(r.y-s.y)))return!0}return!1}function kv(t,e,i,n,r,s,l){var h=e.Eo,a=e.Do,f=to(e,i,n),p=i,d=n;for(r===0?p+=h:r===90?d+=a:r===180?p-=h:d-=a,r!==l&&f>kl&&to(e,p,d)!==f-1&&(to(e,i-h,n)===f-1?(r=180,p=i-h,d=n):to(e,i+h,n)===f-1?(r=0,p=i+h,d=n):to(e,i,n-a)===f-1?(r=270,p=i,d=n-a):to(e,i,n+a)===f-1&&(r=90,p=i,d=n+a));f>kl&&to(e,p,d)===f-1;)i=p,n=d,r===0?p+=h:r===90?d+=a:r===180?p-=h:d-=a,--f;s?f>kl&&(r===180||r===0?i=Math.floor(i/h)*h+h/2:(r===90||r===270)&&(n=Math.floor(n/a)*a+a/2)):(i=Math.floor(i/h)*h+h/2,n=Math.floor(n/a)*a+a/2),f>kl&&(s=r,l=i,p=n,r===0?(s=90,p+=a):r===90?(s=180,l-=h):r===180?(s=270,p-=a):r===270&&(s=0,l+=h),to(e,l,p)===f-1?kv(t,e,l,p,s,!1,s):(l=i,p=n,r===0?(s=270,p-=a):r===90?(s=0,l+=h):r===180?(s=90,p+=a):r===270&&(s=180,l-=h),to(e,l,p)===f-1&&kv(t,e,l,p,s,!1,s))),t.wf(i,n)}X.prototype.$y=function(t){var e=t.x;t=t.y;for(var i=this.i(0),n=this.i(1),r=mi(e,t,i.x,i.y,n.x,n.y),s=0,l=1;l<this.pointsCount-1;l++){i=this.i(l+1);var h=mi(e,t,n.x,n.y,i.x,i.y);n=i,h<r&&(s=l,r=h)}return s},X.prototype.nc=function(){this.hk=!1,this.v()},X.prototype.Ql=function(t){if(!(!t&&(this.$c===!1||(t=this.sb(),this.hk&&(t===null||t.geometry!==null))))&&(2>this.pointsCount?this.hk=!0:this.ta=this.makeGeometry(),t=this.path,t!==null)){t.ta=this.ta;for(var e=this.O.s,i=e.length,n=0;n<i;n++){var r=e[n];r!==t&&r.isPanelMain&&r instanceof wt&&(r.ta=this.ta)}}},X.prototype.makeGeometry=function(){var t=this.ta,e=this.pointsCount,i=!1,n=this.diagram;n!==null&&Ml(this)&&n.Ah.contains(this)&&(this.il.width!==0||this.il.height!==0)&&(n.animationManager.isAnimating||n.currentTool!==n.toolManager)&&(i=!0);var r=this.i(0).copy(),s=r.copy();n=this.Kb.s;var l=this.computeCurve();if(l===un&&3<=e&&!F.$(this.smoothness,0))if(e===3){var h=this.i(1);n=Math.min(r.x,h.x);var a=Math.min(r.y,h.y);h=this.i(2),n=Math.min(n,h.x),a=Math.min(a,h.y)}else{if(this.isOrthogonal)for(a=0;a<e;a++)h=n[a],s.x=Math.min(h.x,s.x),s.y=Math.min(h.y,s.y);else for(n=3;n<e;n+=3)n+3>=e&&(n=e-1),a=this.i(n),s.x=Math.min(a.x,s.x),s.y=Math.min(a.y,s.y);n=s.x,a=s.y}else{for(a=0;a<e;a++)h=n[a],s.x=Math.min(h.x,s.x),s.y=Math.min(h.y,s.y);n=s.x,a=s.y}if(n-=this.pu.x,a-=this.pu.y,r.x-=n,r.y-=a,e!==2||Ml(this)){if(t.type=W.m,h=R2(t),this.computeShortLength(!0)!==0&&(r=wu(this,r,!0,s)),Uh(h,r.x,r.y,!1),l===un&&3<=e&&!F.$(this.smoothness,0))if(e===3)i=this.i(1),e=i.x-n,i=i.y-a,r=this.i(2).copy(),r.x-=n,r.y-=a,this.computeShortLength(!1)!==0&&(r=wu(this,r,!1,s)),qo(h,e,i,e,i,r.x,r.y);else if(this.isOrthogonal){e=P.allocAt(n,a),i=P.alloc(),i.assign(this.i(1)),s=P.allocAt(n,a),r=P.allocAt(n,a),l=this.i(0);for(var f,p=this.smoothness/3,d=1;d<this.pointsCount-1;d++){f=this.i(d);var y=l,x=f,v=this.i(Nv(this,f,d,!1));if((!F.$(y.x,x.x)||!F.$(x.x,v.x))&&(!F.$(y.y,x.y)||!F.$(x.y,v.y))){var S=p;isNaN(S)&&(S=this.smoothness/3);var N=y.x;y=y.y;var k=x.x;x=x.y;var C=v.x;v=v.y;var T=S*Ld(N,y,k,x);S*=Ld(k,x,C,v),F.$(y,x)&&F.$(k,C)&&(k>N?v>x?(s.x=k-T,s.y=x-T,r.x=k+S,r.y=x+S):(s.x=k-T,s.y=x+T,r.x=k+S,r.y=x-S):v>x?(s.x=k+T,s.y=x-T,r.x=k-S,r.y=x+S):(s.x=k+T,s.y=x+T,r.x=k-S,r.y=x-S)),F.$(N,k)&&F.$(x,v)&&(x>y?(C>k?(s.x=k-T,s.y=x-T,r.x=k+S):(s.x=k+T,s.y=x-T,r.x=k-S),r.y=x+S):(C>k?(s.x=k-T,s.y=x+T,r.x=k+S):(s.x=k+T,s.y=x+T,r.x=k-S),r.y=x-S)),(F.$(N,k)&&F.$(k,C)||F.$(y,x)&&F.$(x,v))&&(N=.5*(N+C),y=.5*(y+v),s.x=N,s.y=y,r.x=N,r.y=y),(d===1||d===2&&F.$(l.x,this.i(0).x)&&F.$(l.y,this.i(0).y))&&(i.x=.5*(l.x+f.x),i.y=.5*(l.y+f.y)),qo(h,i.x-n,i.y-a,s.x-n,s.y-a,f.x-n,f.y-a),e.set(s),i.set(r),l=f}}f=l.x,l=l.y,p=this.i(this.pointsCount-1),this.computeShortLength(!1)!==0&&(p=wu(this,p.copy(),!1,yo)),f=.5*(f+p.x),l=.5*(l+p.y),qo(h,r.x-n,r.y-a,f-n,l-a,p.x-n,p.y-a),P.free(e),P.free(i),P.free(s),P.free(r)}else for(i=3;i<e;i+=3)s=this.i(i-2),i+3>=e&&(i=e-1),r=this.i(i-1),l=this.i(i),i===e-1&&this.computeShortLength(!1)!==0&&(l=wu(this,l.copy(),!1,yo)),qo(h,s.x-n,s.y-a,r.x-n,r.y-a,l.x-n,l.y-a);else{for(s=P.alloc(),s.assign(this.i(0)),r=P.alloc(),r.assign(s),l=this.computeCorner(),d=1,f=0;d<e;){if(d=Nv(this,s,d,1<d),p=this.i(d),d>=e-1){if(!s.C(p))this.computeShortLength(!1)!==0&&(p=wu(this,p.copy(),!1,yo)),Su(this,h,-n,-a,s,p,i);else if(f===0)for(d=1;d<e;)r.assign(s),p=this.i(d++),Su(this,h,-n,-a,s,p,i),s.assign(p);break}if(f=Nv(this,p,d+1,d<e-3),d=-n,N=-a,y=p,k=this.i(f),S=i,F.B(s.y,y.y)&&F.B(y.x,k.x))if(v=Math.min(l,Math.abs(y.x-r.x)/2),v=T=Math.min(v,Math.abs(k.y-y.y)/2),F.B(v,0))Su(this,h,d,N,s,y,S),s.assign(y);else{var L=y.x,E=y.y;x=L,C=E,y.x>s.x?L=y.x-v:L=y.x+v,k.y>y.y?C=y.y+T:C=y.y-T,k=P.allocAt(L,E),Su(this,h,d,N,s,k,S),P.free(k),vd(h,y.x+d,y.y+N,x+d,C+N),s.h(x,C)}else F.B(s.x,y.x)&&F.B(y.y,k.y)?(v=Math.min(l,Math.abs(y.y-r.y)/2),v=T=Math.min(v,Math.abs(k.x-y.x)/2),F.B(T,0)?(Su(this,h,d,N,s,y,S),s.assign(y)):(L=y.x,E=y.y,x=L,C=E,y.y>s.y?E=y.y-v:E=y.y+v,k.x>y.x?x=y.x+T:x=y.x-T,k=P.allocAt(L,E),Su(this,h,d,N,s,k,S),P.free(k),vd(h,y.x+d,y.y+N,x+d,C+N),s.h(x,C))):(Su(this,h,d,N,s,y,S),s.assign(y));r.assign(p),d=f}P.free(s)}xd=h}else h=this.i(1).copy(),h.x-=n,h.y-=a,this.computeShortLength(!0)!==0&&(r=wu(this,r,!0,s)),this.computeShortLength(!1)!==0&&(h=wu(this,h,!1,s)),t.type=W.j,t.startX=r.x,t.startY=r.y,t.endX=h.x,t.endY=h.y;return this.hk=!0,t};function Ld(t,e,i,n){return t=i-t,isNaN(t)||t===1/0||t===-1/0?NaN:(0>t&&(t=-t),e=n-e,isNaN(e)||e===1/0||e===-1/0?NaN:(0>e&&(e=-e),F.$(t,0)?e:F.$(e,0)?t:Math.sqrt(t*t+e*e)))}function wu(t,e,i,n){var r=t.pointsCount;if(2>r)return e;if(i){var s=t.i(1);if(i=s.x-n.x,s=s.y-n.y,n=Ld(e.x,e.y,i,s),n===0)return e;r=r===2?.5*n:n,t=t.computeShortLength(!0),t>r&&(t=r),r=t*(s-e.y)/n,e.x+=t*(i-e.x)/n,e.y+=r}else{if(s=t.i(r-2),i=s.x-n.x,s=s.y-n.y,n=Ld(e.x,e.y,i,s),n===0)return e;r=r===2?.5*n:n,t=t.computeShortLength(!1),t>r&&(t=r),r=t*(e.y-s)/n,e.x-=t*(e.x-i)/n,e.y-=r}return e}function Nv(t,e,i,n){for(var r=t.pointsCount,s=e;F.$(e.x,s.x)&&F.$(e.y,s.y);){if(i>=r)return r-1;s=t.i(i++)}if(!F.$(e.x,s.x)&&!F.$(e.y,s.y))return i-1;for(var l=s;F.$(e.x,s.x)&&F.$(s.x,l.x)&&(!n||(e.y>=s.y?s.y>=l.y:s.y<=l.y))||F.$(e.y,s.y)&&F.$(s.y,l.y)&&(!n||(e.x>=s.x?s.x>=l.x:s.x<=l.x));){if(i>=r)return r-1;l=t.i(i++)}return i-2}X.prototype.computeJumpLength=function(){return 10};function Su(t,e,i,n,r,s,l){if(!l&&Ml(t)){l=t.computeJumpLength();var h=l/2,a=[],f=0;if(t.isVisible()&&(f=gj(t,r,s,a)),0<f){if(F.B(r.y,s.y))if(r.x<s.x)for(var p=0;p<f;){var d=Math.max(r.x,Math.min(a[p++]-h,s.x-l));e.lineTo(d+i,s.y+n);for(var y=d+i,x=Math.min(d+l,s.x);p<f&&(d=a[p],d<x+l);)p++,x=Math.min(d+h,s.x);d=s.y-l+n,x+=i;var v=s.y+n;t.curve===is?Uh(e,x,v,!1):qo(e,y,d,x,d,x,v)}else for(--f;0<=f;){for(p=Math.min(r.x,Math.max(a[f--]+h,s.x+l)),e.lineTo(p+i,s.y+n),y=p+i,d=Math.max(p-l,s.x);0<=f&&(p=a[f],p>d-l);)f--,d=Math.max(p-h,s.x);p=s.y-l+n,d+=i,x=s.y+n,t.curve===is?Uh(e,d,x,!1):qo(e,y,p,d,p,d,x)}else if(F.B(r.x,s.x))if(r.y<s.y)for(p=0;p<f;){for(d=Math.max(r.y,Math.min(a[p++]-h,s.y-l)),e.lineTo(s.x+i,d+n),y=d+n,d=Math.min(d+l,s.y);p<f&&(x=a[p],x<d+l);)p++,d=Math.min(x+h,s.y);x=s.x-l+i,v=s.x+i,d+=n,t.curve===is?Uh(e,v,d,!1):qo(e,x,y,x,d,v,d)}else for(--f;0<=f;){for(p=Math.min(r.y,Math.max(a[f--]+h,s.y+l)),e.lineTo(s.x+i,p+n),y=p+n,p=Math.max(p-l,s.y);0<=f&&(d=a[f],d>p-l);)f--,p=Math.max(d-h,s.y);d=s.x-l+i,x=s.x+i,p+=n,t.curve===is?Uh(e,x,p,!1):qo(e,d,y,d,p,x,p)}}}e.lineTo(s.x+i,s.y+n)}function gj(t,e,i,n){var r=t.diagram;if(r===null||e.C(i))return 0;for(r=r.layers;r.next();){var s=r.value;if(s!==null&&s.visible){s=s.Pa.s;for(var l=s.length,h=0;h<l;h++){var a=s[h];if(a instanceof X){if(a===t)return 0<n.length&&n.sort(function(p,d){return p-d}),n.length;if(a.isVisible()&&Ml(a)){var f=a.routeBounds;f.w()&&t.routeBounds.Tc(f)&&!t.usesSamePort(a)&&(f=a.path,f!==null&&f.Od()&&yj(e,i,n,a))}}}}}return 0<n.length&&n.sort(function(p,d){return p-d}),n.length}function yj(t,e,i,n){for(var r=F.B(t.y,e.y),s=n.pointsCount,l=n.i(0),h=P.alloc(),a=1;a<s;a++){var f=n.i(a);if(a<s-1){var p=n.i(a+1);if(l.y===f.y&&f.y===p.y){if(f.x>l.x&&p.x>=f.x||f.x<l.x&&p.x<=f.x)continue}else if(l.x===f.x&&f.x===p.x&&(f.y>l.y&&p.y>=f.y||f.y<l.y&&p.y<=f.y))continue}t:{p=t.x;var d=t.y,y=e.x,x=e.y,v=l.x;l=l.y;var S=f.x,N=f.y;if(F.B(p,y)){if(!F.B(d,x)&&F.B(l,N)&&Math.min(d,x)<l&&Math.max(d,x)>l&&Math.min(v,S)<p&&Math.max(v,S)>p&&!F.B(v,S)){h.x=p,h.y=l,p=!0;break t}}else if(F.B(d,x)&&F.B(v,S)&&Math.min(p,y)<v&&Math.max(p,y)>v&&Math.min(l,N)<d&&Math.max(l,N)>d&&!F.B(l,N)){h.x=v,h.y=d,p=!0;break t}h.x=0,h.y=0,p=!1}p&&(r?i.push(h.x):i.push(h.y)),l=f}P.free(h)}function Ml(t){return t=t.curve,t===_h||t===is}function jd(t,e){(e||Ml(t))&&(e=t.diagram,e===null||e.animationManager.isTicking||e.Ah.contains(t)||t.il.width===0&&t.il.height===0||e.Ah.add(t,t.il.copy()))}X.prototype.So=function(t){var e=this.layer;if(e!==null&&e.visible&&!e.isTemporary){var i=e.diagram;if(i!==null&&!i.animationManager.isTicking){var n=!1;for(i=i.layers;i.next();){var r=i.value;if(r.visible){if(r===e){n=!0;var s=!1;r=r.Pa.s;for(var l=r.length,h=0;h<l;h++){var a=r[h];a instanceof X&&(a===this?s=!0:s&&sk(this,a,t))}}else if(n)for(s=r.Pa.s,r=s.length,l=0;l<r;l++)h=s[l],h instanceof X&&sk(this,h,t)}}}}};function sk(t,e,i){if(e!==null&&e.hk&&e.$c&&Ml(e)){var n=e.routeBounds;n.w()&&(t.routeBounds.Tc(n)||i.Tc(n))&&(t.usesSamePort(e)||e.nc())}}X.prototype.usesSamePort=function(t){var e=this.pointsCount,i=t.pointsCount;if(0<e&&0<i){var n=this.i(0),r=t.i(0);if(n.Xa(r)||(e=this.i(e-1),t=t.i(i-1),e.Xa(t)||n.Xa(t)||e.Xa(r)))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1},X.prototype.isVisible=function(){if(!lt.prototype.isVisible.call(this))return!1;var t=this.containingGroup,e=!0,i=this.diagram;if(i!==null&&(e=i.isTreePathToChildren),i=this.fromNode,i!==null){if(this.isTreeLink&&e&&!i.isTreeExpanded)return!1;if(i===t)return!0;for(var n=i;n!==null;){if(n.labeledLink===this)return!0;n=n.containingGroup}if(i=i.findVisibleNode(),i===null||i===t)return!1}if(i=this.toNode,i!==null){if(this.isTreeLink&&!e&&!i.isTreeExpanded)return!1;if(i===t)return!0;for(e=i;e!==null;){if(e.labeledLink===this)return!0;e=e.containingGroup}if(e=i.findVisibleNode(),e===null||e===t)return!1}return!0},X.prototype.Vb=function(t){if(lt.prototype.Vb.call(this,t),t&&jd(this,!1),this.Qf!==null&&this.Qf.Nl(),this.sd!==null)for(var e=this.sd.iterator;e.next();)e.value.Vb(t)},X.prototype.computeAdjusting=function(){return this.isAvoiding&&this.diagram!==null&&this.diagram.animationManager.defaultAnimation.isAnimating?Ef:this.lk};function Lf(t){var e=t.bf;if(e!==null){var i=t.sf;if(i!==null&&isNaN(t.curviness)){for(var n=t.cf,r=t.tf,s=t=null,l=e.kb.s,h=l.length,a=0;a<h;a++){var f=l[a];(f.bf===e&&f.cf===n&&f.sf===i&&f.tf===r||f.bf===i&&f.cf===r&&f.sf===e&&f.tf===n)&&(s===null?s=f:(t===null&&(t=[],t.push(s)),t.push(f)))}if(t!==null){for(s=$2(e,i,n,r),s===null&&(s=new Id(e,n,i,r),W2(e,s),W2(i,s)),s.links=t,e=0;e<t.length;e++)t[e].Qf=s;s.Nl()}}}}function jf(t){var e=t.Qf;e!==null&&isNaN(t.curviness)&&(t.Qf=null,t=e.links.indexOf(t),0<=t&&(jr(e.links,t),e.Nl()))}X.prototype.lh=function(){return!0},z.Object.defineProperties(X.prototype,{fromNode:{get:function(){return this.bf},set:function(t){var e=this.bf;if(e!==t){var i=this.fromPort;e!==null&&(this.sf!==e&&kd(e,this,i),jf(this),this.D(2)),this.bf=t,t!==null&&this.Vb(t.isVisible()),this.Uf=null,this.bb();var n=this.diagram;n!==null&&n.aa&&n.partManager.setFromNodeForLink(this,t,e);var r=this.fromPort,s=this.fromPortChanged;if(s!==null){var l=!0;n!==null&&(l=n.aa,n.aa=!0),s(this,i,r),n!==null&&(n.aa=l)}t!==null&&(this.sf!==t&&Md(t,this,r),Lf(this),this.D(1)),this.g("fromNode",e,t),Yh(this)}}},fromPortId:{get:function(){return this.cf},set:function(t){var e=this.cf;if(e!==t){var i=this.fromPort;i!==null&&Ki(i),jf(this),this.cf=t;var n=this.fromPort;n!==null&&Ki(n);var r=this.diagram;if(r!==null){var s=this.data,l=r.model;s!==null&&l.ni()&&l.tv(s,t)}i!==n&&(this.Uf=null,this.bb(),s=this.fromPortChanged,s!==null&&(l=!0,r!==null&&(l=r.aa,r.aa=!0),s(this,i,n),r!==null&&(r.aa=l))),Lf(this),this.g("fromPortId",e,t)}}},fromPort:{get:function(){var t=this.bf;return t===null?null:t.hs(this.cf)}},fromPortChanged:{get:function(){return this.dn},set:function(t){var e=this.dn;e!==t&&(this.dn=t,this.g("fromPortChanged",e,t))}},toNode:{get:function(){return this.sf},set:function(t){var e=this.sf;if(e!==t){var i=this.toPort;e!==null&&(this.bf!==e&&kd(e,this,i),jf(this),this.D(2)),this.sf=t,t!==null&&this.Vb(t.isVisible()),this.Uf=null,this.bb();var n=this.diagram;n!==null&&n.aa&&n.partManager.setToNodeForLink(this,t,e);var r=this.toPort,s=this.toPortChanged;if(s!==null){var l=!0;n!==null&&(l=n.aa,n.aa=!0),s(this,i,r),n!==null&&(n.aa=l)}t!==null&&(this.bf!==t&&Md(t,this,r),Lf(this),this.D(1)),this.g("toNode",e,t),Yh(this)}}},toPortId:{get:function(){return this.tf},set:function(t){var e=this.tf;if(e!==t){var i=this.toPort;i!==null&&Ki(i),jf(this),this.tf=t;var n=this.toPort;n!==null&&Ki(n);var r=this.diagram;if(r!==null){var s=this.data,l=r.model;s!==null&&l.ni()&&l.yv(s,t)}i!==n&&(this.Uf=null,this.bb(),s=this.toPortChanged,s!==null&&(l=!0,r!==null&&(l=r.aa,r.aa=!0),s(this,i,n),r!==null&&(r.aa=l))),Lf(this),this.g("toPortId",e,t)}}},toPort:{get:function(){var t=this.sf;return t===null?null:t.hs(this.tf)}},toPortChanged:{get:function(){return this.ro},set:function(t){var e=this.ro;e!==t&&(this.ro=t,this.g("toPortChanged",e,t))}},fromSpot:{get:function(){return this.ba!==null?this.ba.Ui:Je},set:function(t){var e=this.fromSpot;e.C(t)||(t=t.J(),this.Sc(),this.ba.Ui=t,this.g("fromSpot",e,t),(e.Vc()||t.Vc())&&this.fromNode!==null&&Ki(this.fromPort),this.bb())}},fromEndSegmentLength:{get:function(){return this.ba!==null?this.ba.Si:NaN},set:function(t){var e=this.fromEndSegmentLength;e!==t&&(0>t&&dt(t,">= 0",X,"fromEndSegmentLength"),this.Sc(),this.ba.Si=t,this.g("fromEndSegmentLength",e,t),this.bb())}},fromShortLength:{get:function(){return this.ba!==null?this.ba.Ti:NaN},set:function(t){var e=this.fromShortLength;e!==t&&(this.Sc(),this.ba.Ti=t,this.nc(),this.g("fromShortLength",e,t))}},toSpot:{get:function(){return this.ba!==null?this.ba.wj:Je},set:function(t){var e=this.toSpot;e.C(t)||(t=t.J(),this.Sc(),this.ba.wj=t,this.g("toSpot",e,t),(e.Vc()||t.Vc())&&this.toNode!==null&&Ki(this.toPort),this.bb())}},toEndSegmentLength:{get:function(){return this.ba!==null?this.ba.uj:NaN},set:function(t){var e=this.toEndSegmentLength;e!==t&&(0>t&&dt(t,">= 0",X,"toEndSegmentLength"),this.Sc(),this.ba.uj=t,this.g("toEndSegmentLength",e,t),this.bb())}},toShortLength:{get:function(){return this.ba!==null?this.ba.vj:NaN},set:function(t){var e=this.toShortLength;e!==t&&(this.Sc(),this.ba.vj=t,this.nc(),this.g("toShortLength",e,t))}},isLabeledLink:{get:function(){return this.sd===null?!1:0<this.sd.count}},labelNodes:{get:function(){return this.sd===null?Kn:this.sd.iterator}},relinkableFrom:{get:function(){return(this.Qa&1)!==0},set:function(t){var e=(this.Qa&1)!==0;e!==t&&(this.Qa^=1,this.g("relinkableFrom",e,t),this.Sb())}},relinkableTo:{get:function(){return(this.Qa&2)!==0},set:function(t){var e=(this.Qa&2)!==0;e!==t&&(this.Qa^=2,this.g("relinkableTo",e,t),this.Sb())}},resegmentable:{get:function(){return(this.Qa&4)!==0},set:function(t){var e=(this.Qa&4)!==0;e!==t&&(this.Qa^=4,this.g("resegmentable",e,t),this.Sb())}},isTreeLink:{get:function(){return(this.Qa&8)!==0},set:function(t){var e=(this.Qa&8)!==0;e!==t&&(this.Qa^=8,this.g("isTreeLink",e,t),this.fromNode!==null&&Tf(this.fromNode),this.toNode!==null&&Tf(this.toNode))}},path:{get:function(){var t=this.sb();return t instanceof wt?t:null}},routeBounds:{get:function(){this.sg();var t=this.il,e=1/0,i=1/0,n=this.pointsCount;if(n===0)t.h(NaN,NaN,0,0);else{if(n===1)n=this.i(0),e=Math.min(n.x,e),i=Math.min(n.y,i),t.h(n.x,n.y,0,0);else if(n===2){n=this.i(0);var r=this.i(1);e=Math.min(n.x,r.x),i=Math.min(n.y,r.y),t.h(n.x,n.y,0,0),t.Ve(r)}else if(this.computeCurve()===un&&3<=n&&!this.isOrthogonal)if(r=this.i(0),e=r.x,i=r.y,t.h(e,i,0,0),n===3){n=this.i(1),e=Math.min(n.x,e),i=Math.min(n.y,i);var s=this.i(2);e=Math.min(s.x,e),i=Math.min(s.y,i),F.zl(r.x,r.y,n.x,n.y,n.x,n.y,s.x,s.y,.5,t)}else for(s=3;s<n;s+=3){var l=this.i(s-2);s+3>=n&&(s=n-1);var h=this.i(s-1),a=this.i(s);F.zl(r.x,r.y,l.x,l.y,h.x,h.y,a.x,a.y,.5,t),e=Math.min(a.x,e),i=Math.min(a.y,i),r=a}else for(r=this.i(0),s=this.i(1),e=Math.min(r.x,s.x),i=Math.min(r.y,s.y),t.h(r.x,r.y,0,0),t.Ve(s),r=2;r<n;r++)s=this.i(r),e=Math.min(s.x,e),i=Math.min(s.y,i),t.Ve(s);this.pu.h(e-t.x,i-t.y)}return t}},midPoint:{get:function(){return this.sg(),this.computeMidPoint(new P)}},midAngle:{get:function(){return this.sg(),this.computeMidAngle()}},flattenedLengths:{get:function(){if(this.Xp===null){this.$c||Pd(this);for(var t=this.Xp=[],e=this.pointsCount,i=0;i<e-1;i++){var n=this.i(i),r=this.i(i+1);F.$(n.x,r.x)?(n=r.y-n.y,0>n&&(n=-n)):F.$(n.y,r.y)?(n=r.x-n.x,0>n&&(n=-n)):n=Math.sqrt(n.zf(r)),t.push(n)}}return this.Xp}},flattenedTotalLength:{get:function(){var t=this.qt;if(isNaN(t)){for(var e=this.flattenedLengths,i=e.length,n=t=0;n<i;n++)t+=e[n];this.qt=t}return t}},points:{get:function(){return this.Kb},set:function(t){var e=this.Kb;if(e!==t){var i=null;if(Array.isArray(t)){var n=t.length%2===0;if(n){for(var r=0;r<t.length;r++)if(typeof t[r]!="number"||isNaN(t[r])){n=!1;break}}if(n)for(i=new tt,n=0;n<t.length/2;n++)r=new P(t[2*n],t[2*n+1]).freeze(),i.add(r);else{for(n=!0,r=0;r<t.length;r++){var s=t[r];if(!xt(s)||typeof s.x!="number"||isNaN(s.x)||typeof s.y!="number"||isNaN(s.y)){n=!1;break}}if(n)for(i=new tt,n=0;n<t.length;n++)r=t[n],i.add(new P(r.x,r.y).freeze())}}else if(t instanceof tt)for(i=t.copy(),t=i.iterator;t.next();)t.value.freeze();else R("Link.points value is not an instance of List or Array: "+t);i.freeze(),this.Kb=i,this.nc(),Pd(this),t=this.diagram,t!==null&&(t.mi||t.undoManager.isUndoingRedoing||t.vs.add(this),t.animationManager.zb&&Q0(t.animationManager,this,i)),this.g("points",e,i)}}},pointsCount:{get:function(){return this.Kb.count}},$c:{get:function(){return(this.Qa&16)!==0},set:function(t){(this.Qa&16)!==0!==t&&(this.Qa^=16)}},suspendsRouting:{get:function(){return(this.Qa&32)!==0},set:function(t){(this.Qa&32)!==0!==t&&(this.Qa^=32)}},computingPoints:{get:function(){return(this.Qa&64)!==0},set:function(t){(this.Qa&64)!==0!==t&&(this.Qa^=64)}},defaultFromPoint:{get:function(){return this.m},set:function(t){this.m=t.copy()}},defaultToPoint:{get:function(){return this.u},set:function(t){this.u=t.copy()}},isOrthogonal:{get:function(){return(this.oj.value&2)===2}},isAvoiding:{get:function(){return(this.oj.value&4)===4}},hk:{get:function(){return(this.Qa&128)!==0},set:function(t){(this.Qa&128)!==0!==t&&(this.Qa^=128)}},geometry:{get:function(){if(!this.hk){if(this.sg(),2>this.pointsCount)return this.hk=!0,this.ta;this.ta=this.makeGeometry()}return this.ta}},firstPickIndex:{get:function(){return 2>=this.pointsCount?0:this.isOrthogonal||!Hh(this.computeSpot(!0))?1:0}},lastPickIndex:{get:function(){var t=this.pointsCount;return t===0?0:2>=t?t-1:this.isOrthogonal||!Hh(this.computeSpot(!1))?t-2:t-1}},adjusting:{get:function(){return this.lk},set:function(t){var e=this.lk;e!==t&&(this.lk=t,this.g("adjusting",e,t))}},corner:{get:function(){return this.Lm},set:function(t){var e=this.Lm;e!==t&&(this.Lm=t,this.nc(),this.g("corner",e,t))}},curve:{get:function(){return this.Nm},set:function(t){var e=this.Nm;e!==t&&(this.Nm=t,this.bb(),this.nc(),jd(this,e===is||e===_h||t===is||t===_h),this.g("curve",e,t))}},curviness:{get:function(){return this.Om},set:function(t){var e=this.Om;e!==t&&(this.Om=t,this.bb(),this.nc(),this.g("curviness",e,t))}},routing:{get:function(){return this.oj},set:function(t){var e=this.oj;e!==t&&(this.oj=t,this.Uf=null,this.bb(),jd(this,(e.value&2)===2||(t.value&2)===2),this.g("routing",e,t))}},smoothness:{get:function(){return this.mo},set:function(t){var e=this.mo;e!==t&&(this.mo=t,this.nc(),this.g("smoothness",e,t))}},key:{get:function(){var t=this.diagram;if(t!==null&&t.model.ni())return t.model.xc(this.data)}}}),X.prototype.invalidateOtherJumpOvers=X.prototype.So,X.prototype.findClosestSegment=X.prototype.$y,X.prototype.updateRoute=X.prototype.sg,X.prototype.invalidateRoute=X.prototype.bb,X.prototype.rollbackRoute=X.prototype.pv,X.prototype.commitRoute=X.prototype.xf,X.prototype.startRoute=X.prototype.qh,X.prototype.clearPoints=X.prototype.Dj,X.prototype.removePoint=X.prototype.nv,X.prototype.addPointAt=X.prototype.wf,X.prototype.addPoint=X.prototype.je,X.prototype.insertPointAt=X.prototype.l,X.prototype.insertPoint=X.prototype.Fz,X.prototype.setPointAt=X.prototype.M,X.prototype.setPoint=X.prototype.Yc,X.prototype.getPoint=X.prototype.i,X.prototype.getOtherPort=X.prototype.xz,X.prototype.getOtherNode=X.prototype.Oo;var Mu=null,ku=null,Pv=new Q(X,"Normal",1),mj=new Q(X,"Orthogonal",2),vj=new Q(X,"AvoidsNodes",6),lk=new Q(X,"AvoidsNodesStraight",7),Mi=new Q(X,"None",0),un=new Q(X,"Bezier",9),is=new Q(X,"JumpGap",10),_h=new Q(X,"JumpOver",11),Ef=new Q(X,"End",17),Ed=new Q(X,"Scale",18),Fd=new Q(X,"Stretch",19),Ff=new Q(X,"OrientAlong",21),Of=new Q(X,"OrientPlus90",22),Af=new Q(X,"OrientMinus90",23),Cv=new Q(X,"OrientOpposite",24),Od=new Q(X,"OrientUpright",25),If=new Q(X,"OrientPlus90Upright",26),Df=new Q(X,"OrientMinus90Upright",27),Ad=new Q(X,"OrientUpright45",28),uk=16,hk=14,Rf=8;X.className="Link",X.Normal=Pv,X.Orthogonal=mj,X.AvoidsNodes=vj,X.AvoidsNodesStraight=lk,X.None=Mi,X.Bezier=un,X.JumpGap=is,X.JumpOver=_h,X.End=Ef,X.Scale=Ed,X.Stretch=Fd,X.OrientAlong=Ff,X.OrientPlus90=Of,X.OrientMinus90=Af,X.OrientOpposite=Cv,X.OrientUpright=Od,X.OrientPlus90Upright=If,X.OrientMinus90Upright=Df,X.OrientUpright45=Ad,X.EndSegmentStep=8,X.CurvinessStart=uk,X.SpacingMin=hk,X.OrthoShortCut=Rf;function Id(t,e,i,n){Oe(this),this.Ce=this.kq=!1,this.ys=t,this.Nx=e,this.av=i,this.Ox=n,this.links=[]}Id.prototype.Nl=function(){if(!this.kq){var t=this.links;0<t.length&&(t=t[0].diagram,t!==null&&(t.kw.add(this),this.Ce=t.undoManager.isUndoingRedoing))}this.kq=!0},Id.prototype.Jv=function(){if(this.kq){this.kq=!1;var t=this.links;if(0<t.length){var e=t[0],i=e.diagram;i=i===null||i.mi&&!this.Ce,this.Ce=!1,e.arrangeBundledLinks(t,i),t.length===1&&(e.Qf=null,t.length=0)}t.length===0&&(t=this.ys,this!==null&&t.Ye!==null&&t.Ye.remove(this),t=this.av,this!==null&&t.Ye!==null&&t.Ye.remove(this))}},Id.className="LinkBundle";function Bf(t){Oe(this),this.Xx=this.group=null,this.qs=!0,this.abort=!1,this.Gd=this.Fd=1,this.Cn=this.Bn=-1,this.oc=t.width,this.pc=t.height,this.Yb=null,this.bi=this.ai=0,this.Js=11,this.Gx=this.Fx=22}Bf.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var e=t.y,i=t.x+t.width,n=t.y+t.height;if(this.Fd=Math.floor((t.x-this.oc)/this.oc)*this.oc,this.Gd=Math.floor((e-this.pc)/this.pc)*this.pc,this.Bn=Math.ceil((i+2*this.oc)/this.oc)*this.oc,this.Cn=Math.ceil((n+2*this.pc)/this.pc)*this.pc,t=1+(Math.ceil((this.Bn-this.Fd)/this.oc)|0),e=1+(Math.ceil((this.Cn-this.Gd)/this.pc)|0),this.Yb===null||this.ai<t-1||this.bi<e-1){for(i=[],n=0;n<=t;n++)i[n]=new Uint32Array(e);this.Yb=i,this.ai=t-1,this.bi=e-1}if(t=Tv,this.Yb!==null)for(e=0;e<=this.ai;e++)if(i=this.Yb[e],i.fill)i.fill(t);else for(n=0;n<=this.bi;n++)i[n]=t}};function Gh(t,e,i){return t.Fd<=e&&e<=t.Bn&&t.Gd<=i&&i<=t.Cn}function to(t,e,i){return Gh(t,e,i)?(e-=t.Fd,e/=t.oc,i-=t.Gd,i/=t.pc,t.Yb[e|0][i|0]):Tv}function ak(t){if(t.Yb!==null)for(var e=0;e<=t.ai;e++)for(var i=t.Yb[e],n=0;n<=t.bi;n++)i[n]>=kl&&(i[n]=Tv)}Bf.prototype.Vj=function(t,e,i,n){if(t>this.Bn||t+i<this.Fd||e>this.Cn||e+n<this.Gd)return!0;t=(t-this.Fd)/this.oc|0,e=(e-this.Gd)/this.pc|0,i=Math.max(0,i)/this.oc+1|0;var r=Math.max(0,n)/this.pc+1|0;if(0>t&&(i+=t,t=0),0>e&&(r+=e,e=0),0>i||0>r)return!0;for(n=Math.min(t+i-1,this.ai)|0,i=Math.min(e+r-1,this.bi)|0;t<=n;t++){r=this.Yb[t];for(var s=e;s<=i;s++)if(r[s]===ns)return!1}return!0};function eo(t,e,i,n,r,s,l,h,a){if(!(e<s||e>l||i<h||i>a)){var f=e|0,p=i|0,d=t.Yb[f][p];if(d>=kl&&d<Xh)for(r?p+=n:f+=n,d+=1;s<=f&&f<=l&&h<=p&&p<=a&&!(d>=t.Yb[f][p]);)t.Yb[f][p]=d,d+=1,r?p+=n:f+=n;if(f=r?p:f,r)if(0<n)for(i+=n;i<f;i+=n)eo(t,e,i,1,!r,s,l,h,a),eo(t,e,i,-1,!r,s,l,h,a);else for(i+=n;i>f;i+=n)eo(t,e,i,1,!r,s,l,h,a),eo(t,e,i,-1,!r,s,l,h,a);else if(0<n)for(e+=n;e<f;e+=n)eo(t,e,i,1,!r,s,l,h,a),eo(t,e,i,-1,!r,s,l,h,a);else for(e+=n;e>f;e+=n)eo(t,e,i,1,!r,s,l,h,a),eo(t,e,i,-1,!r,s,l,h,a)}}function Dd(t,e,i,n,r,s,l,h,a){e|=0,i|=0;var f=ns,p=kl;for(t.Yb[e][i]=p;f===ns&&e>s&&e<l&&i>h&&i<a;)p+=1,t.Yb[e][i]=p,r?i+=n:e+=n,f=t.Yb[e][i]}function Rd(t,e,i,n,r,s,l,h,a){e|=0,i|=0;var f=ns,p=Xh;for(t.Yb[e][i]=p;f===ns&&e>s&&e<l&&i>h&&i<a;)t.Yb[e][i]=p,r?i+=n:e+=n,f=t.Yb[e][i]}function fk(t,e,i,n,r,s,l){if(t.Yb!==null){t.abort=!1;var h=e.x,a=e.y;if(Gh(t,h,a)){h-=t.Fd,h/=t.oc,a-=t.Gd,a/=t.pc;var f=n.x,p=n.y;if(Gh(t,f,p))if(f-=t.Fd,f/=t.oc,p-=t.Gd,p/=t.pc,1>=Math.abs(h-f)&&1>=Math.abs(a-p))t.abort=!0;else{var d=s.x;n=s.y,e=s.x+s.width;var y=s.y+s.height;d-=t.Fd,d/=t.oc,n-=t.Gd,n/=t.pc,e-=t.Fd,e/=t.oc,y-=t.Gd,y/=t.pc,s=Math.max(0,Math.min(t.ai,d|0)),e=Math.min(t.ai,Math.max(0,e|0)),d=Math.max(0,Math.min(t.bi,n|0)),y=Math.min(t.bi,Math.max(0,y|0)),n=t.Yb,h|=0,a|=0,f|=0,p|=0;var x=i===0||i===90?1:-1;if(i=i===90||i===270,n[h][a]===ns?(Dd(t,h,a,x,i,s,e,d,y),Dd(t,h,a,1,!i,s,e,d,y),Dd(t,h,a,-1,!i,s,e,d,y)):Dd(t,h,a,x,i,h,a,h,a),n[f][p]===ns?(Rd(t,f,p,r===0||r===90?1:-1,r===90||r===270,s,e,d,y),Rd(t,f,p,1,!(r===90||r===270),s,e,d,y),Rd(t,f,p,-1,!(r===90||r===270),s,e,d,y)):Rd(t,f,p,x,i,f,p,f,p),i=Yt(),l&&ck(t,f,p,r,h,a,i))for((i[0]!==f||i[1]!==p)&&(i.unshift(p),i.unshift(f)),(i[i.length-2]!==h||i[i.length-1]!==a)&&(i.push(h),i.push(a)),t=kl,r=i[i.length-2],l=i[i.length-1],n[r][l]=t++,s=i.length-4;0<=s;s-=2)for(r=i[s+2],l=i[s+3],e=i[s],f=i[s+1];e>r?r++:e<r?r--:f>l?l++:f<l&&l--,n[r][l]=t++,r!==e||l!==f;);else eo(t,h,a,1,!1,s,e,d,y),eo(t,h,a,-1,!1,s,e,d,y),eo(t,h,a,1,!0,s,e,d,y),eo(t,h,a,-1,!0,s,e,d,y);Vt(i)}}}}function ck(t,e,i,n,r,s,l){for(var h=t.Yb,a=e,f=i;;){if(a===r&&f===s)return!0;var p=a,d=f;if(n===0)if(p<r)p++;else break;else if(n===90)if(d<s)d++;else break;else if(n===180)if(p>r)p--;else break;else if(d>s)d--;else break;var y=h[p][d];if(y===0||y===Lv)break;a=p,f=d}for(;;){if(p=n,d=a,y=f,n===0?y<s?(p=90,y++):y>s&&(p=270,y--):n===90?d<r?(p=0,d++):d>r&&(p=180,d--):n===180?y<s?(p=90,y++):y>s&&(p=270,y--):d<r?(p=0,d++):d>r&&(p=180,d--),d=h[d][y],p!==n&&d!==0&&d!==Lv){if(l.push(a),l.push(f),ck(t,a,f,p,r,s,l))return!0;l.pop(),l.pop()}if(h[a][f]=Lv,n===0){if(a===e)return!1;a--}else if(n===90){if(f===i)return!1;f--}else if(n===180){if(a===e)return!1;a++}else{if(f===i)return!1;f++}}}z.Object.defineProperties(Bf.prototype,{bounds:{get:function(){return new V(this.Fd,this.Gd,this.Bn-this.Fd,this.Cn-this.Gd)}},Eo:{get:function(){return this.oc},set:function(t){0<t&&t!==this.oc&&(this.oc=t,this.initialize(this.bounds))}},Do:{get:function(){return this.pc},set:function(t){0<t&&t!==this.pc&&(this.pc=t,this.initialize(this.bounds))}}});var ns=0,kl=1,Xh=999999,Tv=Xh+1,Lv=Xh+2;Bf.className="PositionArray";function Nu(){Oe(this),this.port=this.node=null,this.me=[],this.Wo=!1}Nu.prototype.toString=function(){for(var t=this.me,e=this.node.toString()+" "+t.length.toString()+":",i=0;i<t.length;i++){var n=t[i];n!==null&&(e+=`
  `+n.toString())}return e};function xj(t,e,i,n){switch(e=e.offsetY,e){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(e){case 9:return 180<i?270:90;case 6:return 90<i&&270>=i?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case 3:return i>t&&i<=180+t?180:270;case 5:return i>180-t&&i<=360-t?270:0;case 12:return i>t&&i<=180+t?90:0;case 10:return i>180-t&&i<=360-t?180:90;case 7:return 90<i&&i<=180+t?180:i>180+t&&i<=360-t?270:0;case 13:return 180<i&&i<=360-t?270:i>t&&180>=i?90:0;case 14:return i>t&&i<=180-t?90:i>180-t&&270>=i?180:0;case 11:return i>180-t&&i<=180+t?180:i>180+t?270:90}return n&&e!==15&&(i-=15,0>i&&(i+=360)),i>t&&i<180-t?90:i>=180-t&&i<=180+t?180:i>180+t&&i<360-t?270:0}Nu.prototype.Nl=function(){this.me.length=0};function pk(t,e){var i=t.me;if(i.length===0){t:if(!t.Wo){i=t.Wo,t.Wo=!0;var n=null,r=t.node,s=r instanceof yt?r:null;if(s===null||s.isSubGraphExpanded)var l=r.isTreeExpanded?r.findLinksConnected(t.port.portId):r.nx();else{if(!s.actualBounds.w()){t.Wo=i;break t}n=s,l=n.Hu()}s=t.me.length=0;var h=t.port.ja(ei,P.alloc()),a=t.port.ja(Xr,P.alloc());for(r=V.allocAt(h.x,h.y,0,0),r.Ve(a),P.free(h),P.free(a),h=P.allocAt(r.x+r.width/2,r.y+r.height/2),a=t.port.ii(),l=l.iterator;l.next();){var f=l.value;if(f.isVisible()&&f.fromPort!==f.toPort){var p=f.fromPort===t.port||f.fromNode!==null&&f.fromNode.Nd(n),d=f.computeSpot(p,t.port);if(d.Vc()&&(p=p?f.toPort:f.fromPort,p!==null)){var y=p.part;if(y!==null){var x=y.findVisibleNode();x!==null&&x!==y&&(y=x,p=y.port),p=f.computeOtherPoint(y,p),y=h.ab(p),y-=a,0>y?y+=360:360<=y&&(y-=360),d=xj(r,d,y,f.isOrthogonal),d===0?(d=4,180<y&&(y-=360)):d===90?(d=8,270<y&&(y-=360)):d===180?d=2:(d=1,90>y&&(y+=360)),x=t.me[s],x===void 0?(x=new jv(f,y,d),t.me[s]=x):(x.link=f,x.angle=y,x.Kc=d),x.fv.set(p),s++}}}}for(P.free(h),t.me.sort(Nu.prototype.j),a=t.me.length,n=-1,s=h=0;s<a;s++)l=t.me[s],l!==void 0&&(l.Kc!==n&&(n=l.Kc,h=0),l.Po=h,h++);for(n=-1,h=0,s=a-1;0<=s;s--)a=t.me[s],a!==void 0&&(a.Kc!==n&&(n=a.Kc,h=a.Po+1),a.Cl=h);if(s=t.me,d=t.port,n=t.node.portSpreading,h=P.alloc(),a=P.alloc(),l=P.alloc(),f=P.alloc(),d.ja(ei,h),d.ja(nh,a),d.ja(Xr,l),d.ja(rh,f),x=y=p=d=0,n===vv)for(var v=0;v<s.length;v++){var S=s[v];if(S!==null){var N=S.link.computeThickness();switch(S.Kc){case 8:y+=N;break;case 2:x+=N;break;case 1:d+=N;break;default:case 4:p+=N}}}var k=v=0,C=1,T=S=0;for(N=0;N<s.length;N++){var L=s[N];if(L!==null){if(v!==L.Kc){switch(v=L.Kc,v){case 8:var E=l;k=f;break;case 2:E=f,k=h;break;case 1:E=h,k=a;break;default:case 4:E=a,k=l}switch(S=k.x-E.x,T=k.y-E.y,v){case 8:y>Math.abs(S)?(C=Math.abs(S)/y,y=Math.abs(S)):C=1;break;case 2:x>Math.abs(T)?(C=Math.abs(T)/x,x=Math.abs(T)):C=1;break;case 1:d>Math.abs(S)?(C=Math.abs(S)/d,d=Math.abs(S)):C=1;break;default:case 4:p>Math.abs(T)?(C=Math.abs(T)/p,p=Math.abs(T)):C=1}k=0}var I=L.Uo;if(n===vv){switch(L=L.link.computeThickness(),L*=C,I.set(E),v){case 8:I.x=E.x+S/2+y/2-k-L/2;break;case 2:I.y=E.y+T/2+x/2-k-L/2;break;case 1:I.x=E.x+S/2-d/2+k+L/2;break;default:case 4:I.y=E.y+T/2-p/2+k+L/2}k+=L}else{var Z=.5;n===Nd&&(Z=(L.Po+1)/(L.Cl+1)),I.x=E.x+S*Z,I.y=E.y+T*Z}}}for(P.free(h),P.free(a),P.free(l),P.free(f),E=t.me,s=0;s<E.length;s++)n=E[s],n!==null&&(n.Fu=t.computeEndSegmentLength(n));t.Wo=i,V.free(r)}i=t.me}for(t=0;t<i.length;t++)if(r=i[t],r!==null&&r.link===e)return r;return null}Nu.prototype.j=function(t,e){return t===e?0:t===null?-1:e===null?1:t.Kc<e.Kc?-1:t.Kc>e.Kc?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},Nu.prototype.computeEndSegmentLength=function(t){var e=t.link,i=e.computeEndSegmentLength(this.node,this.port,$e,e.fromPort===this.port),n=t.Po;if(0>n)return i;var r=t.Cl;if(1>=r||!e.isOrthogonal)return i;e=t.fv;var s=t.Uo;return(t.Kc===2||t.Kc===8)&&(n=r-1-n),((t=t.Kc===2||t.Kc===4)?e.y<s.y:e.x<s.x)?i+8*n:(t?e.y===s.y:e.x===s.x)?i:i+8*(r-1-n)},Nu.className="Knot";function jv(t,e,i){this.link=t,this.angle=e,this.Kc=i,this.fv=new P,this.Cl=this.Po=0,this.Uo=new P,this.Fu=0}jv.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.Kc.toString()+":"+this.Po.toString()+"/"+this.Cl.toString()+" "+this.Uo.toString()+" "+this.Fu.toString()+" "+this.fv.toString()},jv.className="LinkInfo";function Jt(t){Oe(this),this.m=this.H=null,this.Dh=this.pn=!0,this.vn=!1,this.xm=new P(0,0).freeze(),this.sn=!0,this.Bm=this.rn=null,this.un=!1,this.j=null,t&&Object.assign(this,t)}Jt.prototype.cloneProtected=function(t){t.pn=this.pn,t.Dh=this.Dh,t.vn=this.vn,t.xm.assign(this.xm),t.sn=this.sn,t.rn=this.rn,t.Bm=this.Bm,t.un=!0},Jt.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Jt.prototype.rb=function(){},Jt.prototype.toString=function(){var t=Ms(this.constructor);return t+="(",this.group!==null&&(t+=" in "+this.group),this.diagram!==null&&(t+=" for "+this.diagram),t+")"},Jt.prototype.D=function(){if(this.isValidLayout){var t=this.diagram;if(t!==null&&!t.undoManager.isUndoingRedoing){var e=t.animationManager;!e.isTicking&&(e.defaultAnimation.isAnimating&&e.zc(),this.isOngoing&&t.mi||this.isInitial&&!t.mi)&&(this.isValidLayout=!1,t.Wb())}}},Jt.prototype.createNetwork=function(){return new Xt(this)},Jt.prototype.makeNetwork=function(t){var e=this.createNetwork();return t instanceof D?(e.ig(t.nodes,!0),e.ig(t.links,!0)):t instanceof yt?e.ig(t.memberParts):e.ig(t.iterator),e},Jt.prototype.updateParts=function(){this.isValidLayout=!0;var t=this.diagram;if(t===null&&this.network!==null)for(var e=this.network.vertexes.iterator;e.next();){var i=e.value.node;if(i!==null&&(t=i.diagram,t!==null))break}try{t!==null&&t.Ea("Layout"),this.commitLayout()}finally{t!==null&&t.eb("Layout")}},Jt.prototype.commitLayout=function(){if(this.network!==null){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();if(this.isRouting)for(t=this.network.edges.iterator;t.next();)t.value.commit()}},Jt.prototype.doLayout=function(t){var e=new q;t instanceof D?(Fs(this,e,t.nodes,!0,this.nh,!0,!1,!0),Fs(this,e,t.parts,!0,this.nh,!0,!1,!0)):t instanceof yt?Fs(this,e,t.memberParts,!1,this.nh,!0,!1,!0):e.addAll(t.iterator),0<e.count&&(t=this.diagram,t!==null&&t.Ea("Layout"),this.doMinimalNoNetworkLayout(e),t!==null&&t.eb("Layout")),this.isValidLayout=!0},Jt.prototype.doMinimalNoNetworkLayout=function(t){var e=Math.ceil(Math.sqrt(t.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var i=this.arrangementOrigin.x,n=i,r=this.arrangementOrigin.y,s=0,l=0;for(t=t.iterator;t.next();){var h=t.value;zf(h);var a=h.measuredBounds,f=a.width;a=a.height,h.moveTo(n,r),h instanceof yt&&(h.nh=!1),n+=Math.max(f,50)+20,l=Math.max(l,Math.max(a,50)),s>=e-1?(s=0,n=i,r+=l+20,l=0):s++}},Jt.prototype.doMinimalNetworkLayout=function(){var t=Math.ceil(Math.sqrt(this.network.vertexes.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);for(var e=this.arrangementOrigin.x,i=e,n=this.arrangementOrigin.y,r=0,s=0,l=this.network.vertexes.iterator;l.next();){var h=l.value.node;if(!(h===null||h instanceof X)&&(zf(h),this.nh(h))){var a=h.measuredBounds,f=a.width;a=a.height,h.moveTo(i,n),h instanceof yt&&(h.nh=!1),i+=Math.max(f,50)+20,s=Math.max(s,Math.max(a,50)),r>=t-1?(r=0,i=e,n+=s+20,s=0):r++}}},Jt.prototype.nh=function(t){return!!(!t.location.w()||t instanceof yt&&t.nh)};function Fs(t,e,i,n,r,s,l,h){for(i=i.iterator;i.next();){var a=i.value;n&&!a.isTopLevel||r!==null&&!r(a)||!a.canLayout()||(s&&a instanceof b?a.isLinkLabel||(a instanceof yt&&a.layout===null?Fs(t,e,a.memberParts,!1,r,s,l,h):(zf(a),e.add(a))):l&&a instanceof X?e.add(a):!h||!a.Uc()||a instanceof b||(zf(a),e.add(a)))}}function zf(t){var e=t.actualBounds;(e.width===0||e.height===0||isNaN(e.width)||isNaN(e.height))&&t.Va()}Jt.prototype.ki=function(t,e){var i=this.boundsComputation;return i!==null?(e||(e=new V),i(t,this,e)):e?(e.set(t.actualBounds),e):t.actualBounds},Jt.prototype.ax=function(t){var e=new q;return t instanceof D?(Fs(this,e,t.nodes,!0,null,!0,!0,!0),Fs(this,e,t.links,!0,null,!0,!0,!0),Fs(this,e,t.parts,!0,null,!0,!0,!0)):t instanceof yt?Fs(this,e,t.memberParts,!1,null,!0,!0,!0):Fs(this,e,t.iterator,!1,null,!0,!0,!0),e},Jt.prototype.initialOrigin=function(t){var e=this.group;if(e!==null){var i=e.position.copy();return(isNaN(i.x)||isNaN(i.y))&&i.set(t),e=e.placeholder,e!==null&&(i=e.ja(ei),(isNaN(i.x)||isNaN(i.y))&&i.set(t),t=e.padding,i.x+=t.left,i.y+=t.top),i}return t},z.Object.defineProperties(Jt.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},group:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t,t!==null&&(this.H=t.diagram))}},isOngoing:{get:function(){return this.pn},set:function(t){this.pn!==t&&(this.pn=t)}},isInitial:{get:function(){return this.Dh},set:function(t){this.Dh=t,t||(this.un=!0)}},isViewportSized:{get:function(){return this.vn},set:function(t){this.vn!==t&&(this.vn=t)&&this.D()}},isRouting:{get:function(){return this.sn},set:function(t){this.sn!==t&&(this.sn=t)}},isRealtime:{get:function(){return this.rn},set:function(t){this.rn!==t&&(this.rn=t)}},isValidLayout:{get:function(){return this.un},set:function(t){this.un!==t&&(this.un=t,t||(t=this.diagram,t!==null&&(t.th=!0)))}},network:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,t!==null&&(t.layout=this))}},boundsComputation:{get:function(){return this.Bm},set:function(t){this.Bm!==t&&(this.Bm=t,this.D())}},arrangementOrigin:{get:function(){return this.xm},set:function(t){this.xm.C(t)||(this.xm.assign(t),this.D())}}}),Jt.prototype.collectParts=Jt.prototype.ax,Jt.prototype.getLayoutBounds=Jt.prototype.ki,Jt.prototype.invalidateLayout=Jt.prototype.D,Jt.className="Layout";function Xt(t){Oe(this),this.Oc=t,this.uf=new q,this.ve=new q,this.zs=new vt,this.us=new vt}Xt.prototype.clear=function(){if(this.uf)for(var t=this.uf.iterator;t.next();)t.value.clear();if(this.ve)for(t=this.ve.iterator;t.next();)t.value.clear();this.uf=new q,this.ve=new q,this.zs=new vt,this.us=new vt},Xt.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutNetwork"+(this.layout!==null?"("+this.layout.toString()+")":"");if(0>=t)return e;if(e+=" vertexes: "+this.uf.count+" edges: "+this.ve.count,1<t){for(var i=this.uf.iterator;i.next();)e+=`
    `+i.value.toString(t-1);for(i=this.ve.iterator;i.next();)e+=`
    `+i.value.toString(t-1)}return e},Xt.prototype.createVertex=function(){return new we(this)},Xt.prototype.createEdge=function(){return new Wi(this)},Xt.prototype.ig=function(t,e,i){if(t!==null){for(e===void 0&&(e=!1),i===void 0&&(i=null),i===null&&(i=function(l){if(l instanceof b)return!l.isLinkLabel;if(l instanceof X){var h=l.fromNode;return h===null||h.isLinkLabel?!1:(l=l.toNode,!(l===null||l.isLinkLabel))}return!1}),t=t.iterator;t.next();){var n=t.value;if(n instanceof b&&(!e||n.isTopLevel)&&n.canLayout()&&i(n)){if(n instanceof yt&&n.layout===null)this.ig(n.memberParts,!1);else if(this.hi(n)===null){var r=this.createVertex();r.node=n,this.Zg(r)}}}for(t.reset();t.next();)if(n=t.value,n instanceof X&&(!e||n.isTopLevel)&&n.canLayout()&&i(n)&&this.Io(n)===null){var s=n.fromNode;r=n.toNode,s!==null&&r!==null&&s!==r&&(s=this.findGroupVertex(s),r=this.findGroupVertex(r),s!==null&&r!==null&&this.Wj(s,r,n))}}},Xt.prototype.findGroupVertex=function(t){if(t===null)return null;var e=t.findVisibleNode();if(e===null)return null;if(t=this.hi(e),t!==null)return t;for(e=e.containingGroup;e!==null;){if(t=this.hi(e),t!==null)return t;e=e.containingGroup}return null},o=Xt.prototype,o.Zg=function(t){if(t!==null){this.uf.add(t);var e=t.node;e!==null&&this.zs.add(e,t),t.network=this}},o.xl=function(t){if(t===null)return null;var e=this.hi(t);return e===null&&(e=this.createVertex(),e.node=t,this.Zg(e)),e},o.Eu=function(t){if(t!==null&&dk(this,t)){for(var e=t.qg,i=e.count-1;0<=i;i--){var n=e.L(i);this.Kj(n)}for(e=t.jg,t=e.count-1;0<=t;t--)i=e.L(t),this.Kj(i)}};function dk(t,e){if(e===null)return!1;var i=t.uf.remove(e);return i&&(e=e.node,e!==null&&t.zs.remove(e)),i}o.Uy=function(t){t!==null&&(t=this.hi(t),t!==null&&this.Eu(t))},o.hi=function(t){return t===null?null:this.zs.I(t)},o.yo=function(t){if(t!==null){Ev(this,t);var e=t.toVertex;e!==null&&e.yl(t),e=t.fromVertex,e!==null&&e.vl(t)}};function Ev(t,e){if(e!==null){t.ve.add(e);var i=e.link;i!==null&&t.Io(i)===null&&t.us.add(i,e),e.network=t}}o.By=function(t){if(t===null)return null;var e=t.fromNode,i=t.toNode,n=this.Io(t);return n===null?(n=this.createEdge(),n.link=t,e!==null&&(n.fromVertex=this.xl(e)),i!==null&&(n.toVertex=this.xl(i)),this.yo(n)):(e!==null?n.fromVertex=this.xl(e):n.fromVertex=null,i!==null?n.toVertex=this.xl(i):n.toVertex=null),n},o.Kj=function(t){if(t!==null){var e=t.toVertex;e!==null&&e.Fl(t),e=t.fromVertex,e!==null&&e.El(t),Fv(this,t)}};function Fv(t,e){e!==null&&t.ve.remove(e)&&(e=e.link,e!==null&&t.us.remove(e))}o.Ty=function(t){t!==null&&(t=this.Io(t),t!==null&&this.Kj(t))},o.Io=function(t){return t===null?null:this.us.I(t)},o.Wj=function(t,e,i){if(t===null||e===null)return null;if(t.network===this&&e.network===this){var n=this.createEdge();return n.link=i,n.fromVertex=t,n.toVertex=e,this.yo(n),n}return null},o.dm=function(t){if(t!==null){var e=t.fromVertex,i=t.toVertex;e!==null&&i!==null&&(e.El(t),i.Fl(t),t.dm(),e.yl(t),i.vl(t))}},o.Ho=function(){for(var t=Yt(),e=this.ve.iterator;e.next();){var i=e.value;i.fromVertex===i.toVertex&&t.push(i)}for(e=t.length,i=0;i<e;i++)this.Kj(t[i]);Vt(t)},Xt.prototype.deleteArtificialVertexes=function(){for(var t=Yt(),e=this.uf.iterator;e.next();){var i=e.value;i.node===null&&i.data===null&&t.push(i)}for(i=t.length,e=0;e<i;e++)this.Eu(t[e]);for(e=Yt(),i=this.ve.iterator;i.next();){var n=i.value;n.link===null&&n.data===null&&e.push(n)}for(i=e.length,n=0;n<i;n++)this.Kj(e[n]);Vt(t),Vt(e)};function wj(t){for(var e=Yt(),i=t.ve.iterator;i.next();){var n=i.value;n.fromVertex!==null&&n.toVertex!==null||e.push(n)}for(i=e.length,n=0;n<i;n++)t.Kj(e[n]);Vt(e)}Xt.prototype.Yx=function(t){t===void 0&&(t=!0),t&&(this.deleteArtificialVertexes(),wj(this),this.Ho()),t=new tt;for(var e=!0;e;){e=!1;for(var i=this.uf.iterator;i.next();){var n=i.value;if(0<n.qg.count||0<n.jg.count){e=this.layout.createNetwork(),t.add(e),Ov(this,e,n),e=!0;break}}}return t.sort(function(r,s){return r===null||s===null||r===s?0:s.vertexes.count-r.vertexes.count}),t};function Ov(t,e,i){if(i!==null&&i.network!==e){dk(t,i),e.Zg(i);for(var n=i.sourceEdges;n.next();){var r=n.value;r.network!==e&&(Fv(t,r),Ev(e,r),Ov(t,e,r.fromVertex))}for(n=i.destinationEdges;n.next();)i=n.value,i.network!==e&&(Fv(t,i),Ev(e,i),Ov(t,e,i.toVertex))}}Xt.prototype.Zy=function(){for(var t=new q,e=this.uf.iterator;e.next();)t.add(e.value.node);for(e=this.ve.iterator;e.next();)t.add(e.value.link);return t},z.Object.defineProperties(Xt.prototype,{layout:{get:function(){return this.Oc},set:function(t){t!==null&&(this.Oc=t)}},vertexes:{get:function(){return this.uf}},edges:{get:function(){return this.ve}}}),Xt.prototype.findAllParts=Xt.prototype.Zy,Xt.prototype.splitIntoSubNetworks=Xt.prototype.Yx,Xt.prototype.deleteSelfEdges=Xt.prototype.Ho,Xt.prototype.reverseEdge=Xt.prototype.dm,Xt.prototype.linkVertexes=Xt.prototype.Wj,Xt.prototype.findEdge=Xt.prototype.Io,Xt.prototype.deleteLink=Xt.prototype.Ty,Xt.prototype.deleteEdge=Xt.prototype.Kj,Xt.prototype.addLink=Xt.prototype.By,Xt.prototype.addEdge=Xt.prototype.yo,Xt.prototype.findVertex=Xt.prototype.hi,Xt.prototype.deleteNode=Xt.prototype.Uy,Xt.prototype.deleteVertex=Xt.prototype.Eu,Xt.prototype.addNode=Xt.prototype.xl,Xt.prototype.addVertex=Xt.prototype.Zg,Xt.prototype.addParts=Xt.prototype.ig,Xt.className="LayoutNetwork";function we(t){Oe(this),this.pb=t,this.j=new V(0,0,10,10).freeze(),this.m=new P(5,5).freeze(),this.Ph=this.ub=null,this.qg=new tt,this.jg=new tt}we.prototype.clear=function(){this.Ph=this.ub=null,this.qg=new tt,this.jg=new tt},we.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutVertex#"+Ei(this);if(0<t&&(e+=this.node!==null?"("+this.node.toString()+")":"",1<t)){t="";for(var i=!0,n=this.qg.iterator;n.next();){var r=n.value;i?i=!1:t+=",",t+=r.toString(0)}for(r="",i=!0,n=this.jg.iterator;n.next();){var s=n.value;i?i=!1:r+=",",r+=s.toString(0)}e+=" sources: "+t+" destinations: "+r}return e},we.prototype.commit=function(){var t=this.ub;if(t!==null){var e=this.bounds,i=t.bounds;xt(i)?(i.x=e.x,i.y=e.y,i.width=e.width,i.height=e.height):t.bounds=e.copy()}else if(t=this.node,t!==null){if(e=this.bounds,!(t instanceof yt)){i=V.alloc(),t.Va();var n=this.network.layout.ki(t,i),r=t.locationObject.ja(Ut);if(n.w()&&r.w()){t.moveTo(e.x+this.focusX-(r.x-n.x),e.y+this.focusY-(r.y-n.y)),V.free(i);return}V.free(i)}t.moveTo(e.x,e.y)}},we.prototype.yl=function(t){t!==null&&(this.qg.contains(t)||this.qg.add(t))},we.prototype.Fl=function(t){t!==null&&this.qg.remove(t)},we.prototype.vl=function(t){t!==null&&(this.jg.contains(t)||this.jg.add(t))},we.prototype.El=function(t){t!==null&&this.jg.remove(t)};function Av(t,e){return t=t.Ph,e=e.Ph,t?e?(t=t.text,e=e.text,t<e?-1:t>e?1:0):1:e!==null?-1:0}z.Object.defineProperties(we.prototype,{sourceEdgesArrayAccess:{get:function(){return this.qg._dataArray}},destinationEdgesArrayAccess:{get:function(){return this.jg._dataArray}},data:{get:function(){return this.ub},set:function(t){if(this.ub=t,t!==null&&t.bounds){var e=t.bounds;t=e.x;var i=e.y,n=e.width;e=e.height,this.m.h(n/2,e/2),this.j.h(t,i,n,e)}}},node:{get:function(){return this.Ph},set:function(t){if(this.Ph!==t){this.Ph=t,t.Va();var e=this.network.layout,i=V.alloc(),n=e.ki(t,i);e=n.x;var r=n.y,s=n.width;if(n=n.height,isNaN(e)&&(e=0),isNaN(r)&&(r=0),this.j.h(e,r,s,n),V.free(i),!(t instanceof yt)&&(t=t.locationObject.ja(Ut),t.w())){this.m.h(t.x-e,t.y-r);return}this.m.h(s/2,n/2)}}},bounds:{get:function(){return this.j},set:function(t){this.j.C(t)||this.j.assign(t)}},focus:{get:function(){return this.m},set:function(t){this.m.C(t)||this.m.assign(t)}},centerX:{get:function(){return this.j.x+this.m.x},set:function(t){var e=this.j;e.x+this.m.x!==t&&(e.ka(),e.x=t-this.m.x,e.freeze())}},centerY:{get:function(){return this.j.y+this.m.y},set:function(t){var e=this.j;e.y+this.m.y!==t&&(e.ka(),e.y=t-this.m.y,e.freeze())}},focusX:{get:function(){return this.m.x},set:function(t){var e=this.m;e.x!==t&&(e.ka(),e.x=t,e.freeze())}},focusY:{get:function(){return this.m.y},set:function(t){var e=this.m;e.y!==t&&(e.ka(),e.y=t,e.freeze())}},x:{get:function(){return this.j.x},set:function(t){var e=this.j;e.x!==t&&(e.ka(),e.x=t,e.freeze())}},y:{get:function(){return this.j.y},set:function(t){var e=this.j;e.y!==t&&(e.ka(),e.y=t,e.freeze())}},width:{get:function(){return this.j.width},set:function(t){var e=this.j;e.width!==t&&(e.ka(),e.width=t,e.freeze())}},height:{get:function(){return this.j.height},set:function(t){var e=this.j;e.height!==t&&(e.ka(),e.height=t,e.freeze())}},network:{get:function(){return this.pb},set:function(t){this.pb=t}},sourceVertexes:{get:function(){for(var t=new q,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);return t.iterator}},destinationVertexes:{get:function(){for(var t=new q,e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},vertexes:{get:function(){for(var t=new q,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);for(e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},sourceEdges:{get:function(){return this.qg.iterator}},destinationEdges:{get:function(){return this.jg.iterator}},edges:{get:function(){for(var t=new tt,e=this.sourceEdges;e.next();)t.add(e.value);for(e=this.destinationEdges;e.next();)t.add(e.value);return t.iterator}},edgesCount:{get:function(){return this.qg.count+this.jg.count}}}),we.prototype.deleteDestinationEdge=we.prototype.El,we.prototype.addDestinationEdge=we.prototype.vl,we.prototype.deleteSourceEdge=we.prototype.Fl,we.prototype.addSourceEdge=we.prototype.yl,we.className="LayoutVertex",we.standardComparer=Av,we.smartComparer=function(t,e){if(t!==null){if(e!==null){t=t.Ph;var i=e.Ph;if(t!==null){if(i!==null){for(e=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),t=i.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),i=0;i<e.length;i++)if(t[i]!==""&&t[i]!==void 0){var n=parseFloat(e[i]),r=parseFloat(t[i]);if(isNaN(n))if(isNaN(r)){if(e[i].localeCompare(t[i])!==0)return e[i].localeCompare(t[i])}else return 1;else{if(isNaN(r))return-1;if(n-r!==0)return n-r}}else if(e[i]!=="")return 1;return t[i]!==""&&t[i]!==void 0?-1:0}return 1}return i!==null?-1:0}return 1}return e!==null?-1:0};function Wi(t){Oe(this),this.ob=t,this.jd=this.cd=this.Wk=this.ub=null}Wi.prototype.clear=function(){this.jd=this.cd=this.Wk=this.ub=null},Wi.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutEdge#"+Ei(this);return 0<t&&(e+=this.Wk!==null?"("+this.Wk.toString()+")":"",1<t&&(e+=" "+(this.cd?this.cd.toString():"null")+" --> "+(this.jd?this.jd.toString():"null"))),e},Wi.prototype.dm=function(){var t=this.cd;this.cd=this.jd,this.jd=t},Wi.prototype.commit=function(){},Wi.prototype.xx=function(t){return this.jd===t?this.cd:this.cd===t?this.jd:null},z.Object.defineProperties(Wi.prototype,{network:{get:function(){return this.ob},set:function(t){this.ob=t}},data:{get:function(){return this.ub},set:function(t){this.ub!==t&&(this.ub=t)}},link:{get:function(){return this.Wk},set:function(t){this.Wk!==t&&(this.Wk=t)}},fromVertex:{get:function(){return this.cd},set:function(t){this.cd!==t&&(this.cd=t)}},toVertex:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t)}}}),Wi.prototype.getOtherVertex=Wi.prototype.xx,Wi.className="LayoutEdge";function Re(t){Jt.call(this),this.isViewportSized=!0,this.vo=this.wo=NaN,this.vg=new pt(NaN,NaN).freeze(),this.rf=new pt(10,10).freeze(),this.Hb=Vf,this.Mb=zd,this.fd=Uf,this.ad=gk,t&&Object.assign(this,t)}B(Re,Jt),Re.prototype.cloneProtected=function(t){Jt.prototype.cloneProtected.call(this,t),t.wo=this.wo,t.vo=this.vo,t.vg.assign(this.vg),t.rf.assign(this.rf),t.Hb=this.Hb,t.Mb=this.Mb,t.fd=this.fd,t.ad=this.ad},Re.prototype.rb=function(t){t.classType===Re?t===Uf||t===Ud||t===Iv||t===Vd?this.sorting=t:t===zd||t===gr?this.arrangement=t:t===Vf||t===Bd?this.alignment=t:R("Unknown enum value: "+t):Jt.prototype.rb.call(this,t)},Re.prototype.doLayout=function(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var e=this.ax(t);t=this.diagram;for(var i=e.copy().iterator;i.next();){var n=i.value;if(!n.lh()||n.fromNode===null&&n.toNode===null){if(n.Va(),n instanceof yt)for(n=n.memberParts;n.next();)e.remove(n.value)}else e.remove(n)}var r=e.Fa();if(r.length!==0){switch(this.sorting){case Vd:r.reverse();break;case Uf:r.sort(this.comparer);break;case Ud:r.sort(this.comparer),r.reverse()}var s=this.wrappingColumn;isNaN(s)&&(s=0);var l=this.wrappingWidth;switch(isNaN(l)&&t!==null?(e=t.padding,l=Math.max(t.viewportBounds.width-e.left-e.right,0)):l=Math.max(this.wrappingWidth,0),0>=s&&0>=l&&(s=1),e=this.spacing.width,isFinite(e)||(e=0),i=this.spacing.height,isFinite(i)||(i=0),t!==null&&t.Ea("Layout"),n=[],this.alignment){case Bd:var h=e,a=i,f=V.alloc(),p=Math.max(this.cellSize.width,1);if(!isFinite(p))for(var d=p=0;d<r.length;d++){var y=this.ki(r[d],f);p=Math.max(p,y.width)}if(p=Math.max(p+h,1),d=Math.max(this.cellSize.height,1),!isFinite(d))for(y=d=0;y<r.length;y++){var x=this.ki(r[y],f);d=Math.max(d,x.height)}d=Math.max(d+a,1),y=this.arrangement;for(var v=x=this.arrangementOrigin.x,S=this.arrangementOrigin.y,N=0,k=0,C=0;C<r.length;C++){var T=r[C],L=this.ki(T,f),E=Math.ceil((L.width+h)/p)*p,I=Math.ceil((L.height+a)/d)*d;switch(y){case gr:var Z=Math.abs(v-L.width);break;default:Z=v+L.width}switch((0<s&&N>s-1||0<l&&0<N&&Z-x>l)&&(n.push(new V(0,S,l+h,k)),N=0,v=x,S+=k,k=0),k=Math.max(k,I),y){case gr:L=-L.width;break;default:L=0}switch(T.moveTo(v+L,S),y){case gr:v-=E;break;default:v+=E}N++}n.push(new V(0,S,l+h,k)),V.free(f);break;case Vf:for(a=l,p=s,d=e,y=i,l=V.alloc(),x=Math.max(this.cellSize.width,1),s=S=f=0,h=P.alloc(),v=0;v<r.length;v++)k=r[v],N=this.ki(k,l),k=bo(k,k.locationObject,k.locationSpot,h),f=Math.max(f,k.x),S=Math.max(S,N.width-k.x),s=Math.max(s,k.y);switch(v=this.arrangement,v){case gr:f+=d;break;default:S+=d}x=isFinite(x)?Math.max(x+d,1):Math.max(f+S,1);var it=k=this.arrangementOrigin.x;for(C=this.arrangementOrigin.y,S=0,a>=f&&(a-=f),f=T=0,E=Math.max(this.cellSize.height,1),L=s=0,I=!0,N=P.alloc(),Z=0;Z<r.length;Z++){var et=r[Z],G=this.ki(et,l),U=bo(et,et.locationObject,et.locationSpot,h);if(0<S)switch(v){case gr:it=(it-k-(G.width-U.x))/x,it=F.$(Math.round(it),it)?Math.round(it):Math.floor(it),it=it*x+k;break;default:it=(it-k+U.x)/x,it=F.$(Math.round(it),it)?Math.round(it):Math.ceil(it),it=it*x+k}else switch(v){case gr:T=it+U.x+G.width;break;default:T=it-U.x}switch(v){case gr:var gt=-(it+U.x)+T;break;default:gt=it+G.width-U.x-T}if(0<p&&S>p-1||0<a&&0<S&&gt>a){for(n.push(new V(0,I?C-s:C,a+d,L+s+y)),it=0;it<S&&Z!==S;it++){gt=r[Z-S+it];var ct=bo(gt,gt.locationObject,gt.locationSpot,N);gt.moveTo(gt.position.x,gt.position.y+s-ct.y)}L+=y,C=I?C+L:C+(L+s),S=L=s=0,it=k,I=!1}switch(it===k&&(f=v===gr?Math.max(f,G.width-U.x):Math.min(f,-U.x)),s=Math.max(s,U.y),L=Math.max(L,G.height-U.y),isFinite(E)&&(L=Math.max(L,Math.max(G.height,E)-U.y)),I?et.moveTo(it-U.x,C-U.y):et.moveTo(it-U.x,C),v){case gr:it-=U.x+d;break;default:it+=G.width-U.x+d}S++}if(n.push(new V(0,C,a+d,(I?L:L+s)+y)),r.length!==S)for(a=0;a<S;a++)p=r[r.length-S+a],d=bo(p,p.locationObject,p.locationSpot,h),p.moveTo(p.position.x,p.position.y+s-d.y);if(P.free(h),P.free(N),v===gr)for(r=0;r<n.length;r++)s=n[r],s.width+=f,s.x-=f;else for(r=0;r<n.length;r++)s=n[r],s.x>f&&(s.width+=s.x-f,s.x=f);V.free(l)}for(h=s=l=r=0;h<n.length;h++)a=n[h],r=Math.min(r,a.x),l=Math.min(l,a.y),s=Math.max(s,a.x+a.width);this.arrangement===gr?this.commitLayers(n,new P(r+e/2-(s+r),l-i/2)):this.commitLayers(n,new P(r-e/2,l-i/2)),t!==null&&t.eb("Layout"),this.isValidLayout=!0}},Re.prototype.commitLayers=function(){};function gk(t,e){return t=t.text,e=e.text,t<e?-1:t>e?1:0}z.Object.defineProperties(Re.prototype,{wrappingWidth:{get:function(){return this.wo},set:function(t){this.wo!==t&&(0<t||isNaN(t))&&(this.wo=t,this.isViewportSized=isNaN(t),this.D())}},wrappingColumn:{get:function(){return this.vo},set:function(t){this.vo!==t&&(0<t||isNaN(t))&&(this.vo=t,this.D())}},cellSize:{get:function(){return this.vg},set:function(t){this.vg.C(t)||(this.vg.assign(t),this.D())}},spacing:{get:function(){return this.rf},set:function(t){this.rf.C(t)||(this.rf.assign(t),this.D())}},alignment:{get:function(){return this.Hb},set:function(t){this.Hb===t||t!==Vf&&t!==Bd||(this.Hb=t,this.D())}},arrangement:{get:function(){return this.Mb},set:function(t){this.Mb===t||t!==zd&&t!==gr||(this.Mb=t,this.D())}},sorting:{get:function(){return this.fd},set:function(t){this.fd===t||t!==Iv&&t!==Vd&&t!==Uf&&t!==Ud||(this.fd=t,this.D())}},comparer:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.ad=t,this.D())}}});var Bd=new Q(Re,"Position",0),Vf=new Q(Re,"Location",1),zd=new Q(Re,"LeftToRight",2),gr=new Q(Re,"RightToLeft",3),Iv=new Q(Re,"Forward",4),Vd=new Q(Re,"Reverse",5),Uf=new Q(Re,"Ascending",6),Ud=new Q(Re,"Descending",7);Re.className="GridLayout",Re.standardComparer=gk,Re.smartComparer=function(t,e){if(t!==null){if(e!==null){t=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/);for(var i=0;i<t.length;i++)if(e[i]!==""&&e[i]!==void 0){var n=parseFloat(t[i]),r=parseFloat(e[i]);if(isNaN(n))if(isNaN(r)){if(t[i].localeCompare(e[i])!==0)return t[i].localeCompare(e[i])}else return 1;else{if(isNaN(r))return-1;if(n-r!==0)return n-r}}else if(t[i]!=="")return 1;return e[i]!==""&&e[i]!==void 0?-1:0}return 1}return e!==null?-1:0},Re.Position=Bd,Re.Location=Vf,Re.LeftToRight=zd,Re.RightToLeft=gr,Re.Forward=Iv,Re.Reverse=Vd,Re.Ascending=Uf,Re.Descending=Ud;function Bt(){this.Ln=new q,this.An=new q,this.Pa=new q,this.$e=new vt,this.Ze=new vt,this.Yi=new vt,this.H=null,this.op=!1}o=Bt.prototype,o.clear=function(){this.Ln.clear(),this.An.clear(),this.Pa.clear(),this.$e.clear(),this.Ze.clear(),this.Yi.clear()},o.Ue=function(t){this.H=t},o.li=function(t){if(t instanceof b){if(this.Ln.add(t),t instanceof yt){var e=t.containingGroup;e===null?this.H.Yh.add(t):e.cl.add(t),e=t.layout,e!==null&&(e.diagram=this.H)}}else t instanceof X?this.An.add(t):t instanceof jt||this.Pa.add(t);e=t.data,e===null||t instanceof jt||(t instanceof X?this.Ze.add(e,t):this.$e.add(e,t))},o.mc=function(t){if(t.Cj(),t instanceof b){if(this.Ln.remove(t),t instanceof yt){var e=t.containingGroup;e===null?this.H.Yh.remove(t):e.cl.remove(t),e=t.layout,e!==null&&(e.diagram=null)}}else t instanceof X?this.An.remove(t):t instanceof jt||this.Pa.remove(t);e=t.data,e===null||t instanceof jt||(t instanceof X?this.Ze.remove(e):this.$e.remove(e))},o.Sd=function(){var t=this.H;if(t!==null){for(var e=t.nodeTemplateMap.iterator;e.next();){var i=e.value,n=e.key;(!i.Uc()||i instanceof yt)&&R('Invalid node template in Diagram.nodeTemplateMap: template for "'+n+'" must be a Node or a simple Part, not a Group or Link: '+i)}for(e=t.groupTemplateMap.iterator;e.next();)i=e.value,n=e.key,i instanceof yt||R('Invalid group template in Diagram.groupTemplateMap: template for "'+n+'" must be a Group, not a normal Node or Link: '+i);for(e=t.linkTemplateMap.iterator;e.next();)i=e.value,n=e.key,i instanceof X||R('Invalid link template in Diagram.linkTemplateMap: template for "'+n+'" must be a Link, not a normal Node or simple Part: '+i);for(e=Yt(),i=t.selection.iterator;i.next();)(n=i.value.data)&&e.push(n);for(i=Yt(),t=t.highlighteds.iterator;t.next();)(n=t.value.data)&&i.push(n);for(t=Yt(),n=this.nodes.iterator;n.next();){var r=n.value;r.data!==null&&(t.push(r.data),t.push(r.location))}for(n=this.links.iterator;n.next();)r=n.value,r.data!==null&&(t.push(r.data),t.push(r.location));for(n=this.parts.iterator;n.next();)r=n.value,r.data!==null&&(t.push(r.data),t.push(r.location));for(this.removeAllModeledParts(),this.addAllModeledParts(),n=0;n<e.length;n++)r=this.Ic(e[n]),r!==null&&(r.isSelected=!0);for(n=0;n<i.length;n++)r=this.Ic(i[n]),r!==null&&(r.isHighlighted=!0);for(n=0;n<t.length;n+=2)r=this.Ic(t[n]),r!==null&&(r.location=t[n+1]);Vt(e),Vt(i),Vt(t)}},Bt.prototype.addAllModeledParts=function(){this.addModeledParts(this.diagram.model.nodeDataArray)},Bt.prototype.addModeledParts=function(t,e){var i=this,n=this.diagram.model;t.forEach(function(r){n.mb(r)&&yk(i,r,!1)}),t.forEach(function(r){n.mb(r)&&i.resolveReferencesForData(r)}),e!==!1&&Rp(this.diagram,!1)};function yk(t,e,i){if(e!=null&&!t.diagram.undoManager.isUndoingRedoing&&!t.$e.contains(e)){i===void 0&&(i=!0);t:{if(e!=null&&!t.H.undoManager.isUndoingRedoing&&!t.$e.contains(e)){var n=t.Mo(e),r=mk(t,e,n);if(r!==null&&(Dn(r),r=r.copy(),r!==null)){var s=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,r.Rf=n,r.ub=e,t.op&&(r.Fg="Tool"),t.diagram.add(r),r.ub=null,r.data=e,t.diagram.skipsModelSourceBindings=s,n=r;break t}}n=null}n!==null&&i&&t.resolveReferencesForData(e)}}Bt.prototype.insertLink=function(){return null},Bt.prototype.resolveReferencesForData=function(){},Bt.prototype.Mo=function(t){return this.H.model.Mo(t)};function mk(t,e,i){t=t.H;var n=t.model;return n.Uj()&&n.Wu(e)?(e=t.groupTemplateMap.I(i),e===null&&(e=t.groupTemplateMap.I(""),e===null&&(wk||(wk=!0,Lt('No Group template found for category "'+i+'"'),Lt("  Using default group template")),e=t.ky))):(e=t.nodeTemplateMap.I(i),e===null&&(e=t.nodeTemplateMap.I(""),e===null&&(xk||(xk=!0,Lt('No Node template found for category "'+i+'"'),Lt("  Using default node template")),e=t.my))),e}Bt.prototype.getLinkCategoryForData=function(){return""},Bt.prototype.setLinkCategoryForData=function(){},Bt.prototype.setFromNodeForLink=function(){},Bt.prototype.setToNodeForLink=function(){},Bt.prototype.findLinkTemplateForCategory=function(t){var e=this.H,i=e.linkTemplateMap.I(t);return i===null&&(i=e.linkTemplateMap.I(""),i===null&&(Sk||(Sk=!0,Lt('No Link template found for category "'+t+'"'),Lt("  Using default link template")),i=e.ly)),i},Bt.prototype.removeAllModeledParts=function(){this.Bs(this.diagram.model.nodeDataArray)},Bt.prototype.Bs=function(t){var e=this;t.forEach(function(i){e.cp(i)})},Bt.prototype.cp=function(t){t=this.Ic(t),t!==null&&(um(this.diagram,t,!1),this.unresolveReferencesForPart(t))},Bt.prototype.unresolveReferencesForPart=function(){},Bt.prototype.removeDataForLink=function(){},Bt.prototype.findPartForKey=function(t){return t==null?null:(t=this.H.model.dc(t),t!==null?this.$e.I(t):null)},Bt.prototype.Rb=function(t){return t==null||(t=this.H.model.dc(t),t===null)?null:(t=this.$e.I(t),t instanceof b?t:null)},Bt.prototype.findLinkForKey=function(){return null},o=Bt.prototype,o.Ic=function(t){if(t===null)return null;var e=this.$e.I(t);return e!==null?e:e=this.Ze.I(t)},o.fi=function(t){return t===null?null:(t=this.$e.I(t),t instanceof b?t:null)},o.Hc=function(t){return t===null?null:this.Ze.I(t)},o.gs=function(t){for(var e=0;e<arguments.length;++e);e=new q;for(var i=this.Ln.iterator;i.next();){var n=i.value,r=n.data;if(r!==null)for(var s=0;s<arguments.length;s++){var l=arguments[s];if(xt(l)&&Dv(this,r,l)){e.add(n);break}}}return e.iterator},o.fs=function(t){for(var e=0;e<arguments.length;++e);e=new q;for(var i=this.An.iterator;i.next();){var n=i.value,r=n.data;if(r!==null)for(var s=0;s<arguments.length;s++){var l=arguments[s];if(xt(l)&&Dv(this,r,l)){e.add(n);break}}}return e.iterator};function Dv(t,e,i){for(var n in i){var r=e[n],s=i[n];if(Wt(s)){if(!Wt(r)||r.length<s.length)return!1;for(var l=0;l<r.length;l++){var h=s[l];if(h!==void 0&&!vk(t,r[l],h))return!1}}else if(!vk(t,r,s))return!1}return!0}function vk(t,e,i){if(typeof i=="function"){if(!i(e))return!1}else if(i instanceof RegExp){if(!e||!i.test(e.toString()))return!1}else if(xt(e)&&xt(i)){if(!Dv(t,e,i))return!1}else if(e!==i)return!1;return!0}Bt.prototype.doModelChanged=function(t){if(this.H){var e=this.H;if(t.model===e.model){var i=t.change;if(e.doModelChanged(t),e.aa){e.aa=!1;try{var n=t.modelChange;if(n!=="")if(i===Qt){if(n==="nodeCategory"){var r=this.Ic(t.object),s=t.newValue;r!==null&&typeof s=="string"&&(r.category=s)}else n==="nodeDataArray"&&(this.Bs(t.oldValue),this.addModeledParts(t.newValue));e.isModified=!0}else if(i===Ne){var l=t.newValue;n==="nodeDataArray"&&xt(l)&&yk(this,l),e.isModified=!0}else if(i===je){var h=t.oldValue;n==="nodeDataArray"&&xt(h)&&this.cp(h),e.isModified=!0}else i===fr&&(n==="SourceChanged"?t.object!==null?this.updateDataBindings(t.object,t.propertyName):(this.mp(),this.updateAllTargetBindings()):n==="ModelDisplaced"&&this.Sd());else if(i===Qt){var a=t.propertyName,f=t.object;f===e.model?(a==="nodeKeyProperty"||a==="nodeCategoryProperty")&&(e.undoManager.isUndoingRedoing||this.Sd()):this.updateDataBindings(f,a),e.isModified=!0}else if(i===Ne||i===je){var p=t.change===Ne,d=p?t.newParam:t.oldParam,y=p?t.newValue:t.oldValue,x=this.Yi.I(t.object);if(Array.isArray(x))for(t=0;t<x.length;t++){var v=x[t];if(p)sd(v,y,d,!0);else if(!(0>d)){var S=d+Sf(v);v.mc(S,!0),$m(v,S,d)}}e.isModified=!0}}finally{e.aa=!0}}}}},Bt.prototype.updateAllTargetBindings=function(t){t===void 0&&(t="");for(var e=this.parts.iterator;e.next();)e.value.Ma(t);for(e=this.nodes.iterator;e.next();)e.value.Ma(t);for(e=this.links.iterator;e.next();)e.value.Ma(t)},Bt.prototype.mp=function(){for(var t=this.H.model,e=new q,i=t.nodeDataArray,n=0;n<i.length;n++)e.add(i[n]);var r=[];for(this.nodes.each(function(l){l.data===null||e.contains(l.data)||r.push(l.data)}),this.parts.each(function(l){l.data===null||e.contains(l.data)||r.push(l.data)}),r.forEach(function(l){Ek(t,l,!1)}),n=0;n<i.length;n++){var s=i[n];this.Ic(s)===null&&jk(t,s,!1)}for(this.refreshDataBoundLinks(),i=this.parts.iterator;i.next();)i.value.updateRelationshipsFromData();for(i=this.nodes.iterator;i.next();)i.value.updateRelationshipsFromData();for(i=this.links.iterator;i.next();)i.value.updateRelationshipsFromData()},Bt.prototype.refreshDataBoundLinks=function(){},Bt.prototype.updateRelationshipsFromData=function(){},Bt.prototype.updateDataBindings=function(t,e){if(typeof e=="string"){var i=this.Ic(t);if(i!==null)i.Ma(e);else{i=null;for(var n=this.Yi.iterator;n.next();){for(var r=n.value,s=0;s<r.length;s++){var l=r[s].ox(t);l!==null&&(i===null&&(i=Yt()),i.push(l))}if(i!==null)break}if(i!==null){for(n=0;n<i.length;n++)i[n].Ma(e);Vt(i)}}t===this.diagram.model.modelData&&this.updateAllTargetBindings(e)}};function Rv(t,e){var i=e.Eh;if(Wt(i)){var n=t.Yi.I(i);if(n===null)n=[],n.push(e),t.Yi.add(i,n);else{for(t=0;t<n.length;t++)if(n[t]===e)return;n.push(e)}}}function Bv(t,e,i){vl(e,function(l){l=l.O.s;for(var h=l.length,a=0;a<h;a++)dm(i,l[a])});var n=e.Eh;if(Wt(n)){var r=t.Yi.I(n);if(r!==null){for(var s=0;s<r.length;s++)if(r[s]===e){r.splice(s,1),r.length===0&&t.Yi.remove(n);break}}}}Bt.prototype.Ij=function(t,e,i){i===void 0&&(i=!1);var n=new vt;if(Wt(t))for(var r=0;r<t.length;r++)Yd(this,t[r],e,n,i);else for(t=t.iterator;t.next();)Yd(this,t.value,e,n,i);if(e!==null){i=e.model,t=e.toolManager.findTool("Dragging"),t=t!==null?t.dragOptions.dragsLink:e.Tm.dragsLink,r=new q;for(var s=new vt,l=n.iterator;l.next();){var h=l.value;if(h instanceof X)t||h.fromNode!==null&&h.toNode!==null||r.add(h);else if(h instanceof b&&h.data!==null&&i.Pl()){var a=h;h=l.key;var f=h.mg();f!==null&&(f=n.I(f),f!==null?(i.ne(a.data,i.va(f.data)),a=e.Hc(a.data),h=h.gh(),h!==null&&a!==null&&s.add(h,a)):i.ne(a.data,void 0))}}if(0<r.count&&e.Ds(r,!1),0<s.count)for(i=s.iterator;i.next();)n.add(i.key,i.value)}if(e!==null&&this.H!==null&&(e=e.model,i=e.afterCopyFunction,i!==null)){var p=new vt;n.each(function(d){d.key.data!==null&&p.add(d.key.data,d.value.data)}),i(p,e,this.H.model)}for(e=n.iterator;e.next();)e.value.Ma();return n};function Yd(t,e,i,n,r){if(e===null||r&&!e.canCopy())return null;if(n.contains(e))return n.I(e);var s=t.copyPartData(e,i);if(!(s instanceof lt))return null;if(s.isSelected=!1,s.isHighlighted=!1,n.add(e,s),e instanceof b){for(var l=e.linksConnected;l.next();){var h=l.value;if(h.fromNode===e){var a=n.I(h);a!==null&&(a.fromNode=s)}h.toNode===e&&(h=n.I(h),h!==null&&(h.toNode=s))}if(e instanceof yt&&s instanceof yt)for(e=e.memberParts;e.next();)l=Yd(t,e.value,i,n,r),l instanceof X||l===null||(l.containingGroup=s)}else if(e instanceof X&&s instanceof X)for(l=e.fromNode,l!==null&&(l=n.I(l),l!==null&&(s.fromNode=l)),l=e.toNode,l!==null&&(l=n.I(l),l!==null&&(s.toNode=l)),e=e.labelNodes;e.next();)l=Yd(t,e.value,i,n,r),l!==null&&l instanceof b&&(l.labeledLink=s);return s}Bt.prototype.copyPartData=function(t,e){var i=null,n=t.data;if(n!==null&&e!==null){var r=e.model;t instanceof X||(n=r.copyNodeData(n),xt(n)&&(r.vf(n),i=e.Ic(n)))}else Dn(t),i=t.copy(),i!==null&&(r=this.H,e!==null?e.add(i):n!==null&&r!==null&&r.commandHandler!==null&&r.commandHandler.copiesClipboardData&&(e=r.model,r=null,i instanceof X||(r=e.copyNodeData(n)),xt(r)&&(i.data=r)));return i},z.Object.defineProperties(Bt.prototype,{nodes:{get:function(){return this.Ln}},links:{get:function(){return this.An}},parts:{get:function(){return this.Pa}},diagram:{get:function(){return this.H}},addsToTemporaryLayer:{get:function(){return this.op},set:function(t){this.op=t}}}),Bt.prototype.updateAllRelationshipsFromData=Bt.prototype.mp,Bt.prototype.findLinksByExample=Bt.prototype.fs,Bt.prototype.findNodesByExample=Bt.prototype.gs,Bt.prototype.findLinkForData=Bt.prototype.Hc,Bt.prototype.findNodeForData=Bt.prototype.fi,Bt.prototype.findPartForData=Bt.prototype.Ic,Bt.prototype.findNodeForKey=Bt.prototype.Rb,Bt.prototype.removeModeledPart=Bt.prototype.cp,Bt.prototype.removeModeledParts=Bt.prototype.Bs,Bt.prototype.rebuildParts=Bt.prototype.Sd;var xk=!1,wk=!1,Sk=!1;Bt.className="PartManager";function Ee(t){Bt.apply(this,arguments)}B(Ee,Bt),Ee.prototype.addAllModeledParts=function(){var t=this.diagram.model;this.addModeledParts(t.nodeDataArray),Mk(this,t.linkDataArray)},Ee.prototype.addModeledParts=function(t){for(Bt.prototype.addModeledParts.call(this,t,!1),t=this.links.iterator;t.next();)Yh(t.value);Rp(this.diagram,!1)};function Mk(t,e){e.forEach(function(i){kk(t,i)}),Rp(t.diagram,!1)}function kk(t,e){if(e!=null&&!t.diagram.undoManager.isUndoingRedoing&&!t.Ze.contains(e)){var i=t.getLinkCategoryForData(e),n=t.findLinkTemplateForCategory(i);if(n!==null){Dn(n);var r=n.copy();if(r!==null){n=t.diagram.skipsModelSourceBindings,t.diagram.skipsModelSourceBindings=!0,r.Rf=i,r.ub=e,i=t.diagram.model;var s=Xd(i,e,!0);s!==""&&(r.fromPortId=s),s=hn(i,e,!0),s!==void 0&&(s=t.Rb(s),s instanceof b&&(r.fromNode=s)),s=Xd(i,e,!1),s!==""&&(r.toPortId=s),s=hn(i,e,!1),s!==void 0&&(s=t.Rb(s),s instanceof b&&(r.toNode=s)),i=i.Cf(e),Array.isArray(i)&&i.forEach(function(l){l=t.Rb(l),l!==null&&(l.labeledLink=r)}),t.op&&(r.Fg="Tool"),t.diagram.add(r),r.ub=null,r.data=e,t.diagram.skipsModelSourceBindings=n}}}}Ee.prototype.removeAllModeledParts=function(){var t=this.diagram.model;Nk(this,t.linkDataArray),this.Bs(t.nodeDataArray)};function Nk(t,e){e.forEach(function(i){t.cp(i)})}Ee.prototype.getLinkCategoryForData=function(t){return this.diagram.model.ks(t)},Ee.prototype.setLinkCategoryForData=function(t,e){return this.diagram.model.gp(t,e)},Ee.prototype.setFromNodeForLink=function(t,e){var i=this.diagram.model;i.sv(t.data,i.va(e!==null?e.data:null))},Ee.prototype.setToNodeForLink=function(t,e){var i=this.diagram.model;i.xv(t.data,i.va(e!==null?e.data:null))},Ee.prototype.removeDataForLink=function(t){this.diagram.model.Zl(t.data)},Ee.prototype.findPartForKey=function(t){var e=Bt.prototype.findPartForKey.call(this,t);return e===null&&(t=this.diagram.model.fh(t),t!==null)?this.Ze.I(t):e},Ee.prototype.findLinkForKey=function(t){return t==null?null:(t=this.diagram.model.fh(t),t!==null?this.Ze.I(t):null)},Ee.prototype.doModelChanged=function(t){var e=this;if(Bt.prototype.doModelChanged.call(this,t),this.diagram){var i=this.diagram;if(t.model===i.model){var n=t.change;if(i.aa){i.aa=!1;try{var r=t.modelChange;if(r!==""){if(n===Qt){if(r==="linkFromKey"){var s=this.Hc(t.object);if(s!==null){var l=this.Rb(t.newValue);s.fromNode=l}}else if(r==="linkToKey"){var h=this.Hc(t.object);if(h!==null){var a=this.Rb(t.newValue);h.toNode=a}}else if(r==="linkFromPortId"){var f=this.Hc(t.object);if(f!==null){var p=t.newValue;typeof p=="string"&&(f.fromPortId=p)}}else if(r==="linkToPortId"){var d=this.Hc(t.object);if(d!==null){var y=t.newValue;typeof y=="string"&&(d.toPortId=y)}}else if(r==="nodeGroupKey"){var x=this.Ic(t.object);if(x!==null){var v=t.newValue;if(v!==void 0){var S=this.Rb(v);S instanceof yt?x.containingGroup=S:x.containingGroup=null}else x.containingGroup=null}}else if(r==="linkLabelKeys"){var N=this.Hc(t.object);if(N!==null){var k=t.oldValue,C=t.newValue;Array.isArray(k)&&k.forEach(function(U){0<=C.indexOf(U)||(U=e.Rb(U),U!==null&&(U.labeledLink=null))}),Array.isArray(C)&&C.forEach(function(U){U=e.Rb(U),U!==null&&(U.labeledLink=N)})}}else if(r==="linkCategory"){var T=this.Hc(t.object),L=t.newValue;T!==null&&typeof L=="string"&&(T.category=L)}else r==="linkDataArray"&&(Nk(this,t.oldValue),Mk(this,t.newValue));i.isModified=!0}else if(n===Ne){var E=t.newValue;if(r==="linkDataArray"&&typeof E=="object"&&E!==null)kk(this,E);else if(r==="linkLabelKeys"&&As(E)){var I=this.Hc(t.object),Z=this.Rb(E);I!==null&&Z!==null&&(Z.labeledLink=I)}i.isModified=!0}else if(n===je){var it=t.oldValue;if(r==="linkDataArray"&&typeof it=="object"&&it!==null)this.cp(it);else if(r==="linkLabelKeys"&&As(it)){var et=this.Rb(it);et!==null&&(et.labeledLink=null)}i.isModified=!0}}else if(n===Qt){var G=t.propertyName;t.object!==i.model||G!=="linkFromKeyProperty"&&G!=="linkToKeyProperty"&&G!=="linkFromPortIdProperty"&&G!=="linkToPortIdProperty"&&G!=="linkLabelKeysProperty"&&G!=="nodeIsGroupProperty"&&G!=="nodeGroupKeyProperty"&&G!=="linkCategoryProperty"||i.undoManager.isUndoingRedoing||this.Sd(),i.isModified=!0}}finally{i.aa=!0}}}}},Ee.prototype.refreshDataBoundLinks=function(){var t=this,e=this.diagram.model,i=new q,n=e.linkDataArray;n.forEach(function(s){i.add(s)});var r=[];this.links.each(function(s){s.data===null||i.contains(s.data)||r.push(s.data)}),r.forEach(function(s){Rk(e,s,!1)}),n.forEach(function(s){t.Hc(s)===null&&Dk(e,s,!1)})},Ee.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(e!==null){var i=t.diagram;if(i!==null){var n=i.model;if(t instanceof X){var r=hn(n,e,!0);if(r=i.Rb(r),t.fromNode=r,r=hn(n,e,!1),r=i.Rb(r),t.toNode=r,e=n.Cf(e),0<e.length||0<t.labelNodes.count){if(e.length===1&&t.labelNodes.count===1){r=e[0];var s=t.labelNodes.first();if(n.va(s.data)===r)return}r=new q().addAll(e);var l=new q;t.labelNodes.each(function(h){h.data!==null&&(h=n.va(h.data),h!==void 0&&l.add(h))}),e=l.copy(),e.bp(r),r=r.copy(),r.bp(l),(0<e.count||0<r.count)&&(e.each(function(h){h=i.Rb(h),h!==null&&h.labeledLink===t&&(h.labeledLink=null)}),r.each(function(h){h=i.Rb(h),h!==null&&h.labeledLink!==t&&(h.labeledLink=t)}))}}else!(t instanceof jt)&&(e=n.hh(e),e=i.findPartForKey(e),e===null||e instanceof yt)&&(t.containingGroup=e)}}},Ee.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,i=e.va(t);if(i!==void 0){var n=Yf(e,i),r=this.Ic(t);if(n!==null&&r!==null){n=n.iterator;for(var s={};n.next();){var l=n.value;e.mb(l)?r instanceof yt&&e.hh(l)===i&&(l=this.Ic(l),l!==null&&(l.containingGroup=r)):(s.link=this.Hc(l),s.link!==null&&r instanceof b&&(hn(e,l,!0)===i&&(s.link.fromNode=r),hn(e,l,!1)===i&&(s.link.toNode=r),l=e.Cf(l),Array.isArray(l)&&l.some(function(h){return function(a){return a===i?(r.labeledLink=h.link,!0):!1}}(s)))),s={link:s.link}}mr(e,i)}t=e.hh(t),t!==void 0&&(t=this.Rb(t),t instanceof yt&&(r.containingGroup=t))}},Ee.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof b){var i=e.va(t.data);if(i!==void 0){for(var n=t.linksConnected;n.next();)yr(e,i,n.value.data);if(t.isLinkLabel&&(n=t.labeledLink,n!==null&&yr(e,i,n.data)),t instanceof yt)for(t=t.memberParts;t.next();)n=t.value.data,e.mb(n)&&yr(e,i,n)}}},Ee.prototype.copyPartData=function(t,e){var i=Bt.prototype.copyPartData.call(this,t,e);if(t instanceof X)if(t=t.data,t!==null&&e!==null){var n=e.model;t=n.Go(t),typeof t=="object"&&t!==null&&(n.ci(t),i=e.Hc(t))}else i!==null&&(e=this.diagram,t!==null&&e!==null&&e.commandHandler!==null&&e.commandHandler.copiesClipboardData&&(e=e.model.Go(t),typeof e=="object"&&e!==null&&(i.data=e)));return i},Ee.prototype.insertLink=function(t,e,i,n){var r=this.diagram,s=r.model,l=r.toolManager.findTool("Linking"),h="";if(t!==null&&(e===null&&(e=t),h=e.portId,h===null&&(h="")),e="",i!==null&&(n===null&&(n=i),e=n.portId,e===null&&(e="")),n=l.archetypeLinkData,n instanceof X){if(Dn(n),s=n.copy(),s!==null)return s.fromNode=t,s.fromPortId=h,s.toNode=i,s.toPortId=e,r.add(s),t=l.archetypeLabelNodeData,t instanceof b&&(Dn(t),t=t.copy(),t!==null&&(t.labeledLink=s,r.add(t))),s}else if(n!==null&&(n=s.Go(n),typeof n=="object"&&n!==null))return t!==null&&Wh(s,n,s.va(t.data),!0),$h(s,n,h,!0),i!==null&&Wh(s,n,s.va(i.data),!1),$h(s,n,e,!1),s.ci(n),t=l.archetypeLabelNodeData,t===null||t instanceof b||(t=s.copyNodeData(t),typeof t=="object"&&t!==null&&(s.vf(t),t=s.va(t),t!==void 0&&s.yu(n,t))),r.Hc(n);return null},Ee.prototype.findLinkForKey=Ee.prototype.findLinkForKey,Ee.prototype.findPartForKey=Ee.prototype.findPartForKey,Ee.prototype.removeAllModeledParts=Ee.prototype.removeAllModeledParts,Ee.prototype.addModeledParts=Ee.prototype.addModeledParts,Ee.prototype.addAllModeledParts=Ee.prototype.addAllModeledParts,Ee.className="GraphLinksPartManager";function kn(){Bt.apply(this,arguments),this.Og=null}B(kn,Bt);function Hd(t,e,i){if(e!==null&&i!==null&&i.gh()===null){var n=t.diagram.toolManager.findTool("Linking"),r=e,s=i;if(t.diagram.isTreePathToChildren||(r=i,s=e),(n===null||!Qa(n,r,s,null,!0))&&(e=t.getLinkCategoryForData(i.data),n=t.findLinkTemplateForCategory(e),n!==null&&(Dn(n),n=n.copy(),n!==null))){var l=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,n.Rf=e,n.ub=i.data,n.fromNode=r,n.toNode=s,t.diagram.add(n),n.ub=null,n.data=i.data,t.diagram.skipsModelSourceBindings=l}}}kn.prototype.getLinkCategoryForData=function(t){return this.diagram.model.ns(t)},kn.prototype.setLinkCategoryForData=function(t,e){this.diagram.model.Hs(t,e)},kn.prototype.setFromNodeForLink=function(t,e,i){var n=this.diagram.model;if(i===void 0&&(i=null),e=e!==null?e.data:null,this.diagram.isTreePathToChildren)n.ne(t.data,n.va(e));else{var r=this.Og;this.Og=t,i!==null&&n.ne(i.data,void 0),n.ne(e,n.va(t.toNode!==null?t.toNode.data:null)),this.Og=r}},kn.prototype.setToNodeForLink=function(t,e,i){var n=this.diagram.model;if(i===void 0&&(i=null),e=e!==null?e.data:null,this.diagram.isTreePathToChildren){var r=this.Og;this.Og=t,i!==null&&n.ne(i.data,void 0),n.ne(e,n.va(t.fromNode!==null?t.fromNode.data:null)),this.Og=r}else n.ne(t.data,n.va(e))},kn.prototype.removeDataForLink=function(t){this.diagram.model.ne(t.data,void 0)},kn.prototype.findLinkForKey=function(t){return t==null?null:(t=this.diagram.model.dc(t),t!==null?this.Ze.I(t):null)},kn.prototype.doModelChanged=function(t){if(Bt.prototype.doModelChanged.call(this,t),this.diagram){var e=this.diagram;if(t.model===e.model){var i=t.change;if(e.aa){e.aa=!1;try{var n=t.modelChange;if(n!==""){if(i===Qt){if(n==="nodeParentKey"){var r=t.object,s=this.Rb(t.newValue),l=this.fi(r);if(this.Og!==null)s!==null&&(this.Og.data=r,this.Og.category=this.getLinkCategoryForData(r));else if(l!==null){var h=l.gh();h!==null?s===null?e.remove(h):e.isTreePathToChildren?h.fromNode=s:h.toNode=s:Hd(this,s,l)}}else if(n==="parentLinkCategory"){var a=this.fi(t.object),f=t.newValue;if(a!==null&&typeof f=="string"){var p=a.gh();p!==null&&(p.category=f)}}e.isModified=!0}}else if(i===Qt){var d=t.propertyName;t.object===e.model&&d==="nodeParentKeyProperty"&&(e.undoManager.isUndoingRedoing||this.Sd()),e.isModified=!0}}finally{e.aa=!0}}}}},kn.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(e!==null){var i=t.diagram;if(i!==null){var n=i.model;t instanceof b&&(e=n.ih(e),e=i.Rb(e),n=t.mg(),e!==n&&(n=t.gh(),e!==null?n!==null?i.isTreePathToChildren?n.fromNode=e:n.toNode=e:Hd(this,e,t):n!==null&&um(i,n,!1)))}}},kn.prototype.updateDataBindings=function(t,e){Bt.prototype.updateDataBindings.call(this,t,e),typeof e=="string"&&this.Ic(t)!==null&&(t=this.Hc(t),t!==null&&t.Ma(e))},kn.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,i=e.va(t);if(i!==void 0){var n=Yf(e,i),r=this.Ic(t);if(n!==null&&r!==null){for(n=n.iterator;n.next();){var s=n.value;e.mb(s)&&r instanceof b&&e.ih(s)===i&&Hd(this,r,this.fi(s))}mr(e,i)}t=e.ih(t),t!==void 0&&r instanceof b&&(t=this.Rb(t),Hd(this,t,r))}},kn.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof b){var i=e.va(t.data),n=this.Hc(t.data);if(n!==null){n.isSelected=!1,n.isHighlighted=!1;var r=n.layer;if(r!==null){var s=r.mc(-1,n,!1);0<=s&&this.diagram.cb(je,"parts",r,n,null,s,null),s=n.layerChanged,s!==null&&s(n,r,null)}}for(n=this.diagram.isTreePathToChildren,t=t.linksConnected;t.next();)r=t.value,r=(n?r.toNode:r.fromNode).data,e.mb(r)&&yr(e,i,r)}},kn.prototype.insertLink=function(t,e,i){e=this.diagram.model;var n=t,r=i;return this.diagram.isTreePathToChildren||(n=i,r=t),n!==null&&r!==null?(e.ne(r.data,e.va(n.data)),r.gh()):null},kn.prototype.findLinkForKey=kn.prototype.findLinkForKey,kn.className="TreePartManager";function nt(t,e){this.gl=new q,this.el=new q,this.Sv=`,
  "insertedNodeKeys": `,this.iy=`,
  "modifiedNodeData": `,this.Uv=`,
  "removedNodeKeys": `,this.rh=null,Oe(this),this.Pm=this.wa="",this.Dg=!1,this.j={},this.Pc=[],this.lb=new vt,this.Qh="key",this.xk=this.Yk=null,this.Gm=this.Hm=!1,this.Jm=!0,this.um=null,this.jj="category",this.Tf=new vt,this.Gt=new tt,this.Sg=!1,this.m=null,this.undoManager=new ue,t!==void 0&&(Wt(t)?this.nodeDataArray=t:e=t),e&&(Object.assign(this,e),t=e.Changed)&&(delete this.Changed,this.Me(t))}nt.prototype.cloneProtected=function(t){t.wa=this.wa,t.Pm=this.Pm,t.Dg=this.Dg,t.Qh=this.Qh,t.Yk=this.Yk,t.xk=this.xk,t.Hm=this.Hm,t.Gm=this.Gm,t.Jm=this.Jm,t.um=this.um,t.jj=this.jj},nt.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},nt.prototype.clear=function(){this.Pc=[],this.lb.clear(),this.Tf.clear(),this.undoManager.clear()},nt.prototype.toString=function(t){if(t===void 0&&(t=0),1<t)return this.ip();var e=(this.name!==""?this.name:"")+" Model";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;for(var i=t.length,n=0;n<i;n++){var r=t[n];e+=" "+this.va(r)+":"+Gi(r)}}return e},nt.prototype.qA=function(t){t.change!==fr&&R("Model.toIncrementalData argument is not a Transaction ChangedEvent:"+t.toString());var e=t.object;return t.isTransactionFinished&&e instanceof Ue?(Ck(this,e),t=this.Mv(e,t.propertyName==="FinishedUndo"),this.rh=null,t):null},nt.prototype.Mv=function(t,e){var i=this,n=!1,r=new q,s=new q,l=new q,h=this.rh;t.changes.each(function(d){d.model===i&&(d.modelChange==="nodeDataArray"?d.change===Ne?r.add(d.newValue):d.change===je&&l.add(d.oldValue):i.mb(d.object)?s.add(d.object):d.change!==Qt||i.modelData!==d.object&&d.propertyName!=="modelData"?d.object!==null&&(h&&h.contains(d.object)?h.get(d.object).each(function(y){i.mb(y)&&s.add(y)}):d.object instanceof nt||i.ni()&&i.Gc(d.object)||Tk(i,d.object).each(function(y){s.add(y)})):n=!0)});var a=this.el;a.clear(),r.each(function(d){a.add(i.va(d)),e||s.add(d)});var f=this.gl;f.clear(),l.each(function(d){f.add(i.va(d)),e&&s.add(d)}),t=i.cloneDeep(s.Fa());var p=null;return n&&(p===null&&(p={}),p.modelData=this.cloneDeep(this.modelData)),0<a.count&&(p===null&&(p={}),e?p.removedNodeKeys=a.Fa():p.insertedNodeKeys=a.Fa()),0<t.length&&(p===null&&(p={}),p.modifiedNodeData=t),0<f.count&&(p===null&&(p={}),e?p.insertedNodeKeys=f.Fa():p.removedNodeKeys=f.Fa()),f.clear(),a.clear(),p},nt.prototype.cloneDeep=function(t){return Kh(this,t,!0)};function Kh(t,e,i,n,r,s){function l(d,y){h?(d.__gohashid===void 0&&s.push(d),n.set(d,y)):(d=ru++,n.set(d,y),r.set(d,e))}if(!xt(e))return e;s||(s=[]);var h=Object.isExtensible(e);if(n||(n=new vt),h){var a=n.get(e);if(a)return a}else for(r||(r=new vt),a=r.iterator;a.next();){var f=a.key;if(a.value===e&&(f=n.get(f)))return f}if(Array.isArray(e)){a=[],l(e,a);for(var p=0;p<e.length;p++)a.push(Kh(t,e[p],!1,n,r,s))}else if(e instanceof P||e instanceof pt||e instanceof V||e instanceof Rt||e instanceof at)a=e.copy(),l(e,a);else{if(e instanceof Dt||e instanceof W||e instanceof Q)return e;if(e instanceof tt)a=new tt().addAll(Kh(t,e.Fa(),!1,n,r,s)),l(e,a);else if(e instanceof q)a=new q().addAll(Kh(t,e.Fa(),!1,n,r,s)),l(e,a);else if(e instanceof vt)a=new vt().addAll(Kh(t,e.Fa(),!1,n,r,s)),l(e,a);else if(e instanceof Date)a=new Date(e.getTime()),l(e,a);else if(e instanceof RegExp)a=new RegExp(e),l(e,a),a.lastIndex=e.lastIndex;else if(typeof e.copy=="function")a=e.copy(),l(e,a);else for(p in a={},l(e,a),e)p!=="__gohashid"&&(a[p]=Kh(t,e[p],!1,n,r,s))}return i&&s.forEach(function(d){delete d.__gohashid}),a}o=nt.prototype,o.quote=function(t){return JSON.stringify(t).replace(/[\u007F-\uFFFF]/g,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).substr(-4)})},o.om=function(){var t="";return this.name!==""&&(t+=`,
  "name": `+this.quote(this.name)),this.dataFormat!==""&&(t+=`,
  "dataFormat": `+this.quote(this.dataFormat)),this.isReadOnly&&(t+=`,
  "isReadOnly": `+this.isReadOnly),this.nodeKeyProperty!=="key"&&typeof this.nodeKeyProperty=="string"&&(t+=`,
  "nodeKeyProperty": `+this.quote(this.nodeKeyProperty)),this.copiesArrays&&(t+=`,
  "copiesArrays": true`),this.copiesArrayObjects&&(t+=`,
  "copiesArrayObjects": true`),this.copiesKey||(t+=`,
  "copiesKey": false`),this.nodeCategoryProperty!=="category"&&typeof this.nodeCategoryProperty=="string"&&(t+=`,
  "nodeCategoryProperty": `+this.quote(this.nodeCategoryProperty)),t},o.ap=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.dataFormat=t.dataFormat),t.isReadOnly&&(this.isReadOnly=!0),t.nodeKeyProperty&&(this.nodeKeyProperty=t.nodeKeyProperty),t.copiesArrays&&(this.copiesArrays=!0),t.copiesArrayObjects&&(this.copiesArrayObjects=!0),t.copiesKey===!1&&(this.copiesKey=!1),t.nodeCategoryProperty&&(this.nodeCategoryProperty=t.nodeCategoryProperty)};function Pk(t,e){e=e.modelData,xt(e)&&(t.am(e),t.modelData=e)}o.Nv=function(){var t=this.modelData,e=!1,i;for(i in t)if(!Lk(i,t[i])){e=!0;break}return t="",e&&(t=`,
  "modelData": `+zv(this,this.modelData)),t+`,
  "nodeDataArray": `+Os(this,this.nodeDataArray,!0)},o.iv=function(t){Pk(this,t),t=t.nodeDataArray,Wt(t)&&(this.am(t),this.nodeDataArray=t)};function Ck(t,e){function i(r,s){if((s=s.part)&&(s=s.data,r!==s)){var l=n.get(r);l===null?(l=new q,l.add(s),n.add(r,l)):l.add(s)}}var n=t.rh;n===null&&(n=new vt,e.changes.each(function(r){if(r.diagram!==null){var s=r.change;s===Qt?(r=r.object.panel)&&(s=r.data)&&i(s,r):(s===Ne||s===je)&&(r=r.object,(s=r.itemArray)&&i(s,r))}}),t.rh=n)}function Tk(t,e){for(var i=new q,n=0;n<t.nodeDataArray.length;n++){var r=t.nodeDataArray[n];_d(t,e,r,r,i)}return i}function _d(t,e,i,n,r){if(Array.isArray(i))for(var s=0;s<i.length;s++){var l=i[s];if(l===e)return r.add(n),!0;if(_d(t,e,l,n,r))return!0}else if(xt(i)&&Object.getPrototypeOf(i)===Object.prototype)for(s in i){if(l=i[s],l===e)return r.add(n),!0;if(_d(t,e,l,n,r))return!0}return!1}o.Lv=function(t,e){var i=this,n=!1,r=new q,s=new q,l=new q,h=this.rh;t.changes.each(function(p){p.model===i&&(p.modelChange==="nodeDataArray"?p.change===Ne?r.add(p.newValue):p.change===je&&l.add(p.oldValue):i.mb(p.object)?s.add(p.object):p.change!==Qt||i.modelData!==p.object&&p.propertyName!=="modelData"?p.object!==null&&(h&&h.contains(p.object)?h.get(p.object).each(function(d){i.mb(d)&&s.add(d)}):p.object instanceof nt||i.ni()&&i.Gc(p.object)||Tk(i,p.object).each(function(d){s.add(d)})):n=!0)});var a=this.el;a.clear(),r.each(function(p){a.add(i.va(p)),e||s.add(p)});var f=this.gl;return f.clear(),l.each(function(p){f.add(i.va(p)),e&&s.add(p)}),t="",n&&(t+=`,
  "modelData": `+zv(this,this.modelData)),0<a.count&&(t+=(e?this.Uv:this.Sv)+Os(this,a.Fa(),!0)),0<s.count&&(t+=this.iy+Os(this,s.Fa(),!0)),0<f.count&&(t+=(e?this.Sv:this.Uv)+Os(this,f.Fa(),!0)),f.clear(),a.clear(),t},o.$o=function(t){(t.name!==void 0&&t.name!==this.name||t.dataFormat!==void 0&&t.dataFormat!==this.dataFormat||t.isReadOnly!==void 0&&t.isReadOnly!==this.isReadOnly||t.nodeKeyProperty!==void 0&&t.nodeKeyProperty!==this.nodeKeyProperty||t.copiesArrays!==void 0&&t.copiesArrays!==this.copiesArrays||t.copiesArrayObjects!==void 0&&t.copiesArrayObjects!==this.copiesArrayObjects||t.copiesKey!==void 0&&t.copiesKey!==this.copiesKey||t.nodeCategoryProperty!==void 0&&t.nodeCategoryProperty!==this.nodeCategoryProperty)&&R("applyIncrementalJson cannot change Model properties"),Pk(this,t);var e=t.insertedNodeKeys,i=t.modifiedNodeData,n=new vt;if(Array.isArray(i))for(var r=0;r<i.length;r++){var s=i[r],l=this.va(s);l!=null&&n.set(l,s)}if(Array.isArray(e))for(r=e.length,s=0;s<r;s++){l=e[s];var h=this.dc(l);h===null&&(h=(h=n.get(l))?h:this.copyNodeData({}),this.hm(h,l),this.vf(h))}if(Array.isArray(i)){for(e=i.length,n=0;n<e;n++)if(r=i[n],s=this.va(r),s=this.dc(s),s!==null){for(var a in r)a==="__gohashid"||a===this.nodeKeyProperty||this.Tj()&&a===this.nodeIsGroupProperty||this.setDataProperty(s,a,r[a]);this.im(r,s)}}if(t=t.removedNodeKeys,Array.isArray(t))for(i=t.length,a=0;a<i;a++)e=this.dc(t[a]),e!==null&&this.$l(e)},o.Zx=function(t,e){t.change!==fr&&R("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var i=t.object;return t.isTransactionFinished&&i instanceof Ue?(e===void 0&&(e=Hf(this,this)),Ck(this,i),t=this.Lv(i,t.propertyName==="FinishedUndo"),this.rh=null,e==="2"?'{ "incremental": 2'+t+"}":'{ "class": '+this.quote(e)+', "incremental": 1'+this.om()+t+"}"):'{ "incremental": 0 }'},o.rA=function(t,e){return this.Zx(t,e)},o.ip=function(t){return t===void 0&&(t=Hf(this,this)),'{ "class": '+this.quote(t)+this.om()+this.Nv()+"}"},o.toJSON=function(t){return this.ip(t)},o.Vw=function(t){var e=null;if(typeof t=="string")try{e=Y.JSON.parse(t)}catch{}else typeof t=="object"?e=t:R("Unable to modify a Model from: "+t);var i=e.incremental;typeof i!="number"&&R("Unable to apply non-incremental changes to Model: "+t),i!==0&&(this.Ea("applyIncrementalJson"),this.$o(e),this.eb("applyIncrementalJson"))},o.Gy=function(t){return this.Vw(t)},nt.constructGraphLinksModel=function(){return new nt},o=nt.prototype,o.am=function(t){if(Wt(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];if(xt(n)){var r=i;n=this.am(n),Array.isArray(t)?t[r]=n:R("Cannot replace an object in an HTMLCollection or NodeList at "+r)}}else if(xt(t)){for(e in t)if(i=t[e],xt(i)&&(i=this.am(i),t[e]=i,e==="points"&&Array.isArray(i))){for(r=i.length%2===0,n=0;n<i.length;n++)if(typeof i[n]!="number"){r=!1;break}if(r){for(r=new tt,n=0;n<i.length/2;n++)r.add(new P(i[2*n],i[2*n+1]));r.freeze(),t[e]=r}}return Sj(t)}return t},o.pm=function(t){return t===void 0?"undefined":t===null?"null":t===!0?"true":t===!1?"false":typeof t=="string"?this.quote(t):typeof t=="number"?t===1/0?"9e9999":t===-1/0?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.pm(t.valueOf()):Wt(t)?Os(this,t):xt(t)?zv(this,t):typeof t=="function"?"null":t.toString()};function Os(t,e,i){i===void 0&&(i=!1);var n=e.length;if(0>=n)return"[]";var r=new ll;r.add("["),i&&1<n&&r.add(`
`);for(var s=0;s<n;s++){var l=e[s];l!==void 0&&(0<s&&(r.add(","),i&&r.add(`
`)),r.add(t.pm(l)))}return i&&1<n&&r.add(`
`),r.add("]"),r.toString()}function Lk(t,e){return e===void 0||t==="__gohashid"||t[0]==="_"||typeof e=="function"}function ki(t){return isNaN(t)?"NaN":t===1/0?"9e9999":t===-1/0?"-9e9999":t}function zv(t,e){var i=e;if(i instanceof P)e={class:"go.Point",x:ki(i.x),y:ki(i.y)};else if(i instanceof pt)e={class:"go.Size",width:ki(i.width),height:ki(i.height)};else if(i instanceof V)e={class:"go.Rect",x:ki(i.x),y:ki(i.y),width:ki(i.width),height:ki(i.height)};else if(i instanceof Rt)e={class:"go.Margin",top:ki(i.top),right:ki(i.right),bottom:ki(i.bottom),left:ki(i.left)};else if(i instanceof at)i.tb()?e={class:"go.Spot",x:ki(i.x),y:ki(i.y),offsetX:ki(i.offsetX),offsetY:ki(i.offsetY)}:e={class:"go.Spot",enum:i.toString()};else if(i instanceof Dt){if(e={class:"go.Brush",type:i.type.name},i.type===Qo?e.color=i.color:(i.type===No||i.type===Sn)&&(e.start=i.start,e.end=i.end,i.type===Sn&&(i.startRadius!==0&&(e.startRadius=ki(i.startRadius)),isNaN(i.endRadius)||(e.endRadius=ki(i.endRadius)))),i.colorStops!==null){var n={};for(i=i.colorStops.iterator;i.next();)n[i.key]=i.value;e.colorStops=n}}else i instanceof W?(e={class:"go.Geometry",type:i.type.name},i.startX!==0&&(e.startX=ki(i.startX)),i.startY!==0&&(e.startY=ki(i.startY)),i.endX!==0&&(e.endX=ki(i.endX)),i.endY!==0&&(e.endY=ki(i.endY)),i.spot1.C(ei)||(e.spot1=i.spot1),i.spot2.C(Xr)||(e.spot2=i.spot2),i.type===W.m&&(e.path=W.ga(i))):i instanceof Q&&(e={class:"go.EnumValue",classType:Hf(t,i.classType),name:i.name});n="{",i=!0;for(var r in e){var s=ae(e,r);if(!Lk(r,s))if(i?i=!1:n+=",",n+=t.quote(r)+":",r==="points"&&s instanceof tt){var l="[";for(s=s.iterator;s.next();){var h=s.value;1<l.length&&(l+=","),l+=t.pm(h.x),l+=",",l+=t.pm(h.y)}l+="]",n+=l}else n+=t.pm(s)}return n+"}"}function Ni(t){return typeof t=="number"?t:t==="NaN"?NaN:t==="9e9999"?1/0:t==="-9e9999"?-1/0:parseFloat(t)}function Sj(t){if(typeof t!="object")return t;var e=t.class||"";if(e==="NaN")return NaN;if(e==="Date")return new Date(t.value);if(e.indexOf("go.")!==0)return t;e=e.substr(3);var i=t;if(e==="Point")i=new P(Ni(t.x),Ni(t.y));else if(e==="Size")i=new pt(Ni(t.width),Ni(t.height));else if(e==="Rect")i=new V(Ni(t.x),Ni(t.y),Ni(t.width),Ni(t.height));else if(e==="Margin")i=new Rt(Ni(t.top),Ni(t.right),Ni(t.bottom),Ni(t.left));else if(e==="Spot")typeof t.enum=="string"?i=O0(t.enum):i=new at(Ni(t.x),Ni(t.y),Ni(t.offsetX),Ni(t.offsetY));else if(e==="Brush"){if(i=new Dt,i.type=Xn(Dt,t.type),typeof t.color=="string"&&(i.color=t.color),t.start instanceof at&&(i.start=t.start),t.end instanceof at&&(i.end=t.end),typeof t.startRadius=="number"&&(i.startRadius=Ni(t.startRadius)),typeof t.endRadius=="number"&&(i.endRadius=Ni(t.endRadius)),t=t.colorStops,xt(t))for(var n in t)i.addColorStop(parseFloat(n),t[n])}else e==="Geometry"?(i=null,typeof t.path=="string"?i=W.parse(t.path):i=new W,i.type=Xn(W,t.type),typeof t.startX=="number"&&(i.startX=Ni(t.startX)),typeof t.startY=="number"&&(i.startY=Ni(t.startY)),typeof t.endX=="number"&&(i.endX=Ni(t.endX)),typeof t.endY=="number"&&(i.endY=Ni(t.endY)),t.spot1 instanceof at&&(i.spot1=t.spot1),t.spot2 instanceof at&&(i.spot2=t.spot2)):e==="EnumValue"&&(n=t.classType,n.indexOf("go.")===0&&(n=n.substr(3)),n=Uv(n),typeof n=="function"&&(i=Xn(n,t.name)));return i}o.Me=function(t){return this.Gt.add(t),this},o.ek=function(t){this.Gt.remove(t)},o.Xr=function(t){this.skipsUndoManager||this.undoManager.Ru(t);for(var e=this.Gt,i=e.length,n=0;n<i;n++)e.L(n)(t)},o.cb=function(t,e,i,n,r,s,l){ye(this,"",t,e,i,n,r,s,l)},o.g=function(t,e,i,n,r){ye(this,"",Qt,t,this,e,i,n,r)},o.As=function(t,e,i,n,r,s){ye(this,"",Qt,e,t,i,n,r,s)};function ye(t,e,i,n,r,s,l,h,a){h===void 0&&(h=null),a===void 0&&(a=null);var f=new ie;f.model=t,f.change=i,f.modelChange=e,f.propertyName=n,f.object=r,f.oldValue=s,f.oldParam=h,f.newValue=l,f.newParam=a,t.Xr(f)}nt.prototype.changeState=function(t,e){if(t!==null&&t.model===this)if(t.change===Qt){var i=t.object,n=t.propertyName,r=t.I(e);n===this.nodeKeyProperty&&this.mb(i)&&(e=t.I(!e),e!==void 0&&this.lb.remove(e),r!==void 0&&this.lb.add(r,i)),$t(i,n,r)}else t.change===Ne?(i=t.newParam,t.modelChange==="nodeDataArray"?(t=t.newValue,xt(t)&&typeof i=="number"&&(n=this.va(t),e?(this.Pc[i]===t&&jr(this.Pc,i),n!==void 0&&this.lb.remove(n)):(this.Pc[i]!==t&&nn(this.Pc,i,t),n!==void 0&&this.lb.add(n,t)))):t.modelChange===""?((n=t.object)&&!Wt(n)&&t.propertyName&&(n=ae(t.object,t.propertyName)),Wt(n)&&typeof i=="number"&&(t=t.newValue,e?jr(n,i):nn(n,i,t))):R("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.change===je?(i=t.oldParam,t.modelChange==="nodeDataArray"?(t=t.oldValue,xt(t)&&typeof i=="number"&&(n=this.va(t),e?(this.Pc[i]!==t&&nn(this.Pc,i,t),n!==void 0&&this.lb.add(n,t)):(this.Pc[i]===t&&jr(this.Pc,i),n!==void 0&&this.lb.remove(n)))):t.modelChange===""?((n=t.object)&&!Wt(n)&&t.propertyName&&(n=ae(t.object,t.propertyName)),Wt(n)&&typeof i=="number"&&(t=t.oldValue,e?nn(n,i,t):jr(n,i))):R("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.change!==fr&&R("unknown ChangedEvent: "+t.toString())},nt.prototype.Ea=function(t){return this.undoManager.Ea(t)},nt.prototype.eb=function(t){return this.undoManager.eb(t)},nt.prototype.If=function(){return this.undoManager.If()},nt.prototype.commit=function(t,e){e===void 0&&(e="");var i=this.skipsUndoManager;e===null&&(this.skipsUndoManager=!0,e=""),this.undoManager.Ea(e);var n=!1;try{t(this),n=!0}finally{n?this.undoManager.eb(e):this.undoManager.If(),this.skipsUndoManager=i}},o=nt.prototype,o.Ma=function(t,e){e===void 0&&(e=""),ye(this,"SourceChanged",fr,e,t,null,null)},o.va=function(t){if(t!==null){var e=this.Qh;if(e!==""&&(e=ae(t,e),e!==void 0)){if(As(e))return e;R("Key value for node data "+t+" is not a number or a string: "+e)}}},o.hm=function(t,e){if(t!==null){var i=this.Qh;if(i!=="")if(this.mb(t)){var n=ae(t,i);n!==e&&this.dc(e)===null&&($t(t,i,e),n!==void 0&&this.lb.remove(n),this.lb.add(e,t),ye(this,"nodeKey",Qt,i,t,n,e),typeof i=="string"&&this.Ma(t,i),this.ep(n,e))}else $t(t,i,e)}};function As(t){return typeof t=="number"||typeof t=="string"}o.mb=function(t){var e=this.va(t);return e===void 0?!1:this.lb.I(e)===t},o.dc=function(t){return t===null&&R("Model.findNodeDataForKey:key must not be null"),t!==void 0&&As(t)?this.lb.I(t):null},o.Yu=function(t){if(t!==null){var e=this.Qh;if(e!==""){var i=this.va(t);if(i===void 0||this.lb.contains(i)){var n=this.Yk;if(n!==null&&(i=n(this,t),i!=null&&!this.lb.contains(i))){$t(t,e,i);return}if(typeof i=="string"){for(n=2;this.lb.contains(i+n);)n++;$t(t,e,i+n)}else if(i===void 0||typeof i=="number"){for(i=-this.lb.count-1;this.lb.contains(i);)i--;$t(t,e,i)}}}}},o.vf=function(t){t!==null&&(nu(t),this.mb(t)||jk(this,t,!0))};function jk(t,e,i){var n=t.va(e);(n===void 0||t.lb.I(n)!==e)&&(t.Yu(e),n=t.va(e),n===void 0&&R("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."),t.lb.add(n,e),n=null,i&&(n=t.Pc.length,nn(t.Pc,n,e)),ye(t,"nodeDataArray",Ne,"nodeDataArray",t,null,e,null,n),t.cm(e),t.bm(e))}o.Dy=function(t){if(Wt(t))for(var e=t.length,i=0;i<e;i++)this.vf(t[i]);else for(t=t.iterator;t.next();)this.vf(t.value)},o.$l=function(t){t!==null&&Ek(this,t,!0)};function Ek(t,e,i){var n=t.va(e);if(n!==void 0&&t.lb.remove(n),n=null,i){t:if(i=t.Pc,Array.isArray(i))n=i.indexOf(e);else{n=i.length;for(var r=0;r<n;r++)if(i[r]===e){n=r;break t}n=-1}if(0>n)return;jr(t.Pc,n)}ye(t,"nodeDataArray",je,"nodeDataArray",t,e,null,n,null),t.lp(e)}o.gA=function(t){if(Wt(t))for(var e=t.length,i=0;i<e;i++)this.$l(t[i]);else for(t=t.iterator;t.next();)this.$l(t.value)},o.Uz=function(t){if(t!==this.nodeDataArray&&Wt(t)){var e=this.gl;e.clear(),e.addAll(this.lb.iteratorKeys);var i=this.el;i.clear();for(var n=t.length,r=0;r<n;r++){var s=t[r],l=this.va(s);if(l!==void 0){i.add(l);var h=this.dc(l);h!==s&&(h!==null?(this.Ao(h,s),this.im(s,h)):(s=this.cloneDeep(s),this.hm(s,l),this.vf(s)))}else l=this.cloneDeep(s),this.vf(l),i.add(this.va(l))}for(t=e.iterator;t.next();)n=t.value,i.contains(n)||(n=this.dc(n))&&this.$l(n);e.clear(),i.clear()}},o.ep=function(t,e){e!==void 0&&(t=Yf(this,t),t instanceof q&&this.Tf.add(e,t))},o.Hv=function(){},o.cm=function(){},o.bm=function(){},o.lp=function(){};function yr(t,e,i){if(e!==void 0){var n=t.Tf.I(e);n===null&&(n=new q,t.Tf.add(e,n)),n.add(i)}}function mr(t,e,i){if(e!==void 0){var n=t.Tf.I(e);n instanceof q&&(i==null?t.Tf.remove(e):(n.remove(i),n.count===0&&t.Tf.remove(e)))}}function Yf(t,e){return e===void 0?null:(t=t.Tf.I(e),t instanceof q?t:null)}o.Ly=function(t){t===void 0?this.Tf.clear():this.Tf.remove(t)},nt.prototype.copyNodeData=function(t){if(t===null)return null;var e=this.xk;return t=e!==null?e(t,this):Gd(this,t,!0),xt(t)&&Oe(t),t};function Gd(t,e,i){if(t.copiesArrays&&Array.isArray(e)){var n=[];for(i=0;i<e.length;i++){var r=Gd(t,e[i],t.copiesArrayObjects);n.push(r)}return Oe(n),n}if(i&&xt(e)){i=(i=e.constructor)?new i:{},r=t.copiesKey||typeof t.nodeKeyProperty!="string"?null:t.nodeKeyProperty;for(n in e)if(n==="__gohashid")i.__gohashid=void 0;else if(n===r)i[r]=void 0;else{var s=ae(e,n),l=Hf(t,s);l==="GraphObject"||l==="Diagram"||l==="Layer"||l==="RowColumnDefinition"||l==="AnimationManager"||l==="Tool"||l==="CommandHandler"||l==="Layout"||l==="InputEvent"||l==="DiagramEvent"||s instanceof nt||s instanceof ue||s instanceof Ue||s instanceof ie||(s=Gd(t,s,!1)),$t(i,n,s)}return Oe(i),i}return e instanceof P||e instanceof pt||e instanceof V||e instanceof at||e instanceof Rt?e.copy():e}nt.prototype.setDataProperty=function(t,e,i){if(this.mb(t)){if(e===this.nodeKeyProperty){this.hm(t,i);return}if(e===this.nodeCategoryProperty){this.gm(t,i);return}}else!Fk&&t instanceof ot&&(Fk=!0,Lt('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),Lt("  Is that really your intent?"));var n=ae(t,e);n!==i&&($t(t,e,i),this.As(t,e,n,i))},o=nt.prototype,o.set=function(t,e,i){this.setDataProperty(t,e,i)},o.Ao=function(t,e){if(e){var i=this.mb(t),n;for(n in e)n==="__gohashid"||i&&n===this.nodeKeyProperty||this.setDataProperty(t,n,e[n])}},o.zy=function(t,e){this.os(t,-1,e)},o.os=function(t,e,i){0>e&&(e=t.length),nn(t,e,i),ye(this,"",Ne,"",t,null,i,null,e)},o.mv=function(t,e){e===void 0&&(e=-1),t===this.Pc&&R("Model.removeArrayItem should not be called on the Model.nodeDataArray"),e===-1&&(e=t.length-1);var i=t[e];jr(t,e),ye(this,"",je,"",t,i,null,e,null)},o.Mo=function(t){if(t===null)return"";var e=this.jj;if(e===""||(e=ae(t,e),e===void 0))return"";if(typeof e=="string")return e;R("getCategoryForNodeData found a non-string category for "+t+": "+e)},o.gm=function(t,e){if(t!==null){var i=this.jj;if(i!=="")if(this.mb(t)){var n=ae(t,i);n===void 0&&(n=""),n!==e&&($t(t,i,e),ye(this,"nodeCategory",Qt,i,t,n,e))}else $t(t,i,e)}},o.im=function(t,e){this.gm(e,this.Mo(t))},o.Pl=function(){return!1},o.Tj=function(){return!1},o.ni=function(){return!1},o.ss=function(){return!1},o.Uj=function(){return!1};function Vv(){return new nt}function Hf(t,e){if(typeof e=="function"){if(e.className)return e.className;if(e.name)return e.name}else if(typeof e=="object"&&e!==null&&e.constructor)return Hf(t,e.constructor);return typeof e}function Uv(t){return bn[t]?bn[t]:Y.go!==void 0&&Y.go[t]?Y.go[t]:null}function ae(t,e){if(!t||!e)return null;try{if(typeof e=="function")var i=e(t);else typeof t.getAttribute=="function"?(i=t.getAttribute(e),i===null&&(i=void 0)):i=t[e]}catch{}return i}function $t(t,e,i){if(t&&e)try{typeof e=="function"?e(t,i):typeof t.setAttribute=="function"?t.setAttribute(e,i):t[e]=i}catch{}}z.Object.defineProperties(nt.prototype,{name:{get:function(){return this.wa},set:function(t){var e=this.wa;e!==t&&(this.wa=t,this.g("name",e,t))}},dataFormat:{get:function(){return this.Pm},set:function(t){var e=this.Pm;e!==t&&(this.Pm=t,this.g("dataFormat",e,t))}},isReadOnly:{get:function(){return this.Dg},set:function(t){var e=this.Dg;e!==t&&(this.Dg=t,this.g("isReadOnly",e,t))}},modelData:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.g("modelData",e,t),this.Ma(t))}},undoManager:{get:function(){return this.m},set:function(t){var e=this.m;e!==t&&(e!==null&&e.Qx(this),this.m=t,t!==null&&t.Tw(this))}},skipsUndoManager:{get:function(){return this.Sg},set:function(t){this.Sg=t}},nodeKeyProperty:{get:function(){return this.Qh},set:function(t){var e=this.Qh;e!==t&&(t===""&&R("Model.nodeKeyProperty may not be the empty string"),0<this.lb.count&&R("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Qh=t,this.g("nodeKeyProperty",e,t))}},makeUniqueKeyFunction:{get:function(){return this.Yk},set:function(t){var e=this.Yk;e!==t&&(this.Yk=t,this.g("makeUniqueKeyFunction",e,t))}},nodeDataArray:{get:function(){return this.Pc},set:function(t){var e=this.Pc;if(e!==t){this.lb.clear(),this.Hv();for(var i=t.length,n=0;n<i;n++){var r=t[n];xt(r)||R("Model.nodeDataArray must only contain Objects, not: "+r),nu(r)}for(this.Pc=t,n=new tt,r=0;r<i;r++){var s=t[r],l=this.va(s);l===void 0||this.lb.I(l)!==null?n.add(s):this.lb.add(l,s)}for(n=n.iterator;n.next();)r=n.value,this.Yu(r),s=this.va(r),s!==void 0&&this.lb.add(s,r);for(ye(this,"nodeDataArray",Qt,"nodeDataArray",this,e,t),e=0;e<i;e++)n=t[e],this.cm(n),this.bm(n);Array.isArray(t)||(this.isReadOnly=!0)}}},copyNodeDataFunction:{get:function(){return this.xk},set:function(t){var e=this.xk;e!==t&&(this.xk=t,this.g("copyNodeDataFunction",e,t))}},copiesArrays:{get:function(){return this.Hm},set:function(t){var e=this.Hm;e!==t&&(this.Hm=t,this.g("copiesArrays",e,t))}},copiesArrayObjects:{get:function(){return this.Gm},set:function(t){var e=this.Gm;e!==t&&(this.Gm=t,this.g("copiesArrayObjects",e,t))}},copiesKey:{get:function(){return this.Jm},set:function(t){var e=this.Jm;e!==t&&(this.Jm=t,this.g("copiesKey",e,t))}},afterCopyFunction:{get:function(){return this.um},set:function(t){var e=this.um;e!==t&&(this.um=t,this.g("afterCopyFunction",e,t))}},nodeCategoryProperty:{get:function(){return this.jj},set:function(t){var e=this.jj;e!==t&&(this.jj=t,this.g("nodeCategoryProperty",e,t))}},type:{get:function(){return"Model"}}}),nt.prototype.setCategoryForNodeData=nt.prototype.gm,nt.prototype.getCategoryForNodeData=nt.prototype.Mo,nt.prototype.removeArrayItem=nt.prototype.mv,nt.prototype.insertArrayItem=nt.prototype.os,nt.prototype.addArrayItem=nt.prototype.zy,nt.prototype.assignAllDataProperties=nt.prototype.Ao,nt.prototype.set=nt.prototype.set,nt.prototype.clearUnresolvedReferences=nt.prototype.Ly,nt.prototype.mergeNodeDataArray=nt.prototype.Uz,nt.prototype.removeNodeDataCollection=nt.prototype.gA,nt.prototype.removeNodeData=nt.prototype.$l,nt.prototype.addNodeDataCollection=nt.prototype.Dy,nt.prototype.addNodeData=nt.prototype.vf,nt.prototype.makeNodeDataKeyUnique=nt.prototype.Yu,nt.prototype.findNodeDataForKey=nt.prototype.dc,nt.prototype.containsNodeData=nt.prototype.mb,nt.prototype.setKeyForNodeData=nt.prototype.hm,nt.prototype.getKeyForNodeData=nt.prototype.va,nt.prototype.updateTargetBindings=nt.prototype.Ma,nt.prototype.commit=nt.prototype.commit,nt.prototype.rollbackTransaction=nt.prototype.If,nt.prototype.commitTransaction=nt.prototype.eb,nt.prototype.startTransaction=nt.prototype.Ea,nt.prototype.raiseDataChanged=nt.prototype.As,nt.prototype.raiseChanged=nt.prototype.g,nt.prototype.raiseChangedEvent=nt.prototype.cb,nt.prototype.removeChangedListener=nt.prototype.ek,nt.prototype.addChangedListener=nt.prototype.Me,nt.prototype.writeJsonValue=nt.prototype.pm,nt.prototype.replaceJsonObjects=nt.prototype.am,nt.prototype.applyIncrementalJSON=nt.prototype.Gy,nt.prototype.applyIncrementalJson=nt.prototype.Vw,nt.prototype.toJSON=nt.prototype.toJSON,nt.prototype.toJson=nt.prototype.ip,nt.prototype.toIncrementalJSON=nt.prototype.rA,nt.prototype.toIncrementalJson=nt.prototype.Zx,nt.prototype.toIncrementalData=nt.prototype.qA,nt.prototype.clear=nt.prototype.clear;var Fk=!1,bn={};nt.className="Model",nt.fromJSON=nt.fromJson=function(t,e){e===void 0&&(e=null);var i=null;if(typeof t=="string")try{i=Y.JSON.parse(t)}catch{}else typeof t=="object"?i=t:R("Unable to construct a Model from: "+t);if(e===null){t=null;var n=i.class;if(typeof n=="string")try{var r=null;n.indexOf("go.")===0?(n=n.substr(3),r=Uv(n)):(r=Uv(n),r===null&&(r=Y[n])),typeof r=="function"&&(t=new r)}catch{}t===null||t instanceof nt?e=t:R("Unable to construct a Model of declared class: "+i.class)}return e===null&&(e=nt.constructGraphLinksModel()),e.ap(i),e.iv(i),e},nt.safePropertyValue=ae,nt.safePropertySet=$t,bn.Brush=Dt,bn.ChangedEvent=ie,bn.Geometry=W,bn.Margin=Rt,bn.Panel=_,bn.Point=P,bn.Rect=V,bn.Size=pt,bn.Spot=at,bn.Transaction=Ue,bn.UndoManager=ue;function ce(t,e,i,n){Oe(this),this._isFrozen=!1,t===void 0&&(t=""),e===void 0&&(e=t),i===void 0&&(i=null),this.j=-1,this.td=null,this.tl=t,this.sl=this.qo=0,this.wr=null,this.tn=!1,this.ol=e,this.Fm=i,n===void 0?(this.al=Ak,this.sk=null):(this.al=_f,this.sk=n),this.nt=new q}ce.prototype.copy=function(){var t=new ce;return t.tl=this.tl,t.qo=this.qo,t.sl=this.sl,t.wr=this.wr,t.tn=this.tn,t.ol=this.ol,t.Fm=this.Fm,t.al=this.al,t.sk=this.sk,t},o=ce.prototype,o.rb=function(t){t.classType===ce&&(this.mode=t)},o.toString=function(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(this.xi!==-1?" "+this.xi:"")+" "+this.mode.name+")"},o.freeze=function(){return this._isFrozen=!0,this},o.ka=function(){return this._isFrozen=!1,this},o.Ix=function(t){return t===void 0&&(t=null),this.mode=_f,this.backConverter=t,this},o.Yo=function(t){return t===void 0&&(t=""),this.sourceName=t,this.isToModel=!1,this},o.Xz=function(){return this.sourceName=null,this.isToModel=!0,this};function Ok(t,e,i){return t=t.sourceName,t===null||t===""?e:t==="/"?i.part:t==="."?i:t===".."?i.panel:e.fb(t)}o.Iv=function(t,e,i){var n=this.ol;if(i===void 0||n===""||n===i){i=this.tl;var r=this.Fm;if(r===null&&i==="")Lt("Binding error: target property is the empty string: "+this.toString());else{var s=e;if(n!==""&&(s=ae(e,n)),s!==void 0)if(r===null)i!==""&&$t(t,i,s);else try{if(i!==""){var l=r(s,t);$t(t,i,l)}else r(s,t)}catch{}}}},o.np=function(t,e,i,n){if(this.al===_f){var r=this.tl;if(i===void 0||r===i){i=this.ol;var s=this.sk,l=t;if(r!==""&&(l=ae(t,r)),l!==void 0&&!this.nt.contains(t))try{this.nt.add(t);var h=n!==null?n.diagram:null,a=h!==null?h.model:null;if(s===null){if(i!=="")a!==null?a.setDataProperty(e,i,l):$t(e,i,l);else if(a!==null&&n!==null&&0<=n.itemIndex&&n.panel!==null&&Array.isArray(n.panel.itemArray)){var f=n.itemIndex,p=n.panel.itemArray;a.mv(p,f),a.os(p,f,l)}}else try{if(i!==""){var d=s(l,e,a);a!==null?a.setDataProperty(e,i,d):$t(e,i,d)}else{var y=s(l,e,a);if(y!==void 0&&a!==null&&n!==null&&0<=n.itemIndex&&n.panel!==null&&Array.isArray(n.panel.itemArray)){var x=n.itemIndex,v=n.panel.itemArray;a.mv(v,x),a.os(v,x,y)}}}catch{}}finally{this.nt.remove(t)}}}},z.Object.defineProperties(ce.prototype,{xi:{get:function(){return this.j},set:function(t){this._isFrozen&&st(this),this.j=t}},targetProperty:{get:function(){return this.tl},set:function(t){this._isFrozen&&st(this),this.tl=t}},sourceName:{get:function(){return this.wr},set:function(t){this._isFrozen&&st(this),this.wr=t,t!==null&&(this.tn=!1)}},isToModel:{get:function(){return this.tn},set:function(t){this._isFrozen&&st(this),this.tn=t}},sourceProperty:{get:function(){return this.ol},set:function(t){this._isFrozen&&st(this),this.ol=t}},converter:{get:function(){return this.Fm},set:function(t){this._isFrozen&&st(this),this.Fm=t}},backConverter:{get:function(){return this.sk},set:function(t){this._isFrozen&&st(this),this.sk=t}},mode:{get:function(){return this.al},set:function(t){this._isFrozen&&st(this),this.al=t}}}),ce.prototype.updateSource=ce.prototype.np,ce.prototype.updateTarget=ce.prototype.Iv,ce.prototype.ofModel=ce.prototype.Xz,ce.prototype.ofObject=ce.prototype.Yo,ce.prototype.makeTwoWay=ce.prototype.Ix;var Mj="Binding",Ak=new Q(ce,"OneWay",1),_f=new Q(ce,"TwoWay",2);ce.className="Binding",ce.parseEnum=function(t,e){return function(i){return i=Xn(t,i),i===null?e:i}},ce.toString=Gi,ce.OneWay=Ak,ce.TwoWay=_f;function Ct(t,e,i){nt.call(this),this.Rv=`,
  "insertedLinkKeys": `,this.hy=`,
  "modifiedLinkData": `,this.Tv=`,
  "removedLinkKeys": `,this.ed=[],this.Xf=new q,this.wb=new vt,this.Gh="",this.Oi=this.wk=this.Zk=null,this.hf="from",this.jf="to",this.dj=this.cj="",this.bj="category",this.fe="",this.fl="isGroup",this.Ge="group",this.Im=!1,e!==void 0&&(this.linkDataArray=e),t!==void 0&&(Wt(t)?this.nodeDataArray=t:i=t),i&&(Object.assign(this,i),t=i.Changed)&&(delete this.Changed,this.Me(t))}B(Ct,nt),Ct.constructGraphLinksModel=nt.constructGraphLinksModel,Ct.prototype.cloneProtected=function(t){nt.prototype.cloneProtected.call(this,t),t.Gh=this.Gh,t.Zk=this.Zk,t.wk=this.wk,t.hf=this.hf,t.jf=this.jf,t.cj=this.cj,t.dj=this.dj,t.bj=this.bj,t.fe=this.fe,t.fl=this.fl,t.Ge=this.Ge,t.Im=this.Im},o=Ct.prototype,o.clear=function(){nt.prototype.clear.call(this),this.ed=[],this.wb.clear(),this.Xf.clear()},o.toString=function(t){if(t===void 0&&(t=0),2<=t)return this.ip();var e=(this.name!==""?this.name:"")+" GraphLinksModel";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;var i=t.length,n;for(n=0;n<i;n++){var r=t[n];e+=" "+this.va(r)+":"+Gi(r)}for(e+=`
 link data:`,t=this.linkDataArray,i=t.length,n=0;n<i;n++)r=t[n],e+=" "+hn(this,r,!0)+"-->"+hn(this,r,!1)}return e},o.Mv=function(t,e){this.linkKeyProperty===""&&R("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalData() to succeed.");var i=nt.prototype.Mv.call(this,t,e),n=this,r=new q,s=new q,l=new q,h=this.rh;t.changes.each(function(p){p.model===n&&(p.modelChange==="linkDataArray"?p.change===Ne?r.add(p.newValue):p.change===je&&l.add(p.oldValue):n.Gc(p.object)?s.add(p.object):p.object!==null&&(p.object!==null&&h&&h.contains(p.object)?h.get(p.object).each(function(d){n.Gc(d)&&s.add(d)}):p.object instanceof nt||n.mb(p.object)||Ik(n,p.object).each(function(d){s.add(d)})))});var a=this.el;a.clear(),r.each(function(p){a.add(n.xc(p)),e||s.add(p)});var f=this.gl;return f.clear(),l.each(function(p){f.add(n.xc(p)),e&&s.add(p)}),t=n.cloneDeep(s.Fa()),0<a.count&&(i===null&&(i={}),e?i.removedLinkKeys=a.Fa():i.insertedLinkKeys=a.Fa()),0<t.length&&(i===null&&(i={}),i.modifiedLinkData=t),0<f.count&&(i===null&&(i={}),e?i.insertedLinkKeys=f.Fa():i.removedLinkKeys=f.Fa()),f.clear(),a.clear(),i},o.om=function(){var t=nt.prototype.om.call(this),e="";return this.linkCategoryProperty!=="category"&&typeof this.linkCategoryProperty=="string"&&(e+=`,
  "linkCategoryProperty": `+this.quote(this.linkCategoryProperty)),this.linkKeyProperty!==""&&typeof this.linkKeyProperty=="string"&&(e+=`,
  "linkKeyProperty": `+this.quote(this.linkKeyProperty)),this.linkFromKeyProperty!=="from"&&typeof this.linkFromKeyProperty=="string"&&(e+=`,
  "linkFromKeyProperty": `+this.quote(this.linkFromKeyProperty)),this.linkToKeyProperty!=="to"&&typeof this.linkToKeyProperty=="string"&&(e+=`,
  "linkToKeyProperty": `+this.quote(this.linkToKeyProperty)),this.linkFromPortIdProperty!==""&&typeof this.linkFromPortIdProperty=="string"&&(e+=`,
  "linkFromPortIdProperty": `+this.quote(this.linkFromPortIdProperty)),this.linkToPortIdProperty!==""&&typeof this.linkToPortIdProperty=="string"&&(e+=`,
  "linkToPortIdProperty": `+this.quote(this.linkToPortIdProperty)),this.linkLabelKeysProperty!==""&&typeof this.linkLabelKeysProperty=="string"&&(e+=`,
  "linkLabelKeysProperty": `+this.quote(this.linkLabelKeysProperty)),this.nodeIsGroupProperty!=="isGroup"&&typeof this.nodeIsGroupProperty=="string"&&(e+=`,
  "nodeIsGroupProperty": `+this.quote(this.nodeIsGroupProperty)),this.nodeGroupKeyProperty!=="group"&&typeof this.nodeGroupKeyProperty=="string"&&(e+=`,
  "nodeGroupKeyProperty": `+this.quote(this.nodeGroupKeyProperty)),t+e},o.ap=function(t){nt.prototype.ap.call(this,t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)},o.Nv=function(){var t=nt.prototype.Nv.call(this),e=`,
  "linkDataArray": `+Os(this,this.linkDataArray,!0);return t+e},o.iv=function(t){nt.prototype.iv.call(this,t),t=t.linkDataArray,Array.isArray(t)&&(this.am(t),this.linkDataArray=t)};function Ik(t,e){for(var i=new q,n=0;n<t.linkDataArray.length;n++){var r=t.linkDataArray[n];_d(t,e,r,r,i)}return i}o.Lv=function(t,e){this.linkKeyProperty===""&&R("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var i=nt.prototype.Lv.call(this,t,e),n=this,r=new q,s=new q,l=new q,h=this.rh;t.changes.each(function(p){p.model===n&&(p.modelChange==="linkDataArray"?p.change===Ne?r.add(p.newValue):p.change===je&&l.add(p.oldValue):n.Gc(p.object)?s.add(p.object):p.object!==null&&(p.object!==null&&h&&h.contains(p.object)?h.get(p.object).each(function(d){n.Gc(d)&&s.add(d)}):p.object instanceof nt||n.mb(p.object)||Ik(n,p.object).each(function(d){s.add(d)})))});var a=this.el;a.clear(),r.each(function(p){a.add(n.xc(p)),e||s.add(p)});var f=this.gl;return f.clear(),l.each(function(p){f.add(n.xc(p)),e&&s.add(p)}),t=i,0<a.count&&(t+=(e?this.Tv:this.Rv)+Os(this,a.Fa(),!0)),0<s.count&&(t+=this.hy+Os(this,s.Fa(),!0)),0<f.count&&(t+=(e?this.Rv:this.Tv)+Os(this,f.Fa(),!0)),f.clear(),a.clear(),t},o.$o=function(t){(t.linkCategoryProperty!==void 0&&t.linkCategoryProperty!==this.linkCategoryProperty||t.linkKeyProperty!==void 0&&t.linkKeyProperty!==this.linkKeyProperty||t.linkFromKeyProperty!==void 0&&t.linkFromKeyProperty!==this.linkFromKeyProperty||t.linkToKeyProperty!==void 0&&t.linkToKeyProperty!==this.linkToKeyProperty||t.linkFromPortIdProperty!==void 0&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||t.linkToPortIdProperty!==void 0&&t.linkToPortIdProperty!==this.linkToPortIdProperty||t.linkLabelKeysProperty!==void 0&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||t.nodeIsGroupProperty!==void 0&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||t.nodeGroupKeyProperty!==void 0&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&R("applyIncrementalJson cannot change Model properties"),nt.prototype.$o.call(this,t);var e=t.insertedLinkKeys;if(Array.isArray(e))for(var i=e.length,n=0;n<i;n++){var r=e[n],s=this.fh(r);s===null&&(s=this.Go({}),this.Fs(s,r),this.ci(s))}if(e=t.modifiedLinkData,Array.isArray(e)){for(i=e.length,n=0;n<i;n++)if(r=e[n],s=this.xc(r),s=this.fh(s),s!==null){for(var l in r)l!=="__gohashid"&&l!==this.linkKeyProperty&&this.setDataProperty(s,l,r[l]);Bk(this,r,s)}}if(t=t.removedLinkKeys,Array.isArray(t))for(l=t.length,e=0;e<l;e++)i=this.fh(t[e]),i!==null&&this.Zl(i)},Ct.prototype.changeState=function(t,e){if(t!==null&&t.model===this){if(t.change===Qt){var i=t.object,n=t.propertyName;if(n===this.linkKeyProperty&&this.Gc(i)){var r=t.I(e);e=t.I(!e),e!==void 0&&this.wb.remove(e),r!==void 0&&this.wb.add(r,i),$t(i,n,r);return}}else if(t.change===Ne){if(i=t.newParam,t.modelChange==="linkDataArray"){t=t.newValue,xt(t)&&typeof i=="number"&&(n=this.xc(t),e?(this.Xf.remove(t),this.ed[i]===t&&this.ed.splice(i,1),n!==void 0&&this.wb.remove(n)):(this.Xf.add(t),this.ed[i]!==t&&this.ed.splice(i,0,t),n!==void 0&&this.wb.add(n,t)));return}if(t.modelChange==="linkLabelKeys"){n=this.Cf(t.object),Array.isArray(n)&&typeof i=="number"&&(e?(i=n.indexOf(t.newValue),0<=i&&n.splice(i,1)):0>n.indexOf(t.newValue)&&n.splice(i,0,t.newValue));return}}else if(t.change===je){if(i=t.oldParam,t.modelChange==="linkDataArray"){t=t.oldValue,xt(t)&&typeof i=="number"&&(n=this.xc(t),e?(this.Xf.add(t),this.ed[i]!==t&&this.ed.splice(i,0,t),n!==void 0&&this.wb.add(n,t)):(this.Xf.remove(t),this.ed[i]===t&&this.ed.splice(i,1),n!==void 0&&this.wb.remove(n)));return}if(t.modelChange==="linkLabelKeys"){n=this.Cf(t.object),Array.isArray(n)&&typeof i=="number"&&(e?0>n.indexOf(t.newValue)&&n.splice(i,0,t.newValue):(i=n.indexOf(t.newValue),0<=i&&n.splice(i,1)));return}}nt.prototype.changeState.call(this,t,e)}},o=Ct.prototype,o.Rl=function(t){if(t!==void 0){var e=this.Oi;if(e!==null){var i=this.dc(t);i===null&&(i=this.copyNodeData(e),$t(i,this.nodeKeyProperty,t),this.vf(i))}return t}},o.vx=function(t){return hn(this,t,!0)},o.sv=function(t,e){Wh(this,t,e,!0)},o.yx=function(t){return hn(this,t,!1)},o.xv=function(t,e){Wh(this,t,e,!1)};function hn(t,e,i){if(e!==null&&(t=i?t.hf:t.jf,t!==""&&(t=ae(e,t),t!==void 0))){if(As(t))return t;R((i?"FromKey":"ToKey")+" value for link data "+e+" is not a number or a string: "+t)}}function Wh(t,e,i,n){if(i===null&&(i=void 0),e!==null){var r=n?t.hf:t.jf;if(r!=="")if(i=t.Rl(i),t.Gc(e)){var s=ae(e,r);s!==i&&(mr(t,s,e),$t(e,r,i),t.dc(i)===null&&yr(t,i,e),ye(t,n?"linkFromKey":"linkToKey",Qt,r,e,s,i),typeof r=="string"&&t.Ma(e,r))}else $t(e,r,i)}}o.wx=function(t){return Xd(this,t,!0)},o.tv=function(t,e){$h(this,t,e,!0)},o.zx=function(t){return Xd(this,t,!1)},o.yv=function(t,e){$h(this,t,e,!1)};function Xd(t,e,i){return e===null||(t=i?t.cj:t.dj,t==="")?"":(e=ae(e,t),e===void 0?"":e)}function $h(t,e,i,n){if(e!==null){var r=n?t.cj:t.dj;if(r!=="")if(t.Gc(e)){var s=ae(e,r);s===void 0&&(s=""),s!==i&&($t(e,r,i),ye(t,n?"linkFromPortId":"linkToPortId",Qt,r,e,s,i),typeof r=="string"&&t.Ma(e,r))}else $t(e,r,i)}}o.Cf=function(t){if(t===null)return Kd;var e=this.fe;return e===""?Kd:(t=ae(t,e),t===void 0?Kd:t)},o.Gs=function(t,e){if(t!==null){var i=this.fe;if(i!=="")if(this.Gc(t)){var n=ae(t,i);if(n===void 0&&(n=Kd),n!==e){if(Array.isArray(n))for(var r=n.length,s=0;s<r;s++)mr(this,n[s],t);for($t(t,i,e),r=e.length,s=0;s<r;s++){var l=e[s];this.dc(l)===null&&yr(this,l,t)}ye(this,"linkLabelKeys",Qt,i,t,n,e),typeof i=="string"&&this.Ma(t,i)}}else $t(t,i,e)}},o.yu=function(t,e){if(e!=null&&t!==null){var i=this.fe;if(i!==""){var n=ae(t,i);if(n===void 0)i=[],i.push(e),this.Gs(t,i);else if(Array.isArray(n)){var r=n.indexOf(e);0<=r||(r=n.length,n.push(e),this.Gc(t)&&(this.dc(e)===null&&yr(this,e,t),ye(this,"linkLabelKeys",Ne,i,t,null,e,null,r)))}else R(i+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},o.Px=function(t,e){if(e!=null&&t!==null){var i=this.fe;if(i!==""){var n=ae(t,i);if(Array.isArray(n)){var r=n.indexOf(e);0>r||(n.splice(r,1),this.Gc(t)&&(mr(this,e,t),ye(this,"linkLabelKeys",je,i,t,e,null,r,null)))}else n!==void 0&&R(i+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},o.xc=function(t){if(t!==null){var e=this.Gh;if(e!==""&&(e=ae(t,e),e!==void 0)){if(As(e))return e;R("Key value for link data "+t+" is not a number or a string: "+e)}}},o.Fs=function(t,e){if(t!==null){var i=this.Gh;if(i!=="")if(this.Gc(t)){var n=ae(t,i);n!==e&&this.fh(e)===null&&($t(t,i,e),n!==void 0&&this.wb.remove(n),this.wb.add(e,t),ye(this,"linkKey",Qt,i,t,n,e),typeof i=="string"&&this.Ma(t,i))}else $t(t,i,e)}},o.fh=function(t){return t===null&&R("GraphLinksModel.findLinkDataForKey:key must not be null"),t!==void 0&&As(t)?this.wb.I(t):null},o.ws=function(t){if(t!==null){var e=this.Gh;if(e!==""){var i=this.xc(t);if(i===void 0||this.wb.contains(i)){var n=this.Zk;if(n!==null&&(i=n(this,t),i!=null&&!this.wb.contains(i))){$t(t,e,i);return}if(typeof i=="string"){for(n=2;this.wb.contains(i+n);)n++;$t(t,e,i+n)}else if(i===void 0||typeof i=="number"){for(i=-this.wb.count-1;this.wb.contains(i);)i--;$t(t,e,i)}}}}},o.Gc=function(t){return t===null?!1:this.Xf.contains(t)},o.ci=function(t){t!==null&&(nu(t),this.Gc(t)||Dk(this,t,!0))};function Dk(t,e,i){if(t.linkKeyProperty!==""){var n=t.xc(e);if(n!==void 0&&t.wb.I(n)===e)return;t.ws(e),n=t.xc(e),n===void 0&&R("GraphLinksModel.makeLinkDataKeyUnique failed on "+e+". Data not added to model."),t.wb.add(n,e)}t.Xf.add(e),n=null,i&&(n=t.ed.length,t.ed.splice(n,0,e)),ye(t,"linkDataArray",Ne,"linkDataArray",t,null,e,null,n),Yv(t,e)}o.Cy=function(t){if(Array.isArray(t))for(var e=t.length,i=0;i<e;i++)this.ci(t[i]);else for(t=t.iterator;t.next();)this.ci(t.value)},o.Zl=function(t){t!==null&&Rk(this,t,!0)};function Rk(t,e,i){t.Xf.remove(e);var n=t.xc(e);if(n!==void 0&&t.wb.remove(n),n=null,i){if(n=t.ed.indexOf(e),0>n)return;t.ed.splice(n,1)}if(ye(t,"linkDataArray",je,"linkDataArray",t,e,null,n,null),i=hn(t,e,!0),mr(t,i,e),i=hn(t,e,!1),mr(t,i,e),n=t.Cf(e),Array.isArray(n))for(var r=n.length,s=0;s<r;s++)i=n[s],mr(t,i,e)}o.eA=function(t){if(Array.isArray(t))for(var e=t.length,i=0;i<e;i++)this.Zl(t[i]);else for(t=t.iterator;t.next();)this.Zl(t.value)},o.Tz=function(t){if(this.linkKeyProperty===""&&R("GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed."),t!==this.linkDataArray&&Wt(t)){var e=this.gl;e.clear(),e.addAll(this.wb.iteratorKeys);var i=this.el;i.clear();for(var n=t.length,r=0;r<n;r++){var s=t[r],l=this.xc(s);if(l!==void 0){i.add(l);var h=this.fh(l);h!==s&&(h!==null?(this.Ao(h,s),Bk(this,s,h)):(s=this.cloneDeep(s),this.Fs(s,l),this.ci(s)))}else l=this.cloneDeep(s),this.ci(l),i.add(this.xc(l))}for(t=e.iterator;t.next();)n=t.value,i.contains(n)||(n=this.fh(n))&&this.Zl(n);e.clear(),i.clear()}};function Yv(t,e){var i=hn(t,e,!0);i=t.Rl(i),t.dc(i)===null&&yr(t,i,e),i=hn(t,e,!1),i=t.Rl(i),t.dc(i)===null&&yr(t,i,e);var n=t.Cf(e);if(Array.isArray(n))for(var r=n.length,s=0;s<r;s++)i=n[s],t.dc(i)===null&&yr(t,i,e)}o.Go=function(t){if(t===null)return null;var e=this.wk;return t=e!==null?e(t,this):Gd(this,t,!0),xt(t)&&(Oe(t),this.hf!==""&&$t(t,this.hf,void 0),this.jf!==""&&$t(t,this.jf,void 0),this.fe!==""&&$t(t,this.fe,[])),t},o.Wu=function(t){if(t===null)return!1;var e=this.fl;return e===""?!1:!!ae(t,e)},o.hh=function(t){if(t!==null){var e=this.Ge;if(e!==""&&(e=ae(t,e),e!==void 0)){if(As(e))return e;R("GroupKey value for node data "+t+" is not a number or a string: "+e)}}},o.hp=function(t,e){if(e===null&&(e=void 0),t!==null){var i=this.Ge;if(i!=="")if(this.mb(t)){var n=ae(t,i);n!==e&&(mr(this,n,t),$t(t,i,e),this.dc(e)===null&&yr(this,e,t),ye(this,"nodeGroupKey",Qt,i,t,n,e),typeof i=="string"&&this.Ma(t,i))}else $t(t,i,e)}},Ct.prototype.copyNodeData=function(t){return t===null?null:(t=nt.prototype.copyNodeData.call(this,t),this.Gj||this.Ge===""||ae(t,this.Ge)===void 0||$t(t,this.Ge,void 0),t)},Ct.prototype.setDataProperty=function(t,e,i){if(this.mb(t)){if(e===this.nodeKeyProperty){this.hm(t,i);return}if(e===this.nodeCategoryProperty){this.gm(t,i);return}if(e===this.nodeGroupKeyProperty){this.hp(t,i);return}}else if(this.Gc(t)){if(e===this.linkFromKeyProperty){Wh(this,t,i,!0);return}if(e===this.linkToKeyProperty){Wh(this,t,i,!1);return}if(e===this.linkFromPortIdProperty){$h(this,t,i,!0);return}if(e===this.linkToPortIdProperty){$h(this,t,i,!1);return}if(e===this.linkKeyProperty){this.Fs(t,i);return}if(e===this.linkCategoryProperty){this.gp(t,i);return}if(e===this.linkLabelKeysProperty){this.Gs(t,i);return}}var n=ae(t,e);n!==i&&($t(t,e,i),this.As(t,e,n,i))},o=Ct.prototype,o.Ao=function(t,e){if(e){var i=this.mb(t),n=this.Gc(t),r;for(r in e)r==="__gohashid"||i&&r===this.nodeKeyProperty||i&&r===this.nodeIsGroupProperty&&ae(t,r)===e[r]||n&&r===this.linkKeyProperty||this.setDataProperty(t,r,e[r])}},o.ep=function(t,e){nt.prototype.ep.call(this,t,e);for(var i=this.lb.iterator;i.next();)this.ov(i.value,t,e);for(i=this.Xf.iterator;i.next();){var n=i.value,r=t,s=e;if(hn(this,n,!0)===r){var l=this.hf;$t(n,l,s),ye(this,"linkFromKey",Qt,l,n,r,s),typeof l=="string"&&this.Ma(n,l)}if(hn(this,n,!1)===r&&(l=this.jf,$t(n,l,s),ye(this,"linkToKey",Qt,l,n,r,s),typeof l=="string"&&this.Ma(n,l)),l=this.Cf(n),Array.isArray(l))for(var h=l.length,a=this.fe,f=0;f<h;f++)l[f]===r&&(l[f]=s,ye(this,"linkLabelKeys",Ne,a,n,r,s,f,f))}},o.ov=function(t,e,i){if(this.hh(t)===e){var n=this.Ge;$t(t,n,i),ye(this,"nodeGroupKey",Qt,n,t,e,i),typeof n=="string"&&this.Ma(t,n)}},o.Hv=function(){nt.prototype.Hv.call(this);for(var t=this.linkDataArray,e=t.length,i=0;i<e;i++)Yv(this,t[i])},o.cm=function(t){nt.prototype.cm.call(this,t),t=this.va(t);var e=Yf(this,t);if(e!==null){var i=Yt();for(e=e.iterator;e.next();){var n=e.value;if(this.mb(n)){if(this.hh(n)===t){var r=this.Ge;ye(this,"nodeGroupKey",Qt,r,n,t,t),typeof r=="string"&&this.Ma(n,r),i.push(n)}}else if(hn(this,n,!0)===t&&(r=this.hf,ye(this,"linkFromKey",Qt,r,n,t,t),typeof r=="string"&&this.Ma(n,r),i.push(n)),hn(this,n,!1)===t&&(r=this.jf,ye(this,"linkToKey",Qt,r,n,t,t),typeof r=="string"&&this.Ma(n,r),i.push(n)),r=this.Cf(n),Array.isArray(r))for(var s=r.length,l=this.fe,h=0;h<s;h++)r[h]===t&&(ye(this,"linkLabelKeys",Ne,l,n,t,t,h,h),i.push(n))}for(e=0;e<i.length;e++)mr(this,t,i[e]);Vt(i)}},o.bm=function(t){nt.prototype.bm.call(this,t);var e=this.hh(t);this.dc(e)===null&&yr(this,e,t)},o.lp=function(t){nt.prototype.lp.call(this,t);var e=this.hh(t);mr(this,e,t)},o.ks=function(t){if(t===null)return"";var e=this.bj;if(e===""||(e=ae(t,e),e===void 0))return"";if(typeof e=="string")return e;R("getCategoryForLinkData found a non-string category for "+t+": "+e)},Ct.prototype.getLinkCategoryForData=function(t){return this.ks(t)},Ct.prototype.gp=function(t,e){if(t!==null){var i=this.bj;if(i!=="")if(this.Gc(t)){var n=ae(t,i);n===void 0&&(n=""),n!==e&&($t(t,i,e),ye(this,"linkCategory",Qt,i,t,n,e),typeof i=="string"&&this.Ma(t,i))}else $t(t,i,e)}},Ct.prototype.setLinkCategoryForData=function(t,e){this.gp(t,e)},o=Ct.prototype,o.im=function(t,e){nt.prototype.im.call(this,t,e),this.hp(e,this.hh(t))};function Bk(t,e,i){t.gp(i,t.ks(e)),t.sv(i,t.vx(e)),t.xv(i,t.yx(e)),t.Gs(i,t.Cf(e)),t.tv(i,t.wx(e)),t.yv(i,t.zx(e))}o.Tj=function(){return!0},o.ni=function(){return!0},o.ss=function(){return!0},o.Uj=function(){return!0},z.Object.defineProperties(Ct.prototype,{archetypeNodeData:{get:function(){return this.Oi},set:function(t){var e=this.Oi;e!==t&&(this.Oi=t,this.g("archetypeNodeData",e,t))}},linkFromKeyProperty:{get:function(){return this.hf},set:function(t){var e=this.hf;e!==t&&(this.hf=t,this.g("linkFromKeyProperty",e,t))}},linkToKeyProperty:{get:function(){return this.jf},set:function(t){var e=this.jf;e!==t&&(this.jf=t,this.g("linkToKeyProperty",e,t))}},linkFromPortIdProperty:{get:function(){return this.cj},set:function(t){var e=this.cj;e!==t&&(this.cj=t,this.g("linkFromPortIdProperty",e,t))}},linkToPortIdProperty:{get:function(){return this.dj},set:function(t){var e=this.dj;e!==t&&(this.dj=t,this.g("linkToPortIdProperty",e,t))}},linkLabelKeysProperty:{get:function(){return this.fe},set:function(t){var e=this.fe;e!==t&&(this.fe=t,this.g("linkLabelKeysProperty",e,t))}},linkDataArray:{get:function(){return this.ed},set:function(t){var e=this.ed;if(e!==t){this.wb.clear();for(var i=t.length,n=0;n<i;n++){var r=t[n];xt(r)||R("GraphLinksModel.linkDataArray must only contain Objects, not: "+r),nu(r)}if(this.ed=t,this.linkKeyProperty!==""){for(n=new tt,r=0;r<i;r++){var s=t[r],l=this.xc(s);l===void 0||this.wb.I(l)!==null?n.add(s):this.wb.add(l,s)}for(n=n.iterator;n.next();)r=n.value,this.ws(r),s=this.xc(r),s!==void 0&&this.wb.add(s,r)}for(n=new q,r=0;r<i;r++)n.add(t[r]);for(this.Xf=n,ye(this,"linkDataArray",Qt,"linkDataArray",this,e,t),e=0;e<i;e++)Yv(this,t[e])}}},linkKeyProperty:{get:function(){return this.Gh},set:function(t){var e=this.Gh;if(e!==t){this.Gh=t,this.wb.clear();for(var i=this.linkDataArray.length,n=0;n<i;n++){var r=this.linkDataArray[n],s=this.xc(r);s===void 0&&(this.ws(r),s=this.xc(r)),s!==void 0&&this.wb.add(s,r)}this.g("linkKeyProperty",e,t)}}},makeUniqueLinkKeyFunction:{get:function(){return this.Zk},set:function(t){var e=this.Zk;e!==t&&(this.Zk=t,this.g("makeUniqueLinkKeyFunction",e,t))}},copyLinkDataFunction:{get:function(){return this.wk},set:function(t){var e=this.wk;e!==t&&(this.wk=t,this.g("copyLinkDataFunction",e,t))}},nodeIsGroupProperty:{get:function(){return this.fl},set:function(t){var e=this.fl;e!==t&&(this.fl=t,this.g("nodeIsGroupProperty",e,t))}},nodeGroupKeyProperty:{get:function(){return this.Ge},set:function(t){var e=this.Ge;e!==t&&(this.Ge=t,this.g("nodeGroupKeyProperty",e,t))}},Gj:{get:function(){return this.Im},set:function(t){this.Im!==t&&(this.Im=t)}},linkCategoryProperty:{get:function(){return this.bj},set:function(t){var e=this.bj;e!==t&&(this.bj=t,this.g("linkCategoryProperty",e,t))}},type:{get:function(){return"GraphLinksModel"}}}),Ct.prototype.setCategoryForLinkData=Ct.prototype.gp,Ct.prototype.getCategoryForLinkData=Ct.prototype.ks,Ct.prototype.assignAllDataProperties=Ct.prototype.Ao,Ct.prototype.setGroupKeyForNodeData=Ct.prototype.hp,Ct.prototype.getGroupKeyForNodeData=Ct.prototype.hh,Ct.prototype.isGroupForNodeData=Ct.prototype.Wu,Ct.prototype.copyLinkData=Ct.prototype.Go,Ct.prototype.mergeLinkDataArray=Ct.prototype.Tz,Ct.prototype.removeLinkDataCollection=Ct.prototype.eA,Ct.prototype.removeLinkData=Ct.prototype.Zl,Ct.prototype.addLinkDataCollection=Ct.prototype.Cy,Ct.prototype.addLinkData=Ct.prototype.ci,Ct.prototype.containsLinkData=Ct.prototype.Gc,Ct.prototype.makeLinkDataKeyUnique=Ct.prototype.ws,Ct.prototype.findLinkDataForKey=Ct.prototype.fh,Ct.prototype.setKeyForLinkData=Ct.prototype.Fs,Ct.prototype.getKeyForLinkData=Ct.prototype.xc,Ct.prototype.removeLabelKeyForLinkData=Ct.prototype.Px,Ct.prototype.addLabelKeyForLinkData=Ct.prototype.yu,Ct.prototype.setLabelKeysForLinkData=Ct.prototype.Gs,Ct.prototype.getLabelKeysForLinkData=Ct.prototype.Cf,Ct.prototype.setToPortIdForLinkData=Ct.prototype.yv,Ct.prototype.getToPortIdForLinkData=Ct.prototype.zx,Ct.prototype.setFromPortIdForLinkData=Ct.prototype.tv,Ct.prototype.getFromPortIdForLinkData=Ct.prototype.wx,Ct.prototype.setToKeyForLinkData=Ct.prototype.xv,Ct.prototype.getToKeyForLinkData=Ct.prototype.yx,Ct.prototype.setFromKeyForLinkData=Ct.prototype.sv,Ct.prototype.getFromKeyForLinkData=Ct.prototype.vx,Ct.prototype.clear=Ct.prototype.clear;var Kd=Object.freeze([]);Ct.className="GraphLinksModel",bn.GraphLinksModel=Ct,nt.constructGraphLinksModel=nt.constructGraphLinksModel=function(){return new Ct},nt.initDiagramModel=Vv=function(){return new Ct};function Pi(t,e){nt.call(this),this.He="parent",this.Km=!1,this.lj="parentLinkCategory",t!==void 0&&(Wt(t)?this.nodeDataArray=t:e=t),e&&(Object.assign(this,e),t=e.Changed)&&(delete this.Changed,this.Me(t))}B(Pi,nt),Pi.constructGraphLinksModel=nt.constructGraphLinksModel,Pi.prototype.cloneProtected=function(t){nt.prototype.cloneProtected.call(this,t),t.He=this.He,t.Km=this.Km,t.lj=this.lj},o=Pi.prototype,o.toString=function(t){if(t===void 0&&(t=0),2<=t)return this.ip();var e=(this.name!==""?this.name:"")+" TreeModel";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;for(var i=t.length,n=0;n<i;n++){var r=t[n];e+=" "+this.va(r)+":"+Gi(r)}}return e},o.om=function(){var t=nt.prototype.om.call(this),e="";return this.nodeParentKeyProperty!=="parent"&&typeof this.nodeParentKeyProperty=="string"&&(e+=`,
  "nodeParentKeyProperty": `+this.quote(this.nodeParentKeyProperty)),t+e},o.ap=function(t){nt.prototype.ap.call(this,t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)},o.$o=function(t){t.nodeParentKeyProperty!==void 0&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&R("applyIncrementalJson cannot change Model properties"),nt.prototype.$o.call(this,t)},o.Rl=function(t){return t},o.ih=function(t){if(t!==null){var e=this.He;if(e!==""&&(e=ae(t,e),e!==void 0)){if(As(e))return e;R("ParentKey value for node data "+t+" is not a number or a string: "+e)}}},o.ne=function(t,e){if(e===null&&(e=void 0),t!==null){var i=this.He;if(i!=="")if(e=this.Rl(e),this.mb(t)){var n=ae(t,i);n!==e&&(mr(this,n,t),$t(t,i,e),this.dc(e)===null&&yr(this,e,t),ye(this,"nodeParentKey",Qt,i,t,n,e),typeof i=="string"&&this.Ma(t,i))}else $t(t,i,e)}},o.ns=function(t){if(t===null)return"";var e=this.lj;return e===""||(e=ae(t,e),e===void 0)?"":typeof e=="string"?e:(R("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+e),"")},Pi.prototype.getLinkCategoryForData=function(t){return this.ns(t)},Pi.prototype.Hs=function(t,e){if(t!==null){var i=this.lj;if(i!=="")if(this.mb(t)){var n=ae(t,i);n===void 0&&(n=""),n!==e&&($t(t,i,e),ye(this,"parentLinkCategory",Qt,i,t,n,e),typeof i=="string"&&this.Ma(t,i))}else $t(t,i,e)}},Pi.prototype.setLinkCategoryForData=function(t,e){this.Hs(t,e)},Pi.prototype.copyNodeData=function(t){return t===null?null:(t=nt.prototype.copyNodeData.call(this,t),this.Hj||this.He===""||ae(t,this.He)===void 0||$t(t,this.He,void 0),t)},Pi.prototype.setDataProperty=function(t,e,i){if(this.mb(t)){if(e===this.nodeKeyProperty){this.hm(t,i);return}if(e===this.nodeCategoryProperty){this.gm(t,i);return}if(e===this.nodeParentKeyProperty){this.ne(t,i);return}}var n=ae(t,e);n!==i&&($t(t,e,i),this.As(t,e,n,i))},o=Pi.prototype,o.ep=function(t,e){nt.prototype.ep.call(this,t,e);for(var i=this.lb.iterator;i.next();)this.ov(i.value,t,e)},o.ov=function(t,e,i){if(this.ih(t)===e){var n=this.He;$t(t,n,i),ye(this,"nodeParentKey",Qt,n,t,e,i),typeof n=="string"&&this.Ma(t,n)}},o.cm=function(t){nt.prototype.cm.call(this,t),t=this.va(t);var e=Yf(this,t);if(e!==null){var i=Yt();for(e=e.iterator;e.next();){var n=e.value;if(this.mb(n)&&this.ih(n)===t){var r=this.He;ye(this,"nodeParentKey",Qt,r,n,t,t),typeof r=="string"&&this.Ma(n,r),i.push(n)}}for(e=0;e<i.length;e++)mr(this,t,i[e]);Vt(i)}},o.bm=function(t){nt.prototype.bm.call(this,t);var e=this.ih(t);e=this.Rl(e),this.dc(e)===null&&yr(this,e,t)},o.lp=function(t){nt.prototype.lp.call(this,t);var e=this.ih(t);mr(this,e,t)},o.im=function(t,e){nt.prototype.im.call(this,t,e),this.Hs(e,this.ns(t)),this.ne(e,this.ih(t))},o.Pl=function(){return!0},o.ss=function(){return!0},z.Object.defineProperties(Pi.prototype,{nodeParentKeyProperty:{get:function(){return this.He},set:function(t){var e=this.He;e!==t&&(this.He=t,this.g("nodeParentKeyProperty",e,t))}},Hj:{get:function(){return this.Km},set:function(t){this.Km!==t&&(this.Km=t)}},parentLinkCategoryProperty:{get:function(){return this.lj},set:function(t){var e=this.lj;e!==t&&(this.lj=t,this.g("parentLinkCategoryProperty",e,t))}},linkCategoryProperty:{get:function(){return this.parentLinkCategoryProperty},set:function(t){this.parentLinkCategoryProperty=t}},type:{get:function(){return"TreeModel"}}}),Pi.prototype.setParentLinkCategoryForNodeData=Pi.prototype.Hs,Pi.prototype.getParentLinkCategoryForNodeData=Pi.prototype.ns,Pi.prototype.setParentKeyForNodeData=Pi.prototype.ne,Pi.prototype.getParentKeyForNodeData=Pi.prototype.ih,Pi.className="TreeModel",bn.TreeModel=Pi;function qt(t){Jt.call(this),this.hw=this.Wm=this.hc=0,this.Qp=360,this.gw=tr,this.Qi=0,this.Vv=new P,this.Ep=this.ie=0,this.Rr=new Wf,this.at=this.kj=0,this.sy=600,this.ao=NaN,this.zm=1,this.oo=0,this.ql=360,this.Mb=tr,this.K=Ci,this.fd=Zh,this.ad=Av,this.rf=6,this.Kn=bd,t&&Object.assign(this,t)}B(qt,Jt),qt.prototype.cloneProtected=function(t){Jt.prototype.cloneProtected.call(this,t),t.ao=this.ao,t.zm=this.zm,t.oo=this.oo,t.ql=this.ql,t.Mb=this.Mb,t.K=this.K,t.fd=this.fd,t.ad=this.ad,t.rf=this.rf,t.Kn=this.Kn},qt.prototype.rb=function(t){t.classType===qt?t===Qd||t===qd||t===Jd||t===Zd||t===Zh?this.sorting=t:t===Nl||t===Jh||t===Ci||t===Ds?this.direction=t:t===rs||t===Is||t===tr||t===er?this.arrangement=t:(t===Pu||t===bd)&&(this.nodeDiameterFormula=t):Jt.prototype.rb.call(this,t)},qt.prototype.createNetwork=function(){return new Qh(this)},qt.prototype.doLayout=function(t){if(this.network===null&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),t=this.network.vertexes,1>=t.count)t.count===1&&(t=t.first(),t.centerX=0,t.centerY=0);else{var e=new tt;e.addAll(t.iterator),t=new tt;var i=new tt,n=this.sort(e),r,s,l=this.Ep,h=this.arrangement,a=this.nodeDiameterFormula,f=this.radius;(!isFinite(f)||0>=f)&&(f=NaN);var p=this.aspectRatio;(!isFinite(p)||0>=p)&&(p=1);var d=this.startAngle;isFinite(d)||(d=0);var y=this.sweepAngle;if((!isFinite(y)||360<y||1>y)&&(y=360),e=this.spacing,isFinite(e)||(e=NaN),h===er&&a===Pu?h=tr:h===er&&a!==Pu&&(h=this.arrangement),(this.direction===Nl||this.direction===Jh)&&this.sorting!==Zh){for(a=0;!(a>=n.length)&&(t.add(n.L(a)),!(a+1>=n.length));a+=2)i.add(n.L(a+1));this.direction===Nl?(this.arrangement===er&&t.reverse(),n=new tt,n.addAll(t),n.addAll(i)):(this.arrangement===er&&i.reverse(),n=new tt,n.addAll(i),n.addAll(t))}a=n.length;for(var x=s=r=0;x<n.length;x++){var v=d+y*s*(this.direction===Ci?1:-1)/a,S=n.L(x).diameter;isNaN(S)&&(S=Rs(n.L(x),v)),360>y&&(x===0||x===n.length-1)&&(S/=2),r+=S,s++}if(isNaN(f)||h===er){if(isNaN(e)&&(e=6),h!==tr&&h!==er){for(s=-1/0,l=0;l<a;l++)x=n.L(l),r=n.L(l===a-1?0:l+1),isNaN(x.diameter)&&Rs(x,0),isNaN(r.diameter)&&Rs(r,0),s=Math.max(s,(x.diameter+r.diameter)/2);l=s+e,h===rs?f=(s+e)/(2*Math.PI/a):f=Wd(this,l*(360<=y?a:a-1),p,d*Math.PI/180,y*Math.PI/180)}else f=Wd(this,r+(360<=y?a:a-1)*(h!==er?e:1.6*e),p,d*Math.PI/180,y*Math.PI/180);s=f*p}else if(s=f*p,x=Hv(this,f,s,d*Math.PI/180,y*Math.PI/180),isNaN(e))(h===tr||h===er)&&(e=(x-r)/(360<=y?a:a-1));else if(h===tr||h===er)x=(x-r)/(360<=y?a:a-1),x<e?(f=Wd(this,r+e*(360<=y?a:a-1),p,d*Math.PI/180,y*Math.PI/180),s=f*p):e=x;else{for(l=-1/0,r=0;r<a;r++)v=n.L(r),S=n.L(r===a-1?0:r+1),isNaN(v.diameter)&&Rs(v,0),isNaN(S.diameter)&&Rs(S,0),l=Math.max(l,(v.diameter+S.diameter)/2);l+=e,r=Wd(this,l*(360<=y?a:a-1),p,d*Math.PI/180,y*Math.PI/180),r>f?(f=r,s=f*p):l=x/(360<=y?a:a-1)}if(this.gw=h,this.hc=f,this.Wm=p,this.hw=d,this.Qp=y,this.Qi=e,this.ie=s,this.Ep=l,e=n,n=this.gw,h=this.hc,f=this.hw,p=this.Qp,d=this.Qi,y=this.ie,a=this.Ep,this.direction!==Nl&&this.direction!==Jh||n!==er)if(this.direction===Nl||this.direction===Jh){switch(l=0,n){case Is:l=180*$d(this,h,y,f,a)/Math.PI;break;case tr:a=e=0,l=t.first(),l!==null&&(e=Rs(l,Math.PI/2)),l=i.first(),l!==null&&(a=Rs(l,Math.PI/2)),l=180*$d(this,h,y,f,d+(e+a)/2)/Math.PI;break;case rs:l=p/e.length}if(this.direction===Nl){switch(n){case Is:Kf(this,t,f,Ds);break;case tr:Xf(this,t,f,Ds);break;case rs:Gf(this,t,p/2,f,Ds)}switch(n){case Is:Kf(this,i,f+l,Ci);break;case tr:Xf(this,i,f+l,Ci);break;case rs:Gf(this,i,p/2,f+l,Ci)}}else{switch(n){case Is:Kf(this,i,f,Ds);break;case tr:Xf(this,i,f,Ds);break;case rs:Gf(this,i,p/2,f,Ds)}switch(n){case Is:Kf(this,t,f+l,Ci);break;case tr:Xf(this,t,f+l,Ci);break;case rs:Gf(this,t,p/2,f+l,Ci)}}}else switch(n){case Is:Kf(this,e,f,this.direction);break;case tr:Xf(this,e,f,this.direction);break;case rs:Gf(this,e,p,f,this.direction);break;case er:zk(this,e,p,f,this.direction)}else zk(this,e,p,f-p/2,Ci)}this.updateParts(),this.network=null,this.isValidLayout=!0};function Gf(t,e,i,n,r){var s=t.Qp,l=t.hc;t=t.ie,n=n*Math.PI/180,i=i*Math.PI/180;for(var h=e.length,a=0;a<h;a++){var f=n+(r===Ci?a*i/(360<=s?h:h-1):-(a*i)/h),p=e.L(a),d=l*Math.tan(f)/t;d=Math.sqrt((l*l+t*t*d*d)/(1+d*d)),p.centerX=d*Math.cos(f),p.centerY=d*Math.sin(f),p.actualAngle=180*f/Math.PI}}function Xf(t,e,i,n){var r=t.hc,s=t.ie,l=t.Qi;i=i*Math.PI/180;for(var h=e.length,a=0;a<h;a++){var f=e.L(a),p=e.L(a===h-1?0:a+1),d=s*Math.sin(i);f.centerX=r*Math.cos(i),f.centerY=d,f.actualAngle=180*i/Math.PI,isNaN(f.diameter)&&Rs(f,0),isNaN(p.diameter)&&Rs(p,0),f=$d(t,r,s,n===Ci?i:-i,(f.diameter+p.diameter)/2+l),i+=n===Ci?f:-f}}function Kf(t,e,i,n){var r=t.hc,s=t.ie,l=t.Ep;i=i*Math.PI/180;for(var h=e.length,a=0;a<h;a++){var f=e.L(a);f.centerX=r*Math.cos(i),f.centerY=s*Math.sin(i),f.actualAngle=180*i/Math.PI,f=$d(t,r,s,n===Ci?i:-i,l),i+=n===Ci?f:-f}}function zk(t,e,i,n,r){var s=t.Qp;if(t.kj=0,t.Rr=new Wf,360>i){for(s=n+(r===Ci?s:-s);0>s;)s+=360;s%=360,180<s&&(s-=360),s*=Math.PI/180,t.at=s,Uk(t,e,i,n,r)}else Vk(t,e,i,n,r);t.Rr.commit(e)}function Vk(t,e,i,n,r){var s=t.hc,l=t.Qi,h=t.Wm,a=s*Math.cos(n*Math.PI/180),f=t.ie*Math.sin(n*Math.PI/180),p=e.Fa();if(p.length===3)p[0].centerX=s,p[0].centerY=0,p[1].centerX=p[0].centerX-p[0].width/2-p[1].width/2-l,p[1].y=p[0].y,p[2].centerX=(p[0].centerX+p[1].centerX)/2,p[2].y=p[0].y-p[2].height-l;else if(p.length===4)p[0].centerX=s,p[0].centerY=0,p[2].centerX=-p[0].centerX,p[2].centerY=p[0].centerY,p[1].centerX=0,p[1].y=Math.min(p[0].y,p[2].y)-p[1].height-l,p[3].centerX=0,p[3].y=Math.max(p[0].y+p[0].height+l,p[2].y+p[2].height+l);else{s=P.alloc();for(var d=0;d<p.length&&(p[d].centerX=a,p[d].centerY=f,!(d>=p.length-1));d++)Yk(t,a,f,p,d,r,s)||Hk(t,a,f,p,d,r,s),a=s.x,f=s.y;if(P.free(s),t.kj++,!(23<t.kj)){a=p[0].centerX,f=p[0].centerY,s=p[p.length-1].centerX,d=p[p.length-1].centerY;var y=Math.abs(a-s)-((p[0].width+p[p.length-1].width)/2+l),x=Math.abs(f-d)-((p[0].height+p[p.length-1].height)/2+l);l=0,1>Math.abs(x)?Math.abs(a-s)<(p[0].width+p[p.length-1].width)/2&&(l=0):l=0<x?x:1>Math.abs(y)?0:y,a=Math.abs(s)>Math.abs(d)?0<s!=f>d:0<d!=a<s,(a=r===Ci?a:!a)&&(l=-Math.abs(l),l=Math.min(l,-p[p.length-1].width),l=Math.min(l,-p[p.length-1].height)),t.Rr.compare(l,p),1<Math.abs(l)&&(t.hc=8>t.kj?t.hc-l/(2*Math.PI):5>p.length&&10<l?t.hc/2:t.hc-(0<l?1.7:-2.3),t.ie=t.hc*h,Vk(t,e,i,n,r))}}}function Uk(t,e,i,n,r){for(var s=t.hc,l=t.ie,h=t.Wm,a=s*Math.cos(n*Math.PI/180),f=l*Math.sin(n*Math.PI/180),p=P.alloc(),d=e.Fa(),y=0;y<d.length&&(d[y].centerX=a,d[y].centerY=f,!(y>=d.length-1));y++)Yk(t,a,f,d,y,r,p)||Hk(t,a,f,d,y,r,p),a=p.x,f=p.y;if(P.free(p),t.kj++,!(23<t.kj)){if(a=Math.atan2(f,a),a=r===Ci?t.at-a:a-t.at,a=Math.abs(a)<Math.abs(a-2*Math.PI)?a:a-2*Math.PI,s=a*(s+l)/2,l=t.Rr,Math.abs(s)<Math.abs(l.Kl))for(l.Kl=s,l.ik=[],l.qm=[],a=0;a<d.length;a++)l.ik[a]=d[a].bounds.x,l.qm[a]=d[a].bounds.y;1<Math.abs(s)&&(t.hc=8>t.kj?t.hc-s/(2*Math.PI):t.hc-(0<s?1.7:-2.3),t.ie=t.hc*h,Uk(t,e,i,n,r))}}function Yk(t,e,i,n,r,s,l){var h=t.hc,a=t.ie,f=0;t=(n[r].width+n[r+1].width)/2+t.Qi;var p=!1;if(0<=i!=(s===Ci)){if(s=e+t,s>h){if(s=e-t,s<-h)return l.x=s,l.y=f,!1;p=!0}}else if(s=e-t,s<-h){if(s=e+t,s>h)return l.x=s,l.y=f,!1;p=!0}return f=Math.sqrt(1-Math.min(1,s*s/(h*h)))*a,0>i!==p&&(f=-f),Math.abs(i-f)>(n[r].height+n[r+1].height)/2?(l.x=s,l.y=f,!1):(l.x=s,l.y=f,!0)}function Hk(t,e,i,n,r,s,l){var h=t.hc,a=t.ie,f=0;if(t=(n[r].height+n[r+1].height)/2+t.Qi,n=!1,0<=e!=(s===Ci)){if(s=i-t,s<-a){if(s=i+t,s>a){l.x=f,l.y=s;return}n=!0}}else if(s=i+t,s>a){if(s=i-t,s<-a){l.x=f,l.y=s;return}n=!0}f=Math.sqrt(1-Math.min(1,s*s/(a*a)))*h,0>e!==n&&(f=-f),l.x=f,l.y=s}qt.prototype.commitLayout=function(){this.commitNodes(),this.isRouting&&this.commitLinks()},qt.prototype.commitNodes=function(){var t=this.group!==null&&this.group.placeholder!==null&&this.group.isSubGraphExpanded,e=t?this.group.location.copy():null,i=this.actualCenter;t?i=new P(0,0):(i.x=this.arrangementOrigin.x+this.hc,i.y=this.arrangementOrigin.y+this.ie);for(var n=this.network.vertexes.iterator;n.next();){var r=n.value;r.x+=i.x,r.y+=i.y,r.commit()}t&&(this.group.Va(),t=this.group.position.copy(),i=this.group.location.copy(),e=e.oe(i.oe(t)),this.group.move(e),this.Vv=e.oe(t))},qt.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()};function Hv(t,e,i,n,r){var s=t.sy;if(.001>Math.abs(t.Wm-1))return n!==void 0&&r!==void 0?r*e:2*Math.PI*e;t=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i;for(var l=0,h=n!==void 0&&r!==void 0?r/(s+1):Math.PI/(2*(s+1)),a=0,f=0;f<=s;f++){n!==void 0&&r!==void 0?a=n+f*r/s:a=f*Math.PI/(2*s);var p=Math.sin(a);l+=Math.sqrt(1-t*t*p*p)*h}return n!==void 0&&r!==void 0?(e>i?e:i)*l:4*(e>i?e:i)*l}function Wd(t,e,i,n,r){return e/(n!==void 0&&r!==void 0?Hv(t,1,i,n,r):Hv(t,1,i))}function $d(t,e,i,n,r){if(.001>Math.abs(t.Wm-1))return r/e;var s=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i,l=0;t=2*Math.PI/(700*t.network.vertexes.count),e>i&&(n+=Math.PI/2);for(var h=0;;h++){var a=Math.sin(n+h*t);if(l+=(e>i?e:i)*Math.sqrt(1-s*s*a*a)*t,l>=r)return h*t}}qt.prototype.sort=function(t){switch(this.sorting){case Jd:break;case Zd:t.reverse();break;case Qd:t.sort(this.comparer);break;case qd:t.sort(this.comparer),t.reverse();break;case Zh:return this.Yj(kj(t));default:R("Invalid sorting type.")}return t};function kj(t){for(var e=[],i=0;i<t.length;i++)e.push(0);i=new tt;for(var n=0;n<t.length;n++){var r=-1,s=-1;if(n===0)for(var l=0;l<t.length;l++){var h=t.L(l).edgesCount;h>r&&(r=h,s=l)}else for(l=0;l<t.length;l++)h=e[l],h>r&&(r=h,s=l);for(i.add(t.L(s)),e[s]=-1,s=t.L(s),l=s.sourceEdges;l.next();)r=t.indexOf(l.value.fromVertex),0>r||0<=e[r]&&e[r]++;for(s=s.destinationEdges;s.next();)r=t.indexOf(s.value.toVertex),0>r||0<=e[r]&&e[r]++}return i}qt.prototype.Yj=function(t){for(var e=[],i=0;i<t.length;i++){var n=t.L(i);e[i]=[];for(var r,s=n.destinationEdges;s.next();)r=t.indexOf(s.value.toVertex),r!==i&&0>e[i].indexOf(r)&&e[i].push(r);for(n=n.sourceEdges;n.next();)r=t.indexOf(n.value.fromVertex),r!==i&&0>e[i].indexOf(r)&&e[i].push(r)}for(s=[],i=0;i<e.length;i++)s[i]=0;i=[];var l=[],h=[];n=[],r=new tt;for(var a=0,f=0;f<e.length;f++){var p=e[f].length;if(p===1)n.push(f);else if(p===0)r.add(t.L(f));else{if(a===0)i.push(f);else{for(var d=p=1/0,y=-1,x=[],v=0;v<i.length;v++)0>e[i[v]].indexOf(i[v===i.length-1?0:v+1])&&x.push(v===i.length-1?0:v+1);if(x.length===0)for(v=0;v<i.length;v++)x.push(v);for(v=0;v<x.length;v++){for(var S=x[v],N=e[f],k=0,C=0;C<l.length;C++){var T=s[l[C]],L=s[h[C]];if(T<L){var E=T;T=L}else E=L;if(E<S&&S<=T)for(L=0;L<N.length;L++){var I=N[L];0>i.indexOf(I)||E<s[I]&&s[I]<T||E===s[I]||T===s[I]||k++}else for(L=0;L<N.length;L++)I=N[L],0>i.indexOf(I)||E<s[I]&&s[I]<T&&E!==s[I]&&T!==s[I]&&k++}for(N=k,C=k=0;C<e[f].length;C++)E=i.indexOf(e[f][C]),0<=E&&(E=Math.abs(S-(E>=S?E+1:E)),k+=E<i.length+1-E?E:i.length+1-E);for(C=0;C<l.length;C++)E=s[l[C]],T=s[h[C]],E>=S&&E++,T>=S&&T++,E>T&&(L=T,T=E,E=L),T-E<(i.length+2)/2==(E<S&&S<=T)&&k++;(N<p||N===p&&k<d)&&(p=N,d=k,y=S)}for(i.splice(y,0,f),p=0;p<i.length;p++)s[i[p]]=p;for(p=0;p<e[f].length;p++)d=e[f][p],0<=i.indexOf(d)&&(l.push(f),h.push(d))}a++}}for(l=i.length;;){for(s=!0,h=0;h<n.length;h++)if(a=n[h],f=e[a][0],p=i.indexOf(f),0<=p){for(y=d=0;y<e[f].length;y++)x=i.indexOf(e[f][y]),0>x||x===p||(v=x>p?x-p:p-x,d+=x<p!=v>l-v?1:-1);i.splice(0>d?p:p+1,0,a),n.splice(h,1),h--}else s=!1;if(s)break;i.push(n[0]),n.splice(0,1)}for(e=0;e<i.length;e++)r.add(t.L(i[e]));return r},z.Object.defineProperties(qt.prototype,{radius:{get:function(){return this.ao},set:function(t){this.ao!==t&&(0<t||isNaN(t))&&(this.ao=t,this.D())}},aspectRatio:{get:function(){return this.zm},set:function(t){this.zm!==t&&0<t&&(this.zm=t,this.D())}},startAngle:{get:function(){return this.oo},set:function(t){this.oo!==t&&(this.oo=t,this.D())}},sweepAngle:{get:function(){return this.ql},set:function(t){this.ql!==t&&(0<t&&360>=t?this.ql=t:this.ql=360,this.D())}},arrangement:{get:function(){return this.Mb},set:function(t){this.Mb===t||t!==er&&t!==tr&&t!==Is&&t!==rs||(this.Mb=t,this.D())}},direction:{get:function(){return this.K},set:function(t){this.K===t||t!==Ci&&t!==Ds&&t!==Nl&&t!==Jh||(this.K=t,this.D())}},sorting:{get:function(){return this.fd},set:function(t){this.fd===t||t!==Jd&&t!==Zd&&t!==Qd&&!qd&&t!==Zh||(this.fd=t,this.D())}},comparer:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.ad=t,this.D())}},spacing:{get:function(){return this.rf},set:function(t){this.rf!==t&&(this.rf=t,this.D())}},nodeDiameterFormula:{get:function(){return this.Kn},set:function(t){this.Kn===t||t!==bd&&t!==Pu||(this.Kn=t,this.D())}},actualXRadius:{get:function(){return this.hc}},actualYRadius:{get:function(){return this.ie}},actualSpacing:{get:function(){return this.Qi}},actualCenter:{get:function(){return this.Vv}}});var tr=new Q(qt,"ConstantSpacing",0),Is=new Q(qt,"ConstantDistance",1),rs=new Q(qt,"ConstantAngle",2),er=new Q(qt,"Packed",3),Ci=new Q(qt,"Clockwise",4),Ds=new Q(qt,"Counterclockwise",5),Nl=new Q(qt,"BidirectionalLeft",6),Jh=new Q(qt,"BidirectionalRight",7),Jd=new Q(qt,"Forwards",8),Zd=new Q(qt,"Reverse",9),Qd=new Q(qt,"Ascending",10),qd=new Q(qt,"Descending",11),Zh=new Q(qt,"Optimized",12),bd=new Q(qt,"Pythagorean",13),Pu=new Q(qt,"Circular",14);qt.className="CircularLayout",qt.ConstantSpacing=tr,qt.ConstantDistance=Is,qt.ConstantAngle=rs,qt.Packed=er,qt.Clockwise=Ci,qt.Counterclockwise=Ds,qt.BidirectionalLeft=Nl,qt.BidirectionalRight=Jh,qt.Forwards=Jd,qt.Reverse=Zd,qt.Ascending=Qd,qt.Descending=qd,qt.Optimized=Zh,qt.Pythagorean=bd,qt.Circular=Pu;function Wf(){this.Kl=-1/0,this.qm=this.ik=null}Wf.prototype.compare=function(t,e){if(0<t&&0>this.Kl||Math.abs(t)<Math.abs(this.Kl)&&!(0>t&&0<this.Kl))for(this.Kl=t,this.ik=[],this.qm=[],t=0;t<e.length;t++)this.ik[t]=e[t].bounds.x,this.qm[t]=e[t].bounds.y},Wf.prototype.commit=function(t){if(this.ik!==null&&this.qm!==null)for(var e=0;e<this.ik.length;e++){var i=t.L(e);i.x=this.ik[e],i.y=this.qm[e]}},Wf.className="VertexArrangement";function Qh(t){Xt.call(this,t)}B(Qh,Xt),Qh.prototype.createVertex=function(){return new $f(this)},Qh.prototype.createEdge=function(){return new tg(this)},Qh.className="CircularNetwork";function $f(t){we.call(this,t),this.u=this.Pi=NaN}B($f,we);function Rs(t,e){var i=t.network;if(i===null)return NaN;if(i=i.layout,i===null)return NaN;if(i.arrangement===er)if(i.nodeDiameterFormula===Pu)t.Pi=Math.max(t.width,t.height);else{if(i=Math.abs(Math.sin(e)),e=Math.abs(Math.cos(e)),i===0)return t.width;if(e===0)return t.height;t.Pi=Math.min(t.height/i,t.width/e)}else t.Pi=i.nodeDiameterFormula===Pu?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.Pi}z.Object.defineProperties($f.prototype,{diameter:{get:function(){return this.Pi},set:function(t){this.Pi!==t&&(this.Pi=t)}},actualAngle:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}}}),$f.className="CircularVertex";function tg(t){Wi.call(this,t)}B(tg,Wi),tg.className="CircularEdge";function He(t){Jt.call(this),this.Xg=null,this.xn=0,this.Wd=new pt(100,100).freeze(),this.ym=!1,this.qf=!0,this.od=!1,this.$k=100,this.Xm=1,this.Wf=1e3,this.Fn=10,this.bo=Math,this.Dk=.05,this.Ck=50,this.Ak=150,this.Bk=0,this.Sm=10,this.Rm=5,t&&Object.assign(this,t)}B(He,Jt),He.prototype.cloneProtected=function(t){Jt.prototype.cloneProtected.call(this,t),t.Wd.assign(this.Wd),t.ym=this.ym,t.qf=this.qf,t.od=this.od,t.$k=this.$k,t.Xm=this.Xm,t.Wf=this.Wf,t.Fn=this.Fn,t.bo=this.bo,t.Dk=this.Dk,t.Ck=this.Ck,t.Ak=this.Ak,t.Bk=this.Bk,t.Sm=this.Sm,t.Rm=this.Rm},He.prototype.createNetwork=function(){return new Cu(this)},He.prototype.doLayout=function(t){if(this.network===null&&(this.network=this.makeNetwork(t)),t=this.maxIterations,0<this.network.vertexes.count){this.network.Ho();for(var e=this.network.vertexes.iterator;e.next();){var i=e.value;i.charge=this.electricalCharge(i),i.mass=this.gravitationalMass(i)}for(e=this.network.edges.iterator;e.next();)i=e.value,i.stiffness=this.springStiffness(i),i.length=this.springLength(i);if(this.zu(),this.xn=0,this.needsClusterLayout()){e=this.network,i=e.Yx();for(var n=i.iterator;n.next();){this.network=n.value;for(var r=this.network.vertexes.iterator;r.next();){var s=r.value;s.Rd=s.vertexes.count,s.oh=1,s.Fj=null,s.Te=null}_k(this,0,t)}this.network=e;var l=n=i.iterator;n=this.arrangementSpacing;var h=l.count,a=!0;s=r=0;for(var f=Yt(),p=0;p<h+e.vertexes.count+2;p++)f[p]=null;h=0,l.reset();for(var d=V.alloc();l.next();)if(p=l.value,this.computeBounds(p,d),a)a=!1,r=d.x+d.width/2,s=d.y+d.height/2,f[0]=new P(d.x+d.width+n.width,d.y),f[1]=new P(d.x,d.y+d.height+n.height),h=2;else{var y=Gk(f,h,r,s,d.width,d.height,n),x=f[y],v=new P(x.x+d.width+n.width,x.y),S=new P(x.x,x.y+d.height+n.height);for(y+1<h&&f.splice(y+1,0,null),f[y]=v,f[y+1]=S,h++,y=x.x-d.x,x=x.y-d.y,p=p.vertexes.iterator;p.next();)v=p.value,v.centerX+=y,v.centerY+=x}for(V.free(d),p=e.vertexes.iterator;p.next();)l=p.value,y=l.bounds,2>h?(r=y.x+y.width/2,s=y.y+y.height/2,f[0]=new P(y.x+y.width+n.width,y.y),f[1]=new P(y.x,y.y+y.height+n.height),h=2):(a=Gk(f,h,r,s,y.width,y.height,n),d=f[a],x=new P(d.x+y.width+n.width,d.y),y=new P(d.x,d.y+y.height+n.height),a+1<h&&f.splice(a+1,0,null),f[a]=x,f[a+1]=y,h++,l.centerX=d.x+l.width/2,l.centerY=d.y+l.height/2);for(Vt(f),n=i.iterator;n.next();){for(i=n.value,r=i.vertexes.iterator;r.next();)e.Zg(r.value);for(i=i.edges.iterator;i.next();)e.yo(i.value)}}Kk(this,t),this.updateParts()}this.$k=t,this.network=null,this.isValidLayout=!0},He.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,e=0,i=this.network.vertexes.first().bounds,n=this.network.vertexes.iterator;n.next();){if(n.value.bounds.Tc(i)&&(t++,2<t))return!0;if(10<e)break;e++}return!1},He.prototype.computeBounds=function(t,e){var i=!0;for(t=t.vertexes.iterator;t.next();){var n=t.value;i?(i=!1,e.set(n.bounds)):e.Zc(n.bounds)}return e};function _k(t,e,i){if(Nj(t,e)){var n=t.Wf;t.Wf*=1+1/(e+1);var r=Pj(t,e),s=Math.max(0,Math.max(Math.min(t.network.vertexes.count,i*(e+1)/11),10));for(t.maxIterations+=s,_k(t,e+1,i),Kk(t,s),Cj(t,r),e=r.vertexes.Fa(),e.sort(function(l,h){return l===null||h===null||l===h?0:h.Rd-l.Rd}),i=0;i<e.length;i++)Tj(t,e[i]);t.Wf=n}}function Nj(t,e){if(10<e||3>t.network.vertexes.count)return!1;for(t.Xg=t.network.vertexes.Fa(),t=t.Xg,t.sort(function(i,n){return i===null||n===null||i===n?0:n.Rd-i.Rd}),e=t.length-1;0<=e&&1>=t[e].Rd;)e--;return 1<t.length-e}function Pj(t,e){for(var i=t.network,n=new Cu(t),r=0;r<t.Xg.length;r++){var s=t.Xg[r];if(1<s.Rd){n.Zg(s);var l=new Wk;l.Ms=s.Rd,l.Ns=s.width,l.Ls=s.height,l.Ov=s.focus.x,l.Pv=s.focus.y,s.Te===null&&(s.Te=new tt),s.Te.add(l),s.qv=s.Te.count-1}else break}for(s=i.edges.iterator;s.next();){var h=s.value;r=h.fromVertex,l=h.toVertex,r.network===n&&l.network===n?n.yo(h):r.network===n?(h=r.Fj,h===null&&(h=new tt,r.Fj=h),h.add(l),r.Rd--,r.oh+=l.oh):l.network===n&&(h=l.Fj,h===null&&(h=new tt,l.Fj=h),h.add(r),l.Rd--,l.oh+=r.oh)}for(r=n.edges.iterator;r.next();)s=r.value,s.length*=Math.max(1,F.sqrt((s.fromVertex.oh+s.toVertex.oh)/(4*e+1)));for(e=n.vertexes.iterator;e.next();){r=e.value;var a=r.Fj;if(a!==null&&0<a.count&&(l=r.Te.L(r.Te.count-1).Ms-r.Rd,!(0>=l))){for(var f=h=0,p=a.count-l;p<a.count;p++){var d=a.L(p),y=null;for(s=d.edges.iterator;s.next();){var x=s.value;if(x.xx(d)===r){y=x;break}}y!==null&&(f+=y.length,h+=d.width*d.height)}s=r.centerX,a=r.centerY,p=r.width,d=r.height,y=r.focus,x=p*d,1>x&&(x=1),h=F.sqrt((h+x+f*f*4/(l*l))/x),l=(h-1)*p/2,h=(h-1)*d/2,r.bounds=new V(s-y.x-l,a-y.y-h,p+2*l,d+2*h),r.focus=new P(y.x+l,y.y+h)}}return t.network=n,i}function Cj(t,e){for(var i=t.network.vertexes.iterator;i.next();){var n=i.value;if(n.network=e,n.Te!==null){var r=n.Te.L(n.qv);n.Rd=r.Ms;var s=r.Ov,l=r.Pv;n.bounds=new V(n.centerX-s,n.centerY-l,r.Ns,r.Ls),n.focus=new P(s,l),n.qv--}}for(i=t.network.edges.iterator;i.next();)i.value.network=e;t.network=e}function Tj(t,e){var i=e.Fj;if(i!==null&&i.count!==0){var n=e.centerX,r=e.centerY,s=e.width,l=e.height;e.Te!==null&&0<e.Te.count&&(l=e.Te.L(0),s=l.Ns,l=l.Ls),s=F.sqrt(s*s+l*l)/2;for(var h=!1,a=l=0,f=0,p=e.vertexes.iterator;p.next();){var d=p.value;1>=d.Rd?a++:(h=!0,f++,l+=Math.atan2(e.centerY-d.centerY,e.centerX-d.centerX))}if(a!==0){for(0<f&&(l/=f),f=e=0,e=h?2*Math.PI/(a+1):2*Math.PI/a,a%2===0&&(f=e/2),1<i.count&&i.sort(function(x,v){return x===null||v===null||x===v?0:v.width*v.height-x.width*x.height}),h=a%2===0?0:1,i=i.iterator;i.next();)if(a=i.value,!(1<a.Rd||t.isFixed(a))){for(p=null,d=a.edges.iterator;d.next();){p=d.value;break}d=a.width;var y=a.height;d=F.sqrt(d*d+y*y)/2,p=s+p.length+d,d=l+(e*(h/2>>1)+f)*(h%2===0?1:-1),a.centerX=n+p*Math.cos(d),a.centerY=r+p*Math.sin(d),h++}}}}function Gk(t,e,i,n,r,s,l){var h=9e19,a=-1,f=0;t:for(;f<e;f++){var p=t[f],d=p.x-i,y=p.y-n;if(d=d*d+y*y,d<h){for(y=f-1;0<=y;y--)if(t[y].y>p.y&&t[y].x-p.x<r+l.width)continue t;for(y=f+1;y<e;y++)if(t[y].x>p.x&&t[y].y-p.y<s+l.height)continue t;a=f,h=d}}return a}He.prototype.zu=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},He.prototype.addComments=function(t){var e=t.node;if(e!==null)for(e=e.Iu();e.next();){var i=e.value;if(i.category==="Comment"&&i.isVisible()){var n=this.network.hi(i);n===null&&(n=this.network.xl(i)),n.charge=this.defaultCommentElectricalCharge,i=null;for(var r=n.destinationEdges;r.next();){var s=r.value;if(s.toVertex===t){i=s;break}}if(i===null){for(r=n.sourceEdges;r.next();)if(s=r.value,s.fromVertex===t){i=s;break}}i===null&&(i=this.network.Wj(t,n,null)),i.length=this.defaultCommentSpringLength}}};function Xk(t,e){var i=t.bounds,n=i.x;t=i.y;var r=i.width;i=i.height;var s=e.bounds,l=s.x;e=s.y;var h=s.width;return s=s.height,n+r<l?t>e+s?(i=n+r-l,t=t-e-s,F.sqrt(i*i+t*t)):t+i<e?(n=n+r-l,t=t+i-e,F.sqrt(n*n+t*t)):l-(n+r):n>l+h?t>e+s?(i=n-l-h,t=t-e-s,F.sqrt(i*i+t*t)):t+i<e?(n=n-l-h,t=t+i-e,F.sqrt(n*n+t*t)):n-(l+h):t>e+s?t-(e+s):t+i<e?e-(t+i):.1}function Kk(t,e){for(t.Xg=null,e=t.xn+e;t.xn<e&&(t.xn++,Lj(t)););t.Xg=null}function Lj(t){t.Xg===null&&(t.Xg=t.network.vertexes.Fa());var e=t.Xg;if(0>=e.length)return!1;var i=e[0];i.forceX=0,i.forceY=0;for(var n=i.centerX,r=n,s=i=i.centerY,l=1;l<e.length;l++){var h=e[l];h.forceX=0,h.forceY=0;var a=h.centerX;h=h.centerY,n=Math.min(n,a),r=Math.max(r,a),i=Math.min(i,h),s=Math.max(s,h)}(r=r-n>s-i)?e.sort(function(S,N){return S===null||N===null||S===N?0:S.centerX-N.centerX}):e.sort(function(S,N){return S===null||N===null||S===N?0:S.centerY-N.centerY}),i=t.Wf;var f=n=h=0;for(s=0;s<e.length;s++){l=e[s],n=l.bounds,h=l.focus,a=n.x+h.x;var p=n.y+h.y;n=l.charge*t.electricalFieldX(a,p),f=l.charge*t.electricalFieldY(a,p),n+=l.mass*t.gravitationalFieldX(a,p),f+=l.mass*t.gravitationalFieldY(a,p),l.forceX+=n,l.forceY+=f;for(var d=s+1;d<e.length;d++){var y=e[d];if(y!==l){n=y.bounds,h=y.focus,f=n.x+h.x;var x=n.y+h.y;if(a-f>i||f-a>i){if(r)break}else if(p-x>i||x-p>i){if(!r)break}else{var v=Xk(l,y);1>v?(n=t.randomNumberGenerator,n===null&&(t.randomNumberGenerator=n=new eg),v=n.random(),h=n.random(),a>f?(n=Math.abs(y.bounds.right-l.bounds.x),n=(1+n)*v):a<f?(n=Math.abs(y.bounds.x-l.bounds.right),n=-(1+n)*v):(n=Math.max(y.width,l.width),n=(1+n)*v-n/2),p>x?(f=Math.abs(y.bounds.bottom-l.bounds.y),f=(1+f)*h):a<f?(f=Math.abs(y.bounds.y-l.bounds.bottom),f=-(1+f)*h):(f=Math.max(y.height,l.height),f=(1+f)*h-f/2)):(h=-(l.charge*y.charge)/(v*v),n=(f-a)/v*h,f=(x-p)/v*h),l.forceX+=n,l.forceY+=f,y.forceX-=n,y.forceY-=f}}}}for(r=t.network.edges.iterator;r.next();)h=r.value,i=h.fromVertex,s=h.toVertex,l=i.bounds,a=i.focus,n=l.x+a.x,l=l.y+a.y,p=s.bounds,d=s.focus,a=p.x+d.x,p=p.y+d.y,d=Xk(i,s),1>d?(d=t.randomNumberGenerator,d===null&&(t.randomNumberGenerator=d=new eg),h=d.random(),d=d.random(),n=(n>a?1:-1)*(1+(s.width>i.width?s.width:i.width))*h,f=(l>p?1:-1)*(1+(s.height>i.height?s.height:i.height))*d):(h=h.stiffness*(d-h.length),n=(a-n)/d*h,f=(p-l)/d*h),i.forceX+=n,i.forceY+=f,s.forceX-=n,s.forceY-=f;for(r=n=0;r<e.length;r++)i=e[r],t.isFixed(i)?t.moveFixedVertex(i):n=Math.max(n,t.moveVertex(i)||0);return n>t.epsilonDistance*t.epsilonDistance}He.prototype.moveVertex=function(t){var e=t.forceX,i=t.forceY,n=this.moveLimit;return e<-n?e=-n:e>n&&(e=n),i<-n?i=-n:i>n&&(i=n),t.centerX+=e,t.centerY+=i,e*e+i*i},He.prototype.moveFixedVertex=function(){},He.prototype.commitLayout=function(){this.uv(),this.commitNodes(),this.isRouting&&this.commitLinks()},He.prototype.uv=function(){if(this.setsPortSpots)for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;e!==null&&(e.fromSpot=Je,e.toSpot=Je)}},He.prototype.commitNodes=function(){var t=0,e=0;if(this.arrangesToOrigin){var i=V.alloc();this.computeBounds(this.network,i),e=this.arrangementOrigin,t=e.x-i.x,e=e.y-i.y,V.free(i)}i=V.alloc();for(var n=this.network.vertexes.iterator;n.next();){var r=n.value;(t!==0||e!==0)&&(i.assign(r.bounds),i.x+=t,i.y+=e,r.bounds=i),r.commit()}V.free(i)},He.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},He.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.Dk:t},He.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.Ck:t},He.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.Ak:t},He.prototype.electricalFieldX=function(){return 0},He.prototype.electricalFieldY=function(){return 0},He.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.Bk:t},He.prototype.gravitationalFieldX=function(){return 0},He.prototype.gravitationalFieldY=function(){return 0},He.prototype.isFixed=function(t){return t.isFixed},z.Object.defineProperties(He.prototype,{currentIteration:{get:function(){return this.xn}},arrangementSpacing:{get:function(){return this.Wd},set:function(t){this.Wd.C(t)||(this.Wd.assign(t),this.D())}},arrangesToOrigin:{get:function(){return this.ym},set:function(t){this.ym!==t&&(this.ym=t,this.D())}},setsPortSpots:{get:function(){return this.qf},set:function(t){this.qf!==t&&(this.qf=t,this.D())}},comments:{get:function(){return this.od},set:function(t){this.od!==t&&(this.od=t,this.D())}},maxIterations:{get:function(){return this.$k},set:function(t){this.$k!==t&&0<=t&&(this.$k=t,this.D())}},epsilonDistance:{get:function(){return this.Xm},set:function(t){this.Xm!==t&&0<t&&(this.Xm=t,this.D())}},infinityDistance:{get:function(){return this.Wf},set:function(t){this.Wf!==t&&1<t&&(this.Wf=t,this.D())}},moveLimit:{get:function(){return this.Fn},set:function(t){this.Fn!==t&&1<t&&(this.Fn=t,this.D())}},randomNumberGenerator:{get:function(){return this.bo},set:function(t){this.bo!==t&&(t!==null&&typeof t.random!="function"&&R('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.bo=t)}},defaultSpringStiffness:{get:function(){return this.Dk},set:function(t){this.Dk!==t&&(this.Dk=t,this.D())}},defaultSpringLength:{get:function(){return this.Ck},set:function(t){this.Ck!==t&&(this.Ck=t,this.D())}},defaultElectricalCharge:{get:function(){return this.Ak},set:function(t){this.Ak!==t&&(this.Ak=t,this.D())}},defaultGravitationalMass:{get:function(){return this.Bk},set:function(t){this.Bk!==t&&(this.Bk=t,this.D())}},defaultCommentSpringLength:{get:function(){return this.Sm},set:function(t){this.Sm!==t&&(this.Sm=t,this.D())}},defaultCommentElectricalCharge:{get:function(){return this.Rm},set:function(t){this.Rm!==t&&(this.Rm=t,this.D())}}}),He.className="ForceDirectedLayout";function Wk(){this.Pv=this.Ov=this.Ls=this.Ns=this.Ms=0}Wk.className="ForceDirectedSubnet";function Cu(t){Xt.call(this,t)}B(Cu,Xt),Cu.prototype.createVertex=function(){return new Jf(this)},Cu.prototype.createEdge=function(){return new Zf(this)},Cu.className="ForceDirectedNetwork";function Jf(t){we.call(this,t),this.ga=!1,this.Ha=this.u=NaN,this.oh=this.Rd=this.V=this.F=0,this.Te=this.Fj=null,this.qv=0}B(Jf,we),z.Object.defineProperties(Jf.prototype,{isFixed:{get:function(){return this.ga},set:function(t){this.ga!==t&&(this.ga=t)}},charge:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},mass:{get:function(){return this.Ha},set:function(t){this.Ha!==t&&(this.Ha=t)}},forceX:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}},forceY:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t)}}}),Jf.className="ForceDirectedVertex";function Zf(t){Wi.call(this,t),this.j=this.m=NaN}B(Zf,Wi),z.Object.defineProperties(Zf.prototype,{stiffness:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t)}},length:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}}}),Zf.className="ForceDirectedEdge";function eg(){var t=0;this.seed=t,this.$x=48271,this.by=2147483647,this.Q=44488.07041494893,this.ey=3399,this.ay=1/2147483647,this.random()}eg.prototype.random=function(){var t=this.seed%this.Q*this.$x-this.seed/this.Q*this.ey;return 0<t?this.seed=t:this.seed=t+this.by,this.seed*this.ay},eg.className="RandomNumberGenerator";function zt(t){Jt.call(this),this.gc=this.ee=25,this.K=0,this.zk=sg,this.Vk=lg,this.Mk=ug,this.Zi=4,this.mk=hg,this.Zf=15,this.qf=!0,this.zn=4,this.Ra=this.Cq=this.Ia=-1,this.Ed=this.En=0,this.Ta=this.Cd=this.Dd=this.de=this.qc=null,this.Hn=0,this.Gn=this.ij=null,this.he=0,this.bl=null,this.Pf=new P,this.Ee=[],this.Ee.length=100,this.tw=this.se=0,t&&Object.assign(this,t)}B(zt,Jt),zt.prototype.cloneProtected=function(t){Jt.prototype.cloneProtected.call(this,t),t.ee=this.ee,t.gc=this.gc,t.K=this.K,t.zk=this.zk,t.Vk=this.Vk,t.Mk=this.Mk,t.Zi=this.Zi,t.mk=this.mk,t.Zf=this.Zf,t.qf=this.qf,t.zn=this.zn,t.se=this.se},zt.prototype.rb=function(t){t.classType===zt?t.name.indexOf("Aggressive")===0?this.aggressiveOption=t:t.name.indexOf("Cycle")===0?this.cycleRemoveOption=t:t.name.indexOf("Init")===0?this.initializeOption=t:t.name.indexOf("Layer")===0?this.layeringOption=t:R("Unknown enum value: "+t):Jt.prototype.rb.call(this,t)},zt.prototype.createNetwork=function(){return new bh(this)},zt.prototype.doLayout=function(t){for(this.network===null&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.Cq=-1,this.Ed=this.En=0,this.bl=this.Gn=this.ij=null,t=0;t<this.Ee.length;t++)this.Ee[t]=null;if(0<this.network.vertexes.count){for(this.network.Ho(),this.cycleRemoveOption!==qf&&this.removeCycles(),t=this.network.vertexes.iterator;t.next();)t.value.layer=-1;for(this.Ia=-1,this.assignLayers(),t.reset();t.next();)this.Ia=Math.max(this.Ia,t.value.layer);this.cycleRemoveOption===qf&&this.removeCycles(),t=this.network;for(var e=[],i=t.edges.iterator;i.next();){var n=i.value;n.valid=!1,e.push(n)}for(i=0;i<e.length;i++){n=e[i];var r=n.fromVertex,s=n.toVertex;if(!(n.valid||(r.node===null&&r.data===null||s.node===null&&s.data===null)&&r.layer===s.layer)){var l=0,h=0,a=0,f=0;if(n.link!==null){if(h=n.link,h===null)continue;var p=r.node;if(l=s.node,p===null||l===null)continue;var d=h.fromNode;a=h.toNode;for(var y=h.fromPort;y!==null&&!y.Od();)y=y.panel;for(h=h.toPort;h!==null&&!h.Od();)h=h.panel;if(n.rev){f=d;var x=y;d=a,y=h,a=f,h=x}var v=r.focus;f=s.focus;var S=n.rev?s.bounds:r.bounds;x=P.alloc(),p!==d?S.w()&&d.isVisible()?d.actualBounds.w()?(bo(d,y,Ut,x),x.x+=d.actualBounds.x-S.x,x.y+=d.actualBounds.y-S.y):(bo(d,y,Ut,x),x.w()||x.assign(v)):x.assign(v):S.w()?(bo(d,y,Ut,x),x.w()||x.assign(v)):x.assign(v),d=n.rev?r.bounds:s.bounds,p=P.alloc(),l!==a?d.w()&&a.isVisible()?a.actualBounds.w()?(bo(a,h,Ut,p),p.x+=a.actualBounds.x-d.x,p.y+=a.actualBounds.y-d.y):(bo(a,h,Ut,p),p.w()||p.assign(f)):p.assign(f):d.w()?(bo(a,h,Ut,p),p.w()||p.assign(f)):p.assign(f),this.K===90||this.K===270?(l=Math.round((x.x-v.x)/this.gc),a=x.x,h=Math.round((p.x-f.x)/this.gc),f=p.x):(l=Math.round((x.y-v.y)/this.gc),a=x.y,h=Math.round((p.y-f.y)/this.gc),f=p.y),P.free(x),P.free(p),n.portFromColOffset=l,n.portFromPos=a,n.portToColOffset=h,n.portToPos=f}else n.portFromColOffset=0,n.portFromPos=0,n.portToColOffset=0,n.portToPos=0;if(x=r.layer,p=s.layer,d=0,S=n.link,S!==null){var N=S.fromPort,k=S.toPort;if(N!==null&&k!==null){var C=S.fromNode;if(y=S.toNode,C!==null&&y!==null){var T=og(this,!0),L=og(this,!1),E=this.setsPortSpots?T:S.computeSpot(!0,N);v=this.setsPortSpots?L:S.computeSpot(!1,k);var I=S.isOrthogonal;E.Vc()&&E.Ff(L)&&v.Vc()&&v.Ff(T)?d=0:(T=S.getLinkPoint(C,N,E,!0,I,y,k,P.alloc()),L=S.getLinkDirection(C,N,T,E,!0,I,y,k),P.free(T),E.ts()||L!==iN(this,n,!0)?this.setsPortSpots&&C!==null&&C.ports.count===1&&n.rev&&(d+=1):d+=1,E=S.getLinkPoint(y,k,v,!1,I,C,N,P.alloc()),S=S.getLinkDirection(y,k,E,v,!1,I,C,N),P.free(E),v.ts()||S!==iN(this,n,!1)?this.setsPortSpots&&y!==null&&y.ports.count===1&&n.rev&&(d+=2):d+=2)}}}if(y=d,d=y===1||y===3,(y=y===2||y===3)&&(v=t.createVertex(),v.node=null,v.Bj=1,v.layer=x,v.near=r,t.Zg(v),r=t.Wj(r,v,n.link),r.valid=!1,r.rev=n.rev,r.portFromColOffset=l,r.portToColOffset=0,r.portFromPos=a,r.portToPos=0,r=v),S=1,d&&S--,x-p>S&&0<x){for(n.valid=!1,v=t.createVertex(),v.node=null,v.Bj=2,v.layer=x-1,t.Zg(v),r=t.Wj(r,v,n.link),r.valid=!0,r.rev=n.rev,r.portFromColOffset=y?0:l,r.portToColOffset=0,r.portFromPos=y?0:a,r.portToPos=0,r=v,x--;x-p>S&&0<x;)v=t.createVertex(),v.node=null,v.Bj=3,v.layer=x-1,t.Zg(v),r=t.Wj(r,v,n.link),r.valid=!0,r.rev=n.rev,r.portFromColOffset=0,r.portToColOffset=0,r.portFromPos=0,r.portToPos=0,r=v,x--;r=t.Wj(v,s,n.link),r.valid=!d,d&&(v.near=s),r.rev=n.rev,r.portFromColOffset=0,r.portToColOffset=h,r.portFromPos=0,r.portToPos=f}else n.valid=!0}}for(t=this.qc=[],e=0;e<=this.Ia;e++)t[e]=0;for(e=this.network.vertexes.iterator;e.next();)e.value.index=-1;for(this.initializeIndices(),this.Cq=-1,i=this.Ed=this.En=0;i<=this.Ia;i++)t[i]>t[this.Ed]&&(this.Cq=t[i]-1,this.Ed=i),t[i]<t[this.En]&&(this.En=i);for(this.bl=[],i=0;i<t.length;i++)this.bl[i]=[];for(e.reset();e.next();)t=e.value,this.bl[t.layer][t.index]=t;for(this.Ra=-1,t=0;t<=this.Ia;t++){for(e=Bs(this,t),i=0,n=this.qc[t],s=0;s<n;s++)r=e[s],i+=this.nodeMinColumnSpace(r,!0),r.column=i,i+=1,i+=this.nodeMinColumnSpace(r,!1);this.Ra=Math.max(this.Ra,i-1),zs(this,t,e)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.isValidLayout=!0},zt.prototype.linkMinLength=function(){return 1};function _v(t){var e=t.fromVertex.node||t.fromVertex.data;return t=t.toVertex.node||t.toVertex.data,e===null&&t===null?8:e===null||t===null?4:1}zt.prototype.nodeMinLayerSpace=function(t,e){return t.node===null&&t.data===null?0:this.K===90||this.K===270?e?t.focus.y+10:t.bounds.height-t.focus.y+10:e?t.focus.x+10:t.bounds.width-t.focus.x+10},zt.prototype.nodeMinColumnSpace=function(t,e){if(t.node===null&&t.data===null)return 0;var i=e?t.cv:t.bv;return i!==null?i:(i=this.K,i===90||i===270?e?t.cv=t.focus.x/this.gc+1|0:t.bv=(t.bounds.width-t.focus.x)/this.gc+1|0:e?t.cv=t.focus.y/this.gc+1|0:t.bv=(t.bounds.height-t.focus.y)/this.gc+1|0)};function Ai(t){t.ij===null&&(t.ij=[]);for(var e=0,i=t.network.vertexes.iterator;i.next();){var n=i.value;t.ij[e]=n.layer,e++,t.ij[e]=n.column,e++,t.ij[e]=n.index,e++}return t.ij}function Nn(t,e){var i=0;for(t=t.network.vertexes.iterator;t.next();){var n=t.value;n.layer=e[i],i++,n.column=e[i],i++,n.index=e[i],i++}}function $k(t,e,i){var n=Bs(t,e),r=t.qc[e];(t.Gn===null||t.Gn.length<r*r)&&(t.Gn=[]);for(var s=t.Gn,l=0;l<r;l++){var h=0,a=n[l],f=a.near;if(f!==null&&f.layer===a.layer)if(a=f.index,a>l)for(var p=l+1;p<a;p++){var d=n[p];d.near===f&&d.Bj===f.Bj||h++}else for(p=l-1;p>a;p--)d=n[p],d.near===f&&d.Bj===f.Bj||h++;var y;if(0<=i)for(a=n[l].sourceEdgesArrayAccess,f=0;f<a.length;f++){var x=a[f];if(x.valid&&x.fromVertex.layer!==e)for(d=x.fromVertex.index,p=x.portToPos,x=x.portFromPos,y=f+1;y<a.length;y++){var v=a[y];if(v.valid&&v.fromVertex.layer!==e){var S=v.fromVertex.index,N=v.portToPos;v=v.portFromPos,p<N&&(d>S||d===S&&x>v)&&h++,N<p&&(S>d||S===d&&v>x)&&h++}}}if(0>=i){for(a=n[l].destinationEdgesArrayAccess,f=0;f<a.length;f++)if(x=a[f],x.valid&&x.toVertex.layer!==e)for(d=x.toVertex.index,p=x.portToPos,x=x.portFromPos,y=f+1;y<a.length;y++)v=a[y],v.valid&&v.toVertex.layer!==e&&(S=v.toVertex.index,N=v.portToPos,v=v.portFromPos,x<v&&(d>S||d===S&&p>N)&&h++,v<x&&(S>d||S===d&&N>p)&&h++)}for(s[l*r+l]=h,a=l+1;a<r;a++){var k=0,C=0;if(0<=i){h=n[l].sourceEdgesArrayAccess;var T=n[a].sourceEdgesArrayAccess;for(f=0;f<h.length;f++)if(x=h[f],x.valid&&x.fromVertex.layer!==e)for(d=x.fromVertex.index,x=x.portFromPos,y=0;y<T.length;y++)v=T[y],v.valid&&v.fromVertex.layer!==e&&(S=v.fromVertex.index,v=v.portFromPos,(d<S||d===S&&x<v)&&C++,(S<d||S===d&&v<x)&&k++)}if(0>=i){for(h=n[l].destinationEdgesArrayAccess,T=n[a].destinationEdgesArrayAccess,f=0;f<h.length;f++)if(x=h[f],x.valid&&x.toVertex.layer!==e)for(d=x.toVertex.index,p=x.portToPos,y=0;y<T.length;y++)v=T[y],v.valid&&v.toVertex.layer!==e&&(S=v.toVertex.index,N=v.portToPos,(d<S||d===S&&p<N)&&C++,(S<d||S===d&&N<p)&&k++)}s[l*r+a]=k,s[a*r+l]=C}}return zs(t,e,n),s}zt.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.Ia;e++)for(var i=$k(this,e,1),n=this.qc[e],r=0;r<n;r++)for(var s=r;s<n;s++)t+=i[r*n+s];return t};function ig(t){for(var e=0,i=0;i<=t.Ia;i++){for(var n=t,r=i,s=Bs(n,r),l=n.qc[r],h=0,a=0;a<l;a++){var f=s[a].destinationEdgesArrayAccess;if(f!==null)for(var p=0;p<f.length;p++){var d=f[p];if(d.valid&&d.toVertex.layer!==r){var y=d.fromVertex.column+d.portFromColOffset,x=d.toVertex.column+d.portToColOffset;h+=(Math.abs(y-x)+1)*_v(d)}}}zs(n,r,s),e+=h}return e}zt.prototype.normalize=function(){var t=1/0;this.Ra=-1;for(var e=this.network.vertexes.iterator;e.next();){var i=e.value;t=Math.min(t,i.column-this.nodeMinColumnSpace(i,!0)),this.Ra=Math.max(this.Ra,i.column+this.nodeMinColumnSpace(i,!1))}for(e.reset();e.next();)e.value.column-=t;this.Ra-=t};function Gv(t,e,i){for(var n=Bs(t,e),r=t.qc[e],s=[],l=0;l<r;l++){var h=n[l],a=null;0>=i&&(a=h.sourceEdgesArrayAccess);var f=null;0<=i&&(f=h.destinationEdgesArrayAccess);var p=0,d=0,y=h.near;if(y!==null&&y.layer===h.layer&&(p+=y.column-1,d++),a!==null)for(y=0;y<a.length;y++){h=a[y];var x=h.fromVertex;h.valid&&!h.rev&&x.layer!==e&&(p+=x.column,d++)}if(f!==null)for(a=0;a<f.length;a++)h=f[a],y=h.toVertex,h.valid&&!h.rev&&y.layer!==e&&(p+=y.column,d++);s[l]=d===0?-1:p/d}return zs(t,e,n),s}function Jk(t,e,i){for(var n=Bs(t,e),r=t.qc[e],s=[],l=0;l<r;l++){var h=n[l],a=null;0>=i&&(a=h.sourceEdgesArrayAccess);var f=null;0<=i&&(f=h.destinationEdgesArrayAccess);var p=0,d=[],y=h.near;if(y!==null&&y.layer===h.layer&&(d[p]=y.column-1,p++),h=void 0,a!==null)for(y=0;y<a.length;y++){h=a[y];var x=h.fromVertex;h.valid&&!h.rev&&x.layer!==e&&(d[p]=x.column+h.portFromColOffset,p++)}if(f!==null)for(a=0;a<f.length;a++)h=f[a],y=h.toVertex,h.valid&&!h.rev&&y.layer!==e&&(d[p]=y.column+h.portToColOffset,p++);p===0?s[l]=-1:(d.sort(function(v,S){return v-S}),f=p>>1,s[l]=p&1?d[f]:d[f-1]+d[f]>>1)}return zs(t,e,n),s}function Qf(t,e,i,n,r,s){if(e.component===n){if(e.component=i,r)for(var l=e.destinationEdges;l.next();){var h=l.value,a=h.toVertex,f=e.layer-a.layer;h=t.linkMinLength(h),f===h&&Qf(t,a,i,n,r,s)}if(s)for(l=e.sourceEdges;l.next();)h=l.value,a=h.fromVertex,f=a.layer-e.layer,h=t.linkMinLength(h),f===h&&Qf(t,a,i,n,r,s)}}function Xv(t,e,i,n,r,s){if(e.component===n){if(e.component=i,r)for(var l=e.destinationEdges;l.next();)Xv(t,l.value.toVertex,i,n,r,s);if(s)for(e=e.sourceEdges;e.next();)Xv(t,e.value.fromVertex,i,n,r,s)}}zt.prototype.removeCycles=function(){for(var t=this.network.edges.iterator;t.next();)t.value.rev=!1;switch(this.zk){default:case $v:t=this.network;var e=0,i=t.vertexes.count-1,n=[];n.length=i+1;for(var r=t.vertexes.iterator;r.next();)r.value.valid=!0;for(;jj(t)!==null;){for(r=Zk(t);r!==null;)n[i]=r,i--,r.valid=!1,r=Zk(t);for(r=Qk(t);r!==null;)n[e]=r,e++,r.valid=!1,r=Qk(t);r=null;for(var s=0,l=this.network.vertexes.iterator;l.next();){var h=l.value;if(h.valid){for(var a=0,f=h.destinationEdges;f.next();)f.value.toVertex.valid&&a++;f=0;for(var p=h.sourceEdges;p.next();)p.value.fromVertex.valid&&f++;(r===null||s<a-f)&&(r=h,s=a-f)}}r!==null&&(n[e]=r,e++,r.valid=!1)}for(e=0;e<t.vertexes.count;e++)n[e].index=e;for(n=t.edges.iterator;n.next();)e=n.value,e.fromVertex.index>e.toVertex.index&&(t.dm(e),e.rev=!0);break;case sg:for(n=this.network.vertexes.iterator;n.next();)t=n.value,t.Gl=-1,t.finish=-1;for(t=this.network.edges.iterator;t.next();)t.value.forest=!1;for(this.Hn=0,n.reset();n.next();)e=n.value,e.sourceEdges.count===0&&Kv(this,e);for(n.reset();n.next();)e=n.value,e.Gl===-1&&Kv(this,e);for(t.reset();t.next();)n=t.value,n.forest||(e=n.fromVertex,i=e.finish,r=n.toVertex,s=r.finish,r.Gl<e.Gl&&i<s&&(this.network.dm(n),n.rev=!0));break;case qf:for(t=this.network,e=t.vertexes.iterator,n=1/0;e.next();)n=Math.min(n,e.value.layer);if(1/0>n){if(0>n)for(e.reset();e.next();)e.value.layer-=n;for(n=[],e.reset();e.next();)i=e.value,r=n[i.layer],r===void 0?n[i.layer]=[i]:r.push(i);for(i=e=0;i<n.length;i++)if(r=n[i],!r||r.length===0)e++;else if(0<i)for(s=0;s<r.length;s++)r[s].layer-=e;for(n=t.edges.iterator;n.next();)e=n.value,e.fromVertex.layer<e.toVertex.layer&&(t.dm(e),e.rev=!0)}}};function jj(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid)return e}return null}function Zk(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.destinationEdges;n.next();)if(n.value.toVertex.valid){i=!1;break}if(i)return e}}return null}function Qk(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.sourceEdges;n.next();)if(n.value.fromVertex.valid){i=!1;break}if(i)return e}}return null}function Kv(t,e){e.Gl=t.Hn,t.Hn++;for(var i=e.destinationEdges;i.next();){var n=i.value,r=n.toVertex;r.Gl===-1&&(n.forest=!0,Kv(t,r))}e.finish=t.Hn,t.Hn++}zt.prototype.assignLayers=function(){switch(this.Vk){case Jv:qk(this);break;case Zv:for(var t,e=this.network.vertexes.iterator;e.next();)t=tN(this,e.value),this.Ia=Math.max(t,this.Ia);for(e.reset();e.next();)t=e.value,t.layer=this.Ia-t.layer;break;default:case lg:for(qk(this),e=this.network.vertexes.iterator;e.next();)e.value.valid=!1;for(e.reset();e.next();)t=e.value,t.sourceEdges.count===0&&eN(this,t);for(t=1/0,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.Ia=-1,e.reset();e.next();){var i=e.value;i.layer-=t,this.Ia=Math.max(this.Ia,i.layer)}}};function qk(t){for(var e=t.network.vertexes.iterator;e.next();){var i=bk(t,e.value);t.Ia=Math.max(i,t.Ia)}}function bk(t,e){var i=0;if(e.layer===-1){for(var n=e.destinationEdges;n.next();){var r=n.value,s=r.toVertex;r=t.linkMinLength(r),i=Math.max(i,bk(t,s)+r)}e.layer=i}else i=e.layer;return i}function tN(t,e){var i=0;if(e.layer===-1){for(var n=e.sourceEdges;n.next();){var r=n.value,s=r.fromVertex;r=t.linkMinLength(r),i=Math.max(i,tN(t,s)+r)}e.layer=i}else i=e.layer;return i}function eN(t,e){if(!e.valid){e.valid=!0;for(var i=e.destinationEdges;i.next();)eN(t,i.value.toVertex);for(i=t.network.vertexes.iterator;i.next();)i.value.component=-1;for(var n=e.sourceEdgesArrayAccess,r=n.length,s=0;s<r;s++){var l=n[s],h=l.fromVertex,a=l.toVertex;l=t.linkMinLength(l),h.layer-a.layer>l&&Qf(t,h,0,-1,!0,!1)}for(Qf(t,e,1,-1,!0,!0);e.component!==0;){for(s=0,n=1/0,h=0,a=null,l=t.network.vertexes.iterator;l.next();){var f=l.value;if(f.component===1){var p=0,d=!1,y=f.sourceEdgesArrayAccess;r=y.length;for(var x=0;x<r;x++){var v=y[x],S=v.fromVertex;p+=1,S.component!==1&&(s+=1,S=S.layer-f.layer,v=t.linkMinLength(v),n=Math.min(n,S-v))}for(y=f.destinationEdgesArrayAccess,r=y.length,x=0;x<r;x++)v=y[x].toVertex,--p,v.component!==1?--s:d=!0;(a===null||p<h)&&!d&&(a=f,h=p)}}if(0<s){for(i.reset();i.next();)r=i.value,r.component===1&&(r.layer+=n);e.component=0}else a.component=0}for(i=t.network.vertexes.iterator;i.next();)i.value.component=-1;for(Qf(t,e,1,-1,!0,!1);e.component!==0;){for(n=0,r=1/0,s=0,h=null,a=t.network.vertexes.iterator;a.next();)if(l=a.value,l.component===1){for(f=0,p=!1,y=l.sourceEdgesArrayAccess,d=y.length,x=0;x<d;x++)v=y[x].fromVertex,f+=1,v.component!==1?n+=1:p=!0;for(y=l.destinationEdgesArrayAccess,d=y.length,x=0;x<d;x++)v=y[x],S=v.toVertex,--f,S.component!==1&&(--n,S=l.layer-S.layer,v=t.linkMinLength(v),r=Math.min(r,S-v));(h===null||f>s)&&!p&&(h=l,s=f)}if(0>n){for(i.reset();i.next();)n=i.value,n.component===1&&(n.layer-=r);e.component=0}else h.component=0}}}function iN(t,e,i){return t.K===90?i&&!e.rev||!i&&e.rev?270:90:t.K===180?i&&!e.rev||!i&&e.rev?0:180:t.K===270?i&&!e.rev||!i&&e.rev?90:270:i&&!e.rev||!i&&e.rev?180:0}zt.prototype.initializeIndices=function(){switch(this.Mk){default:case qv:for(var t=this.network.vertexes.iterator;t.next();){var e=t.value,i=e.layer;e.index=this.qc[i],this.qc[i]++}break;case ug:for(t=this.network.vertexes.iterator,e=this.Ia;0<=e;e--)for(t.reset();t.next();)i=t.value,i.layer===e&&i.index===-1&&nN(this,i);break;case Qv:for(t=this.network.vertexes.iterator,e=0;e<=this.Ia;e++)for(t.reset();t.next();)i=t.value,i.layer===e&&i.index===-1&&rN(this,i)}};function nN(t,e){var i=e.layer;for(e.index=t.qc[i],t.qc[i]++,e=e.destinationEdgesArrayAccess,i=!0;i;){i=!1;for(var n=0;n<e.length-1;n++){var r=e[n],s=e[n+1];r.portFromColOffset>s.portFromColOffset&&(i=!0,e[n]=s,e[n+1]=r)}}for(i=0;i<e.length;i++)n=e[i],n.valid&&(n=n.toVertex,n.index===-1&&nN(t,n))}function rN(t,e){var i=e.layer;e.index=t.qc[i],t.qc[i]++,e=e.sourceEdgesArrayAccess;for(var n=!0;n;)for(n=!1,i=0;i<e.length-1;i++){var r=e[i],s=e[i+1];r.portToColOffset>s.portToColOffset&&(n=!0,e[i]=s,e[i+1]=r)}for(i=0;i<e.length;i++)n=e[i],n.valid&&(n=n.fromVertex,n.index===-1&&rN(t,n))}zt.prototype.reduceCrossings=function(){var t=this.countCrossings(),e=Ai(this),i,n;for(i=0;i<this.Zi;i++){for(n=0;n<=this.Ia;n++)ng(this,n,1),Rn(this,n,1);var r=this.countCrossings();for(r<t&&(t=r,e=Ai(this)),n=this.Ia;0<=n;n--)ng(this,n,-1),Rn(this,n,-1);r=this.countCrossings(),r<t&&(t=r,e=Ai(this))}for(Nn(this,e),i=0;i<this.Zi;i++){for(n=0;n<=this.Ia;n++)ng(this,n,0),Rn(this,n,0);for(r=this.countCrossings(),r<t&&(t=r,e=Ai(this)),n=this.Ia;0<=n;n--)ng(this,n,0),Rn(this,n,0);r=this.countCrossings(),r<t&&(t=r,e=Ai(this))}Nn(this,e);var s,l,h;switch(this.mk){case bv:break;case t1:for(h=t+1;(n=this.countCrossings())<h;)for(h=n,i=this.Ia;0<=i;i--)for(l=0;l<=i;l++){for(s=!0;s;)for(s=!1,n=i;n>=l;n--)s=Rn(this,n,-1)||s;for(r=this.countCrossings(),r>=t?Nn(this,e):(t=r,e=Ai(this)),s=!0;s;)for(s=!1,n=i;n>=l;n--)s=Rn(this,n,1)||s;for(r=this.countCrossings(),r>=t?Nn(this,e):(t=r,e=Ai(this)),s=!0;s;)for(s=!1,n=l;n<=i;n++)s=Rn(this,n,1)||s;for(r>=t?Nn(this,e):(t=r,e=Ai(this)),s=!0;s;)for(s=!1,n=l;n<=i;n++)s=Rn(this,n,-1)||s;for(r>=t?Nn(this,e):(t=r,e=Ai(this)),s=!0;s;)for(s=!1,n=i;n>=l;n--)s=Rn(this,n,0)||s;for(r>=t?Nn(this,e):(t=r,e=Ai(this)),s=!0;s;)for(s=!1,n=l;n<=i;n++)s=Rn(this,n,0)||s;r>=t?Nn(this,e):(t=r,e=Ai(this))}break;default:case hg:for(i=this.Ia,l=0,h=t+1;(n=this.countCrossings())<h;){for(h=n,s=!0;s;)for(s=!1,n=i;n>=l;n--)s=Rn(this,n,-1)||s;for(r=this.countCrossings(),r>=t?Nn(this,e):(t=r,e=Ai(this)),s=!0;s;)for(s=!1,n=i;n>=l;n--)s=Rn(this,n,1)||s;for(r=this.countCrossings(),r>=t?Nn(this,e):(t=r,e=Ai(this)),s=!0;s;)for(s=!1,n=l;n<=i;n++)s=Rn(this,n,1)||s;for(r>=t?Nn(this,e):(t=r,e=Ai(this)),s=!0;s;)for(s=!1,n=l;n<=i;n++)s=Rn(this,n,-1)||s;for(r>=t?Nn(this,e):(t=r,e=Ai(this)),s=!0;s;)for(s=!1,n=i;n>=l;n--)s=Rn(this,n,0)||s;for(r>=t?Nn(this,e):(t=r,e=Ai(this)),s=!0;s;)for(s=!1,n=l;n<=i;n++)s=Rn(this,n,0)||s;r>=t?Nn(this,e):(t=r,e=Ai(this))}}Nn(this,e)};function ng(t,e,i){var n=Bs(t,e),r=t.qc[e],s=Jk(t,e,i),l=Gv(t,e,i);for(i=0;i<r;i++)l[i]===-1&&(l[i]=n[i].column),s[i]===-1&&(s[i]=n[i].column);for(var h=!0,a;h;)for(h=!1,i=0;i<r-1;i++)(s[i+1]<s[i]||s[i+1]===s[i]&&l[i+1]<l[i])&&(h=!0,a=s[i],s[i]=s[i+1],s[i+1]=a,a=l[i],l[i]=l[i+1],l[i+1]=a,a=n[i],n[i]=n[i+1],n[i+1]=a);for(i=s=0;i<r;i++)a=n[i],a.index=i,s+=t.nodeMinColumnSpace(a,!0),a.column=s,s+=1,s+=t.nodeMinColumnSpace(a,!1);zs(t,e,n)}function Rn(t,e,i){var n=Bs(t,e),r=t.qc[e];i=$k(t,e,i);var s,l=[];for(s=0;s<r;s++)l[s]=-1;var h=[];for(s=0;s<r;s++)h[s]=-1;for(var a=!1,f=!0;f;)for(f=!1,s=0;s<r-1;s++){var p=i[n[s].index*r+n[s+1].index],d=i[n[s+1].index*r+n[s].index],y=0,x=0,v=n[s].column,S=n[s+1].column,N=t.nodeMinColumnSpace(n[s],!0),k=t.nodeMinColumnSpace(n[s],!1),C=t.nodeMinColumnSpace(n[s+1],!0),T=t.nodeMinColumnSpace(n[s+1],!1);N=v-N+C,k=S-k+T;var L=n[s].sourceEdges.iterator;for(L.reset();L.next();)if(C=L.value,T=C.fromVertex,C.valid&&T.layer===e){for(C=0;n[C]!==T;)C++;C<s&&(y+=2*(s-C),x+=2*(s+1-C)),C===s+1&&(y+=1),C>s+1&&(y+=4*(C-s),x+=4*(C-(s+1)))}for(L=n[s].destinationEdges.iterator,L.reset();L.next();)if(C=L.value,T=C.toVertex,C.valid&&T.layer===e){for(C=0;n[C]!==T;)C++;C===s+1&&(x+=1)}for(L=n[s+1].sourceEdges.iterator,L.reset();L.next();)if(C=L.value,T=C.fromVertex,C.valid&&T.layer===e){for(C=0;n[C]!==T;)C++;C<s&&(y+=2*(s+1-C),x+=2*(s-C)),C===s&&(x+=1),C>s+1&&(y+=4*(C-(s+1)),x+=4*(C-s))}for(L=n[s+1].destinationEdges.iterator,L.reset();L.next();)if(C=L.value,T=C.toVertex,C.valid&&T.layer===e){for(C=0;n[C]!==T;)C++;C===s&&(y+=1)}C=T=0,L=l[n[s].index];var E=h[n[s].index],I=l[n[s+1].index],Z=h[n[s+1].index];L!==-1&&(T+=Math.abs(L-v),C+=Math.abs(L-k)),E!==-1&&(T+=Math.abs(E-v),C+=Math.abs(E-k)),I!==-1&&(T+=Math.abs(I-S),C+=Math.abs(I-N)),Z!==-1&&(T+=Math.abs(Z-S),C+=Math.abs(Z-N)),(x<y-.5||x===y&&d<p-.5||x===y&&d===p&&C<T-.5)&&(f=a=!0,n[s].column=k,n[s+1].column=N,p=n[s],n[s]=n[s+1],n[s+1]=p)}for(s=0;s<r;s++)n[s].index=s;return zs(t,e,n),a}zt.prototype.straightenAndPack=function(){if(this.se===0){var t=(this.Zf&1)!==0,e=(this.Zf&Bj)!==0;if(1e3<this.network.edges.count&&e&&(t=!1),t){var i=[];for(e=0;e<=this.Ia;e++)i[e]=0;for(var n,r=this.network.vertexes.iterator;r.next();){var s=r.value;e=s.layer,n=s.column,s=this.nodeMinColumnSpace(s,!1),i[e]=Math.max(i[e],n+s)}for(r.reset();r.next();)s=r.value,e=s.layer,n=s.column,s.column=(8*(this.Ra-i[e])>>1)+8*n;this.Ra*=8}if(this.Zf&2)for(i=!0;i;){for(i=!1,e=this.Ed+1;e<=this.Ia;e++)i=qh(this,e,1)||i;for(e=this.Ed-1;0<=e;e--)i=qh(this,e,-1)||i;i=qh(this,this.Ed,0)||i}if(this.Zf&4){for(e=this.Ed+1;e<=this.Ia;e++)Wv(this,e,1);for(e=this.Ed-1;0<=e;e--)Wv(this,e,-1);Wv(this,this.Ed,0)}if(t&&(oN(this,-1),oN(this,1)),this.Zf&2)for(i=!0;i;){for(i=!1,i=qh(this,this.Ed,0)||i,e=this.Ed+1;e<=this.Ia;e++)i=qh(this,e,0)||i;for(e=this.Ed-1;0<=e;e--)i=qh(this,e,0)||i}}else Aj(this)};function qh(t,e,i){for(var n=!1;Ej(t,e,i);)n=!0;return n}function Ej(t,e,i){var n,r=Bs(t,e),s=t.qc[e],l=Gv(t,e,-1);if(0<i)for(n=0;n<s;n++)l[n]=-1;var h=Gv(t,e,1);if(0>i)for(n=0;n<s;n++)h[n]=-1;for(var a=!1,f=!0;f;)for(f=!1,n=0;n<s;n++){var p=r[n].column,d=t.nodeMinColumnSpace(r[n],!0),y=t.nodeMinColumnSpace(r[n],!1),x=0;0>n-1||p-r[n-1].column-1>d+t.nodeMinColumnSpace(r[n-1],!1)?x=p-1:x=p,d=n+1>=s||r[n+1].column-p-1>y+t.nodeMinColumnSpace(r[n+1],!0)?p+1:p;var v=y=0,S=0;if(0>=i)for(var N=r[n].sourceEdges.iterator;N.next();){var k=N.value,C=k.fromVertex;if(k.valid&&C.layer!==e){var T=_v(k),L=k.portFromColOffset;k=k.portToColOffset,C=C.column,y+=(Math.abs(p+k-(C+L))+1)*T,v+=(Math.abs(x+k-(C+L))+1)*T,S+=(Math.abs(d+k-(C+L))+1)*T}}if(0<=i)for(N=r[n].destinationEdges.iterator;N.next();)k=N.value,C=k.toVertex,k.valid&&C.layer!==e&&(T=_v(k),L=k.portFromColOffset,k=k.portToColOffset,C=C.column,y+=(Math.abs(p+L-(C+k))+1)*T,v+=(Math.abs(x+L-(C+k))+1)*T,S+=(Math.abs(d+L-(C+k))+1)*T);k=L=T=0,N=l[r[n].index],C=h[r[n].index],N!==-1&&(T+=Math.abs(N-p),L+=Math.abs(N-x),k+=Math.abs(N-d)),C!==-1&&(T+=Math.abs(C-p),L+=Math.abs(C-x),k+=Math.abs(C-d)),v<y||v===y&&L<T?(f=a=!0,r[n].column=x):(S<y||S===y&&k<T)&&(f=a=!0,r[n].column=d)}return zs(t,e,r),t.normalize(),a}function Wv(t,e,i){var n=Bs(t,e),r=t.qc[e],s=Jk(t,e,i),l=[];for(i=0;i<r;i++)l[i]=s[i];for(s=!0;s;)for(s=!1,i=0;i<r;i++){var h=n[i].column,a=t.nodeMinColumnSpace(n[i],!0),f=t.nodeMinColumnSpace(n[i],!1),p=0;if(l[i]===-1)if(i===0&&i===r-1)p=h;else if(i===0){var d=n[i+1].column;d-h===f+t.nodeMinColumnSpace(n[i+1],!0)?p=h-1:p=h}else i===r-1?(d=n[i-1].column,p=h-d===a+t.nodeMinColumnSpace(n[i-1],!1)?h+1:h):(d=n[i-1].column,a=d+t.nodeMinColumnSpace(n[i-1],!1)+a+1,d=n[i+1].column,f=d-t.nodeMinColumnSpace(n[i+1],!0)-f-1,p=(a+f)/2|0);else i===0&&i===r-1?p=l[i]:i===0?(d=n[i+1].column,f=d-t.nodeMinColumnSpace(n[i+1],!0)-f-1,p=Math.min(l[i],f)):i===r-1?(d=n[i-1].column,a=d+t.nodeMinColumnSpace(n[i-1],!1)+a+1,p=Math.max(l[i],a)):(d=n[i-1].column,a=d+t.nodeMinColumnSpace(n[i-1],!1)+a+1,d=n[i+1].column,f=d-t.nodeMinColumnSpace(n[i+1],!0)-f-1,a<l[i]&&l[i]<f?p=l[i]:a>=l[i]?p=a:f<=l[i]&&(p=f));p!==h&&(s=!0,n[i].column=p)}zs(t,e,n),t.normalize()}function Fj(t,e){for(var i=!0,n=t.network.vertexes.iterator;n.next();){var r=n.value,s=t.nodeMinColumnSpace(r,!0),l=t.nodeMinColumnSpace(r,!1);if(r.column-s<=e&&r.column+l>=e){i=!1;break}}if(t=!1,i)for(n.reset();n.next();)i=n.value,i.column>e&&(--i.column,t=!0);return t}function Oj(t,e){var i=e+1,n,r=[],s=[];for(n=0;n<=t.Ia;n++)r[n]=!1,s[n]=!1;for(var l=t.network.vertexes.iterator;l.next();){n=l.value;var h=n.column-t.nodeMinColumnSpace(n,!0),a=n.column+t.nodeMinColumnSpace(n,!1);h<=e&&a>=e&&(r[n.layer]=!0),h<=i&&a>=i&&(s[n.layer]=!0)}for(h=!0,i=!1,n=0;n<=t.Ia;n++)h=h&&!(r[n]&&s[n]);if(h)for(l.reset();l.next();)t=l.value,t.column>e&&(--t.column,i=!0);return i}function oN(t,e){for(var i=0;i<=t.Ra;i++)for(;Fj(t,i););for(t.normalize(),i=0;i<t.Ra;i++)for(;Oj(t,i););t.normalize();var n;if(0<e)for(i=0;i<=t.Ra;i++){var r=Ai(t),s=ig(t);for(n=s+1;s<n;){n=s,sN(t,i,1);var l=ig(t);l>s?Nn(t,r):l<s&&(s=l,r=Ai(t))}}if(0>e)for(i=t.Ra;0<=i;i--)for(r=Ai(t),s=ig(t),n=s+1;s<n;)n=s,sN(t,i,-1),l=ig(t),l>s?Nn(t,r):l<s&&(s=l,r=Ai(t));t.normalize()}function sN(t,e,i){t.he=0;for(var n=t.network.vertexes.iterator;n.next();)n.value.component=-1;if(0<i)for(n.reset();n.next();){var r=n.value;r.column-t.nodeMinColumnSpace(r,!0)<=e&&(r.component=t.he)}if(0>i)for(n.reset();n.next();)r=n.value,r.column+t.nodeMinColumnSpace(r,!1)>=e&&(r.component=t.he);for(t.he++,n.reset();n.next();)e=n.value,e.component===-1&&(Xv(t,e,t.he,-1,!0,!0),t.he++);var s;for(e=[],s=0;s<t.he*t.he;s++)e[s]=!1;for(r=[],s=0;s<(t.Ia+1)*(t.Ra+1);s++)r[s]=-1;for(n.reset();n.next();){s=n.value;for(var l=s.layer,h=Math.max(0,s.column-t.nodeMinColumnSpace(s,!0)),a=Math.min(t.Ra,s.column+t.nodeMinColumnSpace(s,!1));h<=a;h++)r[l*(t.Ra+1)+h]=s.component}for(s=0;s<=t.Ia;s++){if(0<i)for(l=0;l<t.Ra;l++)r[s*(t.Ra+1)+l]!==-1&&r[s*(t.Ra+1)+l+1]!==-1&&r[s*(t.Ra+1)+l]!==r[s*(t.Ra+1)+l+1]&&(e[r[s*(t.Ra+1)+l]*t.he+r[s*(t.Ra+1)+l+1]]=!0);if(0>i)for(l=t.Ra;0<l;l--)r[s*(t.Ra+1)+l]!==-1&&r[s*(t.Ra+1)+l-1]!==-1&&r[s*(t.Ra+1)+l]!==r[s*(t.Ra+1)+l-1]&&(e[r[s*(t.Ra+1)+l]*t.he+r[s*(t.Ra+1)+l-1]]=!0)}for(r=[],s=0;s<t.he;s++)r[s]=!0;for(l=[],l.push(0);l.length!==0;)if(a=l[l.length-1],l.pop(),r[a])for(r[a]=!1,s=0;s<t.he;s++)e[a*t.he+s]&&l.splice(0,0,s);if(0<i)for(n.reset();n.next();)t=n.value,r[t.component]&&--t.column;if(0>i)for(n.reset();n.next();)i=n.value,r[i.component]&&(i.column+=1)}function Aj(t){for(var e=Yt(),i=t.bl.length,n=0;n<=i;n++)e[n]=[];for(n=t.network.vertexes.iterator;n.next();){var r=n.value;e[i-r.layer][r.index]=r}i=new q,Ij(e,i);var s=null,l=null,h=null,a=null,f=(t.se&1)!==0,p=(t.se&2)!==0,d=(t.se&4)!==0,y=(t.se&8)!==0;for(f&&(t.verticalAlignment(e,i,!0),s=rg(t,e,!0,!1)),e.reverse(),d&&(t.verticalAlignment(e,i,!1),h=rg(t,e,!1,!1)),n=c(e),r=n.next();!r.done;r=n.next())r.value.reverse();y&&(t.verticalAlignment(e,i,!1),a=rg(t,e,!1,!0)),e.reverse(),p&&(t.verticalAlignment(e,i,!0),l=rg(t,e,!0,!0)),Vt(e),t.u(s,l,h,a),t.network.vertexes.each(function(x){var v=Yt();f&&v.push(s.get(x)),p&&v.push(l.get(x)),d&&v.push(h.get(x)),y&&v.push(a.get(x)),v.sort(function(N,k){return N-k});var S=v.length;S=(v[Math.floor((S-1)/2)]+v[Math.ceil((S-1)/2)])/2,Vt(v),x.wc=S})}function Ij(t,e){for(var i=t.length,n=1;n<i-1;n++)for(var r=0,s=0,l=t[n],h=t[n+1],a=0;s<h.length;a++){var f=h[a];t:{if(f.node===null){var p=e1(f);if(0<p.length){p=p[0].node===null;break t}}p=!1}var d=p;if(a===h.length-1||d){for(p=l.length-1,d&&(p=e1(f)[0].index);s<=a;){if(f=h[s],!f.Zn){d=[];for(var y=c(f.sourceEdgesArrayAccess),x=y.next();!x.done;x=y.next())x=x.value,x.valid&&d.push(x);f.Zn=d}for(f=c(f.Zn),d=f.next();!d.done;d=f.next())d=d.value,y=d.fromVertex.index,(y<r||y>p)&&e.add(d);s++}r=p}}}zt.prototype.verticalAlignment=function(t,e,i){Dj(t),t=c(t);for(var n=t.next();!n.done;n=t.next()){var r=-1;n=c(n.value);for(var s=n.next();!s.done;s=n.next()){s=s.value;var l=i?e1(s):zj(s),h=l.length;if(0<h){l.sort(function(d,y){return d.si-y.si});var a=(h-1)/2;for(h=Math.floor(a),a=Math.ceil(a);h<=a;h++)if(s.align===s){var f=l[h],p=void 0;p=i?ag(f,s):ag(s,f),!e.contains(p)&&r<f.si&&(f.align=s,s.root=f.root,s.align=f.root,r=f.si)}}}}};function Dj(t){for(var e=0;e<t.length;e++)for(var i=t[e],n=0;n<i.length;n++){var r=i[n];r.root=r,r.align=r,r.Nz=e,r.si=n}}function rg(t,e,i,n){for(var r=t.K===90||t.K===270,s=c(e),l=s.next();!l.done;l=s.next()){var h=c(l.value);for(l=h.next();!l.done;l=h.next())l=l.value,l.md=l,l.shift=1/0,l.wc=NaN,l.ng=0}for(l=t.K===90||t.K===270,s=c(e),h=s.next();!h.done;h=s.next()){h=c(h.value);for(var a=h.next();!a.done;a=h.next())if(a=a.value,a.root===a){for(var f=0,p=a;p.align!==a;){var d=p.align,y=l?p.width:p.height,x=l?d.width:d.height;if(i){var v=ag(p,d),S=v.portFromPos,N=v.portToPos;v.link!==null&&(p.node&&p.node!==v.link.fromNode&&(S=l?p.focusX:p.focusY),d.node&&d.node!==v.link.toNode&&(N=l?d.focusX:d.focusY))}else v=ag(d,p),S=v.portToPos,N=v.portFromPos,v.link!==null&&(p.node&&p.node!==v.link.toNode&&(S=l?p.focusX:p.focusY),d.node&&d.node!==v.link.fromNode&&(N=l?d.focusX:d.focusY));y=n?p.ng+(y-S)-(x-N):p.ng+S-N,d.ng=y,f=Math.min(f,y),p=p.align}p=a;do p.ng=p.ng-f,p=p.align;while(p!==a)}}for(i=c(e),l=i.next();!l.done;l=i.next())for(s=c(l.value),l=s.next();!l.done;l=s.next())l=l.value,l.root===l&&lN(t,l,e);for(i=0;i<e.length;i++)if(!(0>=e[i].length)&&(l=e[i][0],l.md===l)){l.md.shift===1/0&&(l.md.shift=0),l=i,h=0;do{for(s=e[l][h];s.align!==s.root;)s=s.align,l++,0<s.si&&(h=uN(s,e),h.md.shift=Math.min(h.md.shift,s.md.shift+s.wc+s.ng-(h.wc+h.ng+(r?h.width:h.height)+t.columnSpacing)));h=s.si+1}while(l<e.length&&h<e[l].length&&s.md===e[l][h].md)}for(t=new vt,e=c(e),l=e.next();!l.done;l=e.next())for(i=c(l.value),l=i.next();!l.done;l=i.next())l=l.value,l.wc=l.wc+l.md.shift+l.ng,s=r?l.width:l.height,t.add(l,n?-l.wc-s:l.wc);return t}function lN(t,e,i){if(isNaN(e.wc)){e.wc=0;var n=e;do{if(0<n.si){var r=uN(n,i),s=r.root;lN(t,s,i),e.md===e&&(e.md=s.md);var l=t.K===90||t.K===270?r.width:r.height;e.md===s.md&&(e.wc=Math.max(e.wc,s.wc+r.ng+l-n.ng+t.columnSpacing))}n=n.align}while(n!==e);for(;n.align!==e;)n=n.align,n.wc=e.wc,n.md=e.md}}function uN(t,e){var i=t.Nz;return t=t.si,1>t&&R("Could not determine previous vertex in layer"),e[i][t-1]}zt.prototype.u=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];i=-1;for(var n=Yt(),r=Yt(),s=1/0,l=0;4>l;l++)if(e[l]){var h=Rj(this,e[l],n,r,l);h<s&&(i=l,s=h)}for(s={},l=0;4>l;s={delta:s.delta},l++)e[l]&&(s.delta=l===0||l===2?n[i]-n[l]:r[i]-r[l],s.delta!==0&&e[l].each(function(a){return function(f){f.value+=a.delta}}(s)));Vt(n),Vt(r)};function Rj(t,e,i,n,r){if(!e||e.count===0)return i[r]=0,n[r]=0,1/0;var s=1/0,l=-1/0;return e.each(function(h){var a=h.key;h=h.value,a=t.K===90||t.K===270?a.width:a.height,h<s&&(s=h),h+a>l&&(l=h+a)}),i[r]=s,n[r]=l,l-s}zt.prototype.commitLayout=function(){if(this.setsPortSpots)for(var t=og(this,!0),e=og(this,!1),i=this.network.edges.iterator;i.next();){var n=i.value.link;n!==null&&(n.fromSpot=t,n.toSpot=e)}this.commitNodes(),this.Cu(),this.isRouting&&this.commitLinks()};function og(t,e){return t.K===270?e?En:On:t.K===90?e?On:En:t.K===180?e?Fn:Xi:e?Xi:Fn}zt.prototype.commitNodes=function(){this.de=[],this.Dd=[],this.Cd=[],this.Ta=[];for(var t=0;t<=this.Ia;t++)this.de[t]=0,this.Dd[t]=0,this.Cd[t]=0,this.Ta[t]=0;for(t=this.network.vertexes.iterator;t.next();){var e=t.value,i=e.layer;this.de[i]=Math.max(this.de[i],this.nodeMinLayerSpace(e,!0)),this.Dd[i]=Math.max(this.Dd[i],this.nodeMinLayerSpace(e,!1))}e=0,i=this.ee;for(var n=0;n<=this.Ia;n++){var r=i;0>=this.de[n]+this.Dd[n]&&(r=0),0<n&&(e+=r/2),this.K===90||this.K===0?(e+=this.Dd[n],this.Cd[n]=e,e+=this.de[n]):(e+=this.de[n],this.Cd[n]=e,e+=this.Dd[n]),n<this.Ia&&(e+=r/2),this.Ta[n]=e}for(i=e,e=this.arrangementOrigin,n=0;n<=this.Ia;n++)this.K===270?this.Cd[n]=e.y+this.Cd[n]:this.K===90?(this.Cd[n]=e.y+i-this.Cd[n],this.Ta[n]=i-this.Ta[n]):this.K===180?this.Cd[n]=e.x+this.Cd[n]:(this.Cd[n]=e.x+i-this.Cd[n],this.Ta[n]=i-this.Ta[n]);i=this.se!==0,t.reset(),n=this.K===270||this.K===90;for(var s=1/0,l=r=1/0,h=-1/0;t.next();){var a=t.value,f=a.layer,p=a.column|0;n?(l=e.x+this.gc*p,f=this.Cd[f]):(l=this.Cd[f],f=e.y+this.gc*p),a.centerX=l,a.centerY=f,i&&isFinite(a.wc)&&(n?a.node?a.x=e.x+a.wc:a.centerX=e.x+a.wc:a.node?a.y=e.y+a.wc:a.centerY=e.y+a.wc),s=Math.min(a.x,s),r=Math.min(a.y,r),n?(l=s,h=Math.max(h,a.bounds.right)):(l=r,h=Math.max(h,a.bounds.bottom))}for(this.tw=h-l,s=e.x-s,e=e.y-r,this.Pf=new P(i&&n?0:s,i&&!n?0:e),t.reset();t.next();)i=t.value,i.x+=s,i.y+=e,i.commit()},zt.prototype.Cu=function(){for(var t=0,e=this.ee,i=0;i<=this.Ia;i++)t+=this.de[i],t+=this.Dd[i];t+=this.Ia*e,e=[],i=this.se!==0?this.tw:this.gc*this.Ra;for(var n=this.maxLayer;0<=n;n--)this.K===270?n===0?e.push(new V(0,0,i,Math.abs(this.Ta[0]))):e.push(new V(0,this.Ta[n-1],i,Math.abs(this.Ta[n-1]-this.Ta[n]))):this.K===90?n===0?e.push(new V(0,this.Ta[0],i,Math.abs(this.Ta[0]-t))):e.push(new V(0,this.Ta[n],i,Math.abs(this.Ta[n-1]-this.Ta[n]))):this.K===180?n===0?e.push(new V(0,0,Math.abs(this.Ta[0]),i)):e.push(new V(this.Ta[n-1],0,Math.abs(this.Ta[n-1]-this.Ta[n]),i)):n===0?e.push(new V(this.Ta[0],0,Math.abs(this.Ta[0]-t),i)):e.push(new V(this.Ta[n],0,Math.abs(this.Ta[n-1]-this.Ta[n]),i));this.commitLayers(e,this.Pf)},zt.prototype.commitLayers=function(){},zt.prototype.commitLinks=function(){for(var t=this.network.edges.iterator,e;t.next();)e=t.value.link,e!==null&&(e.qh(),e.Dj(),e.xf());for(t.reset();t.next();)e=t.value.link,e!==null&&e.sg();for(t.reset();t.next();){var i=t.value;if(e=i.link,e!==null){e.qh();var n=e,r=n.fromNode,s=n.toNode,l=n.fromPort,h=n.toPort;if(r!==null){var a=r.findVisibleNode();a!==null&&a!==r&&(r=a,l=a.port)}s!==null&&(a=s.findVisibleNode(),a!==null&&a!==s&&(s=a,h=a.port));var f=e.computeSpot(!0,l);a=e.computeSpot(!1,h);var p=i.fromVertex,d=i.toVertex;if(i.valid){if(e.curve===un&&e.pointsCount===4)if(p.column===d.column&&this.alignOption===0)i=e.getLinkPoint(r,l,f,!0,!1,s,h),l=e.getLinkPoint(s,h,a,!1,!1,r,l),i.w()||i.set(r.actualBounds.center),l.w()||l.set(s.actualBounds.center),e.Dj(),e.wf(i.x,i.y),e.wf((2*i.x+l.x)/3,(2*i.y+l.y)/3),e.wf((i.x+2*l.x)/3,(i.y+2*l.y)/3),e.wf(l.x,l.y);else{var y=!1,x=!1;if(l!==null&&f===$e&&(y=!0),h!==null&&a===$e&&(x=!0),y||x){var v=e.i(0).x;if(i=e.i(0).y,p=e.i(3).x,n=e.i(3).y,y){if(this.K===90||this.K===270){y=v;var S=(i+n)/2}else y=(v+p)/2,S=i;e.M(1,y,S),f=e.getLinkPoint(r,l,f,!0,!1,s,h),f.w()||f.set(r.actualBounds.center),e.M(0,f.x,f.y)}x&&(this.K===90||this.K===270?(f=p,i=(i+n)/2):(f=(v+p)/2,i=n),e.M(2,f,i),r=e.getLinkPoint(s,h,a,!1,!1,r,l),r.w()||r.set(s.actualBounds.center),e.M(3,r.x,r.y))}}e.xf()}else if(p.layer===d.layer)e.xf();else{if(y=x=!1,S=this.ee,v=e.firstPickIndex+1,e.isOrthogonal){y=!0;var N=e.pointsCount;4<N&&e.points.removeRange(2,N-3)}else if(e.curve===un)x=!0,N=e.pointsCount,4<N&&e.points.removeRange(2,N-3),N===4&&(v=2);else{N=e.pointsCount;var k=f===$e,C=a===$e;2<N&&k&&C?e.points.removeRange(1,N-2):3<N&&k&&!C?e.points.removeRange(1,N-3):3<N&&!k&&C?e.points.removeRange(2,N-2):4<N&&!k&&!C&&e.points.removeRange(2,N-3)}if(i.rev){for(;d!==null&&p!==d;){var T=N=null;for(k=d.sourceEdges.iterator;k.next()&&(C=k.value,C.link!==i.link||(N=C.fromVertex,T=C.toVertex,N.node!==null)););if(N===null)break;if(N!==p){k=e.i(v-1).x,C=e.i(v-1).y;var L=N.centerX,E=N.centerY;if(y)this.K===180||this.K===0?v===e.firstPickIndex+1?(e.l(v++,k,C),e.l(v++,k,E)):(T!==null?T.centerY:C)!==E&&(T=this.Ta[N.layer-1]+this.Pf.x,e.l(v++,T,C),e.l(v++,T,E)):v===e.firstPickIndex+1?(e.l(v++,k,C),e.l(v++,L,C)):(T!==null?T.centerX:k)!==L&&(T=this.Ta[N.layer-1]+this.Pf.y,e.l(v++,k,T),e.l(v++,L,T));else if(v===e.firstPickIndex+1){T=Math.max(10,this.de[d.layer]);var I=Math.max(10,this.Dd[d.layer]);if(x)this.K===180?L<=d.bounds.x?(d=d.bounds.x,e.l(v++,d-T,E),e.l(v++,d,E),e.l(v++,d+I,E)):(e.l(v++,L-T,E),e.l(v++,L,E),e.l(v++,L+I,E)):this.K===90?E>=d.bounds.bottom?(d=d.bounds.y+d.bounds.height,e.l(v++,L,d+I),e.l(v++,L,d),e.l(v++,L,d-T)):(e.l(v++,L,E+I),e.l(v++,L,E),e.l(v++,L,E-T)):this.K===270?E<=d.bounds.y?(d=d.bounds.y,e.l(v++,L,d-T),e.l(v++,L,d),e.l(v++,L,d+I)):(e.l(v++,L,E-T),e.l(v++,L,E),e.l(v++,L,E+I)):this.K===0&&(L>=d.bounds.right?(d=d.bounds.x+d.bounds.width,e.l(v++,d+I,E),e.l(v++,d,E),e.l(v++,d-T,E)):(e.l(v++,L+I,E),e.l(v++,L,E),e.l(v++,L-T,E)));else{e.l(v++,k,C);var Z=0;this.K===180||this.K===0?((this.K===180?L>=d.bounds.right:L<=d.bounds.x)&&(Z=(this.K===0?-T:I)/2),e.l(v++,k+Z,E)):((this.K===270?E>=d.bounds.bottom:E<=d.bounds.y)&&(Z=(this.K===90?-T:I)/2),e.l(v++,L,C+Z)),e.l(v++,L,E)}}else T=Math.max(10,this.de[N.layer]),I=Math.max(10,this.Dd[N.layer]),x?this.K===180?(e.l(v++,L-T-S,E),e.l(v++,Math.min(L-T+S/2,L),E),e.l(v++,L,E),e.l(v++,L,E),e.l(v++,Math.max(L+I-S/2,L),E),e.l(v++,L+I+S,E)):this.K===90?(e.l(v++,L,E+I+S),e.l(v++,L,Math.max(E+I-S/2,E)),e.l(v++,L,E),e.l(v++,L,E),e.l(v++,L,Math.min(E-T+S/2,E)),e.l(v++,L,E-T-S)):this.K===270?(e.l(v++,L,E-T-S),e.l(v++,L,Math.min(E-T+S/2,E)),e.l(v++,L,E),e.l(v++,L,E),e.l(v++,L,Math.max(E+I-S/2,E)),e.l(v++,L,E+I+S)):(e.l(v++,L+I+S,E),e.l(v++,Math.max(L+I-S/2,L),E),e.l(v++,L,E),e.l(v++,L,E),e.l(v++,Math.min(L-T+S/2,L),E),e.l(v++,L-T-S,E)):e.l(v++,L,E)}d=N}(h===null||f!==$e||y)&&(k=e.i(v-1).x,C=e.i(v-1).y,L=e.i(v).x,E=e.i(v).y,y?(S=this.Dd[p.layer],this.K===180||this.K===0?(y=C,y>=p.bounds.y&&y<=p.bounds.bottom&&(this.K===180?L>=p.bounds.x:L<=p.bounds.right)&&(d=p.centerX+(this.K===180?-S:S),y<p.bounds.y+p.bounds.height/2?y=p.bounds.y-this.gc/2:y=p.bounds.bottom+this.gc/2,e.l(v++,d,C),e.l(v++,d,y)),e.l(v++,L,y)):(y=k,y>=p.bounds.x&&y<=p.bounds.right&&(this.K===270?E>=p.bounds.y:E<=p.bounds.bottom)&&(d=p.centerY+(this.K===270?-S:S),y<p.bounds.x+p.bounds.width/2?y=p.bounds.x-this.gc/2:y=p.bounds.right+this.gc/2,e.l(v++,k,d),e.l(v++,y,d)),e.l(v++,y,E)),e.l(v++,L,E)):x?(T=Math.max(10,this.de[p.layer]),I=Math.max(10,this.Dd[p.layer]),this.K===180&&L>=p.bounds.x?(d=p.bounds.x+p.bounds.width,e.M(v-2,d,C),e.M(v-1,d+I,C)):this.K===90&&E<=p.bounds.bottom?(d=p.bounds.y,e.M(v-2,k,d),e.M(v-1,k,d-T)):this.K===270&&E>=p.bounds.y?(d=p.bounds.y+p.bounds.height,e.M(v-2,k,d),e.M(v-1,k,d+I)):this.K===0&&L<=p.bounds.right&&(d=p.bounds.x,e.M(v-2,d,C),e.M(v-1,d-T,C))):(T=Math.max(10,this.de[p.layer]),I=Math.max(10,this.Dd[p.layer]),y=0,this.K===180||this.K===0?((this.K===180?L<=p.bounds.x:L>=p.bounds.right)&&(y=(this.K===0?I:-T)/2),e.l(v++,L+y,C)):((this.K===270?E<=p.bounds.y:E>=p.bounds.bottom)&&(y=(this.K===90?I:-T)/2),e.l(v++,k,E+y)),e.l(v++,L,E)))}else{for(;p!==null&&p!==d;){for(T=N=null,p=p.destinationEdges.iterator;p.next()&&(k=p.value,k.link!==i.link||(N=k.toVertex,T=k.fromVertex,T.node!==null&&(T=null),N.node!==null)););if(N===null)break;N!==d&&(k=e.i(v-1).x,C=e.i(v-1).y,L=N.centerX,E=N.centerY,y?this.K===180||this.K===0?(T!==null?T.centerY:C)!==E&&(T=this.Ta[N.layer]+this.Pf.x,v===e.firstPickIndex+1&&(T=this.K===0?Math.max(T,k):Math.min(T,k)),e.l(v++,T,C),e.l(v++,T,E)):(T!==null?T.centerX:k)!==L&&(T=this.Ta[N.layer]+this.Pf.y,v===e.firstPickIndex+1&&(T=this.K===90?Math.max(T,C):Math.min(T,C)),e.l(v++,k,T),e.l(v++,L,T)):(T=Math.max(10,this.de[N.layer]),I=Math.max(10,this.Dd[N.layer]),x?this.K===180?(e.l(v++,L+I+S,E),e.l(v++,Math.max(L+I-S/2,L),E),e.l(v++,L,E),e.l(v++,L,E),e.l(v++,Math.min(L-T+S/2,L),E),e.l(v++,L-T-S,E)):this.K===90?(e.l(v++,L,E-T-S),e.l(v++,L,Math.min(E-T+S/2,E)),e.l(v++,L,E),e.l(v++,L,E),e.l(v++,L,Math.max(E+I-S/2,E)),e.l(v++,L,E+I+S)):this.K===270?(e.l(v++,L,E+I+S),e.l(v++,L,Math.max(E+I-S/2,E)),e.l(v++,L,E),e.l(v++,L,E),e.l(v++,L,Math.min(E-T+S/2,E)),e.l(v++,L,E-T-S)):(e.l(v++,L-T-S,E),e.l(v++,Math.min(L-T+S/2,L),E),e.l(v++,L,E),e.l(v++,L,E),e.l(v++,Math.max(L+I-S/2,L),E),e.l(v++,L+I+S,E)):this.K===180?(e.l(v++,L+I,E),e.l(v++,L-T,E)):this.K===90?(e.l(v++,L,E-T),e.l(v++,L,E+I)):this.K===270?(e.l(v++,L,E+I),e.l(v++,L,E-T)):(e.l(v++,L-T,E),e.l(v++,L+I,E)))),p=N}y&&(k=e.i(v-1).x,C=e.i(v-1).y,L=e.i(v).x,E=e.i(v).y,this.K===180||this.K===0?C!==E&&(T=this.K===0?Math.min(Math.max((L+k)/2,this.Ta[d.layer]+this.Pf.x),L):Math.max(Math.min((L+k)/2,this.Ta[d.layer]+this.Pf.x),L),e.l(v++,T,C),e.l(v++,T,E)):k!==L&&(T=this.K===90?Math.min(Math.max((E+C)/2,this.Ta[d.layer]+this.Pf.y),E):Math.max(Math.min((E+C)/2,this.Ta[d.layer]+this.Pf.y),E),e.l(v++,k,T),e.l(v++,L,T)))}n!==null&&x&&(l!==null&&(f===$e&&(f=e.i(0),n=e.i(2),f.C(n)||e.M(1,(f.x+n.x)/2,(f.y+n.y)/2)),f=e.getLinkPoint(r,l,$e,!0,!1,s,h),f.w()||f.set(r.actualBounds.center),e.M(0,f.x,f.y)),h!==null&&(a===$e&&(a=e.i(e.pointsCount-1),f=e.i(e.pointsCount-3),a.C(f)||e.M(e.pointsCount-2,(a.x+f.x)/2,(a.y+f.y)/2)),r=e.getLinkPoint(s,h,$e,!1,!1,r,l),r.w()||r.set(s.actualBounds.center),e.M(e.pointsCount-1,r.x,r.y))),e.xf(),i.commit()}}}this.avoidOrthogonalOverlaps()},zt.prototype.avoidOrthogonalOverlaps=function(){if(!(0>=this.linkSpacing)){for(var t=new tt,e=this.network.edges.iterator;e.next();){var i=e.value.link;i!==null&&i.isOrthogonal&&!t.contains(i)&&t.add(i)}if(0<t.count)if(this.K===90||this.K===270){for(e=0,i=[],t=t.iterator;t.next();){var n=t.value;if(n!==null&&n.isOrthogonal)for(var r=2;r<n.pointsCount-3;r++){var s=n.i(r),l=n.i(r+1);if(this.B(s.y,l.y)&&!this.B(s.x,l.x)){var h=new Vs;h.layer=Math.floor(s.y/2);var a=n.i(0),f=n.i(n.pointsCount-1);if(h.first=a.x*a.x+a.y,h.fc=f.x*f.x+f.y,h.ld=Math.min(s.x,l.x),h.Fc=Math.max(s.x,l.x),h.index=r,h.link=n,r+2<n.pointsCount){a=n.i(r-1),f=n.i(r+2);var p=0;a.y<s.y?p=f.y<s.y?3:s.x<l.x?2:1:a.y>s.y&&(p=f.y>s.y?0:l.x<s.x?2:1),h.j=p}i.push(h)}}}if(1<i.length)for(i.sort(this.Ux),t=0;t<i.length;){for(s=i[t].layer,n=t+1;n<i.length&&i[n].layer===s;)n++;if(1<n-t)for(s=t;s<n;){for(l=i[s].Fc,r=t+1;r<n&&i[r].ld<l;)l=Math.max(l,i[r].Fc),r++;if(l=r-s,1<l){for(this.wi(i,this.Es,s,s+l),p=1,h=i[s].fc,a=s;a<r;a++)f=i[a],f.fc!==h&&(p++,h=f.fc);this.wi(i,this.Tx,s,s+l);var d=1;for(h=i[s].first,a=s;a<r;a++)f=i[a],f.first!==h&&(d++,h=f.first);for(a=!0,f=d,p<d?(a=!1,f=p,h=i[s].fc,this.wi(i,this.Es,s,s+l)):h=i[s].first,p=0,d=s;d<r;d++){var y=i[d];(a?y.first:y.fc)!==h&&(p++,h=a?y.first:y.fc);var x=y.link;s=x.i(y.index),l=x.i(y.index+1);var v=this.linkSpacing*(p-(f-1)/2);e++,x.qh(),x.M(y.index,s.x,s.y+v),x.M(y.index+1,l.x,l.y+v),x.xf()}}s=r}t=n}}else{for(e=0,i=[],t=t.iterator;t.next();)if(n=t.value,n!==null&&n.isOrthogonal)for(r=2;r<n.pointsCount-3;r++)s=n.i(r),l=n.i(r+1),this.B(s.x,l.x)&&!this.B(s.y,l.y)&&(h=new Vs,h.layer=Math.floor(s.x/2),a=n.i(0),f=n.i(n.pointsCount-1),h.first=a.x+a.y*a.y,h.fc=f.x+f.y*f.y,h.ld=Math.min(s.y,l.y),h.Fc=Math.max(s.y,l.y),h.index=r,h.link=n,r+2<n.pointsCount&&(a=n.i(r-1),f=n.i(r+2),p=0,a.x<s.x?p=f.x<s.x?3:s.y<l.y?2:1:a.x>s.x&&(p=f.x>s.x?0:l.y<s.y?2:1),h.j=p),i.push(h));if(1<i.length)for(i.sort(this.Ux),t=0;t<i.length;){for(s=i[t].layer,n=t+1;n<i.length&&i[n].layer===s;)n++;if(1<n-t)for(s=t;s<n;){for(l=i[s].Fc,r=t+1;r<n&&i[r].ld<l;)l=Math.max(l,i[r].Fc),r++;if(l=r-s,1<l){for(this.wi(i,this.Es,s,s+l),p=1,h=i[s].fc,a=s;a<r;a++)f=i[a],f.fc!==h&&(p++,h=f.fc);for(this.wi(i,this.Tx,s,s+l),d=1,h=i[s].first,a=s;a<r;a++)f=i[a],f.first!==h&&(d++,h=f.first);for(a=!0,f=d,p<d?(a=!1,f=p,h=i[s].fc,this.wi(i,this.Es,s,s+l)):h=i[s].first,p=0,d=s;d<r;d++)y=i[d],(a?y.first:y.fc)!==h&&(p++,h=a?y.first:y.fc),x=y.link,s=x.i(y.index),l=x.i(y.index+1),v=this.linkSpacing*(p-(f-1)/2),e++,x.qh(),x.M(y.index,s.x+v,s.y),x.M(y.index+1,l.x+v,l.y),x.xf()}s=r}t=n}}}},o=zt.prototype,o.Ux=function(t,e){return t instanceof Vs&&e instanceof Vs&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.ld<e.ld?-1:t.ld>e.ld?1:t.Fc<e.Fc?-1:t.Fc>e.Fc?1:0:0},o.Tx=function(t,e){return t instanceof Vs&&e instanceof Vs&&t!==e?t.first<e.first?-1:t.first>e.first||t.j<e.j?1:t.j>e.j||t.ld<e.ld?-1:t.ld>e.ld?1:t.Fc<e.Fc?-1:t.Fc>e.Fc?1:0:0},o.Es=function(t,e){return t instanceof Vs&&e instanceof Vs&&t!==e?t.fc<e.fc?-1:t.fc>e.fc||t.j<e.j?1:t.j>e.j||t.ld<e.ld?-1:t.ld>e.ld?1:t.Fc<e.Fc?-1:t.Fc>e.Fc?1:0:0},o.B=function(t,e){return t-=e,-1<t&&1>t},o.wi=function(t,e,i,n){var r=t.length,s=n-i;if(!(1>=s))if((0>i||i>=r-1)&&R("not in range 0 <= from < length: "+i),s===2)n=t[i],r=t[i+1],0<e(n,r)&&(t[i]=r,t[i+1]=n);else if(i===0)if(n>=r)t.sort(e);else for(i=t.slice(0,n),i.sort(e),e=0;e<n;e++)t[e]=i[e];else if(n>=r)for(n=t.slice(i),n.sort(e),e=i;e<r;e++)t[e]=n[e-i];else for(r=t.slice(i,n),r.sort(e),e=i;e<n;e++)t[e]=r[e-i]};function Bs(t,e){var i=t.qc[e];if(i>=t.Ee.length){for(var n=[],r=0;r<t.Ee.length;r++)n[r]=t.Ee[r];t.Ee=n}for(t.Ee[i]===void 0||t.Ee[i]===null?n=[]:(n=t.Ee[i],t.Ee[i]=null),t=t.bl[e],e=0;e<t.length;e++)i=t[e],n[i.index]=i;return n}function zs(t,e,i){t.Ee[t.qc[e]]=i}z.Object.defineProperties(zt.prototype,{layerSpacing:{get:function(){return this.ee},set:function(t){this.ee!==t&&0<=t&&(this.ee=t,this.D())}},columnSpacing:{get:function(){return this.gc},set:function(t){this.gc!==t&&0<t&&(this.gc=t,this.D())}},direction:{get:function(){return this.K},set:function(t){this.K!==t&&(t===0||t===90||t===180||t===270?(this.K=t,this.D()):R("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}},cycleRemoveOption:{get:function(){return this.zk},set:function(t){this.zk===t||t!==$v&&t!==sg&&t!==qf||(this.zk=t,this.D())}},layeringOption:{get:function(){return this.Vk},set:function(t){this.Vk===t||t!==lg&&t!==Jv&&t!==Zv||(this.Vk=t,this.D())}},initializeOption:{get:function(){return this.Mk},set:function(t){this.Mk===t||t!==ug&&t!==Qv&&t!==qv||(this.Mk=t,this.D())}},iterations:{get:function(){return this.Zi},set:function(t){this.Zi!==t&&0<=t&&(this.Zi=t,this.D())}},aggressiveOption:{get:function(){return this.mk},set:function(t){this.mk===t||t!==bv&&t!==hg&&t!==t1||(this.mk=t,this.D())}},packOption:{get:function(){return this.Zf},set:function(t){this.Zf!==t&&0<=t&&8>t&&(this.Zf=t,this.D())}},alignOption:{get:function(){return this.se},set:function(t){this.se!==t&&0<=t&&16>t&&(this.se=t,this.D())}},setsPortSpots:{get:function(){return this.qf},set:function(t){this.qf!==t&&(this.qf=t,this.D())}},linkSpacing:{get:function(){return this.zn},set:function(t){this.zn!==t&&0<=t&&(this.zn=t,this.D())}},maxLayer:{get:function(){return this.Ia}},maxIndex:{get:function(){return this.Cq}},maxColumn:{get:function(){return this.Ra}},minIndexLayer:{get:function(){return this.En}},maxIndexLayer:{get:function(){return this.Ed}}});var sg=new Q(zt,"CycleDepthFirst",0),$v=new Q(zt,"CycleGreedy",1),qf=new Q(zt,"CycleFromLayers",2),lg=new Q(zt,"LayerOptimalLinkLength",0),Jv=new Q(zt,"LayerLongestPathSink",1),Zv=new Q(zt,"LayerLongestPathSource",2),ug=new Q(zt,"InitDepthFirstOut",0),Qv=new Q(zt,"InitDepthFirstIn",1),qv=new Q(zt,"InitNaive",2),bv=new Q(zt,"AggressiveNone",0),hg=new Q(zt,"AggressiveLess",1),t1=new Q(zt,"AggressiveMore",2),Bj=8;zt.className="LayeredDigraphLayout",zt.CycleDepthFirst=sg,zt.CycleGreedy=$v,zt.CycleFromLayers=qf,zt.LayerOptimalLinkLength=lg,zt.LayerLongestPathSink=Jv,zt.LayerLongestPathSource=Zv,zt.InitDepthFirstOut=ug,zt.InitDepthFirstIn=Qv,zt.InitNaive=qv,zt.AggressiveNone=bv,zt.AggressiveLess=hg,zt.AggressiveMore=t1,zt.PackNone=0,zt.PackExpand=1,zt.PackStraighten=2,zt.PackMedian=4,zt.PackAll=15,zt.AlignNone=0,zt.AlignUpperLeft=1,zt.AlignUpperRight=2,zt.AlignLowerLeft=4,zt.AlignLowerRight=8,zt.AlignAll=15;function Vs(){this.index=this.Fc=this.ld=this.fc=this.first=this.layer=0,this.link=null,this.j=0}Vs.className="SegInfo";function bh(t){Xt.call(this,t)}B(bh,Xt),bh.prototype.createVertex=function(){return new Pn(this)},bh.prototype.createEdge=function(){return new bf(this)},bh.className="LayeredDigraphNetwork";function Pn(t){we.call(this,t),this.Xn=this.Zn=this.Yn=this.$n=null,this.Za=this.xg=this.aj=-1,this.u=NaN,this.F=null,this.valid=!1,this.finish=this.Gl=NaN,this.Bj=0,this.bv=this.cv=null}B(Pn,we);function hN(t,e){return t.index-e.index}function ag(t,e){if(!t.Xn){for(var i=[],n=c(t.destinationEdgesArrayAccess),r=n.next();!r.done;r=n.next())r=r.value,r.valid&&i.push(r);t.Xn=i}for(t=c(t.Xn),i=t.next();!i.done;i=t.next())if(i=i.value,i.toVertex===e)return i;R("Unable to find destination edge to given vertex")}function e1(t){if(!t.$n){for(var e=[],i=c(t.sourceEdgesArrayAccess),n=i.next();!n.done;n=i.next())n=n.value,n.valid&&e.push(n.fromVertex);e.sort(hN),t.$n=e}return t.$n}function zj(t){if(!t.Yn){for(var e=[],i=c(t.destinationEdgesArrayAccess),n=i.next();!n.done;n=i.next())n=n.value,n.valid&&e.push(n.toVertex);e.sort(hN),t.Yn=e}return t.Yn}Pn.prototype.yl=function(t){we.prototype.yl.call(this,t),this.Zn=this.$n=null},Pn.prototype.Fl=function(t){we.prototype.Fl.call(this,t),this.Zn=this.$n=null},Pn.prototype.vl=function(t){we.prototype.vl.call(this,t),this.Xn=this.Yn=null},Pn.prototype.El=function(t){we.prototype.El.call(this,t),this.Xn=this.Yn=null},z.Object.defineProperties(Pn.prototype,{layer:{get:function(){return this.aj},set:function(t){this.aj!==t&&(this.aj=t)}},column:{get:function(){return this.xg},set:function(t){this.xg!==t&&(this.xg=t)}},index:{get:function(){return this.Za},set:function(t){this.Za!==t&&(this.Za=t)}},component:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},near:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}}}),Pn.prototype.deleteDestinationEdge=Pn.prototype.El,Pn.prototype.addDestinationEdge=Pn.prototype.vl,Pn.prototype.deleteSourceEdge=Pn.prototype.Fl,Pn.prototype.addSourceEdge=Pn.prototype.yl,Pn.className="LayeredDigraphVertex";function bf(t){Wi.call(this,t),this.j=this.ga=this.Ha=!1,this.V=this.u=NaN,this.F=this.m=0}B(bf,Wi),z.Object.defineProperties(bf.prototype,{fromVertex:{get:function(){return this.cd},set:function(t){this.cd!==t&&(this.cd=t)}},toVertex:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t)}},valid:{get:function(){return this.Ha},set:function(t){this.Ha!==t&&(this.Ha=t)}},rev:{get:function(){return this.ga},set:function(t){this.ga!==t&&(this.ga=t)}},forest:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},portFromPos:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},portToPos:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t)}},portFromColOffset:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t)}},portToColOffset:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}}}),bf.className="LayeredDigraphEdge";function kt(t){Jt.call(this),this.Qb=new q,this.Tn=dg,this.qd=io,this.so=yg,this.vq=c1,this.Wv=[],this.od=!0,this.Mb=mg,this.Wd=new pt(10,10).freeze();var e=new Eu(this);this.W=new Bn(e),this.Y=new Bn(e),this.ou=[],t&&Object.assign(this,t)}B(kt,Jt),kt.prototype.cloneProtected=function(t){Jt.prototype.cloneProtected.call(this,t),t.Tn=this.Tn,t.so=this.so,t.vq=this.vq,t.od=this.od,t.Mb=this.Mb,t.Wd.assign(this.Wd),t.W.copyInheritedPropertiesFrom(this.W),t.Y.copyInheritedPropertiesFrom(this.Y)},kt.prototype.rb=function(t){t.classType===kt?t.name.indexOf("Alignment")===0?this.alignment=t:t.name.indexOf("Arrangement")===0?this.arrangement=t:t.name.indexOf("Compaction")===0?this.compaction=t:t.name.indexOf("Path")===0?this.path=t:t.name.indexOf("Sorting")===0?this.sorting=t:t.name.indexOf("Style")===0?this.treeStyle=t:R("Unknown enum value: "+t):Jt.prototype.rb.call(this,t)},kt.prototype.createNetwork=function(){return new Eu(this)},kt.prototype.makeNetwork=function(t){function e(n){if(n instanceof b)return!n.isLinkLabel&&n.category!=="Comment";if(n instanceof X){var r=n.fromNode;return r===null||r.isLinkLabel||r.category==="Comment"?!1:(n=n.toNode,!(n===null||n.isLinkLabel||n.category==="Comment"))}return!1}var i=this.createNetwork();return t instanceof D?(i.ig(t.nodes,!0,e),i.ig(t.links,!0,e)):t instanceof yt?i.ig(t.memberParts,!1,e):i.ig(t.iterator,!1,e),i},kt.prototype.doLayout=function(t){this.network===null&&(this.network=this.makeNetwork(t)),this.arrangement!==vg&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));var e=this.diagram;if(e===null&&t instanceof D&&(e=t),this.path===dg&&e!==null?this.qd=e.isTreePathToChildren?io:Lu:this.qd=this.path===dg?io:this.path,0<this.network.vertexes.count){for(this.network.Ho(),t=this.network.vertexes.iterator;t.next();)e=t.value,e.initialized=!1,e.level=0,e.parent=null,e.children=[];if(0<this.Qb.count){for(t=new q,e=this.Qb.iterator;e.next();){var i=e.value;i instanceof b?(i=this.network.hi(i),i!==null&&t.add(i)):i instanceof Bn&&t.add(i)}this.Qb=t}for(this.Qb.count===0&&this.findRoots(),t=this.Qb.copy().iterator;t.next();)e=t.value,e.initialized||(e.initialized=!0,i1(this,e));for(e=this.network.vertexes,t=null;t=Vj(e),0<t.count;)e=aN(this,t),e!==null&&this.Qb.add(e),e.initialized=!0,i1(this,e),e=t;for(t=this.Qb.iterator;t.next();)e=t.value,e instanceof Bn&&cN(this,e);for(t=this.Qb.iterator;t.next();)e=t.value,e instanceof Bn&&pN(this,e);for(t=this.Qb.iterator;t.next();)e=t.value,e instanceof Bn&&dN(this,e);if(this.zu(),this.layerStyle===xg){for(t=[],e=this.network.vertexes.iterator;e.next();){i=e.value;var n=i.parent;n===null&&(n=i),n=n.angle===0||n.angle===180;var r=t[i.level];r===void 0&&(r=0),t[i.level]=Math.max(r,n?i.width:i.height)}for(e=0;e<t.length;e++)t[e]===void 0&&(t[e]=0);for(this.Wv=t,e=this.network.vertexes.iterator;e.next();)i=e.value,n=i.parent,n===null&&(n=i),n.angle===0||n.angle===180?(n.angle===180&&(i.focusX+=t[i.level]-i.width),i.width=t[i.level]):(n.angle===270&&(i.focusY+=t[i.level]-i.height),i.height=t[i.level])}else if(this.layerStyle===p1)for(t=this.network.vertexes.iterator;t.next();){for(e=t.value,i=e.angle===0||e.angle===180,n=-1,r=0;r<e.children.length;r++){var s=e.children[r];n=Math.max(n,i?s.width:s.height)}if(0<=n)for(r=0;r<e.children.length;r++)s=e.children[r],i?(e.angle===180&&(s.focusX+=n-s.width),s.width=n):(e.angle===270&&(s.focusY+=n-s.height),s.height=n)}for(t=this.Qb.iterator;t.next();)e=t.value,e instanceof Bn&&this.layoutTree(e);this.arrangeTrees(),this.updateParts()}this.network=null,this.Qb=new q,this.isValidLayout=!0};function Vj(t){var e=new q;for(t=t.iterator;t.next();){var i=t.value;i.initialized||e.add(i)}return e}kt.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.iterator;e.next();){var i=e.value;switch(this.qd){case io:i.sourceEdges.count===0&&this.Qb.add(i);break;case Lu:i.destinationEdges.count===0&&this.Qb.add(i);break;default:R("Unhandled path value "+this.qd.toString())}}this.Qb.count===0&&(t=aN(this,t),t!==null&&this.Qb.add(t))};function aN(t,e){var i=999999,n=null;for(e=e.iterator;e.next();){var r=e.value;switch(t.qd){case io:r.sourceEdges.count<i&&(i=r.sourceEdges.count,n=r);break;case Lu:r.destinationEdges.count<i&&(i=r.destinationEdges.count,n=r);break;default:R("Unhandled path value "+t.qd.toString())}}return n}function i1(t,e){if(e!==null){switch(t.qd){case io:if(0<e.destinationEdges.count){for(var i=new tt,n=e.destinationVertexes;n.next();){var r=n.value;fN(t,e,r)&&i.add(r)}0<i.count&&(e.children=i.Fa())}break;case Lu:if(0<e.sourceEdges.count){for(i=new tt,n=e.sourceVertexes;n.next();)r=n.value,fN(t,e,r)&&i.add(r);0<i.count&&(e.children=i.Fa())}break;default:R("Unhandled path value"+t.qd.toString())}for(i=e.children,n=i.length,r=0;r<n;r++){var s=i[r];s.initialized=!0,s.level=e.level+1,s.parent=e,t.Qb.remove(s)}for(e=0;e<n;e++)i1(t,i[e])}}function fN(t,e,i){if(i.initialized){if(e===null)var n=!1;else{for(n=e.parent;n!==null&&n!==i;)n=n.parent;n=n===i}if(n||i.level>e.level)return!1;t.removeChild(i.parent,i)}return!0}kt.prototype.removeChild=function(t,e){if(t!==null&&e!==null){for(var i=t.children,n=0,r=0;r<i.length;r++)i[r]===e&&n++;if(0<n){n=Array(i.length-n);for(var s=r=0;s<i.length;s++)i[s]!==e&&(n[r++]=i[s]);t.children=n}}};function cN(t,e){if(e!==null){t.initializeTreeVertexValues(e),e.alignment===oo&&t.sortTreeVertexChildren(e);for(var i=0,n=e.childrenCount,r=0,s=e.children,l=s.length,h=0;h<l;h++){var a=s[h];cN(t,a),i+=a.descendantCount+1,n=Math.max(n,a.maxChildrenCount),r=Math.max(r,a.maxGenerationCount)}e.descendantCount=i,e.maxChildrenCount=n,e.maxGenerationCount=0<n?r+1:0}}function Uj(t,e){switch(t.so){default:case yg:return e.parent!==null?e.parent:t.W;case a1:return e.parent===null?t.W:e.parent.parent===null?t.Y:e.parent;case h1:return e.parent!==null?e.parent.parent!==null?e.parent.parent:t.Y:t.W;case u1:var i=!0;if(e.childrenCount===0)i=!1;else for(var n=e.children,r=n.length,s=0;s<r;s++)if(0<n[s].childrenCount){i=!1;break}return i&&e.parent!==null?t.Y:e.parent!==null?e.parent:t.W}}kt.prototype.initializeTreeVertexValues=function(t){if(t.copyInheritedPropertiesFrom(Uj(this,t)),t.parent!==null&&t.parent.alignment===oo){for(var e=t.angle,i=t.parent.children,n=0;n<i.length&&t!==i[n];)n++;n%2===0?n!==i.length-1&&(e=e===90?180:e===180?270:e===270?180:270):e=e===90?0:e===180?90:e===270?0:90,t.angle=e}t.initialized=!0};function pN(t,e){if(e!==null){t.assignTreeVertexValues(e),e=e.children;for(var i=e.length,n=0;n<i;n++)pN(t,e[n])}}kt.prototype.assignTreeVertexValues=function(){};function dN(t,e){if(e!==null){e.alignment!==oo&&t.sortTreeVertexChildren(e),e=e.children;for(var i=e.length,n=0;n<i;n++)dN(t,e[n])}}kt.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case ta:break;case ec:t.children.reverse();break;case ic:t.children.sort(t.comparer);break;case nc:t.children.sort(t.comparer),t.children.reverse();break;default:R("Unhandled sorting value "+t.sorting.toString())}},kt.prototype.zu=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},kt.prototype.addComments=function(t){var e=t.angle,i=t.parent,n=0,r=!1;i!==null&&(n=i.angle,r=i.alignment,r=Us(r)),e=e===90||e===270,n=n===90||n===270,i=t.childrenCount===0;var s=0,l=0,h=0,a=t.commentSpacing;if(t.node!==null)for(var f=t.node.Iu();f.next();){var p=f.value;p.category==="Comment"&&p.canLayout()&&(t.comments===null&&(t.comments=[]),t.comments.push(p),p.Va(),p=p.measuredBounds,e&&!i||!r&&!n&&i||r&&n&&i?(s=Math.max(s,p.width),l+=p.height+Math.abs(h)):(s+=p.width+Math.abs(h),l=Math.max(l,p.height)),h=a)}t.comments!==null&&(e&&!i||!r&&!n&&i||r&&n&&i?(s+=Math.abs(t.commentMargin),l=Math.max(0,l-t.height)):(l+=Math.abs(t.commentMargin),s=Math.max(0,s-t.width)),r=V.allocAt(0,0,t.bounds.width+s,t.bounds.height+l),t.bounds=r,V.free(r))};function Us(t){return t===os||t===oo||t===ss||t===Lo}function tc(t){return t===os||t===oo}function n1(t){var e=t.parent;if(e!==null){var i=e.alignment;if(Us(i)){if(tc(i)){for(e=e.children,i=0;i<e.length&&t!==e[i];)i++;return i%2===0}if(i===ss)return!0}}return!1}kt.prototype.layoutComments=function(t){if(t.comments!==null){var e=t.node.measuredBounds,i=t.parent,n=t.angle,r=0,s=!1;i!==null&&(r=i.angle,s=i.alignment,s=Us(s)),n=n===90||n===270,i=r===90||r===270;for(var l=t.childrenCount===0,h=n1(t),a=0,f=t.comments,p=f.length,d=P.alloc(),y=0;y<p;y++){var x=f[y],v=x.measuredBounds;if(n&&!l||!s&&!i&&l||s&&i&&l){if(135<r&&!s||i&&h)if(0<=t.commentMargin)for(d.h(t.bounds.x-t.commentMargin-v.width,t.bounds.y+a),x.move(d),x=x.Ld();x.next();){var S=x.value;S.fromSpot=Fn,S.toSpot=Xi}else for(d.h(t.bounds.x+2*t.focus.x-t.commentMargin,t.bounds.y+a),x.move(d),x=x.Ld();x.next();)S=x.value,S.fromSpot=Xi,S.toSpot=Fn;else if(0<=t.commentMargin)for(d.h(t.bounds.x+2*t.focus.x+t.commentMargin,t.bounds.y+a),x.move(d),x=x.Ld();x.next();)S=x.value,S.fromSpot=Xi,S.toSpot=Fn;else for(d.h(t.bounds.x+t.commentMargin-v.width,t.bounds.y+a),x.move(d),x=x.Ld();x.next();)S=x.value,S.fromSpot=Fn,S.toSpot=Xi;a=0<=t.commentSpacing?a+(v.height+t.commentSpacing):a+(t.commentSpacing-v.height)}else{if(135<r&&!s||!i&&h)if(0<=t.commentMargin)for(d.h(t.bounds.x+a,t.bounds.y-t.commentMargin-v.height),x.move(d),x=x.Ld();x.next();)S=x.value,S.fromSpot=En,S.toSpot=On;else for(d.h(t.bounds.x+a,t.bounds.y+2*t.focus.y-t.commentMargin),x.move(d),x=x.Ld();x.next();)S=x.value,S.fromSpot=On,S.toSpot=En;else if(0<=t.commentMargin)for(d.h(t.bounds.x+a,t.bounds.y+2*t.focus.y+t.commentMargin),x.move(d),x=x.Ld();x.next();)S=x.value,S.fromSpot=On,S.toSpot=En;else for(d.h(t.bounds.x+a,t.bounds.y+t.commentMargin-v.height),x.move(d),x=x.Ld();x.next();)S=x.value,S.fromSpot=En,S.toSpot=On;a=0<=t.commentSpacing?a+(v.width+t.commentSpacing):a+(t.commentSpacing-v.width)}}if(P.free(d),e=a-t.commentSpacing-(n?e.height:e.width),this.qd===io)for(t=t.destinationEdges;t.next();)r=t.value.link,r===null||r.isAvoiding||(r.fromEndSegmentLength=0<e?e:NaN);else for(t=t.sourceEdges;t.next();)r=t.value.link,r===null||r.isAvoiding||(r.toEndSegmentLength=0<e?e:NaN)}},kt.prototype.layoutTree=function(t){if(t!==null){for(var e=t.children,i=e.length,n=0;n<i;n++)this.layoutTree(e[n]);switch(t.compaction){case gg:gN(this,t);break;case rc:if(t.alignment===oo)gN(this,t);else if(t.childrenCount===0)n=t.parent,i=!1,e=0,n!==null&&(e=n.angle,i=n.alignment,i=Us(i)),n=n1(t),t.S.h(0,0),t.Da.h(t.width,t.height),t.parent===null||t.comments===null||(e!==180&&e!==270||i)&&!n?t.la.h(0,0):e===180&&!i||(e===90||e===270)&&n?t.la.h(t.width-2*t.focus.x,0):t.la.h(0,t.height-2*t.focus.y),t.To=null,t.fp=null;else{var r=ir(t);e=r===90||r===270;var s=0,l=t.children,h=l.length;for(i=0;i<h;i++)n=l[i],s=Math.max(s,e?n.Da.width:n.Da.height);var a=t.alignment;n=a===no;var f=a===ro,p=Us(a),d=Math.max(0,t.breadthLimit);i=this.computeLayerSpacing(t);var y=t.nodeSpacing,x=this.computeNodeIndent(t),v=t.rowSpacing,S=0;(n||f||t.em||t.fm&&t.maxGenerationCount===1)&&(S=Math.max(0,t.rowIndent)),n=t.width;var N=t.height,k=0,C=0,T=0,L=null,E=null,I=0,Z=0,it=0,et=0,G=0,U=0,gt=0,ct=0;if(p&&!tc(a)&&135<r&&l.reverse(),tc(a))if(1<h)for(var Ft=0;Ft<h;Ft++)Ft%2===0&&Ft!==h-1&&(ct=Math.max(ct,e?l[Ft].Da.width:l[Ft].Da.height));else h===1&&(ct=e?l[0].Da.width:l[0].Da.height);if(p){switch(a){case os:C=135>r?yN(this,t,l,ct,k,C):mN(this,t,l,ct,k,C),ct=C.x,k=C.width,C=C.height;break;case ss:for(L=0;L<h;L++)E=l[L],d=E.Da,T=U===0?0:v,e?(E.S.h(s-d.width,et+T),k=Math.max(k,d.width),C=Math.max(C,et+T+d.height),et+=T+d.height):(E.S.h(it+T,s-d.height),k=Math.max(k,it+T+d.width),C=Math.max(C,d.height),it+=T+d.width),U++;break;case Lo:for(L=0;L<h;L++)E=l[L],s=E.Da,d=U===0?0:v,e?(E.S.h(y/2+t.focus.x,et+d),k=Math.max(k,s.width),C=Math.max(C,et+d+s.height),et+=d+s.height):(E.S.h(it+d,y/2+t.focus.y),k=Math.max(k,it+d+s.width),C=Math.max(C,s.height),it+=d+s.width),U++}L=Bi(this,2),E=Bi(this,2),e?(L[0].h(0,0),L[1].h(0,C),E[0].h(k,0)):(L[0].h(0,0),L[1].h(k,0),E[0].h(0,C)),E[1].h(k,C)}else for(Ft=0;Ft<h;Ft++){var _t=l[Ft],Te=_t.Da;if(e){0<d&&0<U&&it+y+Te.width>d&&(it<s&&Pl(t,a,s-it,0,gt,Ft-1),G++,U=0,gt=Ft,T=C,it=0,et=135<r?-C-v:C+v),cg(this,_t,0,et);var Fe=0;if(U===0)L=_t.To,E=_t.fp,I=Te.width,Z=Te.height,(L===null||E===null||r!==ir(_t))&&(L=Bi(this,2),E=Bi(this,2),L[0].h(0,0),L[1].h(0,Z),E[0].h(I,0),E[1].h(I,Z));else{var ri=Yt();Z=vN(this,t,_t,L,E,I,Z,ri),Fe=Z.x,L=ri[0],E=ri[1],I=Z.width,Z=Z.height,Vt(ri),it<Te.width&&0>Fe&&(Tu(t,-Fe,0,gt,Ft-1),pg(L,-Fe,0),pg(E,-Fe,0),Fe=0)}_t.S.h(Fe,et),k=Math.max(k,I),C=Math.max(C,T+(G===0?0:v)+Te.height),it=I}else 0<d&&0<U&&et+y+Te.height>d&&(et<s&&Pl(t,a,0,s-et,gt,Ft-1),G++,U=0,gt=Ft,T=k,et=0,it=135<r?-k-v:k+v),cg(this,_t,it,0),Fe=0,U===0?(L=_t.To,E=_t.fp,I=Te.width,Z=Te.height,(L===null||E===null||r!==ir(_t))&&(L=Bi(this,2),E=Bi(this,2),L[0].h(0,0),L[1].h(I,0),E[0].h(0,Z),E[1].h(I,Z))):(ri=Yt(),Z=vN(this,t,_t,L,E,I,Z,ri),Fe=Z.x,L=ri[0],E=ri[1],I=Z.width,Z=Z.height,Vt(ri),et<Te.height&&0>Fe&&(Tu(t,0,-Fe,gt,Ft-1),pg(L,0,-Fe),pg(E,0,-Fe),Fe=0)),_t.S.h(it,Fe),C=Math.max(C,Z),k=Math.max(k,T+(G===0?0:v)+Te.width),et=Z;U++}switch(0<G&&(e?(C+=Math.max(0,i),it<k&&Pl(t,a,k-it,0,gt,h-1),0<S&&(f||Tu(t,S,0,0,h-1),k+=S)):(k+=Math.max(0,i),et<C&&Pl(t,a,0,C-et,gt,h-1),0<S&&(f||Tu(t,0,S,0,h-1),C+=S))),S=f=0,a){case ea:e?f+=k/2-t.focus.x-x/2:S+=C/2-t.focus.y-x/2;break;case ju:0<G?e?f+=k/2-t.focus.x-x/2:S+=C/2-t.focus.y-x/2:e?(ct=l[0].S.x+l[0].la.x,f+=ct+(l[h-1].S.x+l[h-1].la.x+2*l[h-1].focus.x-ct)/2-t.focus.x-x/2):(ct=l[0].S.y+l[0].la.y,S+=ct+(l[h-1].S.y+l[h-1].la.y+2*l[h-1].focus.y-ct)/2-t.focus.y-x/2);break;case no:e?(f-=x,k+=x):(S-=x,C+=x);break;case ro:e?(f+=k-t.width+x,k+=x):(S+=C-t.height+x,C+=x);break;case os:e?1<h?f+=ct+y/2-t.focus.x:f+=l[0].focus.x-t.focus.x+l[0].la.x:1<h?S+=ct+y/2-t.focus.y:S+=l[0].focus.y-t.focus.y+l[0].la.y;break;case ss:e?f+=k+y/2-t.focus.x:S+=C+y/2-t.focus.y;break;case Lo:break;default:C=this.customAlignment(t,f,S,k,C),f=C[0],S=C[1],k=C[2],C=C[3]}for(x=0;x<h;x++)ct=l[x],e?ct.S.h(ct.S.x+ct.la.x-f,ct.S.y+(135<r?(p?-C:-ct.Da.height)+ct.la.y-i:N+i+ct.la.y)):ct.S.h(ct.S.x+(135<r?(p?-k:-ct.Da.width)+ct.la.x-i:n+i+ct.la.x),ct.S.y+ct.la.y-S);if(h=l=0,p?e?(k=r1(t,k,f),0>f&&(f=0),135<r&&(S+=C+i),C+=N+i,a===Lo&&(l+=y/2+t.focus.x),h+=N+i):(135<r&&(f+=k+i),k+=n+i,C=o1(t,C,S),0>S&&(S=0),a===Lo&&(h+=y/2+t.focus.y),l+=n+i):e?(t.comments===null?n>k&&(k=s1(a,n-k,0),l=k.x,h=k.y,k=n,f=0):k=r1(t,k,f),0>f&&(l-=f,f=0),135<r&&(S+=C+i),C=Math.max(Math.max(C,N),C+N+i),h+=N+i):(135<r&&(f+=k+i),k=Math.max(Math.max(k,n),k+n+i),t.comments===null?N>C&&(C=s1(a,0,N-C),l=C.x,h=C.y,C=N,S=0):C=o1(t,C,S),0>S&&(h-=S,S=0),l+=n+i),0<G)r=Bi(this,4),G=Bi(this,4),e?(r[2].h(0,N+i),r[3].h(r[2].x,C),G[2].h(k,r[2].y),G[3].h(G[2].x,r[3].y)):(r[2].h(n+i,0),r[3].h(k,r[2].y),G[2].h(r[2].x,C),G[3].h(r[3].x,G[2].y));else{for(r=Bi(this,L.length+2),G=Bi(this,E.length+2),a=0;a<L.length;a++)p=L[a],r[a+2].h(p.x+l,p.y+h);for(a=0;a<E.length;a++)p=E[a],G[a+2].h(p.x+l,p.y+h)}e?(r[0].h(f,0),r[1].h(r[0].x,N),r[2].y<r[1].y&&(r[2].x>r[0].x?r[2].assign(r[1]):r[1].assign(r[2])),r[3].y<r[2].y&&(r[3].x>r[0].x?r[3].assign(r[2]):r[2].assign(r[3])),G[0].h(f+n,0),G[1].h(G[0].x,N),G[2].y<G[1].y&&(G[2].x<G[0].x?G[2].assign(G[1]):G[1].assign(G[2])),G[3].y<G[2].y&&(G[3].x<G[0].x?G[3].assign(G[2]):G[2].assign(G[3])),r[2].y-=i/2,G[2].y-=i/2):(r[0].h(0,S),r[1].h(n,r[0].y),r[2].x<r[1].x&&(r[2].y>r[0].y?r[2].assign(r[1]):r[1].assign(r[2])),r[3].x<r[2].x&&(r[3].y>r[0].y?r[3].assign(r[2]):r[2].assign(r[3])),G[0].h(0,S+N),G[1].h(n,G[0].y),G[2].x<G[1].x&&(G[2].y<G[0].y?G[2].assign(G[1]):G[1].assign(G[2])),G[3].x<G[2].x&&(G[3].y<G[0].y?G[3].assign(G[2]):G[2].assign(G[3])),r[2].x-=i/2,G[2].x-=i/2),vr(this,L),vr(this,E),t.To=r,t.fp=G,t.la.h(f,S),t.Da.h(k,C)}break;default:R("Unhandled compaction value "+t.compaction.toString())}}};function gN(t,e){if(e.childrenCount===0){var i=!1,n=0;e.parent!==null&&(n=e.parent.angle,i=e.parent.alignment,i=Us(i));var r=n1(e);e.S.h(0,0),e.Da.h(e.width,e.height),e.parent===null||e.comments===null||(n!==180&&n!==270||i)&&!r?e.la.h(0,0):n===180&&!i||(n===90||n===270)&&r?e.la.h(e.width-2*e.focus.x,0):e.la.h(0,e.height-2*e.focus.y)}else{n=ir(e),i=n===90||n===270;var s=0;r=e.children;for(var l=r.length,h=0;h<l;h++){var a=r[h];s=Math.max(s,i?a.Da.width:a.Da.height)}var f=e.alignment,p=f===no,d=f===ro;h=Us(f);var y=Math.max(0,e.breadthLimit);a=t.computeLayerSpacing(e);var x=e.nodeSpacing,v=t.computeNodeIndent(e),S=p||d?0:v/2,N=e.rowSpacing,k=0;(p||d||e.em||e.fm&&e.maxGenerationCount===1)&&(k=Math.max(0,e.rowIndent)),p=e.width;var C=e.height,T=0,L=0,E=0,I=0,Z=0,it=0,et=0,G=0,U=0,gt=0;if(h&&!tc(f)&&135<n&&r.reverse(),tc(f))if(1<l)for(var ct=0;ct<l;ct++){var Ft=r[ct],_t=Ft.Da;ct%2===0&&ct!==l-1?U=Math.max(U,(i?_t.width:_t.height)+t.computeBusNodeSpacing(Ft)-x):ct%2!==0&&(gt=Math.max(gt,(i?_t.width:_t.height)+t.computeBusNodeSpacing(Ft)-x))}else l===1&&(U=i?r[0].Da.width:r[0].Da.height);if(h)switch(f){case os:case oo:L=135>n?yN(t,e,r,U,T,L):mN(t,e,r,U,T,L),U=L.x,T=L.width,L=L.height;break;case ss:for(y=0;y<l;y++)S=r[y],E=S.Da,gt=et===0?0:N,i?(S.S.h(s-E.width,Z+gt),T=Math.max(T,E.width),L=Math.max(L,Z+gt+E.height),Z+=gt+E.height):(S.S.h(I+gt,s-E.height),T=Math.max(T,I+gt+E.width),L=Math.max(L,E.height),I+=gt+E.width),et++;break;case Lo:for(s=0;s<l;s++)y=r[s],S=y.Da,E=et===0?0:N,i?(y.S.h(x/2+e.focus.x,Z+E),T=Math.max(T,S.width),L=Math.max(L,Z+E+S.height),Z+=E+S.height):(y.S.h(I+E,x/2+e.focus.y),T=Math.max(T,I+E+S.width),L=Math.max(L,S.height),I+=E+S.width),et++}else for(gt=0;gt<l;gt++)ct=r[gt],Ft=ct.Da,i?(0<y&&0<et&&I+x+Ft.width>y&&(I<s&&Pl(e,f,s-I,0,G,gt-1),it++,et=0,G=gt,E=L,I=0,Z=135<n?-L-N:L+N),_t=et===0?S:x,cg(t,ct,0,Z),ct.S.h(I+_t,Z),T=Math.max(T,I+_t+Ft.width),L=Math.max(L,E+(it===0?0:N)+Ft.height),I+=_t+Ft.width):(0<y&&0<et&&Z+x+Ft.height>y&&(Z<s&&Pl(e,f,0,s-Z,G,gt-1),it++,et=0,G=gt,E=T,Z=0,I=135<n?-T-N:T+N),_t=et===0?S:x,cg(t,ct,I,0),ct.S.h(I,Z+_t),L=Math.max(L,Z+_t+Ft.height),T=Math.max(T,E+(it===0?0:N)+Ft.width),Z+=_t+Ft.height),et++;switch(0<it&&(i?(L+=Math.max(0,a),I<T&&Pl(e,f,T-I,0,G,l-1),0<k&&(d||Tu(e,k,0,0,l-1),T+=k)):(T+=Math.max(0,a),Z<L&&Pl(e,f,0,L-Z,G,l-1),0<k&&(d||Tu(e,0,k,0,l-1),L+=k))),k=d=0,f){case ea:i?d+=T/2-e.focus.x-v/2:k+=L/2-e.focus.y-v/2;break;case ju:0<it?i?d+=T/2-e.focus.x-v/2:k+=L/2-e.focus.y-v/2:i?(t=r[0].S.x+r[0].la.x,d+=t+(r[l-1].S.x+r[l-1].la.x+2*r[l-1].focus.x-t)/2-e.focus.x-v/2):(t=r[0].S.y+r[0].la.y,k+=t+(r[l-1].S.y+r[l-1].la.y+2*r[l-1].focus.y-t)/2-e.focus.y-v/2);break;case no:i?(d-=v,T+=v):(k-=v,L+=v);break;case ro:i?(d+=T-e.width+v,T+=v):(k+=L-e.height+v,L+=v);break;case os:case oo:i?1<l?d+=U+x/2-e.focus.x:d+=r[0].focus.x-e.focus.x+r[0].la.x:1<l?k+=U+x/2-e.focus.y:k+=r[0].focus.y-e.focus.y+r[0].la.y;break;case ss:i?d+=T+x/2-e.focus.x:k+=L+x/2-e.focus.y;break;case Lo:break;default:t=t.customAlignment(e,d,k,T,L),d=t[0],k=t[1],T=t[2],L=t[3]}for(t=0;t<l;t++)v=r[t],i?v.S.h(v.S.x+v.la.x-d,v.S.y+(135<n?(h?-L:-v.Da.height)+v.la.y-a:C+a+v.la.y)):v.S.h(v.S.x+(135<n?(h?-T:-v.Da.width)+v.la.x-a:p+a+v.la.x),v.S.y+v.la.y-k);i?(T=r1(e,T,d),0>d&&(d=0),135<n&&(k+=L+a),L=Math.max(Math.max(L,C),L+C+a)):(135<n&&(d+=T+a),T=Math.max(Math.max(T,p),T+p+a),L=o1(e,L,k),0>k&&(k=0)),e.la.h(d,k),e.Da.h(T,L)}}kt.prototype.customAlignment=function(t,e,i,n,r){return[e,i,n,r]};function yN(t,e,i,n,r,s){var l=i.length;if(l===0)return new V(n,0,r,s);if(l===1)return e=i[0],r=e.Da.width,s=e.Da.height,new V(n,0,r,s);for(var h=e.nodeSpacing,a=e.rowSpacing,f=ir(e)===90,p=0,d=0,y=0,x=0;x<l;x++)if(!(x%2!==0||1<l&&x===l-1)){var v=i[x],S=v.Da,N=p===0?0:a;if(f){var k=t.computeBusNodeSpacing(v)-h;v.S.h(n-(S.width+k),y+N),r=Math.max(r,S.width+k),s=Math.max(s,y+N+S.height),y+=N+S.height}else k=t.computeBusNodeSpacing(v)-h,v.S.h(d+N,n-(S.height+k)),s=Math.max(s,S.height+k),r=Math.max(r,d+N+S.width),d+=N+S.width;p++}for(p=0,v=d,x=y,f?(d=n+h,y=0):(d=0,y=n+h),S=0;S<l;S++)if(S%2!==0){N=i[S],k=N.Da;var C=p===0?0:a;if(f){var T=t.computeBusNodeSpacing(N)-h;N.S.h(d+T,y+C),r=Math.max(r,d+k.width+T),s=Math.max(s,y+C+k.height),y+=C+k.height}else T=t.computeBusNodeSpacing(N)-h,N.S.h(d+C,y+T),r=Math.max(r,d+C+k.width),s=Math.max(s,y+k.height+T),d+=C+k.width;p++}return 1<l&&l%2===1&&(i=i[l-1],l=i.Da,t=t.computeBusLastRowSpacing(i,f?Math.max(Math.abs(x),Math.abs(y)):Math.max(Math.abs(v),Math.abs(d))),f?(i.S.h(n+h/2-i.focus.x-i.la.x,s+t),f=n+h/2-i.focus.x-i.la.x,r=Math.max(r,f+l.width),0>f&&(r-=f),s=Math.max(s,Math.max(x,y)+t+l.height),0>i.S.x&&(n=fg(e,i.S.x,!1,n,h))):(i.S.h(r+t,n+h/2-i.focus.y-i.la.y),r=Math.max(r,Math.max(v,d)+t+l.width),y=n+h/2-i.focus.y-i.la.y,s=Math.max(s,y+l.height),0>y&&(s-=y),0>i.S.y&&(n=fg(e,i.S.y,!0,n,h)))),new V(n,0,r,s)}function mN(t,e,i,n,r,s){var l=i.length;if(l===0)return new V(n,0,r,s);if(l===1)return i=i[0],r=i.Da.width,s=i.Da.height,new V(n,0,r,s);for(var h=e.nodeSpacing,a=e.rowSpacing,f=ir(e)===270,p=0,d=0,y=0,x=0;x<l;x++)if(!(x%2!==0||1<l&&x===l-1)){var v=i[x],S=v.Da,N=p===0?0:a;if(f){var k=t.computeBusNodeSpacing(v)-h;y-=N+S.height,v.S.h(n-(S.width+k),y),r=Math.max(r,S.width+k),s=Math.max(s,Math.abs(y))}else k=t.computeBusNodeSpacing(v)-h,d-=N+S.width,v.S.h(d,n-(S.height+k)),s=Math.max(s,S.height+k),r=Math.max(r,Math.abs(d));p++}for(p=0,v=d,x=y,f?(d=n+h,y=0):(d=0,y=n+h),S=0;S<l;S++)if(S%2!==0){N=i[S],k=N.Da;var C=p===0?0:a;if(f){var T=t.computeBusNodeSpacing(N)-h;y-=C+k.height,N.S.h(d+T,y),r=Math.max(r,d+k.width+T),s=Math.max(s,Math.abs(y))}else T=t.computeBusNodeSpacing(N)-h,d-=C+k.width,N.S.h(d,y+T),s=Math.max(s,y+k.height+T),r=Math.max(r,Math.abs(d));p++}for(1<l&&l%2===1&&(a=i[l-1],p=a.Da,t=t.computeBusLastRowSpacing(a,f?Math.max(Math.abs(x),Math.abs(y)):Math.max(Math.abs(v),Math.abs(d))),f?(a.S.h(n+h/2-a.focus.x-a.la.x,-s-p.height-t),d=n+h/2-a.focus.x-a.la.x,r=Math.max(r,d+p.width),0>d&&(r-=d),s=Math.max(s,Math.abs(Math.min(x,y))+t+p.height),0>a.S.x&&(n=fg(e,a.S.x,!1,n,h))):(a.S.h(-r-p.width-t,n+h/2-a.focus.y-a.la.y),r=Math.max(r,Math.abs(Math.min(v,d))+t+p.width),y=n+h/2-a.focus.y-a.la.y,s=Math.max(s,y+p.height),0>y&&(s-=y),0>a.S.y&&(n=fg(e,a.S.y,!0,n,h)))),e=0;e<l;e++)h=i[e],f?h.S.h(h.S.x,h.S.y+s):h.S.h(h.S.x+r,h.S.y);return new V(n,0,r,s)}kt.prototype.computeBusNodeSpacing=function(t){return t.parent===null?0:t.parent.nodeSpacing},kt.prototype.computeBusLastRowSpacing=function(t){return t.parent===null?0:t.parent.rowSpacing};function fg(t,e,i,n,r){t=t.children;for(var s=t.length,l=0;l<s;l++)i?t[l].S.h(t[l].S.x,t[l].S.y-e):t[l].S.h(t[l].S.x-e,t[l].S.y);return e=t[s-1],Math.max(n,i?e.la.y+e.focus.y-r/2:e.la.x+e.focus.x-r/2)}function r1(t,e,i){switch(t.alignment){case ju:case ea:return i+t.width>e&&(e=i+t.width),0>i&&(e-=i),e;case no:return t.width>e?t.width:e;case ro:return 2*t.focus.x>e?t.width:e+t.width-2*t.focus.x;case os:case oo:return Math.max(t.width,Math.max(e,i+t.width)-Math.min(0,i));case ss:return t.width-t.focus.x+t.nodeSpacing/2+e;case Lo:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+e);default:return e}}function o1(t,e,i){switch(t.alignment){case ju:case ea:return i+t.height>e&&(e=i+t.height),0>i&&(e-=i),e;case no:return t.height>e?t.height:e;case ro:return 2*t.focus.y>e?t.height:e+t.height-2*t.focus.y;case os:case oo:return Math.max(t.height,Math.max(e,i+t.height)-Math.min(0,i));case ss:return t.height-t.focus.y+t.nodeSpacing/2+e;case Lo:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+e);default:return e}}function s1(t,e,i){switch(t){case ea:e/=2,i/=2;break;case ju:e/=2,i/=2;break;case no:i=e=0;break;case ro:break;default:R("Unhandled alignment value "+t.toString())}return new P(e,i)}function Pl(t,e,i,n,r,s){e=s1(e,i,n),Tu(t,e.x,e.y,r,s)}function Tu(t,e,i,n,r){if(e!==0||i!==0)for(t=t.children;n<=r;n++){var s=t[n].S;s.x+=e,s.y+=i}}function cg(t,e,i,n){var r=e.parent;switch(t.qd){case io:for(t=e.sourceEdges;t.next();)e=t.value,e.fromVertex===r&&e.relativePoint.h(i,n);break;case Lu:for(t=e.destinationEdges;t.next();)e=t.value,e.toVertex===r&&e.relativePoint.h(i,n);break;default:R("Unhandled path value "+t.qd.toString())}}function pg(t,e,i){for(var n=0;n<t.length;n++){var r=t[n];r.x+=e,r.y+=i}}function vN(t,e,i,n,r,s,l,h){var a=ir(e),f=a===90||a===270,p=e.nodeSpacing;e=n;var d=r;n=s;var y=l,x=i.To,v=i.fp;l=i.Da;var S=f?Math.max(y,l.height):Math.max(n,l.width);if((x===null||a!==ir(i))&&(x=Bi(t,2),v=Bi(t,2),f?(x[0].h(0,0),x[1].h(0,l.height),v[0].h(l.width,0),v[1].h(v[0].x,x[1].y)):(x[0].h(0,0),x[1].h(l.width,0),v[0].h(0,l.height),v[1].h(x[1].x,v[0].y))),f){if(y=9999999,!(d===null||2>d.length||x===null||2>x.length))for(r=i=0;i<d.length&&r<x.length;){s=d[i];var N=x[r];a=N.x,f=N.y,a+=n;var k=s;i+1<d.length&&(k=d[i+1]);var C=N;N=C.x,C=C.y,r+1<x.length&&(C=x[r+1],N=C.x,C=C.y,N+=n);var T=y;s.y===f?T=a-s.x:s.y>f&&s.y<C?T=a+(s.y-f)/(C-f)*(N-a)-s.x:f>s.y&&f<k.y&&(T=a-(s.x+(f-s.y)/(k.y-s.y)*(k.x-s.x))),T<y&&(y=T),k.y<=s.y?i++:C<=f?r++:(k.y<=C&&i++,C<=k.y&&r++)}if(y=n-y,y+=p,i=x,r=y,e===null||2>e.length||i===null||2>i.length)n=null;else{for(p=Bi(t,e.length+i.length),n=s=a=0;s<i.length&&i[s].y<e[0].y;)f=i[s++],p[n++].h(f.x+r,f.y);for(;a<e.length;)f=e[a++],p[n++].h(f.x,f.y);for(a=e[e.length-1].y;s<i.length&&i[s].y<=a;)s++;for(;s<i.length&&i[s].y>a;)f=i[s++],p[n++].h(f.x+r,f.y);for(i=Bi(t,n),a=0;a<n;a++)i[a].assign(p[a]);vr(t,p),n=i}if(s=v,a=y,d===null||2>d.length||s===null||2>s.length)r=null;else{for(p=Bi(t,d.length+s.length),r=f=i=0;i<d.length&&d[i].y<s[0].y;)k=d[i++],p[r++].h(k.x,k.y);for(;f<s.length;)k=s[f++],p[r++].h(k.x+a,k.y);for(s=s[s.length-1].y;i<d.length&&d[i].y<=s;)i++;for(;i<d.length&&d[i].y>s;)a=d[i++],p[r++].h(a.x,a.y);for(s=Bi(t,r),i=0;i<r;i++)s[i].assign(p[i]);vr(t,p),r=s}return s=Math.max(0,y)+l.width,l=S,vr(t,e),vr(t,x),vr(t,d),vr(t,v),h[0]=n,h[1]=r,new V(y,0,s,l)}if(n=9999999,!(d===null||2>d.length||x===null||2>x.length))for(r=i=0;i<d.length&&r<x.length;)s=d[i],N=x[r],a=N.x,f=N.y,f+=y,k=s,i+1<d.length&&(k=d[i+1]),C=N,N=C.x,C=C.y,r+1<x.length&&(C=x[r+1],N=C.x,C=C.y,C+=y),T=n,s.x===a?T=f-s.y:s.x>a&&s.x<N?T=f+(s.x-a)/(N-a)*(C-f)-s.y:a>s.x&&a<k.x&&(T=f-(s.y+(a-s.x)/(k.x-s.x)*(k.y-s.y))),T<n&&(n=T),k.x<=s.x?i++:N<=a?r++:(k.x<=N&&i++,N<=k.x&&r++);if(y-=n,y+=p,i=x,r=y,e===null||2>e.length||i===null||2>i.length)n=null;else{for(p=Bi(t,e.length+i.length),n=s=a=0;s<i.length&&i[s].x<e[0].x;)f=i[s++],p[n++].h(f.x,f.y+r);for(;a<e.length;)f=e[a++],p[n++].h(f.x,f.y);for(a=e[e.length-1].x;s<i.length&&i[s].x<=a;)s++;for(;s<i.length&&i[s].x>a;)f=i[s++],p[n++].h(f.x,f.y+r);for(i=Bi(t,n),a=0;a<n;a++)i[a].assign(p[a]);vr(t,p),n=i}if(s=v,a=y,d===null||2>d.length||s===null||2>s.length)r=null;else{for(p=Bi(t,d.length+s.length),r=f=i=0;i<d.length&&d[i].x<s[0].x;)k=d[i++],p[r++].h(k.x,k.y);for(;f<s.length;)k=s[f++],p[r++].h(k.x,k.y+a);for(s=s[s.length-1].x;i<d.length&&d[i].x<=s;)i++;for(;i<d.length&&d[i].x>s;)a=d[i++],p[r++].h(a.x,a.y);for(s=Bi(t,r),i=0;i<r;i++)s[i].assign(p[i]);vr(t,p),r=s}return s=S,l=Math.max(0,y)+l.height,vr(t,e),vr(t,x),vr(t,d),vr(t,v),h[0]=n,h[1]=r,new V(y,0,s,l)}function Bi(t,e){if(t=t.ou[e],t!==void 0&&(t=t.pop(),t!==void 0))return t;t=[];for(var i=0;i<e;i++)t[i]=new P;return t}function vr(t,e){var i=e.length,n=t.ou[i];n===void 0&&(n=[],t.ou[i]=n),n.push(e)}kt.prototype.arrangeTrees=function(){if(this.Mb===vg)for(var t=this.Qb.iterator;t.next();){var e=t.value;if(e instanceof Bn){var i=e.node;if(i!==null){var n=i.position;i=n.x,n=n.y,isFinite(i)||(i=0),isFinite(n)||(n=0),l1(this,e,i,n)}}}else{for(t=[],e=this.Qb.iterator;e.next();)i=e.value,i instanceof Bn&&t.push(i);switch(this.sorting){case ta:break;case ec:t.reverse();break;case ic:t.sort(this.comparer);break;case nc:t.sort(this.comparer),t.reverse();break;default:R("Unhandled sorting value "+this.sorting.toString())}for(i=this.arrangementOrigin,e=i.x,i=i.y,n=0;n<t.length;n++){var r=t[n];switch(l1(this,r,e+r.la.x,i+r.la.y),this.Mb){case mg:i+=r.Da.height+this.Wd.height;break;case f1:e+=r.Da.width+this.Wd.width;break;default:R("Unhandled arrangement value "+this.Mb.toString())}}}};function l1(t,e,i,n){if(e!==null){e.x=i,e.y=n,e=e.children;for(var r=e.length,s=0;s<r;s++){var l=e[s];l1(t,l,i+l.S.x,n+l.S.y)}}}kt.prototype.commitLayout=function(){this.uv(),this.commitNodes(),this.Cu(),this.isRouting&&this.commitLinks()},kt.prototype.commitNodes=function(){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},kt.prototype.Cu=function(){if(this.layerStyle===xg){for(var t=this.Wv,e=[],i=null,n=this.network.vertexes.iterator;n.next();){var r=n.value;i===null?i=r.bounds.copy():i.Zc(r.bounds);var s=e[r.level];s===void 0?s=this.computeLayerSpacing(r):s=Math.max(s,this.computeLayerSpacing(r)),e[r.level]=s}for(n=0;n<e.length;n++)e[n]===void 0&&(e[n]=0);if(this.angle===90||this.angle===270?(i.yc(this.nodeSpacing/2,this.layerSpacing),n=new P(-this.nodeSpacing/2,-this.layerSpacing/2)):(i.yc(this.layerSpacing,this.nodeSpacing/2),n=new P(-this.layerSpacing/2,-this.nodeSpacing/2)),r=[],i=this.angle===90||this.angle===270?i.width:i.height,s=0,this.angle===180||this.angle===270)for(var l=0;l<t.length;l++)s+=t[l]+e[l];for(l=0;l<t.length;l++){var h=t[l]+e[l];this.angle===270?(s-=h,r.push(new V(0,s,i,h))):this.angle===90?(r.push(new V(0,s,i,h)),s+=h):this.angle===180?(s-=h,r.push(new V(s,0,h,i))):(r.push(new V(s,0,h,i)),s+=h)}this.commitLayers(r,n)}},kt.prototype.commitLayers=function(){},kt.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},kt.prototype.uv=function(){for(var t=this.Qb.iterator;t.next();){var e=t.value;e instanceof Bn&&xN(this,e)}};function xN(t,e){if(e!==null){t.setPortSpots(e),e=e.children;for(var i=e.length,n=0;n<i;n++)xN(t,e[n])}}kt.prototype.setPortSpots=function(t){var e=t.alignment;if(Us(e)){var i=this.qd===io,n=ir(t);switch(n){case 0:var r=Xi;break;case 90:r=On;break;case 180:r=Fn;break;default:r=En}var s=t.children,l=s.length;switch(e){case os:case oo:for(e=0;e<l;e++){var h=s[e];if(h=(i?h.sourceEdges:h.destinationEdges).first(),h!==null&&(h=h.link,h!==null)){var a=n===90||n===270?Fn:En;if(l===1||e===l-1&&l%2===1)switch(n){case 0:a=Fn;break;case 90:a=En;break;case 180:a=Xi;break;default:a=On}else e%2===0&&(a=n===90||n===270?Xi:On);i?(t.setsPortSpot&&(h.fromSpot=r),t.setsChildPortSpot&&(h.toSpot=a)):(t.setsPortSpot&&(h.fromSpot=a),t.setsChildPortSpot&&(h.toSpot=r))}}break;case ss:for(n=n===90||n===270?Xi:On,s=i?t.destinationEdges:t.sourceEdges;s.next();)l=s.value.link,l!==null&&(i?(t.setsPortSpot&&(l.fromSpot=r),t.setsChildPortSpot&&(l.toSpot=n)):(t.setsPortSpot&&(l.fromSpot=n),t.setsChildPortSpot&&(l.toSpot=r)));break;case Lo:for(n=n===90||n===270?Fn:En,s=i?t.destinationEdges:t.sourceEdges;s.next();)l=s.value.link,l!==null&&(i?(t.setsPortSpot&&(l.fromSpot=r),t.setsChildPortSpot&&(l.toSpot=n)):(t.setsPortSpot&&(l.fromSpot=n),t.setsChildPortSpot&&(l.toSpot=r)))}}else if(i=ir(t),this.qd===io){for(r=t.destinationEdges;r.next();)if(n=r.value.link,n!==null){if(t.setsPortSpot)if(t.portSpot.Tb())switch(i){case 0:n.fromSpot=Xi;break;case 90:n.fromSpot=On;break;case 180:n.fromSpot=Fn;break;default:n.fromSpot=En}else n.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Tb())switch(i){case 0:n.toSpot=Fn;break;case 90:n.toSpot=En;break;case 180:n.toSpot=Xi;break;default:n.toSpot=On}else n.toSpot=t.childPortSpot}}else for(r=t.sourceEdges;r.next();)if(n=r.value.link,n!==null){if(t.setsPortSpot)if(t.portSpot.Tb())switch(i){case 0:n.toSpot=Xi;break;case 90:n.toSpot=On;break;case 180:n.toSpot=Fn;break;default:n.toSpot=En}else n.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Tb())switch(i){case 0:n.fromSpot=Fn;break;case 90:n.fromSpot=En;break;case 180:n.fromSpot=Xi;break;default:n.fromSpot=On}else n.fromSpot=t.childPortSpot}};function ir(t){return t=t.angle,45>=t?0:135>=t?90:225>=t?180:315>=t?270:0}kt.prototype.computeLayerSpacing=function(t){var e=ir(t);e=e===90||e===270;var i=t.layerSpacing;if(0<t.layerSpacingParentOverlap){var n=Math.min(1,t.layerSpacingParentOverlap);i-=e?t.height*n:t.width*n}return i<(e?-t.height:-t.width)&&(i=e?-t.height:-t.width),i},kt.prototype.computeNodeIndent=function(t){var e=ir(t),i=t.nodeIndent;if(0<t.nodeIndentPastParent){var n=Math.min(1,t.nodeIndentPastParent);i+=e===90||e===270?t.width*n:t.height*n}return i=Math.max(0,i)},z.Object.defineProperties(kt.prototype,{roots:{get:function(){return this.Qb},set:function(t){this.Qb!==t&&(this.Qb=t,this.D())}},path:{get:function(){return this.Tn},set:function(t){this.Tn!==t&&(this.Tn=t,this.D())}},treeStyle:{get:function(){return this.so},set:function(t){this.Mb===t||t!==yg&&t!==h1&&t!==u1&&t!==a1||(this.so=t,this.D())}},layerStyle:{get:function(){return this.vq},set:function(t){this.Mb===t||t!==c1&&t!==p1&&t!==xg||(this.vq=t,this.D())}},comments:{get:function(){return this.od},set:function(t){this.od!==t&&(this.od=t,this.D())}},arrangement:{get:function(){return this.Mb},set:function(t){this.Mb===t||t!==mg&&t!==f1&&t!==vg||(this.Mb=t,this.D())}},arrangementSpacing:{get:function(){return this.Wd},set:function(t){this.Wd.C(t)||(this.Wd.assign(t),this.D())}},rootDefaults:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t,this.D())}},alternateDefaults:{get:function(){return this.Y},set:function(t){this.Y!==t&&(this.Y=t,this.D())}},sorting:{get:function(){return this.W.sorting},set:function(t){this.W.sorting===t||t!==ta&&t!==ec&&t!==ic&&!nc||(this.W.sorting=t,this.D())}},comparer:{get:function(){return this.W.comparer},set:function(t){this.W.comparer!==t&&(this.W.comparer=t,this.D())}},angle:{get:function(){return this.W.angle},set:function(t){this.W.angle!==t&&(t===0||t===90||t===180||t===270?(this.W.angle=t,this.D()):R("TreeLayout.angle must be 0, 90, 180, or 270"))}},alignment:{get:function(){return this.W.alignment},set:function(t){this.W.alignment!==t&&(this.W.alignment=t,this.D())}},nodeIndent:{get:function(){return this.W.nodeIndent},set:function(t){this.W.nodeIndent!==t&&0<=t&&(this.W.nodeIndent=t,this.D())}},nodeIndentPastParent:{get:function(){return this.W.nodeIndentPastParent},set:function(t){this.W.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.W.nodeIndentPastParent=t,this.D())}},nodeSpacing:{get:function(){return this.W.nodeSpacing},set:function(t){this.W.nodeSpacing!==t&&(this.W.nodeSpacing=t,this.D())}},layerSpacing:{get:function(){return this.W.layerSpacing},set:function(t){this.W.layerSpacing!==t&&(this.W.layerSpacing=t,this.D())}},layerSpacingParentOverlap:{get:function(){return this.W.layerSpacingParentOverlap},set:function(t){this.W.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.W.layerSpacingParentOverlap=t,this.D())}},compaction:{get:function(){return this.W.compaction},set:function(t){this.W.compaction===t||t!==gg&&t!==rc||(this.W.compaction=t,this.D())}},breadthLimit:{get:function(){return this.W.breadthLimit},set:function(t){this.W.breadthLimit!==t&&0<=t&&(this.W.breadthLimit=t,this.D())}},rowSpacing:{get:function(){return this.W.rowSpacing},set:function(t){this.W.rowSpacing!==t&&(this.W.rowSpacing=t,this.D())}},rowIndent:{get:function(){return this.W.rowIndent},set:function(t){this.W.rowIndent!==t&&0<=t&&(this.W.rowIndent=t,this.D())}},commentSpacing:{get:function(){return this.W.commentSpacing},set:function(t){this.W.commentSpacing!==t&&(this.W.commentSpacing=t,this.D())}},commentMargin:{get:function(){return this.W.commentMargin},set:function(t){this.W.commentMargin!==t&&(this.W.commentMargin=t,this.D())}},setsPortSpot:{get:function(){return this.W.setsPortSpot},set:function(t){this.W.setsPortSpot!==t&&(this.W.setsPortSpot=t,this.D())}},portSpot:{get:function(){return this.W.portSpot},set:function(t){this.W.portSpot.C(t)||(this.W.portSpot=t,this.D())}},setsChildPortSpot:{get:function(){return this.W.setsChildPortSpot},set:function(t){this.W.setsChildPortSpot!==t&&(this.W.setsChildPortSpot=t,this.D())}},childPortSpot:{get:function(){return this.W.childPortSpot},set:function(t){this.W.childPortSpot.C(t)||(this.W.childPortSpot=t,this.D())}},alternateSorting:{get:function(){return this.Y.sorting},set:function(t){this.Y.sorting===t||t!==ta&&t!==ec&&t!==ic&&!nc||(this.Y.sorting=t,this.D())}},alternateComparer:{get:function(){return this.Y.comparer},set:function(t){this.Y.comparer!==t&&(this.Y.comparer=t,this.D())}},alternateAngle:{get:function(){return this.Y.angle},set:function(t){this.Y.angle===t||t!==0&&t!==90&&t!==180&&t!==270||(this.Y.angle=t,this.D())}},alternateAlignment:{get:function(){return this.Y.alignment},set:function(t){this.Y.alignment!==t&&(this.Y.alignment=t,this.D())}},alternateNodeIndent:{get:function(){return this.Y.nodeIndent},set:function(t){this.Y.nodeIndent!==t&&0<=t&&(this.Y.nodeIndent=t,this.D())}},alternateNodeIndentPastParent:{get:function(){return this.Y.nodeIndentPastParent},set:function(t){this.Y.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.Y.nodeIndentPastParent=t,this.D())}},alternateNodeSpacing:{get:function(){return this.Y.nodeSpacing},set:function(t){this.Y.nodeSpacing!==t&&(this.Y.nodeSpacing=t,this.D())}},alternateLayerSpacing:{get:function(){return this.Y.layerSpacing},set:function(t){this.Y.layerSpacing!==t&&(this.Y.layerSpacing=t,this.D())}},alternateLayerSpacingParentOverlap:{get:function(){return this.Y.layerSpacingParentOverlap},set:function(t){this.Y.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.Y.layerSpacingParentOverlap=t,this.D())}},alternateCompaction:{get:function(){return this.Y.compaction},set:function(t){this.Y.compaction===t||t!==gg&&t!==rc||(this.Y.compaction=t,this.D())}},alternateBreadthLimit:{get:function(){return this.Y.breadthLimit},set:function(t){this.Y.breadthLimit!==t&&0<=t&&(this.Y.breadthLimit=t,this.D())}},alternateRowSpacing:{get:function(){return this.Y.rowSpacing},set:function(t){this.Y.rowSpacing!==t&&(this.Y.rowSpacing=t,this.D())}},alternateRowIndent:{get:function(){return this.Y.rowIndent},set:function(t){this.Y.rowIndent!==t&&0<=t&&(this.Y.rowIndent=t,this.D())}},alternateCommentSpacing:{get:function(){return this.Y.commentSpacing},set:function(t){this.Y.commentSpacing!==t&&(this.Y.commentSpacing=t,this.D())}},alternateCommentMargin:{get:function(){return this.Y.commentMargin},set:function(t){this.Y.commentMargin!==t&&(this.Y.commentMargin=t,this.D())}},alternateSetsPortSpot:{get:function(){return this.Y.setsPortSpot},set:function(t){this.Y.setsPortSpot!==t&&(this.Y.setsPortSpot=t,this.D())}},alternatePortSpot:{get:function(){return this.Y.portSpot},set:function(t){this.Y.portSpot.C(t)||(this.Y.portSpot=t,this.D())}},alternateSetsChildPortSpot:{get:function(){return this.Y.setsChildPortSpot},set:function(t){this.Y.setsChildPortSpot!==t&&(this.Y.setsChildPortSpot=t,this.D())}},alternateChildPortSpot:{get:function(){return this.Y.childPortSpot},set:function(t){this.Y.childPortSpot.C(t)||(this.Y.childPortSpot=t,this.D())}}});var dg=new Q(kt,"PathDefault",-1),io=new Q(kt,"PathDestination",0),Lu=new Q(kt,"PathSource",1),ta=new Q(kt,"SortingForwards",10),ec=new Q(kt,"SortingReverse",11),ic=new Q(kt,"SortingAscending",12),nc=new Q(kt,"SortingDescending",13),ea=new Q(kt,"AlignmentCenterSubtrees",20),ju=new Q(kt,"AlignmentCenterChildren",21),no=new Q(kt,"AlignmentStart",22),ro=new Q(kt,"AlignmentEnd",23),os=new Q(kt,"AlignmentBus",24),oo=new Q(kt,"AlignmentBusBranching",25),ss=new Q(kt,"AlignmentTopLeftBus",26),Lo=new Q(kt,"AlignmentBottomRightBus",27),gg=new Q(kt,"CompactionNone",30),rc=new Q(kt,"CompactionBlock",31),yg=new Q(kt,"StyleLayered",40),u1=new Q(kt,"StyleLastParents",41),h1=new Q(kt,"StyleAlternating",42),a1=new Q(kt,"StyleRootOnly",43),mg=new Q(kt,"ArrangementVertical",50),f1=new Q(kt,"ArrangementHorizontal",51),vg=new Q(kt,"ArrangementFixedRoots",52),c1=new Q(kt,"LayerIndividual",60),p1=new Q(kt,"LayerSiblings",61),xg=new Q(kt,"LayerUniform",62);kt.className="TreeLayout",kt.PathDefault=dg,kt.PathDestination=io,kt.PathSource=Lu,kt.SortingForwards=ta,kt.SortingReverse=ec,kt.SortingAscending=ic,kt.SortingDescending=nc,kt.AlignmentCenterSubtrees=ea,kt.AlignmentCenterChildren=ju,kt.AlignmentStart=no,kt.AlignmentEnd=ro,kt.AlignmentBus=os,kt.AlignmentBusBranching=oo,kt.AlignmentTopLeftBus=ss,kt.AlignmentBottomRightBus=Lo,kt.CompactionNone=gg,kt.CompactionBlock=rc,kt.StyleLayered=yg,kt.StyleLastParents=u1,kt.StyleAlternating=h1,kt.StyleRootOnly=a1,kt.ArrangementVertical=mg,kt.ArrangementHorizontal=f1,kt.ArrangementFixedRoots=vg,kt.LayerIndividual=c1,kt.LayerSiblings=p1,kt.LayerUniform=xg;function Eu(t){Xt.call(this,t)}B(Eu,Xt),Eu.prototype.createVertex=function(){return new Bn(this)},Eu.prototype.createEdge=function(){return new ia(this)},Eu.className="TreeNetwork";function Bn(t){we.call(this,t),this.V=!1,this.hb=null,this.u=[],this.ob=this.Ha=this.F=this.ga=0,this.od=null,this.S=new P(0,0),this.Da=new pt(0,0),this.la=new P(0,0),this.fm=this.em=this.jA=!1,this.fp=this.To=null,this.fd=ta,this.ad=Av,this.Ib=0,this.Hb=ju,this.Pq=this.Oq=0,this.Qq=20,this.ee=50,this.uq=0,this.Cp=rc,this.vp=0,this.hr=25,this.Bp=this.gr=10,this.Ap=20,this.rr=!0,this.Yq=Je,this.qr=!0,this.yp=Je}B(Bn,we),Bn.prototype.copyInheritedPropertiesFrom=function(t){t!==null&&(this.fd=t.sorting,this.ad=t.comparer,this.Ib=t.angle,this.Hb=t.alignment,this.Oq=t.nodeIndent,this.Pq=t.nodeIndentPastParent,this.Qq=t.nodeSpacing,this.ee=t.layerSpacing,this.uq=t.layerSpacingParentOverlap,this.Cp=t.compaction,this.vp=t.breadthLimit,this.hr=t.rowSpacing,this.gr=t.rowIndent,this.Bp=t.commentSpacing,this.Ap=t.commentMargin,this.rr=t.setsPortSpot,this.Yq=t.portSpot,this.qr=t.setsChildPortSpot,this.yp=t.childPortSpot)},z.Object.defineProperties(Bn.prototype,{initialized:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t)}},parent:{get:function(){return this.hb},set:function(t){this.hb!==t&&(this.hb=t)}},children:{get:function(){return this.u},set:function(t){if(this.u!==t){if(t!==null)for(var e=t.length,i=0;i<e;i++);this.u=t}}},level:{get:function(){return this.ga},set:function(t){this.ga!==t&&(this.ga=t)}},descendantCount:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}},maxChildrenCount:{get:function(){return this.Ha},set:function(t){this.Ha!==t&&(this.Ha=t)}},maxGenerationCount:{get:function(){return this.ob},set:function(t){this.ob!==t&&(this.ob=t)}},comments:{get:function(){return this.od},set:function(t){if(this.od!==t){if(t!==null)for(var e=t.length,i=0;i<e;i++);this.od=t}}},sorting:{get:function(){return this.fd},set:function(t){this.fd!==t&&(this.fd=t)}},comparer:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.ad=t)}},angle:{get:function(){return this.Ib},set:function(t){this.Ib!==t&&(this.Ib=t)}},alignment:{get:function(){return this.Hb},set:function(t){this.Hb!==t&&(this.Hb=t)}},nodeIndent:{get:function(){return this.Oq},set:function(t){this.Oq!==t&&(this.Oq=t)}},nodeIndentPastParent:{get:function(){return this.Pq},set:function(t){this.Pq!==t&&(this.Pq=t)}},nodeSpacing:{get:function(){return this.Qq},set:function(t){this.Qq!==t&&(this.Qq=t)}},layerSpacing:{get:function(){return this.ee},set:function(t){this.ee!==t&&(this.ee=t)}},layerSpacingParentOverlap:{get:function(){return this.uq},set:function(t){this.uq!==t&&(this.uq=t)}},compaction:{get:function(){return this.Cp},set:function(t){this.Cp!==t&&(this.Cp=t)}},breadthLimit:{get:function(){return this.vp},set:function(t){this.vp!==t&&(this.vp=t)}},rowSpacing:{get:function(){return this.hr},set:function(t){this.hr!==t&&(this.hr=t)}},rowIndent:{get:function(){return this.gr},set:function(t){this.gr!==t&&(this.gr=t)}},commentSpacing:{get:function(){return this.Bp},set:function(t){this.Bp!==t&&(this.Bp=t)}},commentMargin:{get:function(){return this.Ap},set:function(t){this.Ap!==t&&(this.Ap=t)}},setsPortSpot:{get:function(){return this.rr},set:function(t){this.rr!==t&&(this.rr=t)}},portSpot:{get:function(){return this.Yq},set:function(t){this.Yq.C(t)||(this.Yq=t)}},setsChildPortSpot:{get:function(){return this.qr},set:function(t){this.qr!==t&&(this.qr=t)}},childPortSpot:{get:function(){return this.yp},set:function(t){this.yp.C(t)||(this.yp=t)}},childrenCount:{get:function(){return this.children.length}},relativePosition:{get:function(){return this.S},set:function(t){this.S.set(t)}},subtreeSize:{get:function(){return this.Da},set:function(t){this.Da.set(t)}},subtreeOffset:{get:function(){return this.la},set:function(t){this.la.set(t)}}}),Bn.className="TreeVertex";function ia(t){Wi.call(this,t),this.Xt=new P(0,0)}B(ia,Wi),ia.prototype.commit=function(){var t=this.link;if(t!==null&&!t.isAvoiding){var e=this.network.layout,i=null,n=null;switch(e.qd){case io:i=this.fromVertex,n=this.toVertex;break;case Lu:i=this.toVertex,n=this.fromVertex;break;default:R("Unhandled path value "+e.qd.toString())}if(i!==null&&n!==null){var r=this.Xt;if(r.x!==0||r.y!==0||i.jA){n=i.bounds;var s=ir(i),l=e.computeLayerSpacing(i),h=i.rowSpacing;t.sg();var a=t.curve===un,f=t.isOrthogonal,p;if(t.qh(),f||a){for(p=2;4<t.pointsCount;)t.nv(2);var d=t.i(1),y=t.i(2)}else{for(p=1;3<t.pointsCount;)t.nv(1);d=t.i(0),y=t.i(t.pointsCount-1)}var x=t.i(t.pointsCount-1);s===0?(i.alignment===ro?(s=n.bottom+r.y,r.y===0&&d.y>x.y+i.rowIndent&&(s=Math.min(s,Math.max(d.y,s-e.computeNodeIndent(i))))):i.alignment===no?(s=n.top+r.y,r.y===0&&d.y<x.y-i.rowIndent&&(s=Math.max(s,Math.min(d.y,s+e.computeNodeIndent(i))))):s=i.em||i.fm&&i.maxGenerationCount===1?n.top-i.la.y+r.y:n.y+n.height/2+r.y,a?(t.l(p,d.x,s),p++,t.l(p,n.right+l,s),p++,t.l(p,n.right+l+(r.x-h)/3,s),p++,t.l(p,n.right+l+2*(r.x-h)/3,s),p++,t.l(p,n.right+l+(r.x-h),s),p++,t.l(p,y.x,s)):(f&&(t.l(p,n.right+l/2,d.y),p++),t.l(p,n.right+l/2,s),p++,t.l(p,n.right+l+r.x-(f?h/2:h),s),p++,f&&t.l(p,t.i(p-1).x,y.y))):s===90?(i.alignment===ro?(s=n.right+r.x,r.x===0&&d.x>x.x+i.rowIndent&&(s=Math.min(s,Math.max(d.x,s-e.computeNodeIndent(i))))):i.alignment===no?(s=n.left+r.x,r.x===0&&d.x<x.x-i.rowIndent&&(s=Math.max(s,Math.min(d.x,s+e.computeNodeIndent(i))))):s=i.em||i.fm&&i.maxGenerationCount===1?n.left-i.la.x+r.x:n.x+n.width/2+r.x,a?(t.l(p,s,d.y),p++,t.l(p,s,n.bottom+l),p++,t.l(p,s,n.bottom+l+(r.y-h)/3),p++,t.l(p,s,n.bottom+l+2*(r.y-h)/3),p++,t.l(p,s,n.bottom+l+(r.y-h)),p++,t.l(p,s,y.y)):(f&&(t.l(p,d.x,n.bottom+l/2),p++),t.l(p,s,n.bottom+l/2),p++,t.l(p,s,n.bottom+l+r.y-(f?h/2:h)),p++,f&&t.l(p,y.x,t.i(p-1).y))):s===180?(i.alignment===ro?(s=n.bottom+r.y,r.y===0&&d.y>x.y+i.rowIndent&&(s=Math.min(s,Math.max(d.y,s-e.computeNodeIndent(i))))):i.alignment===no?(s=n.top+r.y,r.y===0&&d.y<x.y-i.rowIndent&&(s=Math.max(s,Math.min(d.y,s+e.computeNodeIndent(i))))):s=i.em||i.fm&&i.maxGenerationCount===1?n.top-i.la.y+r.y:n.y+n.height/2+r.y,a?(t.l(p,d.x,s),p++,t.l(p,n.left-l,s),p++,t.l(p,n.left-l+(r.x+h)/3,s),p++,t.l(p,n.left-l+2*(r.x+h)/3,s),p++,t.l(p,n.left-l+(r.x+h),s),p++,t.l(p,y.x,s)):(f&&(t.l(p,n.left-l/2,d.y),p++),t.l(p,n.left-l/2,s),p++,t.l(p,n.left-l+r.x+(f?h/2:h),s),p++,f&&t.l(p,t.i(p-1).x,y.y))):s===270?(i.alignment===ro?(s=n.right+r.x,r.x===0&&d.x>x.x+i.rowIndent&&(s=Math.min(s,Math.max(d.x,s-e.computeNodeIndent(i))))):i.alignment===no?(s=n.left+r.x,r.x===0&&d.x<x.x-i.rowIndent&&(s=Math.max(s,Math.min(d.x,s+e.computeNodeIndent(i))))):s=i.em||i.fm&&i.maxGenerationCount===1?n.left-i.la.x+r.x:n.x+n.width/2+r.x,a?(t.l(p,s,d.y),p++,t.l(p,s,n.top-l),p++,t.l(p,s,n.top-l+(r.y+h)/3),p++,t.l(p,s,n.top-l+2*(r.y+h)/3),p++,t.l(p,s,n.top-l+(r.y+h)),p++,t.l(p,s,y.y)):(f&&(t.l(p,d.x,n.top-l/2),p++),t.l(p,s,n.top-l/2),p++,t.l(p,s,n.top-l+r.y+(f?h/2:h)),p++,f&&t.l(p,y.x,t.i(p-1).y))):R("Invalid angle "+s),t.xf()}else r=n,t=this.link,n=this.network.layout,e=ir(i),e!==ir(r)&&(l=n.computeLayerSpacing(i),h=i.bounds,i=r.bounds,e===0&&i.left-h.right<l+1||e===90&&i.top-h.bottom<l+1||e===180&&h.left-i.right<l+1||e===270&&h.top-i.bottom<l+1||(t.sg(),i=t.curve===un,r=t.isOrthogonal,n=Us(this.fromVertex.alignment),t.qh(),e===0?(e=h.right+l/2,i?t.pointsCount===4&&(i=t.i(3).y,t.M(1,e-20,t.i(1).y),t.l(2,e-20,i),t.l(3,e,i),t.l(4,e+20,i),t.M(5,t.i(5).x,i)):r?n?t.M(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.M(2,e,t.i(2).y),t.M(3,e,t.i(3).y)):t.pointsCount===4?t.l(2,e,t.i(2).y):t.pointsCount===3?t.M(1,e,t.i(2).y):t.pointsCount===2&&t.l(1,e,t.i(1).y)):e===90?(e=h.bottom+l/2,i?t.pointsCount===4&&(i=t.i(3).x,t.M(1,t.i(1).x,e-20),t.l(2,i,e-20),t.l(3,i,e),t.l(4,i,e+20),t.M(5,i,t.i(5).y)):r?n?t.M(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.M(2,t.i(2).x,e),t.M(3,t.i(3).x,e)):t.pointsCount===4?t.l(2,t.i(2).x,e):t.pointsCount===3?t.M(1,t.i(2).x,e):t.pointsCount===2&&t.l(1,t.i(1).x,e)):e===180?(e=h.left-l/2,i?t.pointsCount===4&&(i=t.i(3).y,t.M(1,e+20,t.i(1).y),t.l(2,e+20,i),t.l(3,e,i),t.l(4,e-20,i),t.M(5,t.i(5).x,i)):r?n?t.M(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.M(2,e,t.i(2).y),t.M(3,e,t.i(3).y)):t.pointsCount===4?t.l(2,e,t.i(2).y):t.pointsCount===3?t.M(1,e,t.i(2).y):t.pointsCount===2&&t.l(1,e,t.i(1).y)):e===270&&(e=h.top-l/2,i?t.pointsCount===4&&(i=t.i(3).x,t.M(1,t.i(1).x,e+20),t.l(2,i,e+20),t.l(3,i,e),t.l(4,i,e-20),t.M(5,i,t.i(5).y)):r?n?t.M(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.M(2,t.i(2).x,e),t.M(3,t.i(3).x,e)):t.pointsCount===4?t.l(2,t.i(2).x,e):t.pointsCount===3?t.M(1,t.i(2).x,e):t.pointsCount===2&&t.l(1,t.i(1).x,e)),t.xf()))}}},z.Object.defineProperties(ia.prototype,{fromVertex:{get:function(){return this.cd},set:function(t){this.cd!==t&&(this.cd=t)}},toVertex:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t)}},relativePoint:{get:function(){return this.Xt},set:function(t){this.Xt.set(t)}}}),ia.className="TreeEdge",ne.prototype.initializeStandardTools=function(){this.gb("Action",new Ho,this.mouseDownTools),this.gb("Relinking",new An,this.mouseDownTools),this.gb("LinkReshaping",new ve,this.mouseDownTools),this.gb("Rotating",new rn,this.mouseDownTools),this.gb("Resizing",new vi,this.mouseDownTools),this.gb("Linking",new Di,this.mouseMoveTools),this.gb("Dragging",new re,this.mouseMoveTools),this.gb("DragSelecting",new Kr,this.mouseMoveTools),this.gb("Panning",new Wr,this.mouseMoveTools),this.gb("ContextMenu",new on,this.mouseUpTools),this.gb("TextEditing",new Zt,this.mouseUpTools),this.gb("ClickCreating",new al,this.mouseUpTools),this.gb("ClickSelecting",new ph,this.mouseUpTools)},Ar("Horizontal",new Jp),Ar("Spot",new Qp),Ar("Table",new bp),Ar("Viewbox",new id),Ar("TableRow",new td),Ar("TableColumn",new ed),Ar("Graduated",new wf),Ar("Grid",new xf),Bp.add("GraphLinksModel",Ee),Bp.add("TreeModel",kn);var wg=Y.go,d1={get licenseKey(){return D.licenseKey},set licenseKey(t){D.licenseKey=t},get version(){return D.version},Group:yt,EnumValue:Q,List:tt,Set:q,Map:vt,Point:P,Size:pt,Rect:V,Margin:Rt,Spot:at,Geometry:W,PathFigure:De,PathSegment:At,InputEvent:gn,DiagramEvent:uu,ChangedEvent:ie,Model:nt,GraphLinksModel:Ct,TreeModel:Pi,Binding:ce,Transaction:Ue,UndoManager:ue,CommandHandler:Ht,Tool:Ot,DraggingTool:re,DraggingInfo:Ps,DraggingOptions:Nh,LinkingBaseTool:Ze,LinkingTool:Di,RelinkingTool:An,LinkReshapingTool:ve,ResizingTool:vi,RotatingTool:rn,ClickSelectingTool:ph,ActionTool:Ho,ClickCreatingTool:al,HTMLInfo:_o,ContextMenuTool:on,DragSelectingTool:Kr,PanningTool:Wr,TextEditingTool:Zt,ToolManager:ne,Animation:ii,AnimationManager:yn,AnimationTrigger:$r,Layer:ni,Diagram:D,Palette:Vp,Overview:Jr,Brush:Dt,GraphObject:ot,Panel:_,RowColumnDefinition:Ce,Shape:wt,TextBlock:Gt,Picture:Ri,Part:lt,Adornment:jt,Node:b,Link:X,Placeholder:Si,Layout:Jt,LayoutNetwork:Xt,LayoutVertex:we,LayoutEdge:Wi,GridLayout:Re,PanelLayout:xe,CircularLayout:qt,CircularNetwork:Qh,CircularVertex:$f,CircularEdge:tg,ForceDirectedLayout:He,ForceDirectedNetwork:Cu,ForceDirectedVertex:Jf,ForceDirectedEdge:Zf,LayeredDigraphLayout:zt,LayeredDigraphNetwork:bh,LayeredDigraphVertex:Pn,LayeredDigraphEdge:bf,TreeLayout:kt,TreeNetwork:Eu,TreeVertex:Bn,TreeEdge:ia};typeof wg=="object"&&wg.version&&Lt("WARNING: a `go` object on the root object is already defined.  "+("Debug"in wg?"debug ":"")+"version: "+wg.version+", replaced with version: "+d1.version),D.prototype.go=d1,Y.go=d1,typeof fy<"u"&&typeof fy.exports=="object"&&(fy.exports=typeof global<"u"?global.go:self.go)})();const Pt=typeof global<"u"?global.go:self.go;Pt.Group;Pt.EnumValue;Pt.List;Pt.Set;Pt.Map;Pt.Point;Pt.Size;Pt.Rect;Pt.Margin;const ix=Pt.Spot;Pt.Geometry;Pt.PathFigure;Pt.PathSegment;Pt.InputEvent;Pt.DiagramEvent;Pt.ChangedEvent;Pt.Model;Pt.GraphLinksModel;const JI=Pt.TreeModel,JP=Pt.Binding;Pt.Transaction;Pt.UndoManager;Pt.CommandHandler;Pt.Tool;Pt.DraggingTool;Pt.DraggingInfo;Pt.LinkingBaseTool;Pt.LinkingTool;Pt.RelinkingTool;Pt.LinkReshapingTool;Pt.ResizingTool;Pt.RotatingTool;Pt.ClickSelectingTool;Pt.ActionTool;Pt.ClickCreatingTool;Pt.HTMLInfo;Pt.ContextMenuTool;Pt.DragSelectingTool;Pt.PanningTool;Pt.TextEditingTool;Pt.ToolManager;Pt.Animation;Pt.AnimationManager;Pt.AnimationTrigger;Pt.Layer;const ZI=Pt.Diagram;Pt.Palette;Pt.Overview;Pt.Brush;const QI=Pt.GraphObject,qI=Pt.Panel;Pt.RowColumnDefinition;const bI=Pt.Shape,tD=Pt.TextBlock;Pt.TextBlockMetrics;Pt.Picture;Pt.Part;Pt.Adornment;const eD=Pt.Node;Pt.Link;Pt.Placeholder;Pt.Layout;Pt.LayoutNetwork;Pt.LayoutVertex;Pt.LayoutEdge;Pt.GridLayout;Pt.PanelLayout;Pt.CircularLayout;Pt.CircularNetwork;Pt.CircularVertex;Pt.CircularEdge;const iD=Pt.ForceDirectedLayout;Pt.ForceDirectedNetwork;Pt.ForceDirectedVertex;Pt.ForceDirectedEdge;Pt.LayeredDigraphLayout;Pt.LayeredDigraphNetwork;Pt.LayeredDigraphVertex;Pt.LayeredDigraphEdge;Pt.TreeLayout;Pt.TreeNetwork;Pt.TreeVertex;Pt.TreeEdge;Pt.version;const nD=({beginningStoryId:o,beginningStoryName:u,beginningStoryLabels:c})=>{Mt.useEffect(()=>{M()},[]),console.log("👀 beginningStoryLabels",c);const g=QI.make,m=["#E1F5FE","#B3E5FC","#81D4FA","#4FC3F7","#29B6F6","#03A9F4","#039BE5","#0288D1","#0277BD","#01579B"];let w;const M=()=>{w=g(ZI,"bubbleDiagram",{initialContentAlignment:ix.Center,layout:g(iD),"commandHandler.copiesTree":!0,"commandHandler.deletesTree":!0,"draggingTool.dragsTree":!0,"undoManager.isEnabled":!0}),w.nodeTemplate=g(eD,"Spot",{selectionObjectName:"PANEL",isTreeExpanded:!1,isTreeLeaf:!1},g(qI,"Auto",{name:"PANEL"},g(bI,"Circle",{fill:"whitesmoke",stroke:"green"},new JP("fill","rootdistance",B=>(B=Math.min(m.length-1,B),m[B]))),g(tD,{font:"12pt sans-serif",margin:5,click:(B,z)=>window.open("./details/games/2")},new JP("text","key"))),g("TreeExpanderButton",{name:"TREEBUTTON",width:14,height:14,alignment:ix.TopRight,alignmentFocus:ix.Center,click:(B,z)=>{var $=z.part;$!==null&&(B.handled=!0,j($))}}));const A=u||"Fail to fethc initial data";w.model=new JI([{key:A,color:m[0],everExpanded:!1}])},j=A=>{var B=A.diagram;B.startTransaction("CollapseExpandTree");var z=A.data;if(!z.everExpanded){B.model.setDataProperty(z,"everExpanded",!0);var $=O(z);$===0&&(A.findObject("TREEBUTTON").visible=!1)}A.isTreeExpanded?B.commandHandler.collapseTree(A):B.commandHandler.expandTree(A),B.commitTransaction("CollapseExpandTree"),w.zoomToFit()},O=A=>{for(var B=3,z=w.model,$=w.findNodeForData(A),ht=1,rt=$.findTreeParentNode();rt;)ht++,rt=rt.findTreeParentNode();let Y=c;for(var Et=0;Et<B;Et++){var K={key:Y[Et].name||"Fail to fetch data",parent:A.key,rootdistance:ht};z.addNodeData(K);var H=w.findNodeForData(K);H.location=$.location}return B};return ut(Hi,{children:ut("div",{id:"sample",children:ut("div",{id:"bubbleDiagram",children:ut("canvas",{className:"canvas",children:"This text is displayed if your browser does not support the Canvas HTML element."})})})})},rD="http://localhost:3000/",oD=()=>{const u=n0().storyId||"2",[c,g]=Mt.useState(),m=()=>fetch(rD+`api/stories/${u}`).then(M=>M.json());return Mt.useEffect(()=>{m().then(w=>g(w)).then(()=>console.log(c))},[]),bt(Hi,{children:[ut(Ka,{}),c?ut(Hi,{children:ut(nD,{beginningStoryId:c.id,beginningStoryName:c.storyname,beginningStoryLabels:c.labels})}):ut("p",{children:"Loading"}),ut(r0,{})]})},sD=()=>{const[o,u]=Mt.useState(""),[c,g]=Mt.useState(""),[m,w]=Mt.useState(""),[M,j]=Mt.useState(""),{signUp:O,invalidInput:A,setInvalidInput:B}=Xa();return bt(Hi,{children:[ut(Ka,{}),bt("div",{className:"signup-form",children:[bt("form",{onSubmit:async $=>{$.preventDefault(),O(o,c,m,M)},children:[ut("h3",{className:"signup-form__title",children:"Sign Up"}),ut("h4",{className:"signup-form__subtitle",children:"Create a new account:"}),bt("div",{className:"signup-form__container",children:[bt("label",{className:"signup-form__label",children:["First Name:",ut("input",{className:"signup-form__input",type:"text",required:!0,value:o,onChange:$=>{u($.target.value)},onFocus:$=>{B("")}})]}),ut("br",{}),bt("label",{className:"signup-form__label",children:["Last Name:",ut("input",{className:"signup-form__input",required:!0,type:"text",value:c,onChange:$=>{g($.target.value)},onFocus:$=>{B("")}})]}),ut("br",{}),bt("label",{className:"signup-form__label",children:["Email:",ut("input",{className:"signup-form__input",required:!0,type:"email",value:m,onChange:$=>{w($.target.value)},onFocus:$=>{B("")}})]}),ut("br",{}),bt("label",{className:"signup-form__label",children:["Password:",ut("input",{className:"signup-form__input",required:!0,type:"password",value:M,onChange:$=>{j($.target.value)},onFocus:$=>{B("")}})]}),ut("br",{})]}),A&&ut("p",{className:"invalid-input",children:A}),ut("br",{}),ut("button",{type:"submit",children:"Register"})]}),bt("p",{children:["Already register? ",ut("a",{href:"./login",children:"Log in"})]})]})]})},lD=()=>{const[o,u]=Mt.useState(""),[c,g]=Mt.useState(""),{login:m,invalidInput:w,setInvalidInput:M}=Xa();return bt(Hi,{children:[ut(Ka,{}),bt("div",{className:"signup-form",children:[bt("form",{onSubmit:async O=>{O.preventDefault(),m(o,c)},children:[ut("h3",{className:"signup-form__title",children:"Log In"}),bt("div",{className:"signup-form__container",children:[bt("label",{className:"signup-form__label",children:["Email:",ut("input",{className:"signup-form__input",required:!0,type:"email",value:o,onChange:O=>{u(O.target.value)},onFocus:O=>{M("")}})]}),ut("br",{}),bt("label",{className:"signup-form__label",children:["Password:",ut("input",{className:"signup-form__input",required:!0,type:"password",value:c,onChange:O=>{g(O.target.value)},onFocus:O=>{M("")}})]}),ut("br",{})]}),w&&ut("p",{className:"invalid-input",children:w}),ut("br",{}),ut("button",{type:"submit",children:"Login"})]}),bt("p",{children:["If you don't have an account"," ",ut(wA,{to:"/register",children:"Register here"})]})]})]})},uD=()=>{const{authenticated:o,logout:u,isAuthenticated:c,user:g}=Xa();return Mt.useEffect(()=>{c()},[]),ut(Hi,{children:o&&bt(Hi,{children:[ut(Ka,{}),ut("div",{className:""}),ut(r0,{})]})})};function hD(){return bt(cA,{children:[ut(Yu,{path:"/map/details/:media/:id",element:ut(XI,{})}),ut(Yu,{path:"/register",element:ut(sD,{})}),ut(Yu,{path:"/login",element:ut(lD,{})}),ut(Yu,{path:"/map/:storyId",element:ut(oD,{})}),ut(Yu,{path:"/profile",element:ut(uD,{})}),ut(Yu,{path:"/",element:ut($I,{})})]})}rx.createRoot(document.getElementById("root")).render(ut(mA,{children:ut(hD,{})}))});export default aD();
